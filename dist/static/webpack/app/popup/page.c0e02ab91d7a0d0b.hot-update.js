"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/popup/page",{

/***/ "(app-pages-browser)/./lib/lesson-interface-bridge.ts":
/*!****************************************!*\
  !*** ./lib/lesson-interface-bridge.ts ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonInterfaceBridge: function() { return /* binding */ LessonInterfaceBridge; },\n/* harmony export */   LessonInterfaceUtils: function() { return /* binding */ LessonInterfaceUtils; }\n/* harmony export */ });\n/**\r\n * Lesson Interface Bridge\r\n * \r\n * Connects extracted content to the existing lesson generation interface.\r\n * Handles automatic popup opening, content pre-population, and metadata preservation.\r\n * \r\n * Requirements: 4.1, 4.2, 4.6, 6.6\r\n */ class LessonInterfaceBridge {\n    /**\r\n   * Initialize the bridge with callbacks\r\n   */ initialize(callbacks) {\n        this.callbacks = callbacks;\n    }\n    /**\r\n   * Open lesson interface with extracted content\r\n   * Requirement 4.1: Open the LinguaSpark lesson generation interface\r\n   */ async openLessonInterface(content) {\n        try {\n            // Create lesson pre-configuration\n            const config = this.createLessonPreConfiguration(content);\n            this.currentConfiguration = config;\n            // Store configuration for the lesson interface\n            await this.storeConfiguration(config);\n            // Open the lesson interface\n            await this.openInterface();\n            // Update state\n            this.state.lessonInterfaceOpen = true;\n            this.state.extractionConfirmed = true;\n            // Notify callback\n            if (this.callbacks.onLessonInterfaceOpened) {\n                this.callbacks.onLessonInterfaceOpened(config);\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to open lesson interface\";\n            console.error(\"[LessonInterfaceBridge] Failed to open lesson interface:\", error);\n            if (this.callbacks.onError) {\n                this.callbacks.onError(errorMessage);\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    /**\r\n   * Pre-populate lesson interface with extracted content\r\n   * Requirement 4.2: Pre-populate source content field with extracted content\r\n   */ async populateInterface(content) {\n        try {\n            const config = this.createLessonPreConfiguration(content);\n            // Store the content for the lesson generator\n            await this.storeExtractedContent(config);\n            // Update state\n            this.state.contentPrePopulated = true;\n            this.state.readyForGeneration = true;\n            // Notify callback\n            if (this.callbacks.onContentPrePopulated) {\n                this.callbacks.onContentPrePopulated(config.sourceContent);\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to populate interface\";\n            console.error(\"[LessonInterfaceBridge] Failed to populate interface:\", error);\n            if (this.callbacks.onError) {\n                this.callbacks.onError(errorMessage);\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    /**\r\n   * Enable content editing in the lesson interface\r\n   * Requirement 4.5: User can edit extracted content before generation\r\n   */ enableContentEditing() {\n        if (this.currentConfiguration) {\n            this.currentConfiguration.allowContentEditing = true;\n            this.storeConfiguration(this.currentConfiguration);\n        }\n    }\n    /**\r\n   * Preserve user customizations\r\n   * Requirement 4.4: User can modify lesson type, CEFR level, and other settings\r\n   */ preserveUserCustomizations() {\n        if (this.currentConfiguration) {\n            this.currentConfiguration.userCanModifySettings = true;\n            this.storeConfiguration(this.currentConfiguration);\n        }\n    }\n    /**\r\n   * Integrate with existing lesson generation workflow\r\n   * Requirement 4.6: Follow existing enhanced lesson generation workflow\r\n   */ integrateWithExistingWorkflow() {\n        // The integration happens through the stored configuration\n        // The lesson generator will detect the extraction source and handle accordingly\n        this.state.readyForGeneration = true;\n    }\n    /**\r\n   * Get current interface state\r\n   */ getState() {\n        return {\n            ...this.state\n        };\n    }\n    /**\r\n   * Get current configuration\r\n   */ getCurrentConfiguration() {\n        return this.currentConfiguration ? {\n            ...this.currentConfiguration\n        } : null;\n    }\n    /**\r\n   * Check if content is from extraction\r\n   */ static async isExtractionSource() {\n        try {\n            var _window_chrome;\n            // First try URL parameters (most reliable for web context)\n            if (true) {\n                const urlParams = new URLSearchParams(window.location.search);\n                if (urlParams.get(\"source\") === \"extraction\") {\n                    return true;\n                }\n            }\n            // Try Chrome storage if available (extension context)\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                return new Promise((resolve)=>{\n                    try {\n                        window.chrome.storage.local.get([\n                            \"extractionSource\"\n                        ], (result)=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage error, checking localStorage fallback:\", window.chrome.runtime.lastError.message);\n                                // Check localStorage fallback\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve((fallbackConfig === null || fallbackConfig === void 0 ? void 0 : fallbackConfig.extractionSource) === \"webpage\");\n                            } else {\n                                resolve(result.extractionSource === \"webpage\");\n                            }\n                        });\n                    } catch (error) {\n                        console.warn(\"[LessonInterfaceBridge] Chrome storage access failed, checking localStorage fallback:\", error);\n                        // Check localStorage fallback\n                        const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                        resolve((fallbackConfig === null || fallbackConfig === void 0 ? void 0 : fallbackConfig.extractionSource) === \"webpage\");\n                    }\n                });\n            }\n            // Try localStorage (fallback for extension context invalidation)\n            const localStorageConfig = LessonInterfaceBridge.loadFromLocalStorage();\n            if ((localStorageConfig === null || localStorageConfig === void 0 ? void 0 : localStorageConfig.extractionSource) === \"webpage\") {\n                return true;\n            }\n            // Try session storage (web context fallback)\n            if (typeof sessionStorage !== \"undefined\") {\n                const stored = sessionStorage.getItem(\"linguaspark_lesson_config\");\n                if (stored) {\n                    const config = JSON.parse(stored);\n                    return config.extractionSource === \"webpage\";\n                }\n            }\n            return false;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to check extraction source:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Load extraction configuration\r\n   */ static async loadExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            // Try Chrome storage if available (extension context)\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                return new Promise((resolve)=>{\n                    try {\n                        window.chrome.storage.local.get([\n                            \"lessonConfiguration\"\n                        ], (result)=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage error, trying localStorage fallback:\", window.chrome.runtime.lastError.message);\n                                // Fallback to localStorage\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve(fallbackConfig);\n                            } else if (result.lessonConfiguration) {\n                                // Parse dates\n                                const config = result.lessonConfiguration;\n                                if (config.metadata.extractedAt) {\n                                    config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                                }\n                                resolve(config);\n                            } else {\n                                // Try localStorage fallback\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve(fallbackConfig);\n                            }\n                        });\n                    } catch (error) {\n                        console.warn(\"[LessonInterfaceBridge] Chrome storage access failed, using localStorage fallback:\", error);\n                        const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                        resolve(fallbackConfig);\n                    }\n                });\n            }\n            // Try localStorage (fallback for extension context invalidation)\n            const localStorageConfig = LessonInterfaceBridge.loadFromLocalStorage();\n            if (localStorageConfig) {\n                return localStorageConfig;\n            }\n            // Try session storage (web context)\n            if (typeof sessionStorage !== \"undefined\") {\n                const stored = sessionStorage.getItem(\"linguaspark_lesson_config\");\n                if (stored) {\n                    const config = JSON.parse(stored);\n                    // Parse dates\n                    if (config.metadata.extractedAt) {\n                        config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                    }\n                    return config;\n                }\n            }\n            // Try URL parameters (for metadata only, content should be in storage)\n            if (true) {\n                const urlParams = new URLSearchParams(window.location.search);\n                const sourceParam = urlParams.get(\"sourceUrl\");\n                const isExtractionSource = urlParams.get(\"source\") === \"extraction\";\n                // If this is an extraction source but no content in URL, it should be in storage\n                if (isExtractionSource && sourceParam) {\n                    // This indicates content should be available in storage\n                    // Return null here so the caller knows to check storage\n                    console.log(\"[LessonInterfaceBridge] Extraction source detected but content not in URL - should be in storage\");\n                }\n                // Legacy support: if content is in URL parameters (for small content)\n                const contentParam = urlParams.get(\"content\");\n                if (contentParam && sourceParam) {\n                    try {\n                        const decodedContent = decodeURIComponent(contentParam);\n                        return {\n                            sourceContent: decodedContent,\n                            suggestedType: urlParams.get(\"type\") || \"discussion\",\n                            suggestedLevel: urlParams.get(\"level\") || \"B1\",\n                            metadata: {\n                                title: urlParams.get(\"title\") || \"Extracted Content\",\n                                sourceUrl: decodeURIComponent(sourceParam),\n                                domain: new URL(decodeURIComponent(sourceParam)).hostname,\n                                extractedAt: new Date(),\n                                wordCount: decodedContent.split(/\\s+/).length,\n                                readingTime: Math.ceil(decodedContent.split(/\\s+/).length / 200),\n                                complexity: \"intermediate\",\n                                suitabilityScore: 0.8\n                            },\n                            extractionSource: \"webpage\",\n                            allowContentEditing: true,\n                            userCanModifySettings: true,\n                            attribution: \"Source: \".concat(new URL(decodeURIComponent(sourceParam)).hostname)\n                        };\n                    } catch (urlError) {\n                        console.warn(\"[LessonInterfaceBridge] Failed to parse URL parameters:\", urlError);\n                    }\n                }\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to load extraction configuration:\", error);\n            return null;\n        }\n    }\n    /**\r\n   * Clear extraction configuration\r\n   */ static async clearExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                window.chrome.storage.local.remove([\n                    \"lessonConfiguration\",\n                    \"extractionSource\"\n                ]);\n            } else if (typeof sessionStorage !== \"undefined\") {\n                sessionStorage.removeItem(\"linguaspark_lesson_config\");\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to clear extraction configuration:\", error);\n        }\n    }\n    /**\r\n   * Create lesson pre-configuration from extracted content\r\n   */ createLessonPreConfiguration(content) {\n        var _content_metadata, _content_metadata1, _content_metadata2;\n        return {\n            sourceContent: content.text,\n            suggestedType: content.suggestedLessonType,\n            suggestedLevel: content.suggestedCEFRLevel,\n            metadata: {\n                title: content.metadata.title,\n                author: content.metadata.author,\n                sourceUrl: content.metadata.sourceUrl,\n                domain: content.metadata.domain,\n                extractedAt: content.sourceInfo.extractedAt,\n                wordCount: content.quality.wordCount,\n                readingTime: content.quality.readingTime,\n                complexity: content.quality.complexity,\n                suitabilityScore: content.quality.suitabilityScore,\n                bannerImages: content.bannerImages || ((_content_metadata = content.metadata) === null || _content_metadata === void 0 ? void 0 : _content_metadata.bannerImages) || [],\n                bannerImage: content.bannerImage || ((_content_metadata1 = content.metadata) === null || _content_metadata1 === void 0 ? void 0 : _content_metadata1.bannerImage) || null,\n                images: content.images || ((_content_metadata2 = content.metadata) === null || _content_metadata2 === void 0 ? void 0 : _content_metadata2.images) || []\n            },\n            extractionSource: \"webpage\",\n            allowContentEditing: true,\n            userCanModifySettings: true,\n            attribution: content.sourceInfo.attribution\n        };\n    }\n    /**\r\n   * Store configuration for lesson interface\r\n   */ async storeConfiguration(config) {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                // Store in Chrome extension storage\n                window.chrome.storage.local.set({\n                    lessonConfiguration: config,\n                    extractionSource: \"webpage\",\n                    extractionTimestamp: Date.now()\n                });\n            } else if (typeof sessionStorage !== \"undefined\") {\n                // Fallback to session storage\n                sessionStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(config));\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to store configuration:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Store extracted content for lesson generator\r\n   */ async storeExtractedContent(config) {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                // Store content in the format expected by lesson generator\n                window.chrome.storage.local.set({\n                    selectedText: config.sourceContent,\n                    sourceUrl: config.metadata.sourceUrl,\n                    lessonType: config.suggestedType,\n                    studentLevel: config.suggestedLevel,\n                    extractionMetadata: config.metadata,\n                    attribution: config.attribution\n                });\n            } else if (typeof sessionStorage !== \"undefined\") {\n                // Fallback storage\n                sessionStorage.setItem(\"linguaspark_selected_text\", config.sourceContent);\n                sessionStorage.setItem(\"linguaspark_source_url\", config.metadata.sourceUrl);\n                sessionStorage.setItem(\"linguaspark_lesson_type\", config.suggestedType);\n                sessionStorage.setItem(\"linguaspark_student_level\", config.suggestedLevel);\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to store extracted content:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Open the lesson interface\r\n   */ async openInterface() {\n        try {\n            var _window_chrome;\n            const config = this.currentConfiguration;\n            if (!config) {\n                throw new Error(\"No configuration available\");\n            }\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.action)) {\n                // Extension context - try to open popup\n                try {\n                    await window.chrome.action.openPopup();\n                } catch (popupError) {\n                    // If popup fails, open in new tab with minimal URL parameters\n                    // ALWAYS store full content in Chrome storage, NEVER in URL\n                    await window.chrome.storage.local.set({\n                        lessonConfiguration: config,\n                        extractionSource: \"webpage\",\n                        extractionTimestamp: Date.now()\n                    });\n                    const url = new URL(window.chrome.runtime.getURL(\"popup.html\"));\n                    url.searchParams.set(\"source\", \"extraction\");\n                    url.searchParams.set(\"autoPopulate\", \"true\");\n                    url.searchParams.set(\"sourceUrl\", encodeURIComponent(config.metadata.sourceUrl));\n                    url.searchParams.set(\"type\", config.suggestedType);\n                    url.searchParams.set(\"level\", config.suggestedLevel);\n                    url.searchParams.set(\"title\", encodeURIComponent(config.metadata.title));\n                    // NOTE: NO 'content' parameter to avoid URL length limits\n                    console.log(\"[LessonInterfaceBridge] Stored full content in Chrome storage, opening popup with metadata-only URL\");\n                    await window.chrome.tabs.create({\n                        url: url.toString()\n                    });\n                }\n            } else if (true) {\n                // Web context - ALWAYS store full content in session storage, NEVER in URL\n                sessionStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(config));\n                // Use minimal URL parameters - NO CONTENT in URL to avoid truncation\n                const url = new URL(\"/popup\", window.location.origin);\n                url.searchParams.set(\"source\", \"extraction\");\n                url.searchParams.set(\"autoPopulate\", \"true\");\n                url.searchParams.set(\"sourceUrl\", encodeURIComponent(config.metadata.sourceUrl));\n                url.searchParams.set(\"type\", config.suggestedType);\n                url.searchParams.set(\"level\", config.suggestedLevel);\n                url.searchParams.set(\"title\", encodeURIComponent(config.metadata.title));\n                // NOTE: NO 'content' parameter to avoid URL length limits\n                console.log(\"[LessonInterfaceBridge] Stored full content in session storage, opening popup with metadata-only URL\");\n                window.open(url.toString(), \"_blank\");\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to open interface:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Load configuration from localStorage (fallback for extension context invalidation)\r\n   */ static loadFromLocalStorage() {\n        try {\n            if (typeof localStorage === \"undefined\") return null;\n            const stored = localStorage.getItem(\"linguaspark_lesson_config\");\n            if (stored) {\n                var _config_metadata;\n                const config = JSON.parse(stored);\n                // Parse dates\n                if ((_config_metadata = config.metadata) === null || _config_metadata === void 0 ? void 0 : _config_metadata.extractedAt) {\n                    config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                }\n                console.log(\"[LessonInterfaceBridge] Loaded configuration from localStorage fallback\");\n                return config;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to load from localStorage:\", error);\n            return null;\n        }\n    }\n    /**\r\n   * Clear extraction configuration from all storage types\r\n   */ static async clearExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            // Clear Chrome storage if available\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                try {\n                    await new Promise((resolve)=>{\n                        window.chrome.storage.local.remove([\n                            \"lessonConfiguration\",\n                            \"extractedContent\",\n                            \"extractionSource\",\n                            \"extractionTimestamp\"\n                        ], ()=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage clear error:\", window.chrome.runtime.lastError.message);\n                            }\n                            resolve();\n                        });\n                    });\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear Chrome storage:\", error);\n                }\n            }\n            // Clear localStorage fallback\n            if (typeof localStorage !== \"undefined\") {\n                try {\n                    localStorage.removeItem(\"linguaspark_lesson_config\");\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear localStorage:\", error);\n                }\n            }\n            // Clear sessionStorage\n            if (typeof sessionStorage !== \"undefined\") {\n                try {\n                    sessionStorage.removeItem(\"linguaspark_lesson_config\");\n                    sessionStorage.removeItem(\"linguaspark_selected_text\");\n                    sessionStorage.removeItem(\"linguaspark_source_url\");\n                    sessionStorage.removeItem(\"linguaspark_lesson_type\");\n                    sessionStorage.removeItem(\"linguaspark_student_level\");\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear sessionStorage:\", error);\n                }\n            }\n            console.log(\"[LessonInterfaceBridge] Cleared extraction configuration from all storage types\");\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to clear extraction configuration:\", error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.state = {\n            contentPrePopulated: false,\n            settingsCustomizable: true,\n            extractionConfirmed: false,\n            readyForGeneration: false,\n            lessonInterfaceOpen: false\n        };\n        this.callbacks = {};\n        this.currentConfiguration = null;\n    }\n}\n/**\r\n * Utility functions for lesson interface integration\r\n */ const LessonInterfaceUtils = {\n    /**\r\n   * Check if current page is lesson interface with extraction source\r\n   */ async isExtractionLessonInterface () {\n        if (false) {}\n        const urlParams = new URLSearchParams(window.location.search);\n        const isExtractionSource = urlParams.get(\"source\") === \"extraction\";\n        const shouldAutoPopulate = urlParams.get(\"autoPopulate\") === \"true\";\n        return isExtractionSource && shouldAutoPopulate;\n    },\n    /**\r\n   * Get extraction parameters from URL\r\n   */ getExtractionParams () {\n        if (false) {}\n        const urlParams = new URLSearchParams(window.location.search);\n        return {\n            source: urlParams.get(\"source\"),\n            autoPopulate: urlParams.get(\"autoPopulate\") === \"true\"\n        };\n    },\n    /**\r\n   * Check if Chrome APIs are available\r\n   */ isChromeExtensionContext () {\n        return  true && typeof window.chrome !== \"undefined\" && typeof window.chrome.storage !== \"undefined\";\n    },\n    /**\r\n   * Safe Chrome storage access with fallback\r\n   */ async safeStorageGet (keys) {\n        console.log(\"[LessonInterfaceUtils] safeStorageGet called with keys:\", keys);\n        console.log(\"[LessonInterfaceUtils] Chrome extension context:\", this.isChromeExtensionContext());\n        if (this.isChromeExtensionContext()) {\n            return new Promise((resolve)=>{\n                try {\n                    window.chrome.storage.local.get(keys, (result)=>{\n                        if (window.chrome.runtime.lastError) {\n                            console.warn(\"[LessonInterfaceUtils] Chrome storage error, trying localStorage fallback:\", window.chrome.runtime.lastError.message);\n                            const fallbackResult = this.getFromLocalStorageFallback(keys);\n                            console.log(\"[LessonInterfaceUtils] Fallback result:\", Object.keys(fallbackResult));\n                            resolve(fallbackResult);\n                        } else {\n                            console.log(\"[LessonInterfaceUtils] Chrome storage result:\", Object.keys(result || {}));\n                            resolve(result);\n                        }\n                    });\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceUtils] Chrome storage access failed:\", error);\n                    const fallbackResult = this.getFromLocalStorageFallback(keys);\n                    console.log(\"[LessonInterfaceUtils] Exception fallback result:\", Object.keys(fallbackResult));\n                    resolve(fallbackResult);\n                }\n            });\n        }\n        const fallbackResult = this.getFromLocalStorageFallback(keys);\n        console.log(\"[LessonInterfaceUtils] Direct fallback result:\", Object.keys(fallbackResult));\n        return fallbackResult;\n    },\n    /**\r\n   * Get data from localStorage fallback\r\n   */ getFromLocalStorageFallback (keys) {\n        const result = {};\n        // First try the main lesson config key (used by content script)\n        try {\n            const mainConfig = localStorage.getItem(\"linguaspark_lesson_config\");\n            if (mainConfig) {\n                const parsed = JSON.parse(mainConfig);\n                console.log(\"[LessonInterfaceUtils] Found localStorage config:\", Object.keys(parsed));\n                // Map the stored data to the expected keys\n                if (parsed.lessonConfiguration) {\n                    result.lessonConfiguration = parsed.lessonConfiguration;\n                }\n                if (parsed.extractedContent) {\n                    result.extractedContent = parsed.extractedContent;\n                }\n                if (parsed.selectedText) {\n                    result.selectedText = parsed.selectedText;\n                }\n                if (parsed.sourceUrl) {\n                    result.sourceUrl = parsed.sourceUrl;\n                }\n                // If we have lesson configuration, that's the primary data\n                if (result.lessonConfiguration) {\n                    return result;\n                }\n            }\n        } catch (error) {\n            console.warn(\"[LessonInterfaceUtils] Failed to parse localStorage config:\", error);\n        }\n        // Fallback to individual sessionStorage keys\n        for (const key of keys){\n            try {\n                const stored = sessionStorage.getItem(\"linguaspark_\".concat(key));\n                if (stored) {\n                    try {\n                        result[key] = JSON.parse(stored);\n                    } catch (e) {\n                        result[key] = stored;\n                    }\n                }\n            } catch (error) {\n                console.warn(\"[LessonInterfaceUtils] Failed to get sessionStorage key \".concat(key, \":\"), error);\n            }\n        }\n        return result;\n    },\n    /**\r\n   * Safe Chrome storage set with fallback\r\n   */ async safeStorageSet (data) {\n        if (this.isChromeExtensionContext()) {\n            try {\n                window.chrome.storage.local.set(data);\n                return;\n            } catch (error) {\n                console.warn(\"[LessonInterfaceUtils] Chrome storage set failed, using localStorage fallback:\", error);\n            }\n        }\n        // Fallback to localStorage with the same format as content script\n        try {\n            localStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(data));\n            console.log(\"[LessonInterfaceUtils] Stored data in localStorage fallback\");\n        } catch (error) {\n            console.warn(\"[LessonInterfaceUtils] localStorage fallback failed:\", error);\n            // Final fallback to session storage\n            for (const [key, value] of Object.entries(data)){\n                sessionStorage.setItem(\"linguaspark_\".concat(key), JSON.stringify(value));\n            }\n        }\n    },\n    /**\r\n   * Format attribution text for display\r\n   */ formatAttribution (attribution) {\n        return attribution.startsWith(\"Source: \") ? attribution : \"Source: \".concat(attribution);\n    },\n    /**\r\n   * Create lesson metadata display\r\n   */ createMetadataDisplay (metadata) {\n        const parts = [];\n        if (metadata.title) {\n            parts.push(metadata.title);\n        }\n        if (metadata.author) {\n            parts.push(\"by \".concat(metadata.author));\n        }\n        if (metadata.domain) {\n            parts.push(\"from \".concat(metadata.domain));\n        }\n        parts.push(\"\".concat(metadata.wordCount, \" words\"));\n        parts.push(\"\".concat(metadata.readingTime, \" min read\"));\n        return parts.join(\" â€¢ \");\n    },\n    /**\r\n   * Debug storage state for troubleshooting\r\n   */ async debugStorageState () {\n        console.log(\"[LessonInterfaceBridge] Debug Storage State:\");\n        console.log(\"- Chrome extension context:\", this.isChromeExtensionContext());\n        console.log(\"- URL:\", window.location.href);\n        console.log(\"- URL params:\", Object.fromEntries(new URLSearchParams(window.location.search)));\n        if (this.isChromeExtensionContext()) {\n            const chromeData = await this.safeStorageGet([\n                \"lessonConfiguration\",\n                \"extractedContent\",\n                \"selectedText\"\n            ]);\n            console.log(\"- Chrome storage:\", chromeData);\n        }\n        console.log(\"- Session storage keys:\", Object.keys(sessionStorage).filter((k)=>k.startsWith(\"linguaspark_\")));\n        const sessionConfig = sessionStorage.getItem(\"linguaspark_lesson_config\");\n        if (sessionConfig) {\n            try {\n                console.log(\"- Session config:\", JSON.parse(sessionConfig));\n            } catch (e) {\n                console.log(\"- Session config (raw):\", sessionConfig);\n            }\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9sZXNzb24taW50ZXJmYWNlLWJyaWRnZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7O0NBT0MsR0FxRE0sTUFBTUE7SUFZWDs7R0FFQyxHQUNELFdBQWtCRSxTQUF5QyxFQUFRO1FBQ2pFLElBQUksQ0FBQ0EsU0FBUyxHQUFHQTtJQUNuQjtJQUVBOzs7R0FHQyxHQUNELE1BQWFDLG9CQUFvQkMsT0FBeUIsRUFBaUI7UUFDekUsSUFBSTtZQUNGLGtDQUFrQztZQUNsQyxNQUFNQyxTQUFTLElBQUksQ0FBQ0MsNEJBQTRCLENBQUNGO1lBQ2pELElBQUksQ0FBQ0csb0JBQW9CLEdBQUdGO1lBRTVCLCtDQUErQztZQUMvQyxNQUFNLElBQUksQ0FBQ0csa0JBQWtCLENBQUNIO1lBRTlCLDRCQUE0QjtZQUM1QixNQUFNLElBQUksQ0FBQ0ksYUFBYTtZQUV4QixlQUFlO1lBQ2YsSUFBSSxDQUFDQyxLQUFLLENBQUNDLG1CQUFtQixHQUFHO1lBQ2pDLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxtQkFBbUIsR0FBRztZQUVqQyxrQkFBa0I7WUFDbEIsSUFBSSxJQUFJLENBQUNWLFNBQVMsQ0FBQ1csdUJBQXVCLEVBQUU7Z0JBQzFDLElBQUksQ0FBQ1gsU0FBUyxDQUFDVyx1QkFBdUIsQ0FBQ1I7WUFDekM7UUFFRixFQUFFLE9BQU9TLE9BQU87WUFDZCxNQUFNQyxlQUFlRCxpQkFBaUJFLFFBQVFGLE1BQU1HLE9BQU8sR0FBRztZQUM5REMsUUFBUUosS0FBSyxDQUFDLDREQUE0REE7WUFFMUUsSUFBSSxJQUFJLENBQUNaLFNBQVMsQ0FBQ2lCLE9BQU8sRUFBRTtnQkFDMUIsSUFBSSxDQUFDakIsU0FBUyxDQUFDaUIsT0FBTyxDQUFDSjtZQUN6QjtZQUVBLE1BQU0sSUFBSUMsTUFBTUQ7UUFDbEI7SUFDRjtJQUVBOzs7R0FHQyxHQUNELE1BQWFLLGtCQUFrQmhCLE9BQXlCLEVBQWlCO1FBQ3ZFLElBQUk7WUFDRixNQUFNQyxT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QU07Z0JBQ050SSxRQUFROEMsR0FBRyxDQUFDLDJCQUEyQndGO1lBQ3pDO1FBQ0Y7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL2xlc3Nvbi1pbnRlcmZhY2UtYnJpZGdlLnRzPzljMjMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExlc3NvbiBJbnRlcmZhY2UgQnJpZGdlXHJcbiAqIFxyXG4gKiBDb25uZWN0cyBleHRyYWN0ZWQgY29udGVudCB0byB0aGUgZXhpc3RpbmcgbGVzc29uIGdlbmVyYXRpb24gaW50ZXJmYWNlLlxyXG4gKiBIYW5kbGVzIGF1dG9tYXRpYyBwb3B1cCBvcGVuaW5nLCBjb250ZW50IHByZS1wb3B1bGF0aW9uLCBhbmQgbWV0YWRhdGEgcHJlc2VydmF0aW9uLlxyXG4gKiBcclxuICogUmVxdWlyZW1lbnRzOiA0LjEsIDQuMiwgNC42LCA2LjZcclxuICovXHJcblxyXG5pbXBvcnQgdHlwZSB7IEV4dHJhY3RlZENvbnRlbnQgfSBmcm9tICcuL2VuaGFuY2VkLWNvbnRlbnQtZXh0cmFjdG9yJztcclxuaW1wb3J0IHR5cGUgeyBMZXNzb25UeXBlLCBDRUZSTGV2ZWwgfSBmcm9tICcuL2V4dHJhY3Rpb24tY29uZmlybWF0aW9uLW1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMZXNzb25QcmVDb25maWd1cmF0aW9uIHtcclxuICBzb3VyY2VDb250ZW50OiBzdHJpbmc7XHJcbiAgc3VnZ2VzdGVkVHlwZTogTGVzc29uVHlwZTtcclxuICBzdWdnZXN0ZWRMZXZlbDogQ0VGUkxldmVsO1xyXG4gIG1ldGFkYXRhOiBFeHRyYWN0ZWRDb250ZW50TWV0YWRhdGE7XHJcbiAgZXh0cmFjdGlvblNvdXJjZTogJ3dlYnBhZ2UnO1xyXG4gIGFsbG93Q29udGVudEVkaXRpbmc6IGJvb2xlYW47XHJcbiAgdXNlckNhbk1vZGlmeVNldHRpbmdzOiBib29sZWFuO1xyXG4gIGF0dHJpYnV0aW9uOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFjdGVkQ29udGVudE1ldGFkYXRhIHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGF1dGhvcj86IHN0cmluZztcclxuICBzb3VyY2VVcmw6IHN0cmluZztcclxuICBkb21haW46IHN0cmluZztcclxuICBleHRyYWN0ZWRBdDogRGF0ZTtcclxuICB3b3JkQ291bnQ6IG51bWJlcjtcclxuICByZWFkaW5nVGltZTogbnVtYmVyO1xyXG4gIGNvbXBsZXhpdHk6ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdhZHZhbmNlZCc7XHJcbiAgc3VpdGFiaWxpdHlTY29yZTogbnVtYmVyO1xyXG4gIGJhbm5lckltYWdlcz86IEFycmF5PHtcclxuICAgIHVybDogc3RyaW5nO1xyXG4gICAgYWx0OiBzdHJpbmc7XHJcbiAgICB0eXBlOiAnbWV0YScgfCAnY29udGVudCc7XHJcbiAgICBwcmlvcml0eTogbnVtYmVyO1xyXG4gICAgd2lkdGg/OiBudW1iZXIgfCBudWxsO1xyXG4gICAgaGVpZ2h0PzogbnVtYmVyIHwgbnVsbDtcclxuICB9PjtcclxuICBiYW5uZXJJbWFnZT86IHN0cmluZzsgLy8gVVJMIG9mIHRoZSBwcmltYXJ5IGJhbm5lciBpbWFnZVxyXG4gIGltYWdlcz86IEFycmF5PGFueT47IC8vIEFsbCBleHRyYWN0ZWQgaW1hZ2VzXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJmYWNlU3RhdGUge1xyXG4gIGNvbnRlbnRQcmVQb3B1bGF0ZWQ6IGJvb2xlYW47XHJcbiAgc2V0dGluZ3NDdXN0b21pemFibGU6IGJvb2xlYW47XHJcbiAgZXh0cmFjdGlvbkNvbmZpcm1lZDogYm9vbGVhbjtcclxuICByZWFkeUZvckdlbmVyYXRpb246IGJvb2xlYW47XHJcbiAgbGVzc29uSW50ZXJmYWNlT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMZXNzb25JbnRlcmZhY2VCcmlkZ2VDYWxsYmFja3Mge1xyXG4gIG9uTGVzc29uSW50ZXJmYWNlT3BlbmVkPzogKGNvbmZpZzogTGVzc29uUHJlQ29uZmlndXJhdGlvbikgPT4gdm9pZDtcclxuICBvbkNvbnRlbnRQcmVQb3B1bGF0ZWQ/OiAoY29udGVudDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIG9uU2V0dGluZ3NBcHBsaWVkPzogKGxlc3NvblR5cGU6IExlc3NvblR5cGUsIGNlZnJMZXZlbDogQ0VGUkxldmVsKSA9PiB2b2lkO1xyXG4gIG9uRXJyb3I/OiAoZXJyb3I6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExlc3NvbkludGVyZmFjZUJyaWRnZSB7XHJcbiAgcHJpdmF0ZSBzdGF0ZTogSW50ZXJmYWNlU3RhdGUgPSB7XHJcbiAgICBjb250ZW50UHJlUG9wdWxhdGVkOiBmYWxzZSxcclxuICAgIHNldHRpbmdzQ3VzdG9taXphYmxlOiB0cnVlLFxyXG4gICAgZXh0cmFjdGlvbkNvbmZpcm1lZDogZmFsc2UsXHJcbiAgICByZWFkeUZvckdlbmVyYXRpb246IGZhbHNlLFxyXG4gICAgbGVzc29uSW50ZXJmYWNlT3BlbjogZmFsc2VcclxuICB9O1xyXG4gIFxyXG4gIHByaXZhdGUgY2FsbGJhY2tzOiBMZXNzb25JbnRlcmZhY2VCcmlkZ2VDYWxsYmFja3MgPSB7fTtcclxuICBwcml2YXRlIGN1cnJlbnRDb25maWd1cmF0aW9uOiBMZXNzb25QcmVDb25maWd1cmF0aW9uIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIGJyaWRnZSB3aXRoIGNhbGxiYWNrc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBpbml0aWFsaXplKGNhbGxiYWNrczogTGVzc29uSW50ZXJmYWNlQnJpZGdlQ2FsbGJhY2tzKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW4gbGVzc29uIGludGVyZmFjZSB3aXRoIGV4dHJhY3RlZCBjb250ZW50XHJcbiAgICogUmVxdWlyZW1lbnQgNC4xOiBPcGVuIHRoZSBMaW5ndWFTcGFyayBsZXNzb24gZ2VuZXJhdGlvbiBpbnRlcmZhY2VcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgb3Blbkxlc3NvbkludGVyZmFjZShjb250ZW50OiBFeHRyYWN0ZWRDb250ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDcmVhdGUgbGVzc29uIHByZS1jb25maWd1cmF0aW9uXHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY3JlYXRlTGVzc29uUHJlQ29uZmlndXJhdGlvbihjb250ZW50KTtcclxuICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IGNvbmZpZztcclxuXHJcbiAgICAgIC8vIFN0b3JlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBsZXNzb24gaW50ZXJmYWNlXHJcbiAgICAgIGF3YWl0IHRoaXMuc3RvcmVDb25maWd1cmF0aW9uKGNvbmZpZyk7XHJcblxyXG4gICAgICAvLyBPcGVuIHRoZSBsZXNzb24gaW50ZXJmYWNlXHJcbiAgICAgIGF3YWl0IHRoaXMub3BlbkludGVyZmFjZSgpO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHN0YXRlXHJcbiAgICAgIHRoaXMuc3RhdGUubGVzc29uSW50ZXJmYWNlT3BlbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuc3RhdGUuZXh0cmFjdGlvbkNvbmZpcm1lZCA9IHRydWU7XHJcblxyXG4gICAgICAvLyBOb3RpZnkgY2FsbGJhY2tcclxuICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzLm9uTGVzc29uSW50ZXJmYWNlT3BlbmVkKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25MZXNzb25JbnRlcmZhY2VPcGVuZWQoY29uZmlnKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBvcGVuIGxlc3NvbiBpbnRlcmZhY2UnO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gb3BlbiBsZXNzb24gaW50ZXJmYWNlOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy5vbkVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25FcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZS1wb3B1bGF0ZSBsZXNzb24gaW50ZXJmYWNlIHdpdGggZXh0cmFjdGVkIGNvbnRlbnRcclxuICAgKiBSZXF1aXJlbWVudCA0LjI6IFByZS1wb3B1bGF0ZSBzb3VyY2UgY29udGVudCBmaWVsZCB3aXRoIGV4dHJhY3RlZCBjb250ZW50XHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIHBvcHVsYXRlSW50ZXJmYWNlKGNvbnRlbnQ6IEV4dHJhY3RlZENvbnRlbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY3JlYXRlTGVzc29uUHJlQ29uZmlndXJhdGlvbihjb250ZW50KTtcclxuICAgICAgXHJcbiAgICAgIC8vIFN0b3JlIHRoZSBjb250ZW50IGZvciB0aGUgbGVzc29uIGdlbmVyYXRvclxyXG4gICAgICBhd2FpdCB0aGlzLnN0b3JlRXh0cmFjdGVkQ29udGVudChjb25maWcpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIHN0YXRlXHJcbiAgICAgIHRoaXMuc3RhdGUuY29udGVudFByZVBvcHVsYXRlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuc3RhdGUucmVhZHlGb3JHZW5lcmF0aW9uID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIE5vdGlmeSBjYWxsYmFja1xyXG4gICAgICBpZiAodGhpcy5jYWxsYmFja3Mub25Db250ZW50UHJlUG9wdWxhdGVkKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25Db250ZW50UHJlUG9wdWxhdGVkKGNvbmZpZy5zb3VyY2VDb250ZW50KTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwb3B1bGF0ZSBpbnRlcmZhY2UnO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gcG9wdWxhdGUgaW50ZXJmYWNlOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy5vbkVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25FcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuYWJsZSBjb250ZW50IGVkaXRpbmcgaW4gdGhlIGxlc3NvbiBpbnRlcmZhY2VcclxuICAgKiBSZXF1aXJlbWVudCA0LjU6IFVzZXIgY2FuIGVkaXQgZXh0cmFjdGVkIGNvbnRlbnQgYmVmb3JlIGdlbmVyYXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgZW5hYmxlQ29udGVudEVkaXRpbmcoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbikge1xyXG4gICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLmFsbG93Q29udGVudEVkaXRpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLnN0b3JlQ29uZmlndXJhdGlvbih0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByZXNlcnZlIHVzZXIgY3VzdG9taXphdGlvbnNcclxuICAgKiBSZXF1aXJlbWVudCA0LjQ6IFVzZXIgY2FuIG1vZGlmeSBsZXNzb24gdHlwZSwgQ0VGUiBsZXZlbCwgYW5kIG90aGVyIHNldHRpbmdzXHJcbiAgICovXHJcbiAgcHVibGljIHByZXNlcnZlVXNlckN1c3RvbWl6YXRpb25zKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51c2VyQ2FuTW9kaWZ5U2V0dGluZ3MgPSB0cnVlO1xyXG4gICAgICB0aGlzLnN0b3JlQ29uZmlndXJhdGlvbih0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEludGVncmF0ZSB3aXRoIGV4aXN0aW5nIGxlc3NvbiBnZW5lcmF0aW9uIHdvcmtmbG93XHJcbiAgICogUmVxdWlyZW1lbnQgNC42OiBGb2xsb3cgZXhpc3RpbmcgZW5oYW5jZWQgbGVzc29uIGdlbmVyYXRpb24gd29ya2Zsb3dcclxuICAgKi9cclxuICBwdWJsaWMgaW50ZWdyYXRlV2l0aEV4aXN0aW5nV29ya2Zsb3coKTogdm9pZCB7XHJcbiAgICAvLyBUaGUgaW50ZWdyYXRpb24gaGFwcGVucyB0aHJvdWdoIHRoZSBzdG9yZWQgY29uZmlndXJhdGlvblxyXG4gICAgLy8gVGhlIGxlc3NvbiBnZW5lcmF0b3Igd2lsbCBkZXRlY3QgdGhlIGV4dHJhY3Rpb24gc291cmNlIGFuZCBoYW5kbGUgYWNjb3JkaW5nbHlcclxuICAgIHRoaXMuc3RhdGUucmVhZHlGb3JHZW5lcmF0aW9uID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjdXJyZW50IGludGVyZmFjZSBzdGF0ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRTdGF0ZSgpOiBJbnRlcmZhY2VTdGF0ZSB7XHJcbiAgICByZXR1cm4geyAuLi50aGlzLnN0YXRlIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY3VycmVudCBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIGdldEN1cnJlbnRDb25maWd1cmF0aW9uKCk6IExlc3NvblByZUNvbmZpZ3VyYXRpb24gfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uID8geyAuLi50aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uIH0gOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgY29udGVudCBpcyBmcm9tIGV4dHJhY3Rpb25cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGlzRXh0cmFjdGlvblNvdXJjZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEZpcnN0IHRyeSBVUkwgcGFyYW1ldGVycyAobW9zdCByZWxpYWJsZSBmb3Igd2ViIGNvbnRleHQpXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgICAgICAgaWYgKHVybFBhcmFtcy5nZXQoJ3NvdXJjZScpID09PSAnZXh0cmFjdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IENocm9tZSBzdG9yYWdlIGlmIGF2YWlsYWJsZSAoZXh0ZW5zaW9uIGNvbnRleHQpXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5zdG9yYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsnZXh0cmFjdGlvblNvdXJjZSddLCAocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICBpZiAod2luZG93LmNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBDaHJvbWUgc3RvcmFnZSBlcnJvciwgY2hlY2tpbmcgbG9jYWxTdG9yYWdlIGZhbGxiYWNrOicsIHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBsb2NhbFN0b3JhZ2UgZmFsbGJhY2tcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrQ29uZmlnID0gTGVzc29uSW50ZXJmYWNlQnJpZGdlLmxvYWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbGxiYWNrQ29uZmlnPy5leHRyYWN0aW9uU291cmNlID09PSAnd2VicGFnZScpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5leHRyYWN0aW9uU291cmNlID09PSAnd2VicGFnZScpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIENocm9tZSBzdG9yYWdlIGFjY2VzcyBmYWlsZWQsIGNoZWNraW5nIGxvY2FsU3RvcmFnZSBmYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGxvY2FsU3RvcmFnZSBmYWxsYmFja1xyXG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja0NvbmZpZyA9IExlc3NvbkludGVyZmFjZUJyaWRnZS5sb2FkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICByZXNvbHZlKGZhbGxiYWNrQ29uZmlnPy5leHRyYWN0aW9uU291cmNlID09PSAnd2VicGFnZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIChmYWxsYmFjayBmb3IgZXh0ZW5zaW9uIGNvbnRleHQgaW52YWxpZGF0aW9uKVxyXG4gICAgICBjb25zdCBsb2NhbFN0b3JhZ2VDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgaWYgKGxvY2FsU3RvcmFnZUNvbmZpZz8uZXh0cmFjdGlvblNvdXJjZSA9PT0gJ3dlYnBhZ2UnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBzZXNzaW9uIHN0b3JhZ2UgKHdlYiBjb250ZXh0IGZhbGxiYWNrKVxyXG4gICAgICBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnKTtcclxuICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICByZXR1cm4gY29uZmlnLmV4dHJhY3Rpb25Tb3VyY2UgPT09ICd3ZWJwYWdlJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBjaGVjayBleHRyYWN0aW9uIHNvdXJjZTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgZXh0cmFjdGlvbiBjb25maWd1cmF0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkRXh0cmFjdGlvbkNvbmZpZ3VyYXRpb24oKTogUHJvbWlzZTxMZXNzb25QcmVDb25maWd1cmF0aW9uIHwgbnVsbD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IENocm9tZSBzdG9yYWdlIGlmIGF2YWlsYWJsZSAoZXh0ZW5zaW9uIGNvbnRleHQpXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5zdG9yYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsnbGVzc29uQ29uZmlndXJhdGlvbiddLCAocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICBpZiAod2luZG93LmNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBDaHJvbWUgc3RvcmFnZSBlcnJvciwgdHJ5aW5nIGxvY2FsU3RvcmFnZSBmYWxsYmFjazonLCB3aW5kb3cuY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWxsYmFja0NvbmZpZyA9IExlc3NvbkludGVyZmFjZUJyaWRnZS5sb2FkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxsYmFja0NvbmZpZyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubGVzc29uQ29uZmlndXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgZGF0ZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHJlc3VsdC5sZXNzb25Db25maWd1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25maWcubWV0YWRhdGEuZXh0cmFjdGVkQXQgPSBuZXcgRGF0ZShjb25maWcubWV0YWRhdGEuZXh0cmFjdGVkQXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShjb25maWcpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIGZhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWxsYmFja0NvbmZpZyA9IExlc3NvbkludGVyZmFjZUJyaWRnZS5sb2FkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxsYmFja0NvbmZpZyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gQ2hyb21lIHN0b3JhZ2UgYWNjZXNzIGZhaWxlZCwgdXNpbmcgbG9jYWxTdG9yYWdlIGZhbGxiYWNrOicsIGVycm9yKTtcclxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxsYmFja0NvbmZpZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBsb2NhbFN0b3JhZ2UgKGZhbGxiYWNrIGZvciBleHRlbnNpb24gY29udGV4dCBpbnZhbGlkYXRpb24pXHJcbiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZUNvbmZpZyA9IExlc3NvbkludGVyZmFjZUJyaWRnZS5sb2FkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICBpZiAobG9jYWxTdG9yYWdlQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZUNvbmZpZztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IHNlc3Npb24gc3RvcmFnZSAod2ViIGNvbnRleHQpXHJcbiAgICAgIGlmICh0eXBlb2Ygc2Vzc2lvblN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycpO1xyXG4gICAgICAgIGlmIChzdG9yZWQpIHtcclxuICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcclxuICAgICAgICAgIC8vIFBhcnNlIGRhdGVzXHJcbiAgICAgICAgICBpZiAoY29uZmlnLm1ldGFkYXRhLmV4dHJhY3RlZEF0KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCA9IG5ldyBEYXRlKGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IFVSTCBwYXJhbWV0ZXJzIChmb3IgbWV0YWRhdGEgb25seSwgY29udGVudCBzaG91bGQgYmUgaW4gc3RvcmFnZSlcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgICAgICBjb25zdCBzb3VyY2VQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3NvdXJjZVVybCcpO1xyXG4gICAgICAgIGNvbnN0IGlzRXh0cmFjdGlvblNvdXJjZSA9IHVybFBhcmFtcy5nZXQoJ3NvdXJjZScpID09PSAnZXh0cmFjdGlvbic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBleHRyYWN0aW9uIHNvdXJjZSBidXQgbm8gY29udGVudCBpbiBVUkwsIGl0IHNob3VsZCBiZSBpbiBzdG9yYWdlXHJcbiAgICAgICAgaWYgKGlzRXh0cmFjdGlvblNvdXJjZSAmJiBzb3VyY2VQYXJhbSkge1xyXG4gICAgICAgICAgLy8gVGhpcyBpbmRpY2F0ZXMgY29udGVudCBzaG91bGQgYmUgYXZhaWxhYmxlIGluIHN0b3JhZ2VcclxuICAgICAgICAgIC8vIFJldHVybiBudWxsIGhlcmUgc28gdGhlIGNhbGxlciBrbm93cyB0byBjaGVjayBzdG9yYWdlXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRXh0cmFjdGlvbiBzb3VyY2UgZGV0ZWN0ZWQgYnV0IGNvbnRlbnQgbm90IGluIFVSTCAtIHNob3VsZCBiZSBpbiBzdG9yYWdlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExlZ2FjeSBzdXBwb3J0OiBpZiBjb250ZW50IGlzIGluIFVSTCBwYXJhbWV0ZXJzIChmb3Igc21hbGwgY29udGVudClcclxuICAgICAgICBjb25zdCBjb250ZW50UGFyYW0gPSB1cmxQYXJhbXMuZ2V0KCdjb250ZW50Jyk7XHJcbiAgICAgICAgaWYgKGNvbnRlbnRQYXJhbSAmJiBzb3VyY2VQYXJhbSkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlZENvbnRlbnQgPSBkZWNvZGVVUklDb21wb25lbnQoY29udGVudFBhcmFtKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICBzb3VyY2VDb250ZW50OiBkZWNvZGVkQ29udGVudCxcclxuICAgICAgICAgICAgICBzdWdnZXN0ZWRUeXBlOiAodXJsUGFyYW1zLmdldCgndHlwZScpIGFzIExlc3NvblR5cGUpIHx8ICdkaXNjdXNzaW9uJyxcclxuICAgICAgICAgICAgICBzdWdnZXN0ZWRMZXZlbDogKHVybFBhcmFtcy5nZXQoJ2xldmVsJykgYXMgQ0VGUkxldmVsKSB8fCAnQjEnLFxyXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogdXJsUGFyYW1zLmdldCgndGl0bGUnKSB8fCAnRXh0cmFjdGVkIENvbnRlbnQnLFxyXG4gICAgICAgICAgICAgICAgc291cmNlVXJsOiBkZWNvZGVVUklDb21wb25lbnQoc291cmNlUGFyYW0pLFxyXG4gICAgICAgICAgICAgICAgZG9tYWluOiBuZXcgVVJMKGRlY29kZVVSSUNvbXBvbmVudChzb3VyY2VQYXJhbSkpLmhvc3RuYW1lLFxyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JkQ291bnQ6IGRlY29kZWRDb250ZW50LnNwbGl0KC9cXHMrLykubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVhZGluZ1RpbWU6IE1hdGguY2VpbChkZWNvZGVkQ29udGVudC5zcGxpdCgvXFxzKy8pLmxlbmd0aCAvIDIwMCksXHJcbiAgICAgICAgICAgICAgICBjb21wbGV4aXR5OiAnaW50ZXJtZWRpYXRlJyxcclxuICAgICAgICAgICAgICAgIHN1aXRhYmlsaXR5U2NvcmU6IDAuOFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZXh0cmFjdGlvblNvdXJjZTogJ3dlYnBhZ2UnLFxyXG4gICAgICAgICAgICAgIGFsbG93Q29udGVudEVkaXRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgdXNlckNhbk1vZGlmeVNldHRpbmdzOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiBgU291cmNlOiAke25ldyBVUkwoZGVjb2RlVVJJQ29tcG9uZW50KHNvdXJjZVBhcmFtKSkuaG9zdG5hbWV9YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfSBjYXRjaCAodXJsRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gcGFyc2UgVVJMIHBhcmFtZXRlcnM6JywgdXJsRXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gbG9hZCBleHRyYWN0aW9uIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFyIGV4dHJhY3Rpb24gY29uZmlndXJhdGlvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2xlYXJFeHRyYWN0aW9uQ29uZmlndXJhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5zdG9yYWdlKSB7XHJcbiAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShbJ2xlc3NvbkNvbmZpZ3VyYXRpb24nLCAnZXh0cmFjdGlvblNvdXJjZSddKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2Vzc2lvblN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gY2xlYXIgZXh0cmFjdGlvbiBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBsZXNzb24gcHJlLWNvbmZpZ3VyYXRpb24gZnJvbSBleHRyYWN0ZWQgY29udGVudFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY3JlYXRlTGVzc29uUHJlQ29uZmlndXJhdGlvbihjb250ZW50OiBFeHRyYWN0ZWRDb250ZW50KTogTGVzc29uUHJlQ29uZmlndXJhdGlvbiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzb3VyY2VDb250ZW50OiBjb250ZW50LnRleHQsXHJcbiAgICAgIHN1Z2dlc3RlZFR5cGU6IGNvbnRlbnQuc3VnZ2VzdGVkTGVzc29uVHlwZSxcclxuICAgICAgc3VnZ2VzdGVkTGV2ZWw6IGNvbnRlbnQuc3VnZ2VzdGVkQ0VGUkxldmVsLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHRpdGxlOiBjb250ZW50Lm1ldGFkYXRhLnRpdGxlLFxyXG4gICAgICAgIGF1dGhvcjogY29udGVudC5tZXRhZGF0YS5hdXRob3IsXHJcbiAgICAgICAgc291cmNlVXJsOiBjb250ZW50Lm1ldGFkYXRhLnNvdXJjZVVybCxcclxuICAgICAgICBkb21haW46IGNvbnRlbnQubWV0YWRhdGEuZG9tYWluLFxyXG4gICAgICAgIGV4dHJhY3RlZEF0OiBjb250ZW50LnNvdXJjZUluZm8uZXh0cmFjdGVkQXQsXHJcbiAgICAgICAgd29yZENvdW50OiBjb250ZW50LnF1YWxpdHkud29yZENvdW50LFxyXG4gICAgICAgIHJlYWRpbmdUaW1lOiBjb250ZW50LnF1YWxpdHkucmVhZGluZ1RpbWUsXHJcbiAgICAgICAgY29tcGxleGl0eTogY29udGVudC5xdWFsaXR5LmNvbXBsZXhpdHksXHJcbiAgICAgICAgc3VpdGFiaWxpdHlTY29yZTogY29udGVudC5xdWFsaXR5LnN1aXRhYmlsaXR5U2NvcmUsXHJcbiAgICAgICAgYmFubmVySW1hZ2VzOiAoY29udGVudCBhcyBhbnkpLmJhbm5lckltYWdlcyB8fCAoY29udGVudC5tZXRhZGF0YSBhcyBhbnkpPy5iYW5uZXJJbWFnZXMgfHwgW10sXHJcbiAgICAgICAgYmFubmVySW1hZ2U6IChjb250ZW50IGFzIGFueSkuYmFubmVySW1hZ2UgfHwgKGNvbnRlbnQubWV0YWRhdGEgYXMgYW55KT8uYmFubmVySW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICBpbWFnZXM6IChjb250ZW50IGFzIGFueSkuaW1hZ2VzIHx8IChjb250ZW50Lm1ldGFkYXRhIGFzIGFueSk/LmltYWdlcyB8fCBbXVxyXG4gICAgICB9LFxyXG4gICAgICBleHRyYWN0aW9uU291cmNlOiAnd2VicGFnZScsXHJcbiAgICAgIGFsbG93Q29udGVudEVkaXRpbmc6IHRydWUsXHJcbiAgICAgIHVzZXJDYW5Nb2RpZnlTZXR0aW5nczogdHJ1ZSxcclxuICAgICAgYXR0cmlidXRpb246IGNvbnRlbnQuc291cmNlSW5mby5hdHRyaWJ1dGlvblxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3JlIGNvbmZpZ3VyYXRpb24gZm9yIGxlc3NvbiBpbnRlcmZhY2VcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHN0b3JlQ29uZmlndXJhdGlvbihjb25maWc6IExlc3NvblByZUNvbmZpZ3VyYXRpb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5zdG9yYWdlKSB7XHJcbiAgICAgICAgLy8gU3RvcmUgaW4gQ2hyb21lIGV4dGVuc2lvbiBzdG9yYWdlXHJcbiAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XHJcbiAgICAgICAgICBsZXNzb25Db25maWd1cmF0aW9uOiBjb25maWcsXHJcbiAgICAgICAgICBleHRyYWN0aW9uU291cmNlOiAnd2VicGFnZScsXHJcbiAgICAgICAgICBleHRyYWN0aW9uVGltZXN0YW1wOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIHNlc3Npb24gc3RvcmFnZVxyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIHN0b3JlIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3JlIGV4dHJhY3RlZCBjb250ZW50IGZvciBsZXNzb24gZ2VuZXJhdG9yXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBzdG9yZUV4dHJhY3RlZENvbnRlbnQoY29uZmlnOiBMZXNzb25QcmVDb25maWd1cmF0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uc3RvcmFnZSkge1xyXG4gICAgICAgIC8vIFN0b3JlIGNvbnRlbnQgaW4gdGhlIGZvcm1hdCBleHBlY3RlZCBieSBsZXNzb24gZ2VuZXJhdG9yXHJcbiAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XHJcbiAgICAgICAgICBzZWxlY3RlZFRleHQ6IGNvbmZpZy5zb3VyY2VDb250ZW50LFxyXG4gICAgICAgICAgc291cmNlVXJsOiBjb25maWcubWV0YWRhdGEuc291cmNlVXJsLFxyXG4gICAgICAgICAgbGVzc29uVHlwZTogY29uZmlnLnN1Z2dlc3RlZFR5cGUsXHJcbiAgICAgICAgICBzdHVkZW50TGV2ZWw6IGNvbmZpZy5zdWdnZXN0ZWRMZXZlbCxcclxuICAgICAgICAgIGV4dHJhY3Rpb25NZXRhZGF0YTogY29uZmlnLm1ldGFkYXRhLFxyXG4gICAgICAgICAgYXR0cmlidXRpb246IGNvbmZpZy5hdHRyaWJ1dGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZXNzaW9uU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAvLyBGYWxsYmFjayBzdG9yYWdlXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3Bhcmtfc2VsZWN0ZWRfdGV4dCcsIGNvbmZpZy5zb3VyY2VDb250ZW50KTtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsaW5ndWFzcGFya19zb3VyY2VfdXJsJywgY29uZmlnLm1ldGFkYXRhLnNvdXJjZVVybCk7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX3R5cGUnLCBjb25maWcuc3VnZ2VzdGVkVHlwZSk7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3Bhcmtfc3R1ZGVudF9sZXZlbCcsIGNvbmZpZy5zdWdnZXN0ZWRMZXZlbCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBzdG9yZSBleHRyYWN0ZWQgY29udGVudDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3BlbiB0aGUgbGVzc29uIGludGVyZmFjZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgb3BlbkludGVyZmFjZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb247XHJcbiAgICAgIGlmICghY29uZmlnKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25maWd1cmF0aW9uIGF2YWlsYWJsZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gRXh0ZW5zaW9uIGNvbnRleHQgLSB0cnkgdG8gb3BlbiBwb3B1cFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCB3aW5kb3cuY2hyb21lLmFjdGlvbi5vcGVuUG9wdXAoKTtcclxuICAgICAgICB9IGNhdGNoIChwb3B1cEVycm9yKSB7XHJcbiAgICAgICAgICAvLyBJZiBwb3B1cCBmYWlscywgb3BlbiBpbiBuZXcgdGFiIHdpdGggbWluaW1hbCBVUkwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgLy8gQUxXQVlTIHN0b3JlIGZ1bGwgY29udGVudCBpbiBDaHJvbWUgc3RvcmFnZSwgTkVWRVIgaW4gVVJMXHJcbiAgICAgICAgICBhd2FpdCB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcclxuICAgICAgICAgICAgbGVzc29uQ29uZmlndXJhdGlvbjogY29uZmlnLFxyXG4gICAgICAgICAgICBleHRyYWN0aW9uU291cmNlOiAnd2VicGFnZScsXHJcbiAgICAgICAgICAgIGV4dHJhY3Rpb25UaW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5jaHJvbWUucnVudGltZS5nZXRVUkwoJ3BvcHVwLmh0bWwnKSk7XHJcbiAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc291cmNlJywgJ2V4dHJhY3Rpb24nKTtcclxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhdXRvUG9wdWxhdGUnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NvdXJjZVVybCcsIGVuY29kZVVSSUNvbXBvbmVudChjb25maWcubWV0YWRhdGEuc291cmNlVXJsKSk7XHJcbiAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndHlwZScsIGNvbmZpZy5zdWdnZXN0ZWRUeXBlKTtcclxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdsZXZlbCcsIGNvbmZpZy5zdWdnZXN0ZWRMZXZlbCk7XHJcbiAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndGl0bGUnLCBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLm1ldGFkYXRhLnRpdGxlKSk7XHJcbiAgICAgICAgICAvLyBOT1RFOiBOTyAnY29udGVudCcgcGFyYW1ldGVyIHRvIGF2b2lkIFVSTCBsZW5ndGggbGltaXRzXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBTdG9yZWQgZnVsbCBjb250ZW50IGluIENocm9tZSBzdG9yYWdlLCBvcGVuaW5nIHBvcHVwIHdpdGggbWV0YWRhdGEtb25seSBVUkwnKTtcclxuICAgICAgICAgIGF3YWl0IHdpbmRvdy5jaHJvbWUudGFicy5jcmVhdGUoeyB1cmw6IHVybC50b1N0cmluZygpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIFdlYiBjb250ZXh0IC0gQUxXQVlTIHN0b3JlIGZ1bGwgY29udGVudCBpbiBzZXNzaW9uIHN0b3JhZ2UsIE5FVkVSIGluIFVSTFxyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBVc2UgbWluaW1hbCBVUkwgcGFyYW1ldGVycyAtIE5PIENPTlRFTlQgaW4gVVJMIHRvIGF2b2lkIHRydW5jYXRpb25cclxuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCcvcG9wdXAnLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcclxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc291cmNlJywgJ2V4dHJhY3Rpb24nKTtcclxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYXV0b1BvcHVsYXRlJywgJ3RydWUnKTtcclxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc291cmNlVXJsJywgZW5jb2RlVVJJQ29tcG9uZW50KGNvbmZpZy5tZXRhZGF0YS5zb3VyY2VVcmwpKTtcclxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgndHlwZScsIGNvbmZpZy5zdWdnZXN0ZWRUeXBlKTtcclxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnbGV2ZWwnLCBjb25maWcuc3VnZ2VzdGVkTGV2ZWwpO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0aXRsZScsIGVuY29kZVVSSUNvbXBvbmVudChjb25maWcubWV0YWRhdGEudGl0bGUpKTtcclxuICAgICAgICAvLyBOT1RFOiBOTyAnY29udGVudCcgcGFyYW1ldGVyIHRvIGF2b2lkIFVSTCBsZW5ndGggbGltaXRzXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIFN0b3JlZCBmdWxsIGNvbnRlbnQgaW4gc2Vzc2lvbiBzdG9yYWdlLCBvcGVuaW5nIHBvcHVwIHdpdGggbWV0YWRhdGEtb25seSBVUkwnKTtcclxuICAgICAgICB3aW5kb3cub3Blbih1cmwudG9TdHJpbmcoKSwgJ19ibGFuaycpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gb3BlbiBpbnRlcmZhY2U6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICogTG9hZCBjb25maWd1cmF0aW9uIGZyb20gbG9jYWxTdG9yYWdlIChmYWxsYmFjayBmb3IgZXh0ZW5zaW9uIGNvbnRleHQgaW52YWxpZGF0aW9uKVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGxvYWRGcm9tTG9jYWxTdG9yYWdlKCk6IExlc3NvblByZUNvbmZpZ3VyYXRpb24gfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycpO1xyXG4gICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShzdG9yZWQpO1xyXG4gICAgICAgIC8vIFBhcnNlIGRhdGVzXHJcbiAgICAgICAgaWYgKGNvbmZpZy5tZXRhZGF0YT8uZXh0cmFjdGVkQXQpIHtcclxuICAgICAgICAgIGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCA9IG5ldyBEYXRlKGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBMb2FkZWQgY29uZmlndXJhdGlvbiBmcm9tIGxvY2FsU3RvcmFnZSBmYWxsYmFjaycpO1xyXG4gICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gbG9hZCBmcm9tIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgZXh0cmFjdGlvbiBjb25maWd1cmF0aW9uIGZyb20gYWxsIHN0b3JhZ2UgdHlwZXNcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNsZWFyRXh0cmFjdGlvbkNvbmZpZ3VyYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDbGVhciBDaHJvbWUgc3RvcmFnZSBpZiBhdmFpbGFibGVcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jaHJvbWU/LnN0b3JhZ2UpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShbJ2xlc3NvbkNvbmZpZ3VyYXRpb24nLCAnZXh0cmFjdGVkQ29udGVudCcsICdleHRyYWN0aW9uU291cmNlJywgJ2V4dHJhY3Rpb25UaW1lc3RhbXAnXSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICh3aW5kb3cuY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIENocm9tZSBzdG9yYWdlIGNsZWFyIGVycm9yOicsIHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gY2xlYXIgQ2hyb21lIHN0b3JhZ2U6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGZhbGxiYWNrXHJcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBjbGVhciBsb2NhbFN0b3JhZ2U6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xlYXIgc2Vzc2lvblN0b3JhZ2VcclxuICAgICAgaWYgKHR5cGVvZiBzZXNzaW9uU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycpO1xyXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3Bhcmtfc2VsZWN0ZWRfdGV4dCcpO1xyXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3Bhcmtfc291cmNlX3VybCcpO1xyXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX3R5cGUnKTtcclxuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xpbmd1YXNwYXJrX3N0dWRlbnRfbGV2ZWwnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gY2xlYXIgc2Vzc2lvblN0b3JhZ2U6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIENsZWFyZWQgZXh0cmFjdGlvbiBjb25maWd1cmF0aW9uIGZyb20gYWxsIHN0b3JhZ2UgdHlwZXMnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBjbGVhciBleHRyYWN0aW9uIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgbGVzc29uIGludGVyZmFjZSBpbnRlZ3JhdGlvblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IExlc3NvbkludGVyZmFjZVV0aWxzID0ge1xyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGN1cnJlbnQgcGFnZSBpcyBsZXNzb24gaW50ZXJmYWNlIHdpdGggZXh0cmFjdGlvbiBzb3VyY2VcclxuICAgKi9cclxuICBhc3luYyBpc0V4dHJhY3Rpb25MZXNzb25JbnRlcmZhY2UoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgIGNvbnN0IGlzRXh0cmFjdGlvblNvdXJjZSA9IHVybFBhcmFtcy5nZXQoJ3NvdXJjZScpID09PSAnZXh0cmFjdGlvbic7XHJcbiAgICBjb25zdCBzaG91bGRBdXRvUG9wdWxhdGUgPSB1cmxQYXJhbXMuZ2V0KCdhdXRvUG9wdWxhdGUnKSA9PT0gJ3RydWUnO1xyXG4gICAgXHJcbiAgICByZXR1cm4gaXNFeHRyYWN0aW9uU291cmNlICYmIHNob3VsZEF1dG9Qb3B1bGF0ZTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZXh0cmFjdGlvbiBwYXJhbWV0ZXJzIGZyb20gVVJMXHJcbiAgICovXHJcbiAgZ2V0RXh0cmFjdGlvblBhcmFtcygpOiB7IHNvdXJjZTogc3RyaW5nIHwgbnVsbDsgYXV0b1BvcHVsYXRlOiBib29sZWFuIH0ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHJldHVybiB7IHNvdXJjZTogbnVsbCwgYXV0b1BvcHVsYXRlOiBmYWxzZSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc291cmNlOiB1cmxQYXJhbXMuZ2V0KCdzb3VyY2UnKSxcclxuICAgICAgYXV0b1BvcHVsYXRlOiB1cmxQYXJhbXMuZ2V0KCdhdXRvUG9wdWxhdGUnKSA9PT0gJ3RydWUnXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIENocm9tZSBBUElzIGFyZSBhdmFpbGFibGVcclxuICAgKi9cclxuICBpc0Nocm9tZUV4dGVuc2lvbkNvbnRleHQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgXHJcbiAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5jaHJvbWUgIT09ICd1bmRlZmluZWQnICYmIFxyXG4gICAgICAgICAgIHR5cGVvZiB3aW5kb3cuY2hyb21lLnN0b3JhZ2UgIT09ICd1bmRlZmluZWQnO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFNhZmUgQ2hyb21lIHN0b3JhZ2UgYWNjZXNzIHdpdGggZmFsbGJhY2tcclxuICAgKi9cclxuICBhc3luYyBzYWZlU3RvcmFnZUdldChrZXlzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBzYWZlU3RvcmFnZUdldCBjYWxsZWQgd2l0aCBrZXlzOicsIGtleXMpO1xyXG4gICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gQ2hyb21lIGV4dGVuc2lvbiBjb250ZXh0OicsIHRoaXMuaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0KCkpO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5pc0Nocm9tZUV4dGVuc2lvbkNvbnRleHQoKSkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChrZXlzLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIENocm9tZSBzdG9yYWdlIGVycm9yLCB0cnlpbmcgbG9jYWxTdG9yYWdlIGZhbGxiYWNrOicsIHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tSZXN1bHQgPSB0aGlzLmdldEZyb21Mb2NhbFN0b3JhZ2VGYWxsYmFjayhrZXlzKTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBGYWxsYmFjayByZXN1bHQ6JywgT2JqZWN0LmtleXMoZmFsbGJhY2tSZXN1bHQpKTtcclxuICAgICAgICAgICAgICByZXNvbHZlKGZhbGxiYWNrUmVzdWx0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBDaHJvbWUgc3RvcmFnZSByZXN1bHQ6JywgT2JqZWN0LmtleXMocmVzdWx0IHx8IHt9KSk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIENocm9tZSBzdG9yYWdlIGFjY2VzcyBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgY29uc3QgZmFsbGJhY2tSZXN1bHQgPSB0aGlzLmdldEZyb21Mb2NhbFN0b3JhZ2VGYWxsYmFjayhrZXlzKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIEV4Y2VwdGlvbiBmYWxsYmFjayByZXN1bHQ6JywgT2JqZWN0LmtleXMoZmFsbGJhY2tSZXN1bHQpKTtcclxuICAgICAgICAgIHJlc29sdmUoZmFsbGJhY2tSZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGZhbGxiYWNrUmVzdWx0ID0gdGhpcy5nZXRGcm9tTG9jYWxTdG9yYWdlRmFsbGJhY2soa2V5cyk7XHJcbiAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBEaXJlY3QgZmFsbGJhY2sgcmVzdWx0OicsIE9iamVjdC5rZXlzKGZhbGxiYWNrUmVzdWx0KSk7XHJcbiAgICByZXR1cm4gZmFsbGJhY2tSZXN1bHQ7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGRhdGEgZnJvbSBsb2NhbFN0b3JhZ2UgZmFsbGJhY2tcclxuICAgKi9cclxuICBnZXRGcm9tTG9jYWxTdG9yYWdlRmFsbGJhY2soa2V5czogc3RyaW5nW10pOiBhbnkge1xyXG4gICAgY29uc3QgcmVzdWx0OiBhbnkgPSB7fTtcclxuICAgIFxyXG4gICAgLy8gRmlyc3QgdHJ5IHRoZSBtYWluIGxlc3NvbiBjb25maWcga2V5ICh1c2VkIGJ5IGNvbnRlbnQgc2NyaXB0KVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWFpbkNvbmZpZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICAgIGlmIChtYWluQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShtYWluQ29uZmlnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBGb3VuZCBsb2NhbFN0b3JhZ2UgY29uZmlnOicsIE9iamVjdC5rZXlzKHBhcnNlZCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1hcCB0aGUgc3RvcmVkIGRhdGEgdG8gdGhlIGV4cGVjdGVkIGtleXNcclxuICAgICAgICBpZiAocGFyc2VkLmxlc3NvbkNvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICAgIHJlc3VsdC5sZXNzb25Db25maWd1cmF0aW9uID0gcGFyc2VkLmxlc3NvbkNvbmZpZ3VyYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJzZWQuZXh0cmFjdGVkQ29udGVudCkge1xyXG4gICAgICAgICAgcmVzdWx0LmV4dHJhY3RlZENvbnRlbnQgPSBwYXJzZWQuZXh0cmFjdGVkQ29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcnNlZC5zZWxlY3RlZFRleHQpIHtcclxuICAgICAgICAgIHJlc3VsdC5zZWxlY3RlZFRleHQgPSBwYXJzZWQuc2VsZWN0ZWRUZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFyc2VkLnNvdXJjZVVybCkge1xyXG4gICAgICAgICAgcmVzdWx0LnNvdXJjZVVybCA9IHBhcnNlZC5zb3VyY2VVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgbGVzc29uIGNvbmZpZ3VyYXRpb24sIHRoYXQncyB0aGUgcHJpbWFyeSBkYXRhXHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZXNzb25Db25maWd1cmF0aW9uKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIEZhaWxlZCB0byBwYXJzZSBsb2NhbFN0b3JhZ2UgY29uZmlnOicsIGVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRmFsbGJhY2sgdG8gaW5kaXZpZHVhbCBzZXNzaW9uU3RvcmFnZSBrZXlzXHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgbGluZ3Vhc3BhcmtfJHtrZXl9YCk7XHJcbiAgICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBzdG9yZWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgW0xlc3NvbkludGVyZmFjZVV0aWxzXSBGYWlsZWQgdG8gZ2V0IHNlc3Npb25TdG9yYWdlIGtleSAke2tleX06YCwgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogU2FmZSBDaHJvbWUgc3RvcmFnZSBzZXQgd2l0aCBmYWxsYmFja1xyXG4gICAqL1xyXG4gIGFzeW5jIHNhZmVTdG9yYWdlU2V0KGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICh0aGlzLmlzQ2hyb21lRXh0ZW5zaW9uQ29udGV4dCgpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLnNldChkYXRhKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIENocm9tZSBzdG9yYWdlIHNldCBmYWlsZWQsIHVzaW5nIGxvY2FsU3RvcmFnZSBmYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRmFsbGJhY2sgdG8gbG9jYWxTdG9yYWdlIHdpdGggdGhlIHNhbWUgZm9ybWF0IGFzIGNvbnRlbnQgc2NyaXB0XHJcbiAgICB0cnkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gU3RvcmVkIGRhdGEgaW4gbG9jYWxTdG9yYWdlIGZhbGxiYWNrJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gbG9jYWxTdG9yYWdlIGZhbGxiYWNrIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaW5hbCBmYWxsYmFjayB0byBzZXNzaW9uIHN0b3JhZ2VcclxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGBsaW5ndWFzcGFya18ke2tleX1gLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IGF0dHJpYnV0aW9uIHRleHQgZm9yIGRpc3BsYXlcclxuICAgKi9cclxuICBmb3JtYXRBdHRyaWJ1dGlvbihhdHRyaWJ1dGlvbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBhdHRyaWJ1dGlvbi5zdGFydHNXaXRoKCdTb3VyY2U6ICcpID8gYXR0cmlidXRpb24gOiBgU291cmNlOiAke2F0dHJpYnV0aW9ufWA7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGxlc3NvbiBtZXRhZGF0YSBkaXNwbGF5XHJcbiAgICovXHJcbiAgY3JlYXRlTWV0YWRhdGFEaXNwbGF5KG1ldGFkYXRhOiBFeHRyYWN0ZWRDb250ZW50TWV0YWRhdGEpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgcGFydHMgPSBbXTtcclxuICAgIFxyXG4gICAgaWYgKG1ldGFkYXRhLnRpdGxlKSB7XHJcbiAgICAgIHBhcnRzLnB1c2gobWV0YWRhdGEudGl0bGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWV0YWRhdGEuYXV0aG9yKSB7XHJcbiAgICAgIHBhcnRzLnB1c2goYGJ5ICR7bWV0YWRhdGEuYXV0aG9yfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAobWV0YWRhdGEuZG9tYWluKSB7XHJcbiAgICAgIHBhcnRzLnB1c2goYGZyb20gJHttZXRhZGF0YS5kb21haW59YCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHBhcnRzLnB1c2goYCR7bWV0YWRhdGEud29yZENvdW50fSB3b3Jkc2ApO1xyXG4gICAgcGFydHMucHVzaChgJHttZXRhZGF0YS5yZWFkaW5nVGltZX0gbWluIHJlYWRgKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHBhcnRzLmpvaW4oJyDigKIgJyk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRGVidWcgc3RvcmFnZSBzdGF0ZSBmb3IgdHJvdWJsZXNob290aW5nXHJcbiAgICovXHJcbiAgYXN5bmMgZGVidWdTdG9yYWdlU3RhdGUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRGVidWcgU3RvcmFnZSBTdGF0ZTonKTtcclxuICAgIGNvbnNvbGUubG9nKCctIENocm9tZSBleHRlbnNpb24gY29udGV4dDonLCB0aGlzLmlzQ2hyb21lRXh0ZW5zaW9uQ29udGV4dCgpKTtcclxuICAgIGNvbnNvbGUubG9nKCctIFVSTDonLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICBjb25zb2xlLmxvZygnLSBVUkwgcGFyYW1zOicsIE9iamVjdC5mcm9tRW50cmllcyhuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpKSk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmlzQ2hyb21lRXh0ZW5zaW9uQ29udGV4dCgpKSB7XHJcbiAgICAgIGNvbnN0IGNocm9tZURhdGEgPSBhd2FpdCB0aGlzLnNhZmVTdG9yYWdlR2V0KFsnbGVzc29uQ29uZmlndXJhdGlvbicsICdleHRyYWN0ZWRDb250ZW50JywgJ3NlbGVjdGVkVGV4dCddKTtcclxuICAgICAgY29uc29sZS5sb2coJy0gQ2hyb21lIHN0b3JhZ2U6JywgY2hyb21lRGF0YSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCctIFNlc3Npb24gc3RvcmFnZSBrZXlzOicsIE9iamVjdC5rZXlzKHNlc3Npb25TdG9yYWdlKS5maWx0ZXIoayA9PiBrLnN0YXJ0c1dpdGgoJ2xpbmd1YXNwYXJrXycpKSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICBpZiAoc2Vzc2lvbkNvbmZpZykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCctIFNlc3Npb24gY29uZmlnOicsIEpTT04ucGFyc2Uoc2Vzc2lvbkNvbmZpZykpO1xyXG4gICAgICB9IGNhdGNoIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnLSBTZXNzaW9uIGNvbmZpZyAocmF3KTonLCBzZXNzaW9uQ29uZmlnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTsiXSwibmFtZXMiOlsiTGVzc29uSW50ZXJmYWNlQnJpZGdlIiwiaW5pdGlhbGl6ZSIsImNhbGxiYWNrcyIsIm9wZW5MZXNzb25JbnRlcmZhY2UiLCJjb250ZW50IiwiY29uZmlnIiwiY3JlYXRlTGVzc29uUHJlQ29uZmlndXJhdGlvbiIsImN1cnJlbnRDb25maWd1cmF0aW9uIiwic3RvcmVDb25maWd1cmF0aW9uIiwib3BlbkludGVyZmFjZSIsInN0YXRlIiwibGVzc29uSW50ZXJmYWNlT3BlbiIsImV4dHJhY3Rpb25Db25maXJtZWQiLCJvbkxlc3NvbkludGVyZmFjZU9wZW5lZCIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsIm9uRXJyb3IiLCJwb3B1bGF0ZUludGVyZmFjZSIsInN0b3JlRXh0cmFjdGVkQ29udGVudCIsImNvbnRlbnRQcmVQb3B1bGF0ZWQiLCJyZWFkeUZvckdlbmVyYXRpb24iLCJvbkNvbnRlbnRQcmVQb3B1bGF0ZWQiLCJzb3VyY2VDb250ZW50IiwiZW5hYmxlQ29udGVudEVkaXRpbmciLCJhbGxvd0NvbnRlbnRFZGl0aW5nIiwicHJlc2VydmVVc2VyQ3VzdG9taXphdGlvbnMiLCJ1c2VyQ2FuTW9kaWZ5U2V0dGluZ3MiLCJpbnRlZ3JhdGVXaXRoRXhpc3RpbmdXb3JrZmxvdyIsImdldFN0YXRlIiwiZ2V0Q3VycmVudENvbmZpZ3VyYXRpb24iLCJpc0V4dHJhY3Rpb25Tb3VyY2UiLCJ3aW5kb3ciLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJsb2NhdGlvbiIsInNlYXJjaCIsImdldCIsImNocm9tZSIsInN0b3JhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImxvY2FsIiwicmVzdWx0IiwicnVudGltZSIsImxhc3RFcnJvciIsIndhcm4iLCJmYWxsYmFja0NvbmZpZyIsImxvYWRGcm9tTG9jYWxTdG9yYWdlIiwiZXh0cmFjdGlvblNvdXJjZSIsImxvY2FsU3RvcmFnZUNvbmZpZyIsInNlc3Npb25TdG9yYWdlIiwic3RvcmVkIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImxvYWRFeHRyYWN0aW9uQ29uZmlndXJhdGlvbiIsImxlc3NvbkNvbmZpZ3VyYXRpb24iLCJtZXRhZGF0YSIsImV4dHJhY3RlZEF0IiwiRGF0ZSIsInNvdXJjZVBhcmFtIiwibG9nIiwiY29udGVudFBhcmFtIiwiZGVjb2RlZENvbnRlbnQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWdnZXN0ZWRUeXBlIiwic3VnZ2VzdGVkTGV2ZWwiLCJ0aXRsZSIsInNvdXJjZVVybCIsImRvbWFpbiIsIlVSTCIsImhvc3RuYW1lIiwid29yZENvdW50Iiwic3BsaXQiLCJsZW5ndGgiLCJyZWFkaW5nVGltZSIsIk1hdGgiLCJjZWlsIiwiY29tcGxleGl0eSIsInN1aXRhYmlsaXR5U2NvcmUiLCJhdHRyaWJ1dGlvbiIsInVybEVycm9yIiwiY2xlYXJFeHRyYWN0aW9uQ29uZmlndXJhdGlvbiIsInJlbW92ZSIsInJlbW92ZUl0ZW0iLCJ0ZXh0Iiwic3VnZ2VzdGVkTGVzc29uVHlwZSIsInN1Z2dlc3RlZENFRlJMZXZlbCIsImF1dGhvciIsInNvdXJjZUluZm8iLCJxdWFsaXR5IiwiYmFubmVySW1hZ2VzIiwiYmFubmVySW1hZ2UiLCJpbWFnZXMiLCJzZXQiLCJleHRyYWN0aW9uVGltZXN0YW1wIiwibm93Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNlbGVjdGVkVGV4dCIsImxlc3NvblR5cGUiLCJzdHVkZW50TGV2ZWwiLCJleHRyYWN0aW9uTWV0YWRhdGEiLCJhY3Rpb24iLCJvcGVuUG9wdXAiLCJwb3B1cEVycm9yIiwidXJsIiwiZ2V0VVJMIiwic2VhcmNoUGFyYW1zIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGFicyIsImNyZWF0ZSIsInRvU3RyaW5nIiwib3JpZ2luIiwib3BlbiIsImxvY2FsU3RvcmFnZSIsInNldHRpbmdzQ3VzdG9taXphYmxlIiwiTGVzc29uSW50ZXJmYWNlVXRpbHMiLCJpc0V4dHJhY3Rpb25MZXNzb25JbnRlcmZhY2UiLCJzaG91bGRBdXRvUG9wdWxhdGUiLCJnZXRFeHRyYWN0aW9uUGFyYW1zIiwic291cmNlIiwiYXV0b1BvcHVsYXRlIiwiaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0Iiwic2FmZVN0b3JhZ2VHZXQiLCJrZXlzIiwiZmFsbGJhY2tSZXN1bHQiLCJnZXRGcm9tTG9jYWxTdG9yYWdlRmFsbGJhY2siLCJPYmplY3QiLCJtYWluQ29uZmlnIiwicGFyc2VkIiwiZXh0cmFjdGVkQ29udGVudCIsImtleSIsInNhZmVTdG9yYWdlU2V0IiwiZGF0YSIsInZhbHVlIiwiZW50cmllcyIsImZvcm1hdEF0dHJpYnV0aW9uIiwic3RhcnRzV2l0aCIsImNyZWF0ZU1ldGFkYXRhRGlzcGxheSIsInBhcnRzIiwicHVzaCIsImpvaW4iLCJkZWJ1Z1N0b3JhZ2VTdGF0ZSIsImhyZWYiLCJmcm9tRW50cmllcyIsImNocm9tZURhdGEiLCJmaWx0ZXIiLCJrIiwic2Vzc2lvbkNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/lesson-interface-bridge.ts\n"));

/***/ })

});