"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/popup/page",{

/***/ "(app-pages-browser)/./lib/export-utils.ts":
/*!*****************************!*\
  !*** ./lib/export-utils.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonExporter: function() { return /* binding */ LessonExporter; },\n/* harmony export */   lessonExporter: function() { return /* binding */ lessonExporter; },\n/* harmony export */   safeStripMarkdown: function() { return /* binding */ safeStripMarkdown; },\n/* harmony export */   stripMarkdown: function() { return /* binding */ stripMarkdown; }\n/* harmony export */ });\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jspdf */ \"(app-pages-browser)/./node_modules/jspdf/dist/jspdf.es.min.js\");\n/* harmony import */ var docx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! docx */ \"(app-pages-browser)/./node_modules/docx/dist/index.mjs\");\n/* harmony import */ var _avatar_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./avatar-utils */ \"(app-pages-browser)/./lib/avatar-utils.ts\");\n\n\n\n/**\n * Strips markdown formatting from text while preserving content.\n * Handles bold syntax (**text**, __text__) and italic syntax (*text*, _text_).\n * Recursively processes nested markdown.\n * \n * @param text - The text containing markdown syntax\n * @returns The text with markdown syntax removed\n */ function stripMarkdown(text) {\n    if (!text || typeof text !== \"string\") {\n        return text;\n    }\n    let result = text;\n    // Remove bold syntax: **text** and __text__\n    // Use non-greedy matching to handle nested markdown\n    result = result.replace(/\\*\\*(.+?)\\*\\*/g, \"$1\");\n    result = result.replace(/__(.+?)__/g, \"$1\");\n    // Remove italic syntax: *text* and _text_\n    // Use non-greedy matching to handle nested markdown\n    result = result.replace(/\\*(.+?)\\*/g, \"$1\");\n    result = result.replace(/_(.+?)_/g, \"$1\");\n    return result;\n}\n/**\n * Safely strips markdown formatting from text with error handling.\n * If stripping fails, returns the original text and logs the error.\n * This ensures export processes never break due to markdown stripping failures.\n * \n * @param text - The text containing markdown syntax\n * @returns The text with markdown syntax removed, or original text if stripping fails\n */ function safeStripMarkdown(text) {\n    try {\n        return stripMarkdown(text);\n    } catch (error) {\n        console.error(\"Markdown stripping error:\", error);\n        console.error(\"Failed text:\", text === null || text === void 0 ? void 0 : text.substring(0, 100));\n        // Return original text if stripping fails to ensure export continues\n        return text;\n    }\n}\nclass LessonExporter {\n    formatDate() {\n        return new Date().toLocaleDateString(\"en-US\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        });\n    }\n    validateLessonData(lessonData) {\n        var _sections_vocabulary, _sections_reading, _sections_comprehension, _sections_discussion, _sections_grammar, _sections_pronunciation, _sections_wrapup;\n        console.log(\"Validating lesson data:\", lessonData);\n        if (!lessonData) {\n            throw new Error(\"Lesson data is required\");\n        }\n        if (!lessonData.lessonTitle) {\n            throw new Error(\"AI-generated lesson title is required\");\n        }\n        if (!lessonData.lessonType) {\n            throw new Error(\"Lesson type is required\");\n        }\n        if (!lessonData.studentLevel) {\n            throw new Error(\"Student level is required\");\n        }\n        if (!lessonData.targetLanguage) {\n            throw new Error(\"Target language is required\");\n        }\n        if (!lessonData.sections) {\n            throw new Error(\"Lesson sections are required\");\n        }\n        // Validate sections structure with detailed logging\n        const sections = lessonData.sections;\n        console.log(\"Validating section types:\", {\n            warmup: {\n                type: typeof sections.warmup,\n                isArray: Array.isArray(sections.warmup),\n                value: sections.warmup\n            },\n            vocabulary: {\n                type: typeof sections.vocabulary,\n                isArray: Array.isArray(sections.vocabulary),\n                length: (_sections_vocabulary = sections.vocabulary) === null || _sections_vocabulary === void 0 ? void 0 : _sections_vocabulary.length\n            },\n            reading: {\n                type: typeof sections.reading,\n                length: (_sections_reading = sections.reading) === null || _sections_reading === void 0 ? void 0 : _sections_reading.length\n            },\n            comprehension: {\n                type: typeof sections.comprehension,\n                isArray: Array.isArray(sections.comprehension),\n                length: (_sections_comprehension = sections.comprehension) === null || _sections_comprehension === void 0 ? void 0 : _sections_comprehension.length\n            },\n            discussion: {\n                type: typeof sections.discussion,\n                isArray: Array.isArray(sections.discussion),\n                length: (_sections_discussion = sections.discussion) === null || _sections_discussion === void 0 ? void 0 : _sections_discussion.length\n            },\n            grammar: {\n                type: typeof sections.grammar,\n                hasFocus: !!((_sections_grammar = sections.grammar) === null || _sections_grammar === void 0 ? void 0 : _sections_grammar.focus)\n            },\n            pronunciation: {\n                type: typeof sections.pronunciation,\n                hasWord: !!((_sections_pronunciation = sections.pronunciation) === null || _sections_pronunciation === void 0 ? void 0 : _sections_pronunciation.word)\n            },\n            wrapup: {\n                type: typeof sections.wrapup,\n                isArray: Array.isArray(sections.wrapup),\n                length: (_sections_wrapup = sections.wrapup) === null || _sections_wrapup === void 0 ? void 0 : _sections_wrapup.length\n            }\n        });\n        if (!Array.isArray(sections.warmup)) {\n            console.warn(\"Warmup section is not an array:\", sections.warmup);\n        }\n        if (!Array.isArray(sections.vocabulary)) {\n            console.warn(\"Vocabulary section is not an array:\", sections.vocabulary);\n        }\n        if (typeof sections.reading !== \"string\") {\n            console.warn(\"Reading section is not a string:\", sections.reading);\n        }\n        if (!Array.isArray(sections.comprehension)) {\n            console.warn(\"Comprehension section is not an array:\", sections.comprehension);\n        }\n        if (!Array.isArray(sections.discussion)) {\n            console.warn(\"Discussion section is not an array:\", sections.discussion);\n        }\n        if (!sections.grammar || !sections.grammar.focus) {\n            console.warn(\"Grammar section is malformed:\", sections.grammar);\n        }\n        if (!sections.pronunciation || !sections.pronunciation.word) {\n            console.warn(\"Pronunciation section is malformed:\", sections.pronunciation);\n        }\n        if (!Array.isArray(sections.wrapup)) {\n            console.warn(\"Wrapup section is not an array:\", sections.wrapup);\n        }\n        console.log(\"Lesson data validation completed\");\n    }\n    async exportToPDF(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting PDF export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            // Check if we're in a browser environment\n            if (false) {}\n            // Check if jsPDF is available\n            if (typeof jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"] === \"undefined\") {\n                throw new Error(\"jsPDF library is not available\");\n            }\n            console.log(\"Environment checks passed\");\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            console.log(\"Creating jsPDF instance...\");\n            const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n            console.log(\"jsPDF instance created successfully\");\n            let yPosition = 20;\n            const pageHeight = pdf.internal.pageSize.height;\n            const margin = 20;\n            const lineHeight = 7;\n            console.log(\"PDF dimensions:\", {\n                pageHeight,\n                margin,\n                lineHeight\n            });\n            // Typography hierarchy constants (matching web interface)\n            const FONT_SIZES = {\n                LESSON_TITLE: 32,\n                SECTION_HEADER: 28,\n                MAIN_CONTENT: 16,\n                INSTRUCTIONS: 15,\n                SUPPLEMENTARY: 14 // Answer keys, explanations\n            };\n            // Helper function to add text with word wrapping\n            const addText = function(text) {\n                let fontSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : FONT_SIZES.MAIN_CONTENT, isBold = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false, isItalic = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false, indent = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 0;\n                try {\n                    // Sanitize text to prevent PDF errors and strip markdown formatting\n                    const sanitizedText = text.replace(/\\*\\*(.*?)\\*\\*/g, \"$1\") // Remove bold markdown (**text**)\n                    .replace(/\\*(.*?)\\*/g, \"$1\") // Remove italic markdown (*text*)\n                    .replace(/__(.*?)__/g, \"$1\") // Remove bold markdown (__text__)\n                    .replace(/_(.*?)_/g, \"$1\") // Remove italic markdown (_text_)\n                    .replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, \"\") // Remove control characters\n                    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\u3000-\\u303F]/g, \" \") // Replace special spaces\n                    .trim();\n                    if (!sanitizedText) {\n                        console.warn(\"Empty text after sanitization, skipping\");\n                        return;\n                    }\n                    console.log('Adding text: \"'.concat(sanitizedText.substring(0, 50)).concat(sanitizedText.length > 50 ? \"...\" : \"\", '\"'));\n                    pdf.setFontSize(fontSize);\n                    // Set font style based on bold and italic flags\n                    let fontStyle = \"normal\";\n                    if (isBold && isItalic) {\n                        fontStyle = \"bolditalic\";\n                    } else if (isBold) {\n                        fontStyle = \"bold\";\n                    } else if (isItalic) {\n                        fontStyle = \"italic\";\n                    }\n                    pdf.setFont(\"helvetica\", fontStyle);\n                    const maxWidth = pdf.internal.pageSize.width - margin * 2 - indent;\n                    const lines = pdf.splitTextToSize(sanitizedText, maxWidth);\n                    for (const line of lines){\n                        if (yPosition > pageHeight - 30) {\n                            pdf.addPage();\n                            yPosition = 20;\n                        }\n                        pdf.text(line, margin + indent, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 3 // Extra spacing after text block\n                    ;\n                } catch (error) {\n                    console.error(\"Error adding text to PDF:\", error, \"Text:\", text);\n                    throw error;\n                }\n            };\n            const addSection = (title, content)=>{\n                if (yPosition > pageHeight - 50) {\n                    pdf.addPage();\n                    yPosition = 20;\n                }\n                addText(title, FONT_SIZES.SECTION_HEADER, true);\n                yPosition += 5;\n                content();\n                yPosition += 10;\n            };\n            // Title and metadata\n            addText(lessonData.lessonTitle, FONT_SIZES.LESSON_TITLE, true);\n            addText(\"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)), FONT_SIZES.SUPPLEMENTARY);\n            addText(\"Generated on: \".concat(this.formatDate()), FONT_SIZES.SUPPLEMENTARY);\n            yPosition += 10;\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                addSection(\"Warm-up Questions\", ()=>{\n                    const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                    warmupQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                addSection(\"Key Vocabulary\", ()=>{\n                    const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                    let vocabIndex = 0 // Track actual vocabulary item numbering\n                    ;\n                    vocabularyItems.forEach((item, index)=>{\n                        // First item might be an instruction\n                        if (index === 0 && item.word === \"INSTRUCTION\") {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(item.meaning, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                            return;\n                        }\n                        vocabIndex++;\n                        addText(\"\".concat(vocabIndex, \". \").concat(item.word), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                        addText(\"   Meaning: \".concat(item.meaning), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                        // Handle both old format (example) and new format (examples array)\n                        if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                            addText(\"   Examples:\", FONT_SIZES.INSTRUCTIONS, true, false, 15);\n                            const examples = Array.isArray(item.examples) ? item.examples : [];\n                            examples.forEach((example, exIndex)=>{\n                                addText(\"   \".concat(exIndex + 1, '. \"').concat(example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, false, 20);\n                            });\n                        } else if (item.example) {\n                            addText('   Example: \"'.concat(item.example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                        }\n                        yPosition += 3;\n                    });\n                });\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                addSection(\"Reading Passage\", ()=>{\n                    const readingContent = lessonData.sections.reading;\n                    const parts = readingContent.split(\"\\n\\n\");\n                    // Check if first part is an instruction\n                    if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                        // Add instruction with light green background (italic) - manual rendering\n                        pdf.setFillColor(238, 247, 220) // #EEF7DC\n                        ;\n                        pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                        pdf.setFont(\"helvetica\", \"italic\");\n                        const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                        const instructionLines = pdf.splitTextToSize(parts[0], instructionWidth);\n                        const instructionHeight = instructionLines.length * lineHeight + 6;\n                        // Draw background rectangle\n                        pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                        // Add instruction text\n                        for (const line of instructionLines){\n                            pdf.text(line, margin + 10, yPosition);\n                            yPosition += lineHeight;\n                        }\n                        yPosition += 8 // Extra spacing after instruction\n                        ;\n                        // Add the rest of the reading passage\n                        addText(parts.slice(1).join(\"\\n\\n\"), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    } else {\n                        // No instruction, display as before\n                        addText(readingContent, FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    }\n                });\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                addSection(\"Reading Comprehension\", ()=>{\n                    const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                    comprehensionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light blue background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                addSection(\"Discussion Questions\", ()=>{\n                    const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                    discussionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                addSection(\"Dialogue Practice\", ()=>{\n                    const dialogueSection = lessonData.sections.dialoguePractice;\n                    // Add instruction with light green background color (italic) - manually without addText\n                    pdf.setFillColor(238, 247, 220) // #EEF7DC\n                    ;\n                    pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                    pdf.setFont(\"helvetica\", \"italic\");\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    // Draw background rectangle\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    // Add instruction text\n                    for (const line of instructionLines){\n                        pdf.text(line, margin + 10, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 8 // Extra spacing after instruction before dialogue starts\n                    ;\n                    // Enhance dialogue with avatar names\n                    const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialoguePractice\");\n                    // Add dialogue lines with character names and spacing\n                    const dialoguePracticeLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                    dialoguePracticeLines.forEach((line, index)=>{\n                        // Add 3px gap between dialogue lines (except first)\n                        if (index > 0) {\n                            yPosition += 3;\n                        }\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                        yPosition += 5;\n                        addText(\"Follow-up Questions:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                        const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                        followUpQuestions.forEach((question, index)=>{\n                            addText(\"\".concat(index + 1, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                        });\n                    }\n                });\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                addSection(\"Dialogue Fill-in-the-Gap\", ()=>{\n                    const dialogueSection = lessonData.sections.dialogueFillGap;\n                    // Add instruction with light blue background color (italic) - manually without addText\n                    pdf.setFillColor(241, 250, 255) // #F1FAFF\n                    ;\n                    pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                    pdf.setFont(\"helvetica\", \"italic\");\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    // Draw background rectangle\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    // Add instruction text\n                    for (const line of instructionLines){\n                        pdf.text(line, margin + 10, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 8 // Extra spacing after instruction before dialogue starts\n                    ;\n                    // Enhance dialogue with avatar names\n                    const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialogueFillGap\");\n                    // Add dialogue lines with character names and spacing\n                    const dialogueFillGapLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                    dialogueFillGapLines.forEach((line, index)=>{\n                        // Add 3px gap between dialogue lines (except first)\n                        if (index > 0) {\n                            yPosition += 3;\n                        }\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                        yPosition += 5;\n                        addText(\"Answer Key:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                        addText(dialogueSection.answers.join(\", \"), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                    }\n                });\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                addSection(\"Grammar Focus\", ()=>{\n                    addText(lessonData.sections.grammar.focus, FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                    yPosition += 5;\n                    // Grammar Explanation (Form, Usage, Notes)\n                    if (lessonData.sections.grammar.explanation) {\n                        const explanation = lessonData.sections.grammar.explanation;\n                        if (explanation.form) {\n                            const formWidth = pdf.internal.pageSize.width - margin * 2 - 20;\n                            // Calculate heights for background\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            const formTitleLines = pdf.splitTextToSize(\"Form:\", formWidth);\n                            const formTitleHeight = formTitleLines.length * lineHeight;\n                            pdf.setFont(\"helvetica\", \"normal\");\n                            const formLines = pdf.splitTextToSize(explanation.form, formWidth);\n                            const formContentHeight = formLines.length * lineHeight;\n                            const totalFormHeight = formTitleHeight + formContentHeight + 8;\n                            // Draw background rectangle\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF light blue\n                            ;\n                            pdf.rect(margin + 10, yPosition - 4, formWidth, totalFormHeight, \"F\");\n                            // Draw title text in black\n                            pdf.setTextColor(0, 0, 0) // Black text\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            pdf.text(\"Form:\", margin + 10, yPosition);\n                            yPosition += lineHeight;\n                            // Draw content text in black\n                            pdf.setFont(\"helvetica\", \"normal\");\n                            for (const line of formLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 5;\n                        }\n                        if (explanation.usage) {\n                            const usageWidth = pdf.internal.pageSize.width - margin * 2 - 20;\n                            // Calculate heights for background\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            const usageTitleLines = pdf.splitTextToSize(\"Usage:\", usageWidth);\n                            const usageTitleHeight = usageTitleLines.length * lineHeight;\n                            pdf.setFont(\"helvetica\", \"normal\");\n                            const usageLines = pdf.splitTextToSize(explanation.usage, usageWidth);\n                            const usageContentHeight = usageLines.length * lineHeight;\n                            const totalUsageHeight = usageTitleHeight + usageContentHeight + 8;\n                            // Draw background rectangle\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF light blue\n                            ;\n                            pdf.rect(margin + 10, yPosition - 4, usageWidth, totalUsageHeight, \"F\");\n                            // Draw title text in black\n                            pdf.setTextColor(0, 0, 0) // Black text\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            pdf.text(\"Usage:\", margin + 10, yPosition);\n                            yPosition += lineHeight;\n                            // Draw content text in black\n                            pdf.setFont(\"helvetica\", \"normal\");\n                            for (const line of usageLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 5;\n                        }\n                        if (explanation.levelNotes) {\n                            const noteWidth = pdf.internal.pageSize.width - margin * 2 - 20;\n                            // Calculate heights for background\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            const noteTitleLines = pdf.splitTextToSize(\"Note:\", noteWidth);\n                            const noteTitleHeight = noteTitleLines.length * lineHeight;\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const noteLines = pdf.splitTextToSize(explanation.levelNotes, noteWidth);\n                            const noteContentHeight = noteLines.length * lineHeight;\n                            const totalNoteHeight = noteTitleHeight + noteContentHeight + 8;\n                            // Draw background rectangle\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF light blue\n                            ;\n                            pdf.rect(margin + 10, yPosition - 4, noteWidth, totalNoteHeight, \"F\");\n                            // Draw title text in black\n                            pdf.setTextColor(0, 0, 0) // Black text\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            pdf.text(\"Note:\", margin + 10, yPosition);\n                            yPosition += lineHeight;\n                            // Draw content text in black (italic)\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            for (const line of noteLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8;\n                        }\n                    }\n                    // Examples\n                    addText(\"Examples:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                    const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                    grammarExamples.forEach((example, index)=>{\n                        addText(example, FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                    });\n                    yPosition += 5;\n                    // Practice Exercises\n                    addText(\"Practice Exercises:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                    // Check for new format (exercises) or old format (exercise)\n                    if (lessonData.sections.grammar.exercises && Array.isArray(lessonData.sections.grammar.exercises)) {\n                        // New format with structured exercises\n                        lessonData.sections.grammar.exercises.forEach((exercise, index)=>{\n                            addText(\"\".concat(index + 1, \". \").concat(exercise.prompt), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                            if (exercise.answer) {\n                                addText(\"Answer: \".concat(exercise.answer), FONT_SIZES.SUPPLEMENTARY, false, false, 20);\n                            }\n                            if (exercise.explanation) {\n                                addText(exercise.explanation, FONT_SIZES.SUPPLEMENTARY, false, true, 20);\n                            }\n                            yPosition += 3;\n                        });\n                    } else if (lessonData.sections.grammar.exercise && Array.isArray(lessonData.sections.grammar.exercise)) {\n                        // Old format\n                        const grammarExercises = lessonData.sections.grammar.exercise;\n                        grammarExercises.forEach((exercise, index)=>{\n                            addText(\"\".concat(index + 1, \". \").concat(exercise), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                        });\n                    }\n                });\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                addSection(\"Pronunciation Practice\", ()=>{\n                    const pronSection = lessonData.sections.pronunciation;\n                    // Add instruction if present\n                    if (pronSection.instruction) {\n                        const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 20;\n                        // Calculate height for background\n                        pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                        pdf.setFont(\"helvetica\", \"italic\");\n                        const instructionLines = pdf.splitTextToSize(pronSection.instruction, instructionWidth);\n                        const instructionHeight = instructionLines.length * lineHeight + 8;\n                        // Draw background rectangle\n                        pdf.setFillColor(241, 250, 255) // #F1FAFF light blue\n                        ;\n                        pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                        // Draw instruction text in black\n                        pdf.setTextColor(0, 0, 0);\n                        for (const line of instructionLines){\n                            pdf.text(line, margin + 10, yPosition);\n                            yPosition += lineHeight;\n                        }\n                        yPosition += 8;\n                    }\n                    // Handle both old format (single word) and new format (words array)\n                    if (pronSection.words && Array.isArray(pronSection.words) && pronSection.words.length > 0) {\n                        // New format with multiple words\n                        pronSection.words.forEach((wordItem, index)=>{\n                            if (index > 0) yPosition += 8 // Spacing between words\n                            ;\n                            // Check for page break\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            // Word and IPA - use addText for proper wrapping and sanitization\n                            pdf.setTextColor(0, 0, 0);\n                            pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                            pdf.setFont(\"helvetica\", \"bold\");\n                            const wordText = wordItem.word || \"N/A\";\n                            const ipaText = wordItem.ipa || \"N/A\";\n                            // Word on its own line (bold)\n                            const maxWidth = pdf.internal.pageSize.width - margin * 2 - 20;\n                            const wordLines = pdf.splitTextToSize(wordText, maxWidth);\n                            wordLines.forEach((line)=>{\n                                if (yPosition > pageHeight - 30) {\n                                    pdf.addPage();\n                                    yPosition = 20;\n                                }\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            });\n                            // IPA on next line (normal font, in brackets)\n                            pdf.setFont(\"helvetica\", \"normal\");\n                            pdf.setFontSize(FONT_SIZES.SUPPLEMENTARY);\n                            const ipaLines = pdf.splitTextToSize(\"IPA: [\".concat(ipaText, \"]\"), maxWidth);\n                            ipaLines.forEach((line)=>{\n                                if (yPosition > pageHeight - 30) {\n                                    pdf.addPage();\n                                    yPosition = 20;\n                                }\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            });\n                            yPosition += 3;\n                            // Difficult Sounds\n                            if (wordItem.difficultSounds && wordItem.difficultSounds.length > 0) {\n                                if (yPosition > pageHeight - 30) {\n                                    pdf.addPage();\n                                    yPosition = 20;\n                                }\n                                pdf.setTextColor(0, 0, 0);\n                                pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                                pdf.setFont(\"helvetica\", \"normal\");\n                                pdf.text(\"Difficult Sounds:\", margin + 10, yPosition);\n                                yPosition += lineHeight;\n                                pdf.setFontSize(FONT_SIZES.SUPPLEMENTARY);\n                                const soundsText = wordItem.difficultSounds.map((s)=>\"/\".concat(s, \"/\")).join(\"  \");\n                                const soundsMaxWidth = pdf.internal.pageSize.width - margin * 2 - 25;\n                                const soundsLines = pdf.splitTextToSize(soundsText, soundsMaxWidth);\n                                soundsLines.forEach((line)=>{\n                                    if (yPosition > pageHeight - 30) {\n                                        pdf.addPage();\n                                        yPosition = 20;\n                                    }\n                                    pdf.text(line, margin + 15, yPosition);\n                                    yPosition += lineHeight;\n                                });\n                                yPosition += 3;\n                            }\n                            // Pronunciation Tips\n                            if (wordItem.tips && wordItem.tips.length > 0) {\n                                if (yPosition > pageHeight - 30) {\n                                    pdf.addPage();\n                                    yPosition = 20;\n                                }\n                                pdf.setTextColor(0, 0, 0);\n                                pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                                pdf.setFont(\"helvetica\", \"normal\");\n                                pdf.text(\"Pronunciation Tips:\", margin + 10, yPosition);\n                                yPosition += lineHeight;\n                                pdf.setFontSize(FONT_SIZES.SUPPLEMENTARY);\n                                pdf.setFont(\"helvetica\", \"normal\");\n                                wordItem.tips.forEach((tip)=>{\n                                    // Wrap long tips properly\n                                    const tipMaxWidth = pdf.internal.pageSize.width - margin * 2 - 25;\n                                    const tipLines = pdf.splitTextToSize(\"• \".concat(tip), tipMaxWidth);\n                                    tipLines.forEach((line)=>{\n                                        if (yPosition > pageHeight - 30) {\n                                            pdf.addPage();\n                                            yPosition = 20;\n                                        }\n                                        pdf.text(line, margin + 15, yPosition);\n                                        yPosition += lineHeight;\n                                    });\n                                });\n                                yPosition += 3;\n                            }\n                            // Practice Sentence\n                            if (wordItem.practiceSentence) {\n                                if (yPosition > pageHeight - 30) {\n                                    pdf.addPage();\n                                    yPosition = 20;\n                                }\n                                pdf.setTextColor(0, 0, 0);\n                                pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                                pdf.setFont(\"helvetica\", \"normal\");\n                                pdf.text(\"Practice Sentence:\", margin + 10, yPosition);\n                                yPosition += lineHeight;\n                                pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                                const sentenceMaxWidth = pdf.internal.pageSize.width - margin * 2 - 25;\n                                const sentenceLines = pdf.splitTextToSize(wordItem.practiceSentence, sentenceMaxWidth);\n                                sentenceLines.forEach((line)=>{\n                                    if (yPosition > pageHeight - 30) {\n                                        pdf.addPage();\n                                        yPosition = 20;\n                                    }\n                                    pdf.text(line, margin + 15, yPosition);\n                                    yPosition += lineHeight;\n                                });\n                                yPosition += 3;\n                            }\n                        });\n                    } else if (pronSection.word) {\n                        // Old format with single word\n                        addText(\"Word: \".concat(pronSection.word || \"N/A\"), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                        addText(\"IPA: \".concat(pronSection.ipa || \"N/A\"), FONT_SIZES.SUPPLEMENTARY, false, false, 10);\n                        if (pronSection.practice) {\n                            addText('Practice: \"'.concat(pronSection.practice, '\"'), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    } else {\n                        addText(\"No pronunciation data available\", FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    }\n                });\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                addSection(\"Lesson Wrap-up\", ()=>{\n                    const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                    wrapupQuestions.forEach((question, index)=>{\n                        // First item is the instruction - manual rendering (no numbering)\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            // Footer\n            const pageCount = pdf.internal.getNumberOfPages();\n            for(let i = 1; i <= pageCount; i++){\n                pdf.setPage(i);\n                pdf.setFontSize(8);\n                pdf.setFont(\"helvetica\", \"normal\");\n                pdf.text(\"Generated by LinguaSpark - Page \".concat(i, \" of \").concat(pageCount), margin, pageHeight - 10);\n            }\n            // Download the PDF\n            try {\n                const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".pdf\");\n                console.log(\"Saving PDF with filename:\", fileName);\n                pdf.save(fileName);\n                console.log(\"PDF export completed successfully\");\n            } catch (saveError) {\n                console.error(\"Error saving PDF:\", saveError);\n                throw new Error(\"Failed to save PDF: \".concat(saveError instanceof Error ? saveError.message : \"Unknown save error\"));\n            }\n        } catch (error) {\n            console.error(\"PDF export error:\", error);\n            console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n            console.error(\"Error details:\", {\n                name: error instanceof Error ? error.name : \"Unknown\",\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                lessonDataKeys: lessonData ? Object.keys(lessonData) : \"No lesson data\",\n                sectionsKeys: (lessonData === null || lessonData === void 0 ? void 0 : lessonData.sections) ? Object.keys(lessonData.sections) : \"No sections\",\n                enabledSectionsKeys: enabledSections ? Object.keys(enabledSections) : \"No enabled sections\"\n            });\n            throw new Error(\"PDF export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n    async exportToWord(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting Word export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            const children = [];\n            // Typography hierarchy constants (in half-points for Word - multiply by 2)\n            // 32px = 24pt, 28px = 21pt, 16px = 12pt, 15px = 11.25pt, 14px = 10.5pt\n            const WORD_FONT_SIZES = {\n                LESSON_TITLE: 48,\n                SECTION_HEADER: 42,\n                MAIN_CONTENT: 24,\n                INSTRUCTIONS: 23,\n                SUPPLEMENTARY: 21 // 10.5pt (14px equivalent)\n            };\n            // Title and metadata\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: safeStripMarkdown(lessonData.lessonTitle),\n                        bold: true,\n                        size: WORD_FONT_SIZES.LESSON_TITLE\n                    })\n                ],\n                heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.TITLE,\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    after: 400\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 200\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated on: \".concat(this.formatDate()),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 400\n                }\n            }));\n            // Helper function to add section\n            const addSection = (title, content)=>{\n                children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: title,\n                            bold: true,\n                            size: WORD_FONT_SIZES.SECTION_HEADER,\n                            underline: {\n                                type: docx__WEBPACK_IMPORTED_MODULE_1__.UnderlineType.SINGLE\n                            }\n                        })\n                    ],\n                    heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.HEADING_2,\n                    spacing: {\n                        before: 400,\n                        after: 200\n                    }\n                }));\n                children.push(...content);\n            };\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                const warmupContent = warmupQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Warm-up Questions\", warmupContent);\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                const vocabContent = [];\n                const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                vocabularyItems.forEach((item, index)=>{\n                    // First item might be an instruction\n                    if (index === 0 && item.word === \"INSTRUCTION\") {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(item.meaning),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        return;\n                    }\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(index + 1, \". \").concat(safeStripMarkdown(item.word)),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"   Meaning: \".concat(safeStripMarkdown(item.meaning)),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    // Handle both old format (example) and new format (examples array)\n                    if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"   Examples:\",\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    bold: true\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        // Additional safety check before forEach\n                        const examples = Array.isArray(item.examples) ? item.examples : [];\n                        examples.forEach((example, exIndex)=>{\n                            vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"      \".concat(exIndex + 1, '. \"').concat(safeStripMarkdown(example), '\"'),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                        italics: true\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                        });\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\"\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    } else if (item.example) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: '   Example: \"'.concat(safeStripMarkdown(item.example), '\"'),\n                                    size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            }\n                        }));\n                    }\n                });\n                addSection(\"Key Vocabulary\", vocabContent);\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                const readingText = lessonData.sections.reading;\n                const parts = readingText.split(\"\\n\\n\");\n                const readingContent = [];\n                // Check if first part is an instruction\n                if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                    // Add instruction with light green background\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(parts[0]),\n                                size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                italics: true\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        },\n                        shading: {\n                            fill: \"EEF7DC\"\n                        },\n                        border: {\n                            left: {\n                                color: \"CCCCCC\",\n                                size: 6,\n                                style: \"single\"\n                            }\n                        }\n                    }));\n                    // Add the rest of the reading passage\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(parts.slice(1).join(\"\\n\\n\")),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                } else {\n                    // No instruction, display as before\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(readingText),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                }\n                addSection(\"Reading Passage\", readingContent);\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                const comprehensionContent = comprehensionQuestions.map((question, index)=>{\n                    // First item is the instruction with light blue background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Reading Comprehension\", comprehensionContent);\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                const discussionContent = discussionQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Discussion Questions\", discussionContent);\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                const dialoguePracticeContent = [];\n                const dialogueSection = lessonData.sections.dialoguePractice;\n                // Add instruction with light green background (#EEF7DC)\n                dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: safeStripMarkdown(dialogueSection.instruction),\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"EEF7DC\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Enhance dialogue with avatar names\n                const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialoguePractice\");\n                // Add dialogue lines with character names in bold and 3px spacing between lines\n                const dialogueLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                dialogueLines.forEach((line, index)=>{\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(safeStripMarkdown(line.character), \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(line.line),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            before: index === 0 ? 0 : 60,\n                            after: 0\n                        }\n                    }));\n                });\n                // Add follow-up questions if any\n                if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Follow-up Questions:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                    followUpQuestions.forEach((question, index)=>{\n                        dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index + 1, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    });\n                }\n                addSection(\"Dialogue Practice\", dialoguePracticeContent);\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                const dialogueFillGapContent = [];\n                const dialogueSection = lessonData.sections.dialogueFillGap;\n                // Add instruction with light blue background (#F1FAFF)\n                dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: safeStripMarkdown(dialogueSection.instruction),\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"F1FAFF\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Enhance dialogue with avatar names\n                const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialogueFillGap\");\n                // Add dialogue lines with character names in bold and 3px spacing between lines\n                const dialogueFillGapLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                dialogueFillGapLines.forEach((line, index)=>{\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(safeStripMarkdown(line.character), \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(line.line),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            before: index === 0 ? 0 : 60,\n                            after: 0\n                        }\n                    }));\n                });\n                // Add answer key if any\n                if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Answer Key:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(dialogueSection.answers.join(\", \")),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                }\n                addSection(\"Dialogue Fill-in-the-Gap\", dialogueFillGapContent);\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                const grammarContent = [];\n                // Grammar topic/focus\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: safeStripMarkdown(lessonData.sections.grammar.focus),\n                            bold: true,\n                            size: WORD_FONT_SIZES.MAIN_CONTENT\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    }\n                }));\n                // Grammar Explanation (Form, Usage, Notes)\n                if (lessonData.sections.grammar.explanation) {\n                    const explanation = lessonData.sections.grammar.explanation;\n                    if (explanation.form) {\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"Form:\",\n                                    bold: true,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(explanation.form),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                    }\n                    if (explanation.usage) {\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"Usage:\",\n                                    bold: true,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(explanation.usage),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                    }\n                    if (explanation.levelNotes) {\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"Note:\",\n                                    bold: true,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(explanation.levelNotes),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                    }\n                }\n                // Examples\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Examples:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        after: 100\n                    }\n                }));\n                const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                grammarExamples.forEach((example)=>{\n                    grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(example),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                // Practice Exercises\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Practice Exercises:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        before: 200,\n                        after: 100\n                    }\n                }));\n                // Check for new format (exercises) or old format (exercise)\n                if (lessonData.sections.grammar.exercises && Array.isArray(lessonData.sections.grammar.exercises)) {\n                    // New format with structured exercises\n                    lessonData.sections.grammar.exercises.forEach((exercise, index)=>{\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index + 1, \". \").concat(exercise.prompt)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        if (exercise.answer) {\n                            grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"Answer: \".concat(safeStripMarkdown(exercise.answer)),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                        }\n                        if (exercise.explanation) {\n                            grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: safeStripMarkdown(exercise.explanation),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                        italics: true\n                                    })\n                                ],\n                                spacing: {\n                                    after: 150\n                                }\n                            }));\n                        }\n                    });\n                } else if (lessonData.sections.grammar.exercise && Array.isArray(lessonData.sections.grammar.exercise)) {\n                    // Old format\n                    const grammarExercises = lessonData.sections.grammar.exercise;\n                    grammarExercises.forEach((exercise, index)=>{\n                        grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index + 1, \". \").concat(exercise)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    });\n                }\n                addSection(\"Grammar Focus\", grammarContent);\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                const pronSection = lessonData.sections.pronunciation;\n                const pronunciationContent = [];\n                // Add instruction if present\n                if (pronSection.instruction) {\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(pronSection.instruction),\n                                size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                italics: true\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        },\n                        shading: {\n                            fill: \"F1FAFF\"\n                        },\n                        border: {\n                            left: {\n                                color: \"CCCCCC\",\n                                size: 6,\n                                style: \"single\"\n                            }\n                        }\n                    }));\n                }\n                // Handle both old format (single word) and new format (words array)\n                if (pronSection.words && Array.isArray(pronSection.words) && pronSection.words.length > 0) {\n                    // New format with multiple words\n                    pronSection.words.forEach((wordItem, index)=>{\n                        if (index > 0) {\n                            // Add spacing between words\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"\"\n                                    })\n                                ],\n                                spacing: {\n                                    before: 300\n                                }\n                            }));\n                        }\n                        // Word and IPA\n                        pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\".concat(safeStripMarkdown(wordItem.word || \"N/A\"), \" \"),\n                                    bold: true,\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                }),\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"[\".concat(safeStripMarkdown(wordItem.ipa || \"N/A\"), \"]\"),\n                                    size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        }));\n                        // Difficult Sounds\n                        if (wordItem.difficultSounds && wordItem.difficultSounds.length > 0) {\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"Difficult Sounds:\",\n                                        size: WORD_FONT_SIZES.INSTRUCTIONS\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: wordItem.difficultSounds.map((s)=>\"/\".concat(s, \"/\")).join(\"  \"),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                    })\n                                ],\n                                spacing: {\n                                    after: 150\n                                }\n                            }));\n                        }\n                        // Pronunciation Tips\n                        if (wordItem.tips && wordItem.tips.length > 0) {\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"Pronunciation Tips:\",\n                                        size: WORD_FONT_SIZES.INSTRUCTIONS\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                            wordItem.tips.forEach((tip)=>{\n                                pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                    children: [\n                                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                            text: \"• \".concat(safeStripMarkdown(tip)),\n                                            size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                        })\n                                    ],\n                                    spacing: {\n                                        after: 100\n                                    }\n                                }));\n                            });\n                        }\n                        // Practice Sentence\n                        if (wordItem.practiceSentence) {\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"Practice Sentence:\",\n                                        size: WORD_FONT_SIZES.INSTRUCTIONS\n                                    })\n                                ],\n                                spacing: {\n                                    before: 150,\n                                    after: 100\n                                }\n                            }));\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: safeStripMarkdown(wordItem.practiceSentence),\n                                        size: WORD_FONT_SIZES.MAIN_CONTENT\n                                    })\n                                ],\n                                spacing: {\n                                    after: 150\n                                }\n                            }));\n                        }\n                    });\n                } else if (pronSection.word) {\n                    // Old format with single word\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Word: \".concat(safeStripMarkdown(pronSection.word || \"N/A\")),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }));\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"IPA: \".concat(safeStripMarkdown(pronSection.ipa || \"N/A\")),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }));\n                    if (pronSection.practice) {\n                        pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: 'Practice: \"'.concat(safeStripMarkdown(pronSection.practice), '\"'),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            }\n                        }));\n                    }\n                } else {\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"No pronunciation data available\",\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                }\n                addSection(\"Pronunciation Practice\", pronunciationContent);\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                const wrapupContent = wrapupQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Lesson Wrap-up\", wrapupContent);\n            }\n            // Footer\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated by LinguaSpark\",\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                        italics: true\n                    })\n                ],\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    before: 600\n                }\n            }));\n            // Create document\n            const doc = new docx__WEBPACK_IMPORTED_MODULE_1__.Document({\n                sections: [\n                    {\n                        properties: {},\n                        children: children\n                    }\n                ]\n            });\n            // Generate and download\n            console.log(\"Creating Word document...\");\n            const buffer = await docx__WEBPACK_IMPORTED_MODULE_1__.Packer.toBuffer(doc);\n            console.log(\"Document buffer created, size:\", buffer.byteLength);\n            const blob = new Blob([\n                buffer\n            ], {\n                type: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n            });\n            const url = URL.createObjectURL(blob);\n            const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".docx\");\n            console.log(\"Downloading Word document with filename:\", fileName);\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            URL.revokeObjectURL(url);\n            console.log(\"Word export completed successfully\");\n        } catch (error) {\n            console.error(\"Word export error:\", error);\n            throw new Error(\"Word export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n}\nconst lessonExporter = new LessonExporter();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9leHBvcnQtdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QjtBQUM4RTtBQUM1QztBQUUzRDs7Ozs7OztDQU9DLEdBQ00sU0FBU1MsY0FBY0MsSUFBWTtJQUN4QyxJQUFJLENBQUNBLFFBQVEsT0FBT0EsU0FBUyxVQUFVO1FBQ3JDLE9BQU9BO0lBQ1Q7SUFFQSxJQUFJQyxTQUFTRDtJQUViLDRDQUE0QztJQUM1QyxvREFBb0Q7SUFDcERDLFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxrQkFBa0I7SUFDMUNELFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxjQUFjO0lBRXRDLDBDQUEwQztJQUMxQyxvREFBb0Q7SUFDcERELFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxjQUFjO0lBQ3RDRCxTQUFTQSxPQUFPQyxPQUFPLENBQUMsWUFBWTtJQUVwQyxPQUFPRDtBQUNUO0FBRUE7Ozs7Ozs7Q0FPQyxHQUNNLFNBQVNFLGtCQUFrQkgsSUFBWTtJQUM1QyxJQUFJO1FBQ0YsT0FBT0QsY0FBY0M7SUFDdkIsRUFBRSxPQUFPSSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDQyxRQUFRRCxLQUFLLENBQUMsZ0JBQWdCSixpQkFBQUEsMkJBQUFBLEtBQU1NLFNBQVMsQ0FBQyxHQUFHO1FBQ2pELHFFQUFxRTtRQUNyRSxPQUFPTjtJQUNUO0FBQ0Y7QUE0RE8sTUFBTU87SUFDSEMsYUFBcUI7UUFDM0IsT0FBTyxJQUFJQyxPQUFPQyxrQkFBa0IsQ0FBQyxTQUFTO1lBQzVDQyxNQUFNO1lBQ05DLE9BQU87WUFDUEMsS0FBSztRQUNQO0lBQ0Y7SUFJUUMsbUJBQW1CQyxVQUFzQixFQUFRO1lBMEJnREMsc0JBQ25EQSxtQkFDNERBLHlCQUNUQSxzQkFDL0NBLG1CQUNXQSx5QkFDd0JBO1FBL0IzRlgsUUFBUVksR0FBRyxDQUFDLDJCQUEyQkY7UUFFdkMsSUFBSSxDQUFDQSxZQUFZO1lBQ2YsTUFBTSxJQUFJRyxN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Z0JBQUVyTSxNQUFNO1lBQTBFO1lBQ3pILE1BQU0wTSxNQUFNQyxJQUFJQyxlQUFlLENBQUNKO1lBQ2hDLE1BQU1qRCxXQUFXLEdBQW1DaEssT0FBaENBLFdBQVdLLFVBQVUsRUFBQyxZQUFxQ1gsT0FBM0JNLFdBQVdNLFlBQVksRUFBQyxLQUFjLE9BQVhaLEtBQUt1SyxHQUFHLElBQUc7WUFFMUYzSyxRQUFRWSxHQUFHLENBQUMsNENBQTRDOEo7WUFDeEQsTUFBTXNELE9BQU9DLFNBQVNDLGFBQWEsQ0FBQztZQUNwQ0YsS0FBS0csSUFBSSxHQUFHTjtZQUNaRyxLQUFLSSxRQUFRLEdBQUcxRDtZQUNoQnVELFNBQVNJLElBQUksQ0FBQ0MsV0FBVyxDQUFDTjtZQUMxQkEsS0FBS08sS0FBSztZQUNWTixTQUFTSSxJQUFJLENBQUNHLFdBQVcsQ0FBQ1I7WUFDMUJGLElBQUlXLGVBQWUsQ0FBQ1o7WUFDcEI3TixRQUFRWSxHQUFHLENBQUM7UUFDZCxFQUFFLE9BQU9iLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLHNCQUFzQkE7WUFDcEMsTUFBTSxJQUFJYyxNQUFNLHVCQUFnRixPQUF6RGQsaUJBQWlCYyxRQUFRZCxNQUFNK0ssT0FBTyxHQUFHO1FBQ2xGO0lBQ0Y7QUFDRjtBQUVPLE1BQU00RCxpQkFBaUIsSUFBSXhPLGlCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvZXhwb3J0LXV0aWxzLnRzPzEwZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGpzUERGIGZyb20gXCJqc3BkZlwiXG5pbXBvcnQgeyBEb2N1bWVudCwgUGFja2VyLCBQYXJhZ3JhcGgsIFRleHRSdW4sIEhlYWRpbmdMZXZlbCwgQWxpZ25tZW50VHlwZSwgVW5kZXJsaW5lVHlwZSB9IGZyb20gXCJkb2N4XCJcbmltcG9ydCB7IGVuaGFuY2VEaWFsb2d1ZVdpdGhBdmF0YXJzIH0gZnJvbSBcIi4vYXZhdGFyLXV0aWxzXCJcblxuLyoqXG4gKiBTdHJpcHMgbWFya2Rvd24gZm9ybWF0dGluZyBmcm9tIHRleHQgd2hpbGUgcHJlc2VydmluZyBjb250ZW50LlxuICogSGFuZGxlcyBib2xkIHN5bnRheCAoKip0ZXh0KiosIF9fdGV4dF9fKSBhbmQgaXRhbGljIHN5bnRheCAoKnRleHQqLCBfdGV4dF8pLlxuICogUmVjdXJzaXZlbHkgcHJvY2Vzc2VzIG5lc3RlZCBtYXJrZG93bi5cbiAqIFxuICogQHBhcmFtIHRleHQgLSBUaGUgdGV4dCBjb250YWluaW5nIG1hcmtkb3duIHN5bnRheFxuICogQHJldHVybnMgVGhlIHRleHQgd2l0aCBtYXJrZG93biBzeW50YXggcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXRleHQgfHwgdHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHRleHRcbiAgfVxuXG4gIGxldCByZXN1bHQgPSB0ZXh0XG5cbiAgLy8gUmVtb3ZlIGJvbGQgc3ludGF4OiAqKnRleHQqKiBhbmQgX190ZXh0X19cbiAgLy8gVXNlIG5vbi1ncmVlZHkgbWF0Y2hpbmcgdG8gaGFuZGxlIG5lc3RlZCBtYXJrZG93blxuICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFwqXFwqKC4rPylcXCpcXCovZywgJyQxJylcbiAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL19fKC4rPylfXy9nLCAnJDEnKVxuXG4gIC8vIFJlbW92ZSBpdGFsaWMgc3ludGF4OiAqdGV4dCogYW5kIF90ZXh0X1xuICAvLyBVc2Ugbm9uLWdyZWVkeSBtYXRjaGluZyB0byBoYW5kbGUgbmVzdGVkIG1hcmtkb3duXG4gIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXCooLis/KVxcKi9nLCAnJDEnKVxuICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXyguKz8pXy9nLCAnJDEnKVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLyoqXG4gKiBTYWZlbHkgc3RyaXBzIG1hcmtkb3duIGZvcm1hdHRpbmcgZnJvbSB0ZXh0IHdpdGggZXJyb3IgaGFuZGxpbmcuXG4gKiBJZiBzdHJpcHBpbmcgZmFpbHMsIHJldHVybnMgdGhlIG9yaWdpbmFsIHRleHQgYW5kIGxvZ3MgdGhlIGVycm9yLlxuICogVGhpcyBlbnN1cmVzIGV4cG9ydCBwcm9jZXNzZXMgbmV2ZXIgYnJlYWsgZHVlIHRvIG1hcmtkb3duIHN0cmlwcGluZyBmYWlsdXJlcy5cbiAqIFxuICogQHBhcmFtIHRleHQgLSBUaGUgdGV4dCBjb250YWluaW5nIG1hcmtkb3duIHN5bnRheFxuICogQHJldHVybnMgVGhlIHRleHQgd2l0aCBtYXJrZG93biBzeW50YXggcmVtb3ZlZCwgb3Igb3JpZ2luYWwgdGV4dCBpZiBzdHJpcHBpbmcgZmFpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVTdHJpcE1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHN0cmlwTWFya2Rvd24odGV4dClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNYXJrZG93biBzdHJpcHBpbmcgZXJyb3I6JywgZXJyb3IpXG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRleHQ6JywgdGV4dD8uc3Vic3RyaW5nKDAsIDEwMCkpXG4gICAgLy8gUmV0dXJuIG9yaWdpbmFsIHRleHQgaWYgc3RyaXBwaW5nIGZhaWxzIHRvIGVuc3VyZSBleHBvcnQgY29udGludWVzXG4gICAgcmV0dXJuIHRleHRcbiAgfVxufVxuXG5pbnRlcmZhY2UgTGVzc29uRGF0YSB7XG4gIGxlc3NvblRpdGxlOiBzdHJpbmdcbiAgbGVzc29uVHlwZTogc3RyaW5nXG4gIHN0dWRlbnRMZXZlbDogc3RyaW5nXG4gIHRhcmdldExhbmd1YWdlOiBzdHJpbmdcbiAgaWQ/OiBzdHJpbmdcbiAgc2VjdGlvbnM6IHtcbiAgICB3YXJtdXA6IHN0cmluZ1tdXG4gICAgdm9jYWJ1bGFyeTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IG1lYW5pbmc6IHN0cmluZzsgZXhhbXBsZT86IHN0cmluZzsgZXhhbXBsZXM/OiBzdHJpbmdbXSB9PlxuICAgIHJlYWRpbmc6IHN0cmluZ1xuICAgIGNvbXByZWhlbnNpb246IHN0cmluZ1tdXG4gICAgZGlzY3Vzc2lvbjogc3RyaW5nW11cbiAgICBkaWFsb2d1ZVByYWN0aWNlPzoge1xuICAgICAgaW5zdHJ1Y3Rpb246IHN0cmluZ1xuICAgICAgZGlhbG9ndWU6IEFycmF5PHsgY2hhcmFjdGVyOiBzdHJpbmc7IGxpbmU6IHN0cmluZyB9PlxuICAgICAgZm9sbG93VXBRdWVzdGlvbnM6IHN0cmluZ1tdXG4gICAgfVxuICAgIGRpYWxvZ3VlRmlsbEdhcD86IHtcbiAgICAgIGluc3RydWN0aW9uOiBzdHJpbmdcbiAgICAgIGRpYWxvZ3VlOiBBcnJheTx7IGNoYXJhY3Rlcjogc3RyaW5nOyBsaW5lOiBzdHJpbmc7IGlzR2FwPzogYm9vbGVhbiB9PlxuICAgICAgYW5zd2Vyczogc3RyaW5nW11cbiAgICB9XG4gICAgZ3JhbW1hcjoge1xuICAgICAgZm9jdXM6IHN0cmluZ1xuICAgICAgZXhwbGFuYXRpb24/OiB7XG4gICAgICAgIGZvcm0/OiBzdHJpbmdcbiAgICAgICAgdXNhZ2U/OiBzdHJpbmdcbiAgICAgICAgbGV2ZWxOb3Rlcz86IHN0cmluZ1xuICAgICAgfVxuICAgICAgZXhhbXBsZXM6IHN0cmluZ1tdXG4gICAgICBleGVyY2lzZT86IHN0cmluZ1tdXG4gICAgICBleGVyY2lzZXM/OiBBcnJheTx7XG4gICAgICAgIHByb21wdDogc3RyaW5nXG4gICAgICAgIGFuc3dlcj86IHN0cmluZ1xuICAgICAgICBleHBsYW5hdGlvbj86IHN0cmluZ1xuICAgICAgfT5cbiAgICB9XG4gICAgcHJvbnVuY2lhdGlvbjoge1xuICAgICAgaW5zdHJ1Y3Rpb24/OiBzdHJpbmdcbiAgICAgIHdvcmQ/OiBzdHJpbmdcbiAgICAgIGlwYT86IHN0cmluZ1xuICAgICAgcHJhY3RpY2U/OiBzdHJpbmdcbiAgICAgIHdvcmRzPzogQXJyYXk8e1xuICAgICAgICB3b3JkOiBzdHJpbmdcbiAgICAgICAgaXBhOiBzdHJpbmdcbiAgICAgICAgZGlmZmljdWx0U291bmRzPzogc3RyaW5nW11cbiAgICAgICAgdGlwcz86IHN0cmluZ1tdXG4gICAgICAgIHByYWN0aWNlU2VudGVuY2U/OiBzdHJpbmdcbiAgICAgIH0+XG4gICAgICB0b25ndWVUd2lzdGVycz86IEFycmF5PHtcbiAgICAgICAgdGV4dDogc3RyaW5nXG4gICAgICAgIHRhcmdldFNvdW5kcz86IHN0cmluZ1tdXG4gICAgICB9PlxuICAgIH1cbiAgICB3cmFwdXA6IHN0cmluZ1tdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExlc3NvbkV4cG9ydGVyIHtcbiAgcHJpdmF0ZSBmb3JtYXREYXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwge1xuICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICBtb250aDogXCJsb25nXCIsXG4gICAgICBkYXk6IFwibnVtZXJpY1wiLFxuICAgIH0pXG4gIH1cblxuXG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUxlc3NvbkRhdGEobGVzc29uRGF0YTogTGVzc29uRGF0YSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW5nIGxlc3NvbiBkYXRhOicsIGxlc3NvbkRhdGEpXG5cbiAgICBpZiAoIWxlc3NvbkRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTGVzc29uIGRhdGEgaXMgcmVxdWlyZWQnKVxuICAgIH1cbiAgICBpZiAoIWxlc3NvbkRhdGEubGVzc29uVGl0bGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQUktZ2VuZXJhdGVkIGxlc3NvbiB0aXRsZSBpcyByZXF1aXJlZCcpXG4gICAgfVxuICAgIGlmICghbGVzc29uRGF0YS5sZXNzb25UeXBlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlc3NvbiB0eXBlIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLnN0dWRlbnRMZXZlbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdHVkZW50IGxldmVsIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhcmdldCBsYW5ndWFnZSBpcyByZXF1aXJlZCcpXG4gICAgfVxuICAgIGlmICghbGVzc29uRGF0YS5zZWN0aW9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZXNzb24gc2VjdGlvbnMgYXJlIHJlcXVpcmVkJylcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBzZWN0aW9ucyBzdHJ1Y3R1cmUgd2l0aCBkZXRhaWxlZCBsb2dnaW5nXG4gICAgY29uc3Qgc2VjdGlvbnMgPSBsZXNzb25EYXRhLnNlY3Rpb25zXG4gICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpbmcgc2VjdGlvbiB0eXBlczonLCB7XG4gICAgICB3YXJtdXA6IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLndhcm11cCwgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWN0aW9ucy53YXJtdXApLCB2YWx1ZTogc2VjdGlvbnMud2FybXVwIH0sXG4gICAgICB2b2NhYnVsYXJ5OiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy52b2NhYnVsYXJ5LCBpc0FycmF5OiBBcnJheS5pc0FycmF5KHNlY3Rpb25zLnZvY2FidWxhcnkpLCBsZW5ndGg6IHNlY3Rpb25zLnZvY2FidWxhcnk/Lmxlbmd0aCB9LFxuICAgICAgcmVhZGluZzogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMucmVhZGluZywgbGVuZ3RoOiBzZWN0aW9ucy5yZWFkaW5nPy5sZW5ndGggfSxcbiAgICAgIGNvbXByZWhlbnNpb246IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLmNvbXByZWhlbnNpb24sIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMuY29tcHJlaGVuc2lvbiksIGxlbmd0aDogc2VjdGlvbnMuY29tcHJlaGVuc2lvbj8ubGVuZ3RoIH0sXG4gICAgICBkaXNjdXNzaW9uOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy5kaXNjdXNzaW9uLCBpc0FycmF5OiBBcnJheS5pc0FycmF5KHNlY3Rpb25zLmRpc2N1c3Npb24pLCBsZW5ndGg6IHNlY3Rpb25zLmRpc2N1c3Npb24/Lmxlbmd0aCB9LFxuICAgICAgZ3JhbW1hcjogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMuZ3JhbW1hciwgaGFzRm9jdXM6ICEhc2VjdGlvbnMuZ3JhbW1hcj8uZm9jdXMgfSxcbiAgICAgIHByb251bmNpYXRpb246IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLnByb251bmNpYXRpb24sIGhhc1dvcmQ6ICEhc2VjdGlvbnMucHJvbnVuY2lhdGlvbj8ud29yZCB9LFxuICAgICAgd3JhcHVwOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy53cmFwdXAsIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMud3JhcHVwKSwgbGVuZ3RoOiBzZWN0aW9ucy53cmFwdXA/Lmxlbmd0aCB9XG4gICAgfSlcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy53YXJtdXApKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1dhcm11cCBzZWN0aW9uIGlzIG5vdCBhbiBhcnJheTonLCBzZWN0aW9ucy53YXJtdXApXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy52b2NhYnVsYXJ5KSkge1xuICAgICAgY29uc29sZS53YXJuKCdWb2NhYnVsYXJ5IHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLnZvY2FidWxhcnkpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VjdGlvbnMucmVhZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUud2FybignUmVhZGluZyBzZWN0aW9uIGlzIG5vdCBhIHN0cmluZzonLCBzZWN0aW9ucy5yZWFkaW5nKVxuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VjdGlvbnMuY29tcHJlaGVuc2lvbikpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ29tcHJlaGVuc2lvbiBzZWN0aW9uIGlzIG5vdCBhbiBhcnJheTonLCBzZWN0aW9ucy5jb21wcmVoZW5zaW9uKVxuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VjdGlvbnMuZGlzY3Vzc2lvbikpIHtcbiAgICAgIGNvbnNvbGUud2FybignRGlzY3Vzc2lvbiBzZWN0aW9uIGlzIG5vdCBhbiBhcnJheTonLCBzZWN0aW9ucy5kaXNjdXNzaW9uKVxuICAgIH1cbiAgICBpZiAoIXNlY3Rpb25zLmdyYW1tYXIgfHwgIXNlY3Rpb25zLmdyYW1tYXIuZm9jdXMpIHtcbiAgICAgIGNvbnNvbGUud2FybignR3JhbW1hciBzZWN0aW9uIGlzIG1hbGZvcm1lZDonLCBzZWN0aW9ucy5ncmFtbWFyKVxuICAgIH1cbiAgICBpZiAoIXNlY3Rpb25zLnByb251bmNpYXRpb24gfHwgIXNlY3Rpb25zLnByb251bmNpYXRpb24ud29yZCkge1xuICAgICAgY29uc29sZS53YXJuKCdQcm9udW5jaWF0aW9uIHNlY3Rpb24gaXMgbWFsZm9ybWVkOicsIHNlY3Rpb25zLnByb251bmNpYXRpb24pXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy53cmFwdXApKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1dyYXB1cCBzZWN0aW9uIGlzIG5vdCBhbiBhcnJheTonLCBzZWN0aW9ucy53cmFwdXApXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0xlc3NvbiBkYXRhIHZhbGlkYXRpb24gY29tcGxldGVkJylcbiAgfVxuXG4gIGFzeW5jIGV4cG9ydFRvUERGKGxlc3NvbkRhdGE6IExlc3NvbkRhdGEsIGVuYWJsZWRTZWN0aW9uczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIFBERiBleHBvcnQgd2l0aCBkYXRhOicsIHsgbGVzc29uRGF0YSwgZW5hYmxlZFNlY3Rpb25zIH0pXG5cbiAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUERGIGV4cG9ydCBpcyBvbmx5IGF2YWlsYWJsZSBpbiBicm93c2VyIGVudmlyb25tZW50JylcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYganNQREYgaXMgYXZhaWxhYmxlXG4gICAgICBpZiAodHlwZW9mIGpzUERGID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2pzUERGIGxpYnJhcnkgaXMgbm90IGF2YWlsYWJsZScpXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdFbnZpcm9ubWVudCBjaGVja3MgcGFzc2VkJylcbiAgICAgIHRoaXMudmFsaWRhdGVMZXNzb25EYXRhKGxlc3NvbkRhdGEpXG5cbiAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBmb3IgZW5hYmxlZCBzZWN0aW9uc1xuICAgICAgaWYgKCFlbmFibGVkU2VjdGlvbnMgfHwgT2JqZWN0LmtleXMoZW5hYmxlZFNlY3Rpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZWN0aW9ucyBlbmFibGVkIGZvciBleHBvcnQnKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcganNQREYgaW5zdGFuY2UuLi4nKVxuICAgICAgY29uc3QgcGRmID0gbmV3IGpzUERGKClcbiAgICAgIGNvbnNvbGUubG9nKCdqc1BERiBpbnN0YW5jZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpXG5cbiAgICAgIGxldCB5UG9zaXRpb24gPSAyMFxuICAgICAgY29uc3QgcGFnZUhlaWdodCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHRcbiAgICAgIGNvbnN0IG1hcmdpbiA9IDIwXG4gICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gN1xuXG4gICAgICBjb25zb2xlLmxvZygnUERGIGRpbWVuc2lvbnM6JywgeyBwYWdlSGVpZ2h0LCBtYXJnaW4sIGxpbmVIZWlnaHQgfSlcblxuICAgICAgLy8gVHlwb2dyYXBoeSBoaWVyYXJjaHkgY29uc3RhbnRzIChtYXRjaGluZyB3ZWIgaW50ZXJmYWNlKVxuICAgICAgY29uc3QgRk9OVF9TSVpFUyA9IHtcbiAgICAgICAgTEVTU09OX1RJVExFOiAzMiwgICAgICAvLyBQcmltYXJ5IGhlYWRpbmdcbiAgICAgICAgU0VDVElPTl9IRUFERVI6IDI4LCAgICAvLyBTZWNvbmRhcnkgaGVhZGluZ3NcbiAgICAgICAgTUFJTl9DT05URU5UOiAxNiwgICAgICAvLyBCb2R5IHRleHRcbiAgICAgICAgSU5TVFJVQ1RJT05TOiAxNSwgICAgICAvLyBHdWlkYW5jZSB0ZXh0XG4gICAgICAgIFNVUFBMRU1FTlRBUlk6IDE0ICAgICAgLy8gQW5zd2VyIGtleXMsIGV4cGxhbmF0aW9uc1xuICAgICAgfVxuXG4gICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWRkIHRleHQgd2l0aCB3b3JkIHdyYXBwaW5nXG4gICAgICBjb25zdCBhZGRUZXh0ID0gKHRleHQ6IHN0cmluZywgZm9udFNpemUgPSBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgaXNCb2xkID0gZmFsc2UsIGlzSXRhbGljID0gZmFsc2UsIGluZGVudCA9IDApID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBTYW5pdGl6ZSB0ZXh0IHRvIHByZXZlbnQgUERGIGVycm9ycyBhbmQgc3RyaXAgbWFya2Rvd24gZm9ybWF0dGluZ1xuICAgICAgICAgIGNvbnN0IHNhbml0aXplZFRleHQgPSB0ZXh0XG4gICAgICAgICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJyQxJykgLy8gUmVtb3ZlIGJvbGQgbWFya2Rvd24gKCoqdGV4dCoqKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICckMScpIC8vIFJlbW92ZSBpdGFsaWMgbWFya2Rvd24gKCp0ZXh0KilcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fXyguKj8pX18vZywgJyQxJykgLy8gUmVtb3ZlIGJvbGQgbWFya2Rvd24gKF9fdGV4dF9fKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18oLio/KV8vZywgJyQxJykgLy8gUmVtb3ZlIGl0YWxpYyBtYXJrZG93biAoX3RleHRfKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMDAwLVxcdTAwMUZcXHUwMDdGLVxcdTAwOUZdL2csICcnKSAvLyBSZW1vdmUgY29udHJvbCBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAucmVwbGFjZSgvW1xcdTIwMDAtXFx1MjA2RlxcdTJFMDAtXFx1MkU3RlxcdTMwMDAtXFx1MzAzRl0vZywgJyAnKSAvLyBSZXBsYWNlIHNwZWNpYWwgc3BhY2VzXG4gICAgICAgICAgICAudHJpbSgpXG5cbiAgICAgICAgICBpZiAoIXNhbml0aXplZFRleHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRW1wdHkgdGV4dCBhZnRlciBzYW5pdGl6YXRpb24sIHNraXBwaW5nJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBBZGRpbmcgdGV4dDogXCIke3Nhbml0aXplZFRleHQuc3Vic3RyaW5nKDAsIDUwKX0ke3Nhbml0aXplZFRleHQubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnfVwiYClcblxuICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShmb250U2l6ZSlcbiAgICAgICAgICAvLyBTZXQgZm9udCBzdHlsZSBiYXNlZCBvbiBib2xkIGFuZCBpdGFsaWMgZmxhZ3NcbiAgICAgICAgICBsZXQgZm9udFN0eWxlID0gXCJub3JtYWxcIlxuICAgICAgICAgIGlmIChpc0JvbGQgJiYgaXNJdGFsaWMpIHtcbiAgICAgICAgICAgIGZvbnRTdHlsZSA9IFwiYm9sZGl0YWxpY1wiXG4gICAgICAgICAgfSBlbHNlIGlmIChpc0JvbGQpIHtcbiAgICAgICAgICAgIGZvbnRTdHlsZSA9IFwiYm9sZFwiXG4gICAgICAgICAgfSBlbHNlIGlmIChpc0l0YWxpYykge1xuICAgICAgICAgICAgZm9udFN0eWxlID0gXCJpdGFsaWNcIlxuICAgICAgICAgIH1cbiAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBmb250U3R5bGUpXG5cbiAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSBpbmRlbnRcbiAgICAgICAgICBjb25zdCBsaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUoc2FuaXRpemVkVGV4dCwgbWF4V2lkdGgpXG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgcGRmLmFkZFBhZ2UoKVxuICAgICAgICAgICAgICB5UG9zaXRpb24gPSAyMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGRmLnRleHQobGluZSwgbWFyZ2luICsgaW5kZW50LCB5UG9zaXRpb24pXG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgICB5UG9zaXRpb24gKz0gMyAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIHRleHQgYmxvY2tcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgdGV4dCB0byBQREY6JywgZXJyb3IsICdUZXh0OicsIHRleHQpXG4gICAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhZGRTZWN0aW9uID0gKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6ICgpID0+IHZvaWQpID0+IHtcbiAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSA1MCkge1xuICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICB5UG9zaXRpb24gPSAyMFxuICAgICAgICB9XG4gICAgICAgIGFkZFRleHQodGl0bGUsIEZPTlRfU0laRVMuU0VDVElPTl9IRUFERVIsIHRydWUpXG4gICAgICAgIHlQb3NpdGlvbiArPSA1XG4gICAgICAgIGNvbnRlbnQoKVxuICAgICAgICB5UG9zaXRpb24gKz0gMTBcbiAgICAgIH1cblxuICAgICAgLy8gVGl0bGUgYW5kIG1ldGFkYXRhXG4gICAgICBhZGRUZXh0KGxlc3NvbkRhdGEubGVzc29uVGl0bGUsIEZPTlRfU0laRVMuTEVTU09OX1RJVExFLCB0cnVlKVxuICAgICAgYWRkVGV4dChcbiAgICAgICAgYFRhcmdldCBMYW5ndWFnZTogJHtsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGVzc29uRGF0YS50YXJnZXRMYW5ndWFnZS5zbGljZSgxKX1gLFxuICAgICAgICBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICApXG4gICAgICBhZGRUZXh0KGBHZW5lcmF0ZWQgb246ICR7dGhpcy5mb3JtYXREYXRlKCl9YCwgRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZKVxuICAgICAgeVBvc2l0aW9uICs9IDEwXG5cbiAgICAgIC8vIEFkZCBzZWN0aW9ucyBiYXNlZCBvbiBlbmFibGVkIHN0YXRlXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLndhcm11cCAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLndhcm11cCkge1xuICAgICAgICBhZGRTZWN0aW9uKFwiV2FybS11cCBRdWVzdGlvbnNcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdhcm11cFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXApID8gbGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXAgOiBbXVxuICAgICAgICAgIHdhcm11cFF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gaXMgdGhlIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCAoaXRhbGljKSAtIG1hbnVhbCByZW5kZXJpbmdcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLnZvY2FidWxhcnkgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy52b2NhYnVsYXJ5KSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJLZXkgVm9jYWJ1bGFyeVwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUl0ZW1zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkpID8gbGVzc29uRGF0YS5zZWN0aW9ucy52b2NhYnVsYXJ5IDogW11cbiAgICAgICAgICBsZXQgdm9jYWJJbmRleCA9IDAgLy8gVHJhY2sgYWN0dWFsIHZvY2FidWxhcnkgaXRlbSBudW1iZXJpbmdcbiAgICAgICAgICB2b2NhYnVsYXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gbWlnaHQgYmUgYW4gaW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBpdGVtLndvcmQgPT09IFwiSU5TVFJVQ1RJT05cIikge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDI0MSwgMjUwLCAyNTUpIC8vICNGMUZBRkZcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShpdGVtLm1lYW5pbmcsIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uSGVpZ2h0ID0gaW5zdHJ1Y3Rpb25MaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0ICsgNlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgaW5zdHJ1Y3Rpb25XaWR0aCwgaW5zdHJ1Y3Rpb25IZWlnaHQsICdGJylcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB0ZXh0XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICAgICAgcGRmLnRleHQobGluZSwgbWFyZ2luICsgMTAsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSA4IC8vIEV4dHJhIHNwYWNpbmcgYWZ0ZXIgaW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZvY2FiSW5kZXgrK1xuICAgICAgICAgICAgYWRkVGV4dChgJHt2b2NhYkluZGV4fS4gJHtpdGVtLndvcmR9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIHRydWUsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIGFkZFRleHQoYCAgIE1lYW5pbmc6ICR7aXRlbS5tZWFuaW5nfWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDE1KVxuXG4gICAgICAgICAgICAvLyBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChleGFtcGxlKSBhbmQgbmV3IGZvcm1hdCAoZXhhbXBsZXMgYXJyYXkpXG4gICAgICAgICAgICBpZiAoaXRlbS5leGFtcGxlcyAmJiBBcnJheS5pc0FycmF5KGl0ZW0uZXhhbXBsZXMpICYmIGl0ZW0uZXhhbXBsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBhZGRUZXh0KGAgICBFeGFtcGxlczpgLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgZmFsc2UsIDE1KVxuICAgICAgICAgICAgICBjb25zdCBleGFtcGxlcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5leGFtcGxlcykgPyBpdGVtLmV4YW1wbGVzIDogW11cbiAgICAgICAgICAgICAgZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgZXhJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGFkZFRleHQoYCAgICR7ZXhJbmRleCArIDF9LiBcIiR7ZXhhbXBsZX1cImAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAyMClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5leGFtcGxlKSB7XG4gICAgICAgICAgICAgIGFkZFRleHQoYCAgIEV4YW1wbGU6IFwiJHtpdGVtLmV4YW1wbGV9XCJgLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gM1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMucmVhZGluZyAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnJlYWRpbmcpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIlJlYWRpbmcgUGFzc2FnZVwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVhZGluZ0NvbnRlbnQgPSBsZXNzb25EYXRhLnNlY3Rpb25zLnJlYWRpbmdcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IHJlYWRpbmdDb250ZW50LnNwbGl0KCdcXG5cXG4nKVxuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcGFydCBpcyBhbiBpbnN0cnVjdGlvblxuICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxICYmIHBhcnRzWzBdLmluY2x1ZGVzKCdSZWFkIHRoZSBmb2xsb3dpbmcgdGV4dCBjYXJlZnVsbHknKSkge1xuICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCAoaXRhbGljKSAtIG1hbnVhbCByZW5kZXJpbmdcbiAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJpdGFsaWNcIilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUocGFydHNbMF0sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB0ZXh0XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5zdHJ1Y3Rpb25MaW5lcykge1xuICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIHJlc3Qgb2YgdGhlIHJlYWRpbmcgcGFzc2FnZVxuICAgICAgICAgICAgYWRkVGV4dChwYXJ0cy5zbGljZSgxKS5qb2luKCdcXG5cXG4nKSwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGluc3RydWN0aW9uLCBkaXNwbGF5IGFzIGJlZm9yZVxuICAgICAgICAgICAgYWRkVGV4dChyZWFkaW5nQ29udGVudCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmNvbXByZWhlbnNpb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJSZWFkaW5nIENvbXByZWhlbnNpb25cIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbXByZWhlbnNpb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24gOiBbXVxuICAgICAgICAgIGNvbXByZWhlbnNpb25RdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZCAoaXRhbGljKSAtIG1hbnVhbCByZW5kZXJpbmdcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDI0MSwgMjUwLCAyNTUpIC8vICNGMUZBRkZcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpc2N1c3Npb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJEaXNjdXNzaW9uIFF1ZXN0aW9uc1wiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlzY3Vzc2lvblF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbiA6IFtdXG4gICAgICAgICAgZGlzY3Vzc2lvblF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gaXMgdGhlIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCAoaXRhbGljKSAtIG1hbnVhbCByZW5kZXJpbmdcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZVByYWN0aWNlKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJEaWFsb2d1ZSBQcmFjdGljZVwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlhbG9ndWVTZWN0aW9uID0gbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZVByYWN0aWNlIVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmQgY29sb3IgKGl0YWxpYykgLSBtYW51YWxseSB3aXRob3V0IGFkZFRleHRcbiAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJpdGFsaWNcIilcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUoZGlhbG9ndWVTZWN0aW9uLmluc3RydWN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uSGVpZ2h0ID0gaW5zdHJ1Y3Rpb25MaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0ICsgNlxuICAgICAgICAgIFxuICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgaW5zdHJ1Y3Rpb25XaWR0aCwgaW5zdHJ1Y3Rpb25IZWlnaHQsICdGJylcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gdGV4dFxuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvbiBiZWZvcmUgZGlhbG9ndWUgc3RhcnRzXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW5oYW5jZSBkaWFsb2d1ZSB3aXRoIGF2YXRhciBuYW1lc1xuICAgICAgICAgIGNvbnN0IGVuaGFuY2VkRGlhbG9ndWUgPSBlbmhhbmNlRGlhbG9ndWVXaXRoQXZhdGFycyhcbiAgICAgICAgICAgIGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSxcbiAgICAgICAgICAgIGxlc3NvbkRhdGEuaWQsXG4gICAgICAgICAgICAnZGlhbG9ndWVQcmFjdGljZSdcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGRpYWxvZ3VlIGxpbmVzIHdpdGggY2hhcmFjdGVyIG5hbWVzIGFuZCBzcGFjaW5nXG4gICAgICAgICAgY29uc3QgZGlhbG9ndWVQcmFjdGljZUxpbmVzID0gQXJyYXkuaXNBcnJheShlbmhhbmNlZERpYWxvZ3VlKSA/IGVuaGFuY2VkRGlhbG9ndWUgOiBbXVxuICAgICAgICAgIGRpYWxvZ3VlUHJhY3RpY2VMaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gQWRkIDNweCBnYXAgYmV0d2VlbiBkaWFsb2d1ZSBsaW5lcyAoZXhjZXB0IGZpcnN0KVxuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gM1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGFyYWN0ZXIgbmFtZSBpbiBib2xkLCB0aGVuIGxpbmVcbiAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLk1BSU5fQ09OVEVOVClcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgY29uc3QgY2hhcldpZHRoID0gcGRmLmdldFRleHRXaWR0aChgJHtsaW5lLmNoYXJhY3Rlcn06IGApXG4gICAgICAgICAgICBwZGYudGV4dChgJHtsaW5lLmNoYXJhY3Rlcn06IGAsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMCAtIGNoYXJXaWR0aFxuICAgICAgICAgICAgY29uc3QgbGluZVRleHQgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGxpbmUubGluZSwgbWF4V2lkdGgpXG4gICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFswXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSB3cmFwcGVkIGxpbmVzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVUZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFtpXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgJiYgZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSA1XG4gICAgICAgICAgICBhZGRUZXh0KFwiRm9sbG93LXVwIFF1ZXN0aW9uczpcIiwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIHRydWUsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIGNvbnN0IGZvbGxvd1VwUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMpID8gZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zIDogW11cbiAgICAgICAgICAgIGZvbGxvd1VwUXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4ICsgMX0uICR7cXVlc3Rpb259YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXApIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkRpYWxvZ3VlIEZpbGwtaW4tdGhlLUdhcFwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlhbG9ndWVTZWN0aW9uID0gbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXAhXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgYmx1ZSBiYWNrZ3JvdW5kIGNvbG9yIChpdGFsaWMpIC0gbWFudWFsbHkgd2l0aG91dCBhZGRUZXh0XG4gICAgICAgICAgcGRmLnNldEZpbGxDb2xvcigyNDEsIDI1MCwgMjU1KSAvLyAjRjFGQUZGXG4gICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGRpYWxvZ3VlU2VjdGlvbi5pbnN0cnVjdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5zdHJ1Y3Rpb25MaW5lcykge1xuICAgICAgICAgICAgcGRmLnRleHQobGluZSwgbWFyZ2luICsgMTAsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICAgIHlQb3NpdGlvbiArPSA4IC8vIEV4dHJhIHNwYWNpbmcgYWZ0ZXIgaW5zdHJ1Y3Rpb24gYmVmb3JlIGRpYWxvZ3VlIHN0YXJ0c1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVuaGFuY2UgZGlhbG9ndWUgd2l0aCBhdmF0YXIgbmFtZXNcbiAgICAgICAgICBjb25zdCBlbmhhbmNlZERpYWxvZ3VlID0gZW5oYW5jZURpYWxvZ3VlV2l0aEF2YXRhcnMoXG4gICAgICAgICAgICBkaWFsb2d1ZVNlY3Rpb24uZGlhbG9ndWUsXG4gICAgICAgICAgICBsZXNzb25EYXRhLmlkLFxuICAgICAgICAgICAgJ2RpYWxvZ3VlRmlsbEdhcCdcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGRpYWxvZ3VlIGxpbmVzIHdpdGggY2hhcmFjdGVyIG5hbWVzIGFuZCBzcGFjaW5nXG4gICAgICAgICAgY29uc3QgZGlhbG9ndWVGaWxsR2FwTGluZXMgPSBBcnJheS5pc0FycmF5KGVuaGFuY2VkRGlhbG9ndWUpID8gZW5oYW5jZWREaWFsb2d1ZSA6IFtdXG4gICAgICAgICAgZGlhbG9ndWVGaWxsR2FwTGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEFkZCAzcHggZ2FwIGJldHdlZW4gZGlhbG9ndWUgbGluZXMgKGV4Y2VwdCBmaXJzdClcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hhcmFjdGVyIG5hbWUgaW4gYm9sZCwgdGhlbiBsaW5lXG4gICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQpXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcImJvbGRcIilcbiAgICAgICAgICAgIGNvbnN0IGNoYXJXaWR0aCA9IHBkZi5nZXRUZXh0V2lkdGgoYCR7bGluZS5jaGFyYWN0ZXJ9OiBgKVxuICAgICAgICAgICAgcGRmLnRleHQoYCR7bGluZS5jaGFyYWN0ZXJ9OiBgLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgY29uc3QgbWF4V2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTAgLSBjaGFyV2lkdGhcbiAgICAgICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShsaW5lLmxpbmUsIG1heFdpZHRoKVxuICAgICAgICAgICAgcGRmLnRleHQobGluZVRleHRbMF0sIG1hcmdpbiArIDEwICsgY2hhcldpZHRoLCB5UG9zaXRpb24pXG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgd3JhcHBlZCBsaW5lc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsaW5lVGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoeVBvc2l0aW9uID4gcGFnZUhlaWdodCAtIDMwKSB7XG4gICAgICAgICAgICAgICAgcGRmLmFkZFBhZ2UoKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGRmLnRleHQobGluZVRleHRbaV0sIG1hcmdpbiArIDEwICsgY2hhcldpZHRoLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMgJiYgZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgeVBvc2l0aW9uICs9IDVcbiAgICAgICAgICAgIGFkZFRleHQoXCJBbnN3ZXIgS2V5OlwiLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgYWRkVGV4dChkaWFsb2d1ZVNlY3Rpb24uYW5zd2Vycy5qb2luKCcsICcpLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmdyYW1tYXIgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJHcmFtbWFyIEZvY3VzXCIsICgpID0+IHtcbiAgICAgICAgICBhZGRUZXh0KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5mb2N1cywgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIHRydWUsIGZhbHNlLCAxMClcbiAgICAgICAgICB5UG9zaXRpb24gKz0gNVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdyYW1tYXIgRXhwbGFuYXRpb24gKEZvcm0sIFVzYWdlLCBOb3RlcylcbiAgICAgICAgICBpZiAobGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4cGxhbmF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBleHBsYW5hdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leHBsYW5hdGlvblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXhwbGFuYXRpb24uZm9ybSkge1xuICAgICAgICAgICAgICBjb25zdCBmb3JtV2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMjBcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBoZWlnaHRzIGZvciBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLklOU1RSVUNUSU9OUylcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJib2xkXCIpXG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1UaXRsZUxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShcIkZvcm06XCIsIGZvcm1XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgZm9ybVRpdGxlSGVpZ2h0ID0gZm9ybVRpdGxlTGluZXMubGVuZ3RoICogbGluZUhlaWdodFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgY29uc3QgZm9ybUxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShleHBsYW5hdGlvbi5mb3JtLCBmb3JtV2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1Db250ZW50SGVpZ2h0ID0gZm9ybUxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IHRvdGFsRm9ybUhlaWdodCA9IGZvcm1UaXRsZUhlaWdodCArIGZvcm1Db250ZW50SGVpZ2h0ICsgOFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDI0MSwgMjUwLCAyNTUpIC8vICNGMUZBRkYgbGlnaHQgYmx1ZVxuICAgICAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgZm9ybVdpZHRoLCB0b3RhbEZvcm1IZWlnaHQsICdGJylcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgdGl0bGUgdGV4dCBpbiBibGFja1xuICAgICAgICAgICAgICBwZGYuc2V0VGV4dENvbG9yKDAsIDAsIDApIC8vIEJsYWNrIHRleHRcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcImJvbGRcIilcbiAgICAgICAgICAgICAgcGRmLnRleHQoXCJGb3JtOlwiLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBjb250ZW50IHRleHQgaW4gYmxhY2tcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGZvcm1MaW5lcykge1xuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gNVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXhwbGFuYXRpb24udXNhZ2UpIHtcbiAgICAgICAgICAgICAgY29uc3QgdXNhZ2VXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAyMFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhlaWdodHMgZm9yIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcImJvbGRcIilcbiAgICAgICAgICAgICAgY29uc3QgdXNhZ2VUaXRsZUxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShcIlVzYWdlOlwiLCB1c2FnZVdpZHRoKVxuICAgICAgICAgICAgICBjb25zdCB1c2FnZVRpdGxlSGVpZ2h0ID0gdXNhZ2VUaXRsZUxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICAgIGNvbnN0IHVzYWdlTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGV4cGxhbmF0aW9uLnVzYWdlLCB1c2FnZVdpZHRoKVxuICAgICAgICAgICAgICBjb25zdCB1c2FnZUNvbnRlbnRIZWlnaHQgPSB1c2FnZUxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IHRvdGFsVXNhZ2VIZWlnaHQgPSB1c2FnZVRpdGxlSGVpZ2h0ICsgdXNhZ2VDb250ZW50SGVpZ2h0ICsgOFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDI0MSwgMjUwLCAyNTUpIC8vICNGMUZBRkYgbGlnaHQgYmx1ZVxuICAgICAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgdXNhZ2VXaWR0aCwgdG90YWxVc2FnZUhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyB0aXRsZSB0ZXh0IGluIGJsYWNrXG4gICAgICAgICAgICAgIHBkZi5zZXRUZXh0Q29sb3IoMCwgMCwgMCkgLy8gQmxhY2sgdGV4dFxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgICBwZGYudGV4dChcIlVzYWdlOlwiLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBjb250ZW50IHRleHQgaW4gYmxhY2tcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHVzYWdlTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV4cGxhbmF0aW9uLmxldmVsTm90ZXMpIHtcbiAgICAgICAgICAgICAgY29uc3Qgbm90ZVdpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDIwXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaGVpZ2h0cyBmb3IgYmFja2dyb3VuZFxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgICBjb25zdCBub3RlVGl0bGVMaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUoXCJOb3RlOlwiLCBub3RlV2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IG5vdGVUaXRsZUhlaWdodCA9IG5vdGVUaXRsZUxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIGNvbnN0IG5vdGVMaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUoZXhwbGFuYXRpb24ubGV2ZWxOb3Rlcywgbm90ZVdpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBub3RlQ29udGVudEhlaWdodCA9IG5vdGVMaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCB0b3RhbE5vdGVIZWlnaHQgPSBub3RlVGl0bGVIZWlnaHQgKyBub3RlQ29udGVudEhlaWdodCArIDhcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICAgICAgcGRmLnNldEZpbGxDb2xvcigyNDEsIDI1MCwgMjU1KSAvLyAjRjFGQUZGIGxpZ2h0IGJsdWVcbiAgICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIG5vdGVXaWR0aCwgdG90YWxOb3RlSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IHRpdGxlIHRleHQgaW4gYmxhY2tcbiAgICAgICAgICAgICAgcGRmLnNldFRleHRDb2xvcigwLCAwLCAwKSAvLyBCbGFjayB0ZXh0XG4gICAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLklOU1RSVUNUSU9OUylcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJib2xkXCIpXG4gICAgICAgICAgICAgIHBkZi50ZXh0KFwiTm90ZTpcIiwgbWFyZ2luICsgMTAsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgY29udGVudCB0ZXh0IGluIGJsYWNrIChpdGFsaWMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBub3RlTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRXhhbXBsZXNcbiAgICAgICAgICBhZGRUZXh0KFwiRXhhbXBsZXM6XCIsIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCB0cnVlLCBmYWxzZSwgMTApXG4gICAgICAgICAgY29uc3QgZ3JhbW1hckV4YW1wbGVzID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhhbXBsZXMpID8gbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4YW1wbGVzIDogW11cbiAgICAgICAgICBncmFtbWFyRXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGFkZFRleHQoZXhhbXBsZSwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICB5UG9zaXRpb24gKz0gNVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByYWN0aWNlIEV4ZXJjaXNlc1xuICAgICAgICAgIGFkZFRleHQoXCJQcmFjdGljZSBFeGVyY2lzZXM6XCIsIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCB0cnVlLCBmYWxzZSwgMTApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIG5ldyBmb3JtYXQgKGV4ZXJjaXNlcykgb3Igb2xkIGZvcm1hdCAoZXhlcmNpc2UpXG4gICAgICAgICAgaWYgKGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZXMgJiYgQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2VzKSkge1xuICAgICAgICAgICAgLy8gTmV3IGZvcm1hdCB3aXRoIHN0cnVjdHVyZWQgZXhlcmNpc2VzXG4gICAgICAgICAgICBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2VzLmZvckVhY2goKGV4ZXJjaXNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4ICsgMX0uICR7ZXhlcmNpc2UucHJvbXB0fWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDE1KVxuICAgICAgICAgICAgICBpZiAoZXhlcmNpc2UuYW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgYWRkVGV4dChgQW5zd2VyOiAke2V4ZXJjaXNlLmFuc3dlcn1gLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksIGZhbHNlLCBmYWxzZSwgMjApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGV4ZXJjaXNlLmV4cGxhbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYWRkVGV4dChleGVyY2lzZS5leHBsYW5hdGlvbiwgRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLCBmYWxzZSwgdHJ1ZSwgMjApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2UgJiYgQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2UpKSB7XG4gICAgICAgICAgICAvLyBPbGQgZm9ybWF0XG4gICAgICAgICAgICBjb25zdCBncmFtbWFyRXhlcmNpc2VzID0gbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlXG4gICAgICAgICAgICBncmFtbWFyRXhlcmNpc2VzLmZvckVhY2goKGV4ZXJjaXNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4ICsgMX0uICR7ZXhlcmNpc2V9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5wcm9udW5jaWF0aW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbikge1xuICAgICAgICBhZGRTZWN0aW9uKFwiUHJvbnVuY2lhdGlvbiBQcmFjdGljZVwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJvblNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb25cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gaWYgcHJlc2VudFxuICAgICAgICAgIGlmIChwcm9uU2VjdGlvbi5pbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAyMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgaGVpZ2h0IGZvciBiYWNrZ3JvdW5kXG4gICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUocHJvblNlY3Rpb24uaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgcGRmLnNldEZpbGxDb2xvcigyNDEsIDI1MCwgMjU1KSAvLyAjRjFGQUZGIGxpZ2h0IGJsdWVcbiAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEcmF3IGluc3RydWN0aW9uIHRleHQgaW4gYmxhY2tcbiAgICAgICAgICAgIHBkZi5zZXRUZXh0Q29sb3IoMCwgMCwgMClcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gOFxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChzaW5nbGUgd29yZCkgYW5kIG5ldyBmb3JtYXQgKHdvcmRzIGFycmF5KVxuICAgICAgICAgIGlmIChwcm9uU2VjdGlvbi53b3JkcyAmJiBBcnJheS5pc0FycmF5KHByb25TZWN0aW9uLndvcmRzKSAmJiBwcm9uU2VjdGlvbi53b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBOZXcgZm9ybWF0IHdpdGggbXVsdGlwbGUgd29yZHNcbiAgICAgICAgICAgIHByb25TZWN0aW9uLndvcmRzLmZvckVhY2goKHdvcmRJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB5UG9zaXRpb24gKz0gOCAvLyBTcGFjaW5nIGJldHdlZW4gd29yZHNcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENoZWNrIGZvciBwYWdlIGJyZWFrXG4gICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gV29yZCBhbmQgSVBBIC0gdXNlIGFkZFRleHQgZm9yIHByb3BlciB3cmFwcGluZyBhbmQgc2FuaXRpemF0aW9uXG4gICAgICAgICAgICAgIHBkZi5zZXRUZXh0Q29sb3IoMCwgMCwgMClcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuTUFJTl9DT05URU5UKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcImJvbGRcIilcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IHdvcmRUZXh0ID0gd29yZEl0ZW0ud29yZCB8fCAnTi9BJ1xuICAgICAgICAgICAgICBjb25zdCBpcGFUZXh0ID0gd29yZEl0ZW0uaXBhIHx8ICdOL0EnXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBXb3JkIG9uIGl0cyBvd24gbGluZSAoYm9sZClcbiAgICAgICAgICAgICAgY29uc3QgbWF4V2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMjBcbiAgICAgICAgICAgICAgY29uc3Qgd29yZExpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZSh3b3JkVGV4dCwgbWF4V2lkdGgpXG4gICAgICAgICAgICAgIHdvcmRMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIElQQSBvbiBuZXh0IGxpbmUgKG5vcm1hbCBmb250LCBpbiBicmFja2V0cylcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSlcbiAgICAgICAgICAgICAgY29uc3QgaXBhTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGBJUEE6IFske2lwYVRleHR9XWAsIG1heFdpZHRoKVxuICAgICAgICAgICAgICBpcGFMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERpZmZpY3VsdCBTb3VuZHNcbiAgICAgICAgICAgICAgaWYgKHdvcmRJdGVtLmRpZmZpY3VsdFNvdW5kcyAmJiB3b3JkSXRlbS5kaWZmaWN1bHRTb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHBkZi5zZXRUZXh0Q29sb3IoMCwgMCwgMClcbiAgICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgICAgICBwZGYudGV4dChcIkRpZmZpY3VsdCBTb3VuZHM6XCIsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZKVxuICAgICAgICAgICAgICAgIGNvbnN0IHNvdW5kc1RleHQgPSB3b3JkSXRlbS5kaWZmaWN1bHRTb3VuZHMubWFwKHMgPT4gYC8ke3N9L2ApLmpvaW4oJyAgJylcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VuZHNNYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAyNVxuICAgICAgICAgICAgICAgIGNvbnN0IHNvdW5kc0xpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShzb3VuZHNUZXh0LCBzb3VuZHNNYXhXaWR0aClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzb3VuZHNMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSAzMCkge1xuICAgICAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxNSwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFByb251bmNpYXRpb24gVGlwc1xuICAgICAgICAgICAgICBpZiAod29yZEl0ZW0udGlwcyAmJiB3b3JkSXRlbS50aXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoeVBvc2l0aW9uID4gcGFnZUhlaWdodCAtIDMwKSB7XG4gICAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgICB5UG9zaXRpb24gPSAyMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwZGYuc2V0VGV4dENvbG9yKDAsIDAsIDApXG4gICAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICAgICAgcGRmLnRleHQoXCJQcm9udW5jaWF0aW9uIFRpcHM6XCIsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZKVxuICAgICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd29yZEl0ZW0udGlwcy5mb3JFYWNoKHRpcCA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBXcmFwIGxvbmcgdGlwcyBwcm9wZXJseVxuICAgICAgICAgICAgICAgICAgY29uc3QgdGlwTWF4V2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMjVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcExpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShg4oCiICR7dGlwfWAsIHRpcE1heFdpZHRoKVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB0aXBMaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxNSwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFByYWN0aWNlIFNlbnRlbmNlXG4gICAgICAgICAgICAgIGlmICh3b3JkSXRlbS5wcmFjdGljZVNlbnRlbmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSAzMCkge1xuICAgICAgICAgICAgICAgICAgcGRmLmFkZFBhZ2UoKVxuICAgICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcGRmLnNldFRleHRDb2xvcigwLCAwLCAwKVxuICAgICAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLklOU1RSVUNUSU9OUylcbiAgICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgICAgIHBkZi50ZXh0KFwiUHJhY3RpY2UgU2VudGVuY2U6XCIsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQpXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VudGVuY2VNYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAyNVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbnRlbmNlTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHdvcmRJdGVtLnByYWN0aWNlU2VudGVuY2UsIHNlbnRlbmNlTWF4V2lkdGgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2VudGVuY2VMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSAzMCkge1xuICAgICAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxNSwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChwcm9uU2VjdGlvbi53b3JkKSB7XG4gICAgICAgICAgICAvLyBPbGQgZm9ybWF0IHdpdGggc2luZ2xlIHdvcmRcbiAgICAgICAgICAgIGFkZFRleHQoYFdvcmQ6ICR7cHJvblNlY3Rpb24ud29yZCB8fCAnTi9BJ31gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgYWRkVGV4dChgSVBBOiAke3Byb25TZWN0aW9uLmlwYSB8fCAnTi9BJ31gLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICBpZiAocHJvblNlY3Rpb24ucHJhY3RpY2UpIHtcbiAgICAgICAgICAgICAgYWRkVGV4dChgUHJhY3RpY2U6IFwiJHtwcm9uU2VjdGlvbi5wcmFjdGljZX1cImAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGRUZXh0KFwiTm8gcHJvbnVuY2lhdGlvbiBkYXRhIGF2YWlsYWJsZVwiLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMud3JhcHVwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJMZXNzb24gV3JhcC11cFwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgd3JhcHVwUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCA6IFtdXG4gICAgICAgICAgd3JhcHVwUXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gLSBtYW51YWwgcmVuZGVyaW5nIChubyBudW1iZXJpbmcpXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgcGRmLnNldEZpbGxDb2xvcigyMzgsIDI0NywgMjIwKSAvLyAjRUVGN0RDXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLklOU1RSVUNUSU9OUylcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJpdGFsaWNcIilcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uV2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUocXVlc3Rpb24sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uSGVpZ2h0ID0gaW5zdHJ1Y3Rpb25MaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0ICsgNlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgaW5zdHJ1Y3Rpb25XaWR0aCwgaW5zdHJ1Y3Rpb25IZWlnaHQsICdGJylcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB0ZXh0XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICAgICAgcGRmLnRleHQobGluZSwgbWFyZ2luICsgMTAsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSA4IC8vIEV4dHJhIHNwYWNpbmcgYWZ0ZXIgaW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFJlc3QgYXJlIGFjdHVhbCBxdWVzdGlvbnMgKHJlbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSlcbiAgICAgICAgICAgICAgYWRkVGV4dChgJHtpbmRleH0uICR7cXVlc3Rpb259YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gRm9vdGVyXG4gICAgICBjb25zdCBwYWdlQ291bnQgPSAocGRmIGFzIGFueSkuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwYWdlQ291bnQ7IGkrKykge1xuICAgICAgICBwZGYuc2V0UGFnZShpKVxuICAgICAgICBwZGYuc2V0Rm9udFNpemUoOClcbiAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgcGRmLnRleHQoYEdlbmVyYXRlZCBieSBMaW5ndWFTcGFyayAtIFBhZ2UgJHtpfSBvZiAke3BhZ2VDb3VudH1gLCBtYXJnaW4sIHBhZ2VIZWlnaHQgLSAxMClcbiAgICAgIH1cblxuICAgICAgLy8gRG93bmxvYWQgdGhlIFBERlxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtsZXNzb25EYXRhLmxlc3NvblR5cGV9LWxlc3Nvbi0ke2xlc3NvbkRhdGEuc3R1ZGVudExldmVsfS0ke0RhdGUubm93KCl9LnBkZmBcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBQREYgd2l0aCBmaWxlbmFtZTonLCBmaWxlTmFtZSlcbiAgICAgICAgcGRmLnNhdmUoZmlsZU5hbWUpXG4gICAgICAgIGNvbnNvbGUubG9nKCdQREYgZXhwb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKVxuICAgICAgfSBjYXRjaCAoc2F2ZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBQREY6Jywgc2F2ZUVycm9yKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIFBERjogJHtzYXZlRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHNhdmVFcnJvci5tZXNzYWdlIDogJ1Vua25vd24gc2F2ZSBlcnJvcid9YClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUERGIGV4cG9ydCBlcnJvcjonLCBlcnJvcilcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScpXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbmFtZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm5hbWUgOiAnVW5rbm93bicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBsZXNzb25EYXRhS2V5czogbGVzc29uRGF0YSA/IE9iamVjdC5rZXlzKGxlc3NvbkRhdGEpIDogJ05vIGxlc3NvbiBkYXRhJyxcbiAgICAgICAgc2VjdGlvbnNLZXlzOiBsZXNzb25EYXRhPy5zZWN0aW9ucyA/IE9iamVjdC5rZXlzKGxlc3NvbkRhdGEuc2VjdGlvbnMpIDogJ05vIHNlY3Rpb25zJyxcbiAgICAgICAgZW5hYmxlZFNlY3Rpb25zS2V5czogZW5hYmxlZFNlY3Rpb25zID8gT2JqZWN0LmtleXMoZW5hYmxlZFNlY3Rpb25zKSA6ICdObyBlbmFibGVkIHNlY3Rpb25zJ1xuICAgICAgfSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUERGIGV4cG9ydCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcbiAgICB9XG4gIH1cblxuICBhc3luYyBleHBvcnRUb1dvcmQobGVzc29uRGF0YTogTGVzc29uRGF0YSwgZW5hYmxlZFNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgV29yZCBleHBvcnQgd2l0aCBkYXRhOicsIHsgbGVzc29uRGF0YSwgZW5hYmxlZFNlY3Rpb25zIH0pXG4gICAgICB0aGlzLnZhbGlkYXRlTGVzc29uRGF0YShsZXNzb25EYXRhKVxuXG4gICAgICAvLyBBZGRpdGlvbmFsIHZhbGlkYXRpb24gZm9yIGVuYWJsZWQgc2VjdGlvbnNcbiAgICAgIGlmICghZW5hYmxlZFNlY3Rpb25zIHx8IE9iamVjdC5rZXlzKGVuYWJsZWRTZWN0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2VjdGlvbnMgZW5hYmxlZCBmb3IgZXhwb3J0JylcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hpbGRyZW46IGFueVtdID0gW11cblxuICAgICAgLy8gVHlwb2dyYXBoeSBoaWVyYXJjaHkgY29uc3RhbnRzIChpbiBoYWxmLXBvaW50cyBmb3IgV29yZCAtIG11bHRpcGx5IGJ5IDIpXG4gICAgICAvLyAzMnB4ID0gMjRwdCwgMjhweCA9IDIxcHQsIDE2cHggPSAxMnB0LCAxNXB4ID0gMTEuMjVwdCwgMTRweCA9IDEwLjVwdFxuICAgICAgY29uc3QgV09SRF9GT05UX1NJWkVTID0ge1xuICAgICAgICBMRVNTT05fVElUTEU6IDQ4LCAgICAgIC8vIDI0cHQgKDMycHggZXF1aXZhbGVudClcbiAgICAgICAgU0VDVElPTl9IRUFERVI6IDQyLCAgICAvLyAyMXB0ICgyOHB4IGVxdWl2YWxlbnQpICBcbiAgICAgICAgTUFJTl9DT05URU5UOiAyNCwgICAgICAvLyAxMnB0ICgxNnB4IGVxdWl2YWxlbnQpXG4gICAgICAgIElOU1RSVUNUSU9OUzogMjMsICAgICAgLy8gMTEuNXB0ICgxNXB4IGVxdWl2YWxlbnQpXG4gICAgICAgIFNVUFBMRU1FTlRBUlk6IDIxICAgICAgLy8gMTAuNXB0ICgxNHB4IGVxdWl2YWxlbnQpXG4gICAgICB9XG5cbiAgICAgIC8vIFRpdGxlIGFuZCBtZXRhZGF0YVxuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24obGVzc29uRGF0YS5sZXNzb25UaXRsZSksXG4gICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5MRVNTT05fVElUTEUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhlYWRpbmc6IEhlYWRpbmdMZXZlbC5USVRMRSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLFxuICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDQwMCB9LFxuICAgICAgICB9KSxcbiAgICAgIClcblxuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgdGV4dDogYFRhcmdldCBMYW5ndWFnZTogJHtsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGVzc29uRGF0YS50YXJnZXRMYW5ndWFnZS5zbGljZSgxKX1gLFxuICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICB0ZXh0OiBgR2VuZXJhdGVkIG9uOiAke3RoaXMuZm9ybWF0RGF0ZSgpfWAsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiA0MDAgfSxcbiAgICAgICAgfSksXG4gICAgICApXG5cbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgc2VjdGlvblxuICAgICAgY29uc3QgYWRkU2VjdGlvbiA9ICh0aXRsZTogc3RyaW5nLCBjb250ZW50OiBhbnlbXSkgPT4ge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNFQ1RJT05fSEVBREVSLFxuICAgICAgICAgICAgICAgIHVuZGVybGluZTogeyB0eXBlOiBVbmRlcmxpbmVUeXBlLlNJTkdMRSB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBoZWFkaW5nOiBIZWFkaW5nTGV2ZWwuSEVBRElOR18yLFxuICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDQwMCwgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIGNoaWxkcmVuLnB1c2goLi4uY29udGVudClcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHNlY3Rpb25zIGJhc2VkIG9uIGVuYWJsZWQgc3RhdGVcbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMud2FybXVwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMud2FybXVwKSB7XG4gICAgICAgIGNvbnN0IHdhcm11cFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXApID8gbGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXAgOiBbXVxuICAgICAgICBjb25zdCB3YXJtdXBDb250ZW50ID0gd2FybXVwUXVlc3Rpb25zLm1hcCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24ocXVlc3Rpb24pLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogXCJFRUY3RENcIiwgLy8gTGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGAke2luZGV4fS4gJHtxdWVzdGlvbn1gKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFkZFNlY3Rpb24oXCJXYXJtLXVwIFF1ZXN0aW9uc1wiLCB3YXJtdXBDb250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLnZvY2FidWxhcnkgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy52b2NhYnVsYXJ5KSB7XG4gICAgICAgIGNvbnN0IHZvY2FiQ29udGVudDogYW55W10gPSBbXVxuICAgICAgICBjb25zdCB2b2NhYnVsYXJ5SXRlbXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMudm9jYWJ1bGFyeSkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkgOiBbXVxuICAgICAgICB2b2NhYnVsYXJ5SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIG1pZ2h0IGJlIGFuIGluc3RydWN0aW9uXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwICYmIGl0ZW0ud29yZCA9PT0gXCJJTlNUUlVDVElPTlwiKSB7XG4gICAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oaXRlbS5tZWFuaW5nKSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgICAgZmlsbDogXCJGMUZBRkZcIiwgLy8gTGlnaHQgYmx1ZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7aW5kZXggKyAxfS4gJHtzYWZlU3RyaXBNYXJrZG93bihpdGVtLndvcmQpfWAsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgICAgTWVhbmluZzogJHtzYWZlU3RyaXBNYXJrZG93bihpdGVtLm1lYW5pbmcpfWAsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcblxuICAgICAgICAgIC8vIEhhbmRsZSBib3RoIG9sZCBmb3JtYXQgKGV4YW1wbGUpIGFuZCBuZXcgZm9ybWF0IChleGFtcGxlcyBhcnJheSlcbiAgICAgICAgICBpZiAoaXRlbS5leGFtcGxlcyAmJiBBcnJheS5pc0FycmF5KGl0ZW0uZXhhbXBsZXMpICYmIGl0ZW0uZXhhbXBsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGAgICBFeGFtcGxlczpgLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAvLyBBZGRpdGlvbmFsIHNhZmV0eSBjaGVjayBiZWZvcmUgZm9yRWFjaFxuICAgICAgICAgICAgY29uc3QgZXhhbXBsZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZXhhbXBsZXMpID8gaXRlbS5leGFtcGxlcyA6IFtdXG4gICAgICAgICAgICBleGFtcGxlcy5mb3JFYWNoKChleGFtcGxlLCBleEluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGAgICAgICAke2V4SW5kZXggKyAxfS4gXCIke3NhZmVTdHJpcE1hcmtkb3duKGV4YW1wbGUpfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogXCJcIiB9KV0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5leGFtcGxlKSB7XG4gICAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCAgIEV4YW1wbGU6IFwiJHtzYWZlU3RyaXBNYXJrZG93bihpdGVtLmV4YW1wbGUpfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFkZFNlY3Rpb24oXCJLZXkgVm9jYWJ1bGFyeVwiLCB2b2NhYkNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMucmVhZGluZyAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnJlYWRpbmcpIHtcbiAgICAgICAgY29uc3QgcmVhZGluZ1RleHQgPSBsZXNzb25EYXRhLnNlY3Rpb25zLnJlYWRpbmdcbiAgICAgICAgY29uc3QgcGFydHMgPSByZWFkaW5nVGV4dC5zcGxpdCgnXFxuXFxuJylcbiAgICAgICAgY29uc3QgcmVhZGluZ0NvbnRlbnQ6IGFueVtdID0gW11cblxuICAgICAgICAvLyBDaGVjayBpZiBmaXJzdCBwYXJ0IGlzIGFuIGluc3RydWN0aW9uXG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxICYmIHBhcnRzWzBdLmluY2x1ZGVzKCdSZWFkIHRoZSBmb2xsb3dpbmcgdGV4dCBjYXJlZnVsbHknKSkge1xuICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICByZWFkaW5nQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24ocGFydHNbMF0pLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogXCJFRUY3RENcIiwgLy8gTGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgLy8gQWRkIHRoZSByZXN0IG9mIHRoZSByZWFkaW5nIHBhc3NhZ2VcbiAgICAgICAgICByZWFkaW5nQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24ocGFydHMuc2xpY2UoMSkuam9pbignXFxuXFxuJykpLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gaW5zdHJ1Y3Rpb24sIGRpc3BsYXkgYXMgYmVmb3JlXG4gICAgICAgICAgcmVhZGluZ0NvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKHJlYWRpbmdUZXh0KSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgYWRkU2VjdGlvbihcIlJlYWRpbmcgUGFzc2FnZVwiLCByZWFkaW5nQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5jb21wcmVoZW5zaW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbikge1xuICAgICAgICBjb25zdCBjb21wcmVoZW5zaW9uUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24pID8gbGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uIDogW11cbiAgICAgICAgY29uc3QgY29tcHJlaGVuc2lvbkNvbnRlbnQgPSBjb21wcmVoZW5zaW9uUXVlc3Rpb25zLm1hcCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihxdWVzdGlvbiksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc3QgYXJlIGFjdHVhbCBxdWVzdGlvbnMgKHJlbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihgJHtpbmRleH0uICR7cXVlc3Rpb259YCksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiUmVhZGluZyBDb21wcmVoZW5zaW9uXCIsIGNvbXByZWhlbnNpb25Db250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpc2N1c3Npb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGRpc2N1c3Npb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24gOiBbXVxuICAgICAgICBjb25zdCBkaXNjdXNzaW9uQ29udGVudCA9IGRpc2N1c3Npb25RdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihxdWVzdGlvbiksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWApLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYWRkU2VjdGlvbihcIkRpc2N1c3Npb24gUXVlc3Rpb25zXCIsIGRpc2N1c3Npb25Db250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZVByYWN0aWNlKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ3VlUHJhY3RpY2VDb250ZW50OiBhbnlbXSA9IFtdXG4gICAgICAgIGNvbnN0IGRpYWxvZ3VlU2VjdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVQcmFjdGljZVxuXG4gICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmQgKCNFRUY3REMpXG4gICAgICAgIGRpYWxvZ3VlUHJhY3RpY2VDb250ZW50LnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oZGlhbG9ndWVTZWN0aW9uLmluc3RydWN0aW9uKSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuXG4gICAgICAgIC8vIEVuaGFuY2UgZGlhbG9ndWUgd2l0aCBhdmF0YXIgbmFtZXNcbiAgICAgICAgY29uc3QgZW5oYW5jZWREaWFsb2d1ZSA9IGVuaGFuY2VEaWFsb2d1ZVdpdGhBdmF0YXJzKFxuICAgICAgICAgIGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSxcbiAgICAgICAgICBsZXNzb25EYXRhLmlkLFxuICAgICAgICAgICdkaWFsb2d1ZVByYWN0aWNlJ1xuICAgICAgICApXG5cbiAgICAgICAgLy8gQWRkIGRpYWxvZ3VlIGxpbmVzIHdpdGggY2hhcmFjdGVyIG5hbWVzIGluIGJvbGQgYW5kIDNweCBzcGFjaW5nIGJldHdlZW4gbGluZXNcbiAgICAgICAgY29uc3QgZGlhbG9ndWVMaW5lcyA9IEFycmF5LmlzQXJyYXkoZW5oYW5jZWREaWFsb2d1ZSkgPyBlbmhhbmNlZERpYWxvZ3VlIDogW11cbiAgICAgICAgZGlhbG9ndWVMaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGRpYWxvZ3VlUHJhY3RpY2VDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtzYWZlU3RyaXBNYXJrZG93bihsaW5lLmNoYXJhY3Rlcil9OiBgLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24obGluZS5saW5lKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgXG4gICAgICAgICAgICAgICAgYmVmb3JlOiBpbmRleCA9PT0gMCA/IDAgOiA2MCwgLy8gM3B4IGdhcCBiZXR3ZWVuIGxpbmVzICg2MCA9IDNwdCBpbiBXb3JkIHVuaXRzKVxuICAgICAgICAgICAgICAgIGFmdGVyOiAwIFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIEFkZCBmb2xsb3ctdXAgcXVlc3Rpb25zIGlmIGFueVxuICAgICAgICBpZiAoZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zICYmIGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IFwiRm9sbG93LXVwIFF1ZXN0aW9uczpcIixcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogMjAwLCBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICAgY29uc3QgZm9sbG93VXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucykgPyBkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgOiBbXVxuICAgICAgICAgIGZvbGxvd1VwUXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oYCR7aW5kZXggKyAxfS4gJHtxdWVzdGlvbn1gKSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBhZGRTZWN0aW9uKFwiRGlhbG9ndWUgUHJhY3RpY2VcIiwgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgY29uc3QgZGlhbG9ndWVTZWN0aW9uID0gbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXBcblxuICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBibHVlIGJhY2tncm91bmQgKCNGMUZBRkYpXG4gICAgICAgIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQucHVzaChcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24pLFxuICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgIGZpbGw6IFwiRjFGQUZGXCIsIC8vIExpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcblxuICAgICAgICAvLyBFbmhhbmNlIGRpYWxvZ3VlIHdpdGggYXZhdGFyIG5hbWVzXG4gICAgICAgIGNvbnN0IGVuaGFuY2VkRGlhbG9ndWUgPSBlbmhhbmNlRGlhbG9ndWVXaXRoQXZhdGFycyhcbiAgICAgICAgICBkaWFsb2d1ZVNlY3Rpb24uZGlhbG9ndWUsXG4gICAgICAgICAgbGVzc29uRGF0YS5pZCxcbiAgICAgICAgICAnZGlhbG9ndWVGaWxsR2FwJ1xuICAgICAgICApXG5cbiAgICAgICAgLy8gQWRkIGRpYWxvZ3VlIGxpbmVzIHdpdGggY2hhcmFjdGVyIG5hbWVzIGluIGJvbGQgYW5kIDNweCBzcGFjaW5nIGJldHdlZW4gbGluZXNcbiAgICAgICAgY29uc3QgZGlhbG9ndWVGaWxsR2FwTGluZXMgPSBBcnJheS5pc0FycmF5KGVuaGFuY2VkRGlhbG9ndWUpID8gZW5oYW5jZWREaWFsb2d1ZSA6IFtdXG4gICAgICAgIGRpYWxvZ3VlRmlsbEdhcExpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgZGlhbG9ndWVGaWxsR2FwQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7c2FmZVN0cmlwTWFya2Rvd24obGluZS5jaGFyYWN0ZXIpfTogYCxcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGxpbmUubGluZSksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IFxuICAgICAgICAgICAgICAgIGJlZm9yZTogaW5kZXggPT09IDAgPyAwIDogNjAsIC8vIDNweCBnYXAgYmV0d2VlbiBsaW5lcyAoNjAgPSAzcHQgaW4gV29yZCB1bml0cylcbiAgICAgICAgICAgICAgICBhZnRlcjogMCBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBBZGQgYW5zd2VyIGtleSBpZiBhbnlcbiAgICAgICAgaWYgKGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzICYmIGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkaWFsb2d1ZUZpbGxHYXBDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBcIkFuc3dlciBLZXk6XCIsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDIwMCwgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICAgIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmpvaW4oJywgJykpLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgYWRkU2VjdGlvbihcIkRpYWxvZ3VlIEZpbGwtaW4tdGhlLUdhcFwiLCBkaWFsb2d1ZUZpbGxHYXBDb250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmdyYW1tYXIgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyKSB7XG4gICAgICAgIGNvbnN0IGdyYW1tYXJDb250ZW50OiBhbnlbXSA9IFtdXG4gICAgICAgIFxuICAgICAgICAvLyBHcmFtbWFyIHRvcGljL2ZvY3VzXG4gICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24obGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmZvY3VzKSxcbiAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICAvLyBHcmFtbWFyIEV4cGxhbmF0aW9uIChGb3JtLCBVc2FnZSwgTm90ZXMpXG4gICAgICAgIGlmIChsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhwbGFuYXRpb24pIHtcbiAgICAgICAgICBjb25zdCBleHBsYW5hdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leHBsYW5hdGlvblxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChleHBsYW5hdGlvbi5mb3JtKSB7XG4gICAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkZvcm06XCIsXG4gICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICAgIGZpbGw6IFwiRjFGQUZGXCIsIC8vIExpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihleHBsYW5hdGlvbi5mb3JtKSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgICAgZmlsbDogXCJGMUZBRkZcIiwgLy8gTGlnaHQgYmx1ZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGV4cGxhbmF0aW9uLnVzYWdlKSB7XG4gICAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlVzYWdlOlwiLFxuICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oZXhwbGFuYXRpb24udXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZXhwbGFuYXRpb24ubGV2ZWxOb3Rlcykge1xuICAgICAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJOb3RlOlwiLFxuICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oZXhwbGFuYXRpb24ubGV2ZWxOb3RlcyksXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICAgIGZpbGw6IFwiRjFGQUZGXCIsIC8vIExpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFeGFtcGxlc1xuICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiRXhhbXBsZXM6XCIsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBncmFtbWFyRXhhbXBsZXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGFtcGxlcykgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhhbXBsZXMgOiBbXVxuICAgICAgICBncmFtbWFyRXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSkgPT4ge1xuICAgICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihleGFtcGxlKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgLy8gUHJhY3RpY2UgRXhlcmNpc2VzXG4gICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJQcmFjdGljZSBFeGVyY2lzZXM6XCIsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogMjAwLCBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBuZXcgZm9ybWF0IChleGVyY2lzZXMpIG9yIG9sZCBmb3JtYXQgKGV4ZXJjaXNlKVxuICAgICAgICBpZiAobGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlcyAmJiBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZXMpKSB7XG4gICAgICAgICAgLy8gTmV3IGZvcm1hdCB3aXRoIHN0cnVjdHVyZWQgZXhlcmNpc2VzXG4gICAgICAgICAgbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlcy5mb3JFYWNoKChleGVyY2lzZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGAke2luZGV4ICsgMX0uICR7ZXhlcmNpc2UucHJvbXB0fWApLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoZXhlcmNpc2UuYW5zd2VyKSB7XG4gICAgICAgICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogYEFuc3dlcjogJHtzYWZlU3RyaXBNYXJrZG93bihleGVyY2lzZS5hbnN3ZXIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhlcmNpc2UuZXhwbGFuYXRpb24pIHtcbiAgICAgICAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihleGVyY2lzZS5leHBsYW5hdGlvbiksXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZSAmJiBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZSkpIHtcbiAgICAgICAgICAvLyBPbGQgZm9ybWF0XG4gICAgICAgICAgY29uc3QgZ3JhbW1hckV4ZXJjaXNlcyA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZVxuICAgICAgICAgIGdyYW1tYXJFeGVyY2lzZXMuZm9yRWFjaCgoZXhlcmNpc2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihgJHtpbmRleCArIDF9LiAke2V4ZXJjaXNlfWApLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWRkU2VjdGlvbihcIkdyYW1tYXIgRm9jdXNcIiwgZ3JhbW1hckNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMucHJvbnVuY2lhdGlvbiAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb24pIHtcbiAgICAgICAgY29uc3QgcHJvblNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb25cbiAgICAgICAgY29uc3QgcHJvbnVuY2lhdGlvbkNvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiBpZiBwcmVzZW50XG4gICAgICAgIGlmIChwcm9uU2VjdGlvbi5pbnN0cnVjdGlvbikge1xuICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihwcm9uU2VjdGlvbi5pbnN0cnVjdGlvbiksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIGZvcm1hdCAoc2luZ2xlIHdvcmQpIGFuZCBuZXcgZm9ybWF0ICh3b3JkcyBhcnJheSlcbiAgICAgICAgaWYgKHByb25TZWN0aW9uLndvcmRzICYmIEFycmF5LmlzQXJyYXkocHJvblNlY3Rpb24ud29yZHMpICYmIHByb25TZWN0aW9uLndvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBOZXcgZm9ybWF0IHdpdGggbXVsdGlwbGUgd29yZHNcbiAgICAgICAgICBwcm9uU2VjdGlvbi53b3Jkcy5mb3JFYWNoKCh3b3JkSXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gQWRkIHNwYWNpbmcgYmV0d2VlbiB3b3Jkc1xuICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtuZXcgVGV4dFJ1bih7IHRleHQ6IFwiXCIgfSldLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDMwMCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdvcmQgYW5kIElQQVxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7c2FmZVN0cmlwTWFya2Rvd24od29yZEl0ZW0ud29yZCB8fCAnTi9BJyl9IGAsXG4gICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFske3NhZmVTdHJpcE1hcmtkb3duKHdvcmRJdGVtLmlwYSB8fCAnTi9BJyl9XWAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERpZmZpY3VsdCBTb3VuZHNcbiAgICAgICAgICAgIGlmICh3b3JkSXRlbS5kaWZmaWN1bHRTb3VuZHMgJiYgd29yZEl0ZW0uZGlmZmljdWx0U291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkRpZmZpY3VsdCBTb3VuZHM6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB3b3JkSXRlbS5kaWZmaWN1bHRTb3VuZHMubWFwKHMgPT4gYC8ke3N9L2ApLmpvaW4oJyAgJyksXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb251bmNpYXRpb24gVGlwc1xuICAgICAgICAgICAgaWYgKHdvcmRJdGVtLnRpcHMgJiYgd29yZEl0ZW0udGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJQcm9udW5jaWF0aW9uIFRpcHM6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHdvcmRJdGVtLnRpcHMuZm9yRWFjaCh0aXAgPT4ge1xuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBg4oCiICR7c2FmZVN0cmlwTWFya2Rvd24odGlwKX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcmFjdGljZSBTZW50ZW5jZVxuICAgICAgICAgICAgaWYgKHdvcmRJdGVtLnByYWN0aWNlU2VudGVuY2UpIHtcbiAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlByYWN0aWNlIFNlbnRlbmNlOlwiLFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAxNTAsIGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKHdvcmRJdGVtLnByYWN0aWNlU2VudGVuY2UpLFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmIChwcm9uU2VjdGlvbi53b3JkKSB7XG4gICAgICAgICAgLy8gT2xkIGZvcm1hdCB3aXRoIHNpbmdsZSB3b3JkXG4gICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGBXb3JkOiAke3NhZmVTdHJpcE1hcmtkb3duKHByb25TZWN0aW9uLndvcmQgfHwgJ04vQScpfWAsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGBJUEE6ICR7c2FmZVN0cmlwTWFya2Rvd24ocHJvblNlY3Rpb24uaXBhIHx8ICdOL0EnKX1gLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChwcm9uU2VjdGlvbi5wcmFjdGljZSkge1xuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFByYWN0aWNlOiBcIiR7c2FmZVN0cmlwTWFya2Rvd24ocHJvblNlY3Rpb24ucHJhY3RpY2UpfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9udW5jaWF0aW9uQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogXCJObyBwcm9udW5jaWF0aW9uIGRhdGEgYXZhaWxhYmxlXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYWRkU2VjdGlvbihcIlByb251bmNpYXRpb24gUHJhY3RpY2VcIiwgcHJvbnVuY2lhdGlvbkNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMud3JhcHVwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwKSB7XG4gICAgICAgIGNvbnN0IHdyYXB1cFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXApID8gbGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXAgOiBbXVxuICAgICAgICBjb25zdCB3cmFwdXBDb250ZW50ID0gd3JhcHVwUXVlc3Rpb25zLm1hcCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24ocXVlc3Rpb24pLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogXCJFRUY3RENcIiwgLy8gTGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGAke2luZGV4fS4gJHtxdWVzdGlvbn1gKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFkZFNlY3Rpb24oXCJMZXNzb24gV3JhcC11cFwiLCB3cmFwdXBDb250ZW50KVxuICAgICAgfVxuXG4gICAgICAvLyBGb290ZXJcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgIHRleHQ6IFwiR2VuZXJhdGVkIGJ5IExpbmd1YVNwYXJrXCIsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLFxuICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiA2MDAgfSxcbiAgICAgICAgfSksXG4gICAgICApXG5cbiAgICAgIC8vIENyZWF0ZSBkb2N1bWVudFxuICAgICAgY29uc3QgZG9jID0gbmV3IERvY3VtZW50KHtcbiAgICAgICAgc2VjdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSlcblxuICAgICAgLy8gR2VuZXJhdGUgYW5kIGRvd25sb2FkXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgV29yZCBkb2N1bWVudC4uLicpXG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBQYWNrZXIudG9CdWZmZXIoZG9jKVxuICAgICAgY29uc29sZS5sb2coJ0RvY3VtZW50IGJ1ZmZlciBjcmVhdGVkLCBzaXplOicsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuXG4gICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1ZmZlciBhcyBhbnldLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIiB9KVxuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtsZXNzb25EYXRhLmxlc3NvblR5cGV9LWxlc3Nvbi0ke2xlc3NvbkRhdGEuc3R1ZGVudExldmVsfS0ke0RhdGUubm93KCl9LmRvY3hgXG5cbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZGluZyBXb3JkIGRvY3VtZW50IHdpdGggZmlsZW5hbWU6JywgZmlsZU5hbWUpXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcbiAgICAgIGxpbmsuaHJlZiA9IHVybFxuICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspXG4gICAgICBsaW5rLmNsaWNrKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluaylcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKVxuICAgICAgY29uc29sZS5sb2coJ1dvcmQgZXhwb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdXb3JkIGV4cG9ydCBlcnJvcjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgV29yZCBleHBvcnQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsZXNzb25FeHBvcnRlciA9IG5ldyBMZXNzb25FeHBvcnRlcigpXG4iXSwibmFtZXMiOlsianNQREYiLCJEb2N1bWVudCIsIlBhY2tlciIsIlBhcmFncmFwaCIsIlRleHRSdW4iLCJIZWFkaW5nTGV2ZWwiLCJBbGlnbm1lbnRUeXBlIiwiVW5kZXJsaW5lVHlwZSIsImVuaGFuY2VEaWFsb2d1ZVdpdGhBdmF0YXJzIiwic3RyaXBNYXJrZG93biIsInRleHQiLCJyZXN1bHQiLCJyZXBsYWNlIiwic2FmZVN0cmlwTWFya2Rvd24iLCJlcnJvciIsImNvbnNvbGUiLCJzdWJzdHJpbmciLCJMZXNzb25FeHBvcnRlciIsImZvcm1hdERhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwieWVhciIsIm1vbnRoIiwiZGF5IiwidmFsaWRhdGVMZXNzb25EYXRhIiwibGVzc29uRGF0YSIsInNlY3Rpb25zIiwibG9nIiwiRXJyb3IiLCJsZXNzb25UaXRsZSIsImxlc3NvblR5cGUiLCJzdHVkZW50TGV2ZWwiLCJ0YXJnZXRMYW5ndWFnZSIsIndhcm11cCIsInR5cGUiLCJpc0FycmF5IiwiQXJyYXkiLCJ2YWx1ZSIsInZvY2FidWxhcnkiLCJsZW5ndGgiLCJyZWFkaW5nIiwiY29tcHJlaGVuc2lvbiIsImRpc2N1c3Npb24iLCJncmFtbWFyIiwiaGFzRm9jdXMiLCJmb2N1cyIsInByb251bmNpYXRpb24iLCJoYXNXb3JkIiwid29yZCIsIndyYXB1cCIsIndhcm4iLCJleHBvcnRUb1BERiIsImVuYWJsZWRTZWN0aW9ucyIsIk9iamVjdCIsImtleXMiLCJwZGYiLCJ5UG9zaXRpb24iLCJwYWdlSGVpZ2h0IiwiaW50ZXJuYWwiLCJwYWdlU2l6ZSIsImhlaWdodCIsIm1hcmdpbiIsImxpbmVIZWlnaHQiLCJGT05UX1NJWkVTIiwiTEVTU09OX1RJVExFIiwiU0VDVElPTl9IRUFERVIiLCJNQUlOX0NPTlRFTlQiLCJJTlNUUlVDVElPTlMiLCJTVVBQTEVNRU5UQVJZIiwiYWRkVGV4dCIsImZvbnRTaXplIiwiaXNCb2xkIiwiaXNJdGFsaWMiLCJpbmRlbnQiLCJzYW5pdGl6ZWRUZXh0IiwidHJpbSIsInNldEZvbnRTaXplIiwiZm9udFN0eWxlIiwic2V0Rm9udCIsIm1heFdpZHRoIiwid2lkdGgiLCJsaW5lcyIsInNwbGl0VGV4dFRvU2l6ZSIsImxpbmUiLCJhZGRQYWdlIiwiYWRkU2VjdGlvbiIsInRpdGxlIiwiY29udGVudCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJ3YXJtdXBRdWVzdGlvbnMiLCJmb3JFYWNoIiwicXVlc3Rpb24iLCJpbmRleCIsInNldEZpbGxDb2xvciIsImluc3RydWN0aW9uV2lkdGgiLCJpbnN0cnVjdGlvbkxpbmVzIiwiaW5zdHJ1Y3Rpb25IZWlnaHQiLCJyZWN0Iiwidm9jYWJ1bGFyeUl0ZW1zIiwidm9jYWJJbmRleCIsIml0ZW0iLCJtZWFuaW5nIiwiZXhhbXBsZXMiLCJleGFtcGxlIiwiZXhJbmRleCIsInJlYWRpbmdDb250ZW50IiwicGFydHMiLCJzcGxpdCIsImluY2x1ZGVzIiwiam9pbiIsImNvbXByZWhlbnNpb25RdWVzdGlvbnMiLCJkaXNjdXNzaW9uUXVlc3Rpb25zIiwiZGlhbG9ndWVQcmFjdGljZSIsImRpYWxvZ3VlU2VjdGlvbiIsImluc3RydWN0aW9uIiwiZW5oYW5jZWREaWFsb2d1ZSIsImRpYWxvZ3VlIiwiaWQiLCJkaWFsb2d1ZVByYWN0aWNlTGluZXMiLCJjaGFyV2lkdGgiLCJnZXRUZXh0V2lkdGgiLCJjaGFyYWN0ZXIiLCJsaW5lVGV4dCIsImkiLCJmb2xsb3dVcFF1ZXN0aW9ucyIsImRpYWxvZ3VlRmlsbEdhcCIsImRpYWxvZ3VlRmlsbEdhcExpbmVzIiwiYW5zd2VycyIsImV4cGxhbmF0aW9uIiwiZm9ybSIsImZvcm1XaWR0aCIsImZvcm1UaXRsZUxpbmVzIiwiZm9ybVRpdGxlSGVpZ2h0IiwiZm9ybUxpbmVzIiwiZm9ybUNvbnRlbnRIZWlnaHQiLCJ0b3RhbEZvcm1IZWlnaHQiLCJzZXRUZXh0Q29sb3IiLCJ1c2FnZSIsInVzYWdlV2lkdGgiLCJ1c2FnZVRpdGxlTGluZXMiLCJ1c2FnZVRpdGxlSGVpZ2h0IiwidXNhZ2VMaW5lcyIsInVzYWdlQ29udGVudEhlaWdodCIsInRvdGFsVXNhZ2VIZWlnaHQiLCJsZXZlbE5vdGVzIiwibm90ZVdpZHRoIiwibm90ZVRpdGxlTGluZXMiLCJub3RlVGl0bGVIZWlnaHQiLCJub3RlTGluZXMiLCJub3RlQ29udGVudEhlaWdodCIsInRvdGFsTm90ZUhlaWdodCIsImdyYW1tYXJFeGFtcGxlcyIsImV4ZXJjaXNlcyIsImV4ZXJjaXNlIiwicHJvbXB0IiwiYW5zd2VyIiwiZ3JhbW1hckV4ZXJjaXNlcyIsInByb25TZWN0aW9uIiwid29yZHMiLCJ3b3JkSXRlbSIsIndvcmRUZXh0IiwiaXBhVGV4dCIsImlwYSIsIndvcmRMaW5lcyIsImlwYUxpbmVzIiwiZGlmZmljdWx0U291bmRzIiwic291bmRzVGV4dCIsIm1hcCIsInMiLCJzb3VuZHNNYXhXaWR0aCIsInNvdW5kc0xpbmVzIiwidGlwcyIsInRpcCIsInRpcE1heFdpZHRoIiwidGlwTGluZXMiLCJwcmFjdGljZVNlbnRlbmNlIiwic2VudGVuY2VNYXhXaWR0aCIsInNlbnRlbmNlTGluZXMiLCJwcmFjdGljZSIsIndyYXB1cFF1ZXN0aW9ucyIsInBhZ2VDb3VudCIsImdldE51bWJlck9mUGFnZXMiLCJzZXRQYWdlIiwiZmlsZU5hbWUiLCJub3ciLCJzYXZlIiwic2F2ZUVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwibmFtZSIsImxlc3NvbkRhdGFLZXlzIiwic2VjdGlvbnNLZXlzIiwiZW5hYmxlZFNlY3Rpb25zS2V5cyIsImV4cG9ydFRvV29yZCIsImNoaWxkcmVuIiwiV09SRF9GT05UX1NJWkVTIiwicHVzaCIsImJvbGQiLCJzaXplIiwiaGVhZGluZyIsIlRJVExFIiwiYWxpZ25tZW50IiwiQ0VOVEVSIiwic3BhY2luZyIsImFmdGVyIiwidW5kZXJsaW5lIiwiU0lOR0xFIiwiSEVBRElOR18yIiwiYmVmb3JlIiwid2FybXVwQ29udGVudCIsIml0YWxpY3MiLCJzaGFkaW5nIiwiZmlsbCIsImJvcmRlciIsImxlZnQiLCJjb2xvciIsInN0eWxlIiwidm9jYWJDb250ZW50IiwicmVhZGluZ1RleHQiLCJjb21wcmVoZW5zaW9uQ29udGVudCIsImRpc2N1c3Npb25Db250ZW50IiwiZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQiLCJkaWFsb2d1ZUxpbmVzIiwiZGlhbG9ndWVGaWxsR2FwQ29udGVudCIsImdyYW1tYXJDb250ZW50IiwicHJvbnVuY2lhdGlvbkNvbnRlbnQiLCJ3cmFwdXBDb250ZW50IiwiZG9jIiwicHJvcGVydGllcyIsImJ1ZmZlciIsInRvQnVmZmVyIiwiYnl0ZUxlbmd0aCIsImJsb2IiLCJCbG9iIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJsZXNzb25FeHBvcnRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/export-utils.ts\n"));

/***/ })

});