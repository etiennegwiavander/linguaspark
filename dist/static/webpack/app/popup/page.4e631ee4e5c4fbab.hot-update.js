"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/popup/page",{

/***/ "(app-pages-browser)/./lib/export-utils.ts":
/*!*****************************!*\
  !*** ./lib/export-utils.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonExporter: function() { return /* binding */ LessonExporter; },\n/* harmony export */   lessonExporter: function() { return /* binding */ lessonExporter; }\n/* harmony export */ });\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jspdf */ \"(app-pages-browser)/./node_modules/jspdf/dist/jspdf.es.min.js\");\n/* harmony import */ var docx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! docx */ \"(app-pages-browser)/./node_modules/docx/dist/index.mjs\");\n\n\nclass LessonExporter {\n    formatDate() {\n        return new Date().toLocaleDateString(\"en-US\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        });\n    }\n    validateLessonData(lessonData) {\n        var _sections_vocabulary, _sections_reading, _sections_comprehension, _sections_discussion, _sections_grammar, _sections_pronunciation, _sections_wrapup;\n        console.log(\"Validating lesson data:\", lessonData);\n        if (!lessonData) {\n            throw new Error(\"Lesson data is required\");\n        }\n        if (!lessonData.lessonTitle) {\n            throw new Error(\"AI-generated lesson title is required\");\n        }\n        if (!lessonData.lessonType) {\n            throw new Error(\"Lesson type is required\");\n        }\n        if (!lessonData.studentLevel) {\n            throw new Error(\"Student level is required\");\n        }\n        if (!lessonData.targetLanguage) {\n            throw new Error(\"Target language is required\");\n        }\n        if (!lessonData.sections) {\n            throw new Error(\"Lesson sections are required\");\n        }\n        // Validate sections structure with detailed logging\n        const sections = lessonData.sections;\n        console.log(\"Validating section types:\", {\n            warmup: {\n                type: typeof sections.warmup,\n                isArray: Array.isArray(sections.warmup),\n                value: sections.warmup\n            },\n            vocabulary: {\n                type: typeof sections.vocabulary,\n                isArray: Array.isArray(sections.vocabulary),\n                length: (_sections_vocabulary = sections.vocabulary) === null || _sections_vocabulary === void 0 ? void 0 : _sections_vocabulary.length\n            },\n            reading: {\n                type: typeof sections.reading,\n                length: (_sections_reading = sections.reading) === null || _sections_reading === void 0 ? void 0 : _sections_reading.length\n            },\n            comprehension: {\n                type: typeof sections.comprehension,\n                isArray: Array.isArray(sections.comprehension),\n                length: (_sections_comprehension = sections.comprehension) === null || _sections_comprehension === void 0 ? void 0 : _sections_comprehension.length\n            },\n            discussion: {\n                type: typeof sections.discussion,\n                isArray: Array.isArray(sections.discussion),\n                length: (_sections_discussion = sections.discussion) === null || _sections_discussion === void 0 ? void 0 : _sections_discussion.length\n            },\n            grammar: {\n                type: typeof sections.grammar,\n                hasFocus: !!((_sections_grammar = sections.grammar) === null || _sections_grammar === void 0 ? void 0 : _sections_grammar.focus)\n            },\n            pronunciation: {\n                type: typeof sections.pronunciation,\n                hasWord: !!((_sections_pronunciation = sections.pronunciation) === null || _sections_pronunciation === void 0 ? void 0 : _sections_pronunciation.word)\n            },\n            wrapup: {\n                type: typeof sections.wrapup,\n                isArray: Array.isArray(sections.wrapup),\n                length: (_sections_wrapup = sections.wrapup) === null || _sections_wrapup === void 0 ? void 0 : _sections_wrapup.length\n            }\n        });\n        if (!Array.isArray(sections.warmup)) {\n            console.warn(\"Warmup section is not an array:\", sections.warmup);\n        }\n        if (!Array.isArray(sections.vocabulary)) {\n            console.warn(\"Vocabulary section is not an array:\", sections.vocabulary);\n        }\n        if (typeof sections.reading !== \"string\") {\n            console.warn(\"Reading section is not a string:\", sections.reading);\n        }\n        if (!Array.isArray(sections.comprehension)) {\n            console.warn(\"Comprehension section is not an array:\", sections.comprehension);\n        }\n        if (!Array.isArray(sections.discussion)) {\n            console.warn(\"Discussion section is not an array:\", sections.discussion);\n        }\n        if (!sections.grammar || !sections.grammar.focus) {\n            console.warn(\"Grammar section is malformed:\", sections.grammar);\n        }\n        if (!sections.pronunciation || !sections.pronunciation.word) {\n            console.warn(\"Pronunciation section is malformed:\", sections.pronunciation);\n        }\n        if (!Array.isArray(sections.wrapup)) {\n            console.warn(\"Wrapup section is not an array:\", sections.wrapup);\n        }\n        console.log(\"Lesson data validation completed\");\n    }\n    async exportToPDF(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting PDF export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            // Check if we're in a browser environment\n            if (false) {}\n            // Check if jsPDF is available\n            if (typeof jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"] === \"undefined\") {\n                throw new Error(\"jsPDF library is not available\");\n            }\n            console.log(\"Environment checks passed\");\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            console.log(\"Creating jsPDF instance...\");\n            const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n            console.log(\"jsPDF instance created successfully\");\n            let yPosition = 20;\n            const pageHeight = pdf.internal.pageSize.height;\n            const margin = 20;\n            const lineHeight = 7;\n            console.log(\"PDF dimensions:\", {\n                pageHeight,\n                margin,\n                lineHeight\n            });\n            // Typography hierarchy constants (matching web interface)\n            const FONT_SIZES = {\n                LESSON_TITLE: 32,\n                SECTION_HEADER: 28,\n                MAIN_CONTENT: 16,\n                INSTRUCTIONS: 15,\n                SUPPLEMENTARY: 14 // Answer keys, explanations\n            };\n            // Helper function to add text with word wrapping\n            const addText = function(text) {\n                let fontSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : FONT_SIZES.MAIN_CONTENT, isBold = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false, indent = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;\n                try {\n                    // Sanitize text to prevent PDF errors\n                    const sanitizedText = text.replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, \"\") // Remove control characters\n                    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\u3000-\\u303F]/g, \" \") // Replace special spaces\n                    .trim();\n                    if (!sanitizedText) {\n                        console.warn(\"Empty text after sanitization, skipping\");\n                        return;\n                    }\n                    console.log('Adding text: \"'.concat(sanitizedText.substring(0, 50)).concat(sanitizedText.length > 50 ? \"...\" : \"\", '\"'));\n                    pdf.setFontSize(fontSize);\n                    pdf.setFont(\"helvetica\", isBold ? \"bold\" : \"normal\");\n                    const maxWidth = pdf.internal.pageSize.width - margin * 2 - indent;\n                    const lines = pdf.splitTextToSize(sanitizedText, maxWidth);\n                    for (const line of lines){\n                        if (yPosition > pageHeight - 30) {\n                            pdf.addPage();\n                            yPosition = 20;\n                        }\n                        pdf.text(line, margin + indent, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 3 // Extra spacing after text block\n                    ;\n                } catch (error) {\n                    console.error(\"Error adding text to PDF:\", error, \"Text:\", text);\n                    throw error;\n                }\n            };\n            const addSection = (title, content)=>{\n                if (yPosition > pageHeight - 50) {\n                    pdf.addPage();\n                    yPosition = 20;\n                }\n                addText(title, FONT_SIZES.SECTION_HEADER, true);\n                yPosition += 5;\n                content();\n                yPosition += 10;\n            };\n            // Title and metadata\n            addText(lessonData.lessonTitle, FONT_SIZES.LESSON_TITLE, true);\n            addText(\"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)), FONT_SIZES.SUPPLEMENTARY);\n            addText(\"Generated on: \".concat(this.formatDate()), FONT_SIZES.SUPPLEMENTARY);\n            yPosition += 10;\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                addSection(\"Warm-up Questions\", ()=>{\n                    const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                    warmupQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            addText(question, FONT_SIZES.INSTRUCTIONS, false, 10);\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                addSection(\"Key Vocabulary\", ()=>{\n                    const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                    vocabularyItems.forEach((item, index)=>{\n                        // First item might be an instruction\n                        if (index === 0 && item.word === \"INSTRUCTION\") {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(item.meaning, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            addText(item.meaning, FONT_SIZES.INSTRUCTIONS, false, 10);\n                            return;\n                        }\n                        addText(\"\".concat(index + 1, \". \").concat(item.word), FONT_SIZES.MAIN_CONTENT, true, 10);\n                        addText(\"   Meaning: \".concat(item.meaning), FONT_SIZES.MAIN_CONTENT, false, 15);\n                        // Handle both old format (example) and new format (examples array)\n                        if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                            addText(\"   Examples:\", FONT_SIZES.INSTRUCTIONS, true, 15);\n                            const examples = Array.isArray(item.examples) ? item.examples : [];\n                            examples.forEach((example, exIndex)=>{\n                                addText(\"   \".concat(exIndex + 1, '. \"').concat(example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, 20);\n                            });\n                        } else if (item.example) {\n                            addText('   Example: \"'.concat(item.example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, 15);\n                        }\n                        yPosition += 3;\n                    });\n                });\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                addSection(\"Reading Passage\", ()=>{\n                    const readingContent = lessonData.sections.reading;\n                    const parts = readingContent.split(\"\\n\\n\");\n                    // Check if first part is an instruction\n                    if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                        // Add instruction with light green background\n                        pdf.setFillColor(238, 247, 220) // #EEF7DC\n                        ;\n                        const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                        const instructionLines = pdf.splitTextToSize(parts[0], instructionWidth);\n                        const instructionHeight = instructionLines.length * lineHeight + 6;\n                        pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                        addText(parts[0], FONT_SIZES.INSTRUCTIONS, false, 10);\n                        yPosition += 3;\n                        // Add the rest of the reading passage\n                        addText(parts.slice(1).join(\"\\n\\n\"), FONT_SIZES.MAIN_CONTENT, false, 10);\n                    } else {\n                        // No instruction, display as before\n                        addText(readingContent, FONT_SIZES.MAIN_CONTENT, false, 10);\n                    }\n                });\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                addSection(\"Reading Comprehension\", ()=>{\n                    const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                    comprehensionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light blue background\n                        if (index === 0) {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            addText(question, FONT_SIZES.INSTRUCTIONS, false, 10);\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                addSection(\"Discussion Questions\", ()=>{\n                    const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                    discussionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            addText(question, FONT_SIZES.INSTRUCTIONS, false, 10);\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                addSection(\"Dialogue Practice\", ()=>{\n                    const dialogueSection = lessonData.sections.dialoguePractice;\n                    // Add instruction with light green background color\n                    pdf.setFillColor(238, 247, 220) // #EEF7DC\n                    ;\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    addText(dialogueSection.instruction, FONT_SIZES.INSTRUCTIONS, false, 10);\n                    yPosition += 3;\n                    // Add dialogue lines with character names\n                    const dialoguePracticeLines = Array.isArray(dialogueSection.dialogue) ? dialogueSection.dialogue : [];\n                    dialoguePracticeLines.forEach((line)=>{\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                        yPosition += 5;\n                        addText(\"Follow-up Questions:\", FONT_SIZES.INSTRUCTIONS, true, 10);\n                        const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                        followUpQuestions.forEach((question, index)=>{\n                            addText(\"\".concat(index + 1, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, 15);\n                        });\n                    }\n                });\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                addSection(\"Dialogue Fill-in-the-Gap\", ()=>{\n                    const dialogueSection = lessonData.sections.dialogueFillGap;\n                    // Add instruction with light blue background color\n                    pdf.setFillColor(241, 250, 255) // #F1FAFF\n                    ;\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    addText(dialogueSection.instruction, FONT_SIZES.INSTRUCTIONS, false, 10);\n                    yPosition += 3;\n                    // Add dialogue lines with character names\n                    const dialogueFillGapLines = Array.isArray(dialogueSection.dialogue) ? dialogueSection.dialogue : [];\n                    dialogueFillGapLines.forEach((line)=>{\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                        yPosition += 5;\n                        addText(\"Answer Key:\", FONT_SIZES.INSTRUCTIONS, true, 10);\n                        addText(dialogueSection.answers.join(\", \"), FONT_SIZES.SUPPLEMENTARY, false, 15);\n                    }\n                });\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                addSection(\"Grammar Focus\", ()=>{\n                    addText(\"Focus: \".concat(lessonData.sections.grammar.focus), FONT_SIZES.MAIN_CONTENT, true, 10);\n                    yPosition += 3;\n                    addText(\"Examples:\", FONT_SIZES.INSTRUCTIONS, true, 10);\n                    const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                    grammarExamples.forEach((example, index)=>{\n                        addText(\"• \".concat(example), FONT_SIZES.SUPPLEMENTARY, false, 15);\n                    });\n                    yPosition += 3;\n                    addText(\"Practice Exercise:\", FONT_SIZES.INSTRUCTIONS, true, 10);\n                    const grammarExercises = Array.isArray(lessonData.sections.grammar.exercise) ? lessonData.sections.grammar.exercise : [];\n                    grammarExercises.forEach((exercise, index)=>{\n                        addText(\"\".concat(index + 1, \". \").concat(exercise), FONT_SIZES.MAIN_CONTENT, false, 15);\n                    });\n                });\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                addSection(\"Pronunciation Practice\", ()=>{\n                    addText(\"Word: \".concat(lessonData.sections.pronunciation.word), FONT_SIZES.MAIN_CONTENT, true, 10);\n                    addText(\"IPA: \".concat(lessonData.sections.pronunciation.ipa), FONT_SIZES.SUPPLEMENTARY, false, 10);\n                    addText('Practice: \"'.concat(lessonData.sections.pronunciation.practice, '\"'), FONT_SIZES.MAIN_CONTENT, false, 10);\n                });\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                addSection(\"Lesson Wrap-up\", ()=>{\n                    const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                    wrapupQuestions.forEach((question, index)=>{\n                        addText(\"\".concat(index + 1, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, 10);\n                    });\n                });\n            }\n            // Footer\n            const pageCount = pdf.internal.getNumberOfPages();\n            for(let i = 1; i <= pageCount; i++){\n                pdf.setPage(i);\n                pdf.setFontSize(8);\n                pdf.setFont(\"helvetica\", \"normal\");\n                pdf.text(\"Generated by LinguaSpark - Page \".concat(i, \" of \").concat(pageCount), margin, pageHeight - 10);\n            }\n            // Download the PDF\n            try {\n                const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".pdf\");\n                console.log(\"Saving PDF with filename:\", fileName);\n                pdf.save(fileName);\n                console.log(\"PDF export completed successfully\");\n            } catch (saveError) {\n                console.error(\"Error saving PDF:\", saveError);\n                throw new Error(\"Failed to save PDF: \".concat(saveError instanceof Error ? saveError.message : \"Unknown save error\"));\n            }\n        } catch (error) {\n            console.error(\"PDF export error:\", error);\n            console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n            console.error(\"Error details:\", {\n                name: error instanceof Error ? error.name : \"Unknown\",\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                lessonDataKeys: lessonData ? Object.keys(lessonData) : \"No lesson data\",\n                sectionsKeys: (lessonData === null || lessonData === void 0 ? void 0 : lessonData.sections) ? Object.keys(lessonData.sections) : \"No sections\",\n                enabledSectionsKeys: enabledSections ? Object.keys(enabledSections) : \"No enabled sections\"\n            });\n            throw new Error(\"PDF export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n    async exportToWord(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting Word export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            const children = [];\n            // Typography hierarchy constants (in half-points for Word - multiply by 2)\n            // 32px = 24pt, 28px = 21pt, 16px = 12pt, 15px = 11.25pt, 14px = 10.5pt\n            const WORD_FONT_SIZES = {\n                LESSON_TITLE: 48,\n                SECTION_HEADER: 42,\n                MAIN_CONTENT: 24,\n                INSTRUCTIONS: 23,\n                SUPPLEMENTARY: 21 // 10.5pt (14px equivalent)\n            };\n            // Title and metadata\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: lessonData.lessonTitle,\n                        bold: true,\n                        size: WORD_FONT_SIZES.LESSON_TITLE\n                    })\n                ],\n                heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.TITLE,\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    after: 400\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 200\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated on: \".concat(this.formatDate()),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 400\n                }\n            }));\n            // Helper function to add section\n            const addSection = (title, content)=>{\n                children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: title,\n                            bold: true,\n                            size: WORD_FONT_SIZES.SECTION_HEADER,\n                            underline: {\n                                type: docx__WEBPACK_IMPORTED_MODULE_1__.UnderlineType.SINGLE\n                            }\n                        })\n                    ],\n                    heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.HEADING_2,\n                    spacing: {\n                        before: 400,\n                        after: 200\n                    }\n                }));\n                children.push(...content);\n            };\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                const warmupContent = warmupQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: question,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\".concat(index, \". \").concat(question),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Warm-up Questions\", warmupContent);\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                const vocabContent = [];\n                const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                vocabularyItems.forEach((item, index)=>{\n                    // First item might be an instruction\n                    if (index === 0 && item.word === \"INSTRUCTION\") {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: item.meaning,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        return;\n                    }\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(index + 1, \". \").concat(item.word),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"   Meaning: \".concat(item.meaning),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    // Handle both old format (example) and new format (examples array)\n                    if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"   Examples:\",\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    bold: true\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        // Additional safety check before forEach\n                        const examples = Array.isArray(item.examples) ? item.examples : [];\n                        examples.forEach((example, exIndex)=>{\n                            vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"      \".concat(exIndex + 1, '. \"').concat(example, '\"'),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                        italics: true\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                        });\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\"\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    } else if (item.example) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: '   Example: \"'.concat(item.example, '\"'),\n                                    size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            }\n                        }));\n                    }\n                });\n                addSection(\"Key Vocabulary\", vocabContent);\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                const readingText = lessonData.sections.reading;\n                const parts = readingText.split(\"\\n\\n\");\n                const readingContent = [];\n                // Check if first part is an instruction\n                if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                    // Add instruction with light green background\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: parts[0],\n                                size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                italics: true\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        },\n                        shading: {\n                            fill: \"EEF7DC\"\n                        },\n                        border: {\n                            left: {\n                                color: \"CCCCCC\",\n                                size: 6,\n                                style: \"single\"\n                            }\n                        }\n                    }));\n                    // Add the rest of the reading passage\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: parts.slice(1).join(\"\\n\\n\"),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                } else {\n                    // No instruction, display as before\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: readingText,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                }\n                addSection(\"Reading Passage\", readingContent);\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                const comprehensionContent = comprehensionQuestions.map((question, index)=>{\n                    // First item is the instruction with light blue background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: question,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\".concat(index, \". \").concat(question),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Reading Comprehension\", comprehensionContent);\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                const discussionContent = discussionQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: question,\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\".concat(index, \". \").concat(question),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Discussion Questions\", discussionContent);\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                const dialoguePracticeContent = [];\n                const dialogueSection = lessonData.sections.dialoguePractice;\n                // Add instruction with light green background (#EEF7DC)\n                dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: dialogueSection.instruction,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"EEF7DC\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Add dialogue lines with character names in bold\n                const dialogueLines = Array.isArray(dialogueSection.dialogue) ? dialogueSection.dialogue : [];\n                dialogueLines.forEach((line)=>{\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(line.character, \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: line.line,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                // Add follow-up questions if any\n                if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Follow-up Questions:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                    followUpQuestions.forEach((question, index)=>{\n                        dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\".concat(index + 1, \". \").concat(question),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    });\n                }\n                addSection(\"Dialogue Practice\", dialoguePracticeContent);\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                const dialogueFillGapContent = [];\n                const dialogueSection = lessonData.sections.dialogueFillGap;\n                // Add instruction with light blue background (#F1FAFF)\n                dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: dialogueSection.instruction,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"F1FAFF\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Add dialogue lines with character names in bold\n                const dialogueFillGapLines = Array.isArray(dialogueSection.dialogue) ? dialogueSection.dialogue : [];\n                dialogueFillGapLines.forEach((line)=>{\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(line.character, \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: line.line,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                // Add answer key if any\n                if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Answer Key:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: dialogueSection.answers.join(\", \"),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                }\n                addSection(\"Dialogue Fill-in-the-Gap\", dialogueFillGapContent);\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                const grammarContent = [];\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Focus: \".concat(lessonData.sections.grammar.focus),\n                            bold: true,\n                            size: WORD_FONT_SIZES.MAIN_CONTENT\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    }\n                }));\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Examples:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        after: 100\n                    }\n                }));\n                const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                grammarExamples.forEach((example)=>{\n                    grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"• \".concat(example),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Practice Exercise:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        before: 200,\n                        after: 100\n                    }\n                }));\n                const grammarExercises = Array.isArray(lessonData.sections.grammar.exercise) ? lessonData.sections.grammar.exercise : [];\n                grammarExercises.forEach((exercise, index)=>{\n                    grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(index + 1, \". \").concat(exercise),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                addSection(\"Grammar Focus\", grammarContent);\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                const pronunciationContent = [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Word: \".concat(lessonData.sections.pronunciation.word),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }),\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"IPA: \".concat(lessonData.sections.pronunciation.ipa),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }),\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: 'Practice: \"'.concat(lessonData.sections.pronunciation.practice, '\"'),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT,\n                                italics: true\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    })\n                ];\n                addSection(\"Pronunciation Practice\", pronunciationContent);\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                const wrapupContent = wrapupQuestions.map((question, index)=>new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(index + 1, \". \").concat(question),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }));\n                addSection(\"Lesson Wrap-up\", wrapupContent);\n            }\n            // Footer\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated by LinguaSpark\",\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                        italics: true\n                    })\n                ],\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    before: 600\n                }\n            }));\n            // Create document\n            const doc = new docx__WEBPACK_IMPORTED_MODULE_1__.Document({\n                sections: [\n                    {\n                        properties: {},\n                        children: children\n                    }\n                ]\n            });\n            // Generate and download\n            console.log(\"Creating Word document...\");\n            const buffer = await docx__WEBPACK_IMPORTED_MODULE_1__.Packer.toBuffer(doc);\n            console.log(\"Document buffer created, size:\", buffer.byteLength);\n            const blob = new Blob([\n                buffer\n            ], {\n                type: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n            });\n            const url = URL.createObjectURL(blob);\n            const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".docx\");\n            console.log(\"Downloading Word document with filename:\", fileName);\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            URL.revokeObjectURL(url);\n            console.log(\"Word export completed successfully\");\n        } catch (error) {\n            console.error(\"Word export error:\", error);\n            throw new Error(\"Word export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n}\nconst lessonExporter = new LessonExporter();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJQyxLQUFLO2dCQUFDSjthQUFjLEVBQUU7Z0JBQUV2SixNQUFNO1lBQTBFO1lBQ3pILE1BQU00SixNQUFNQyxJQUFJQyxlQUFlLENBQUNKO1lBQ2hDLE1BQU1sRCxXQUFXLEdBQW1DbEgsT0FBaENBLFdBQVdNLFVBQVUsRUFBQyxZQUFxQ1osT0FBM0JNLFdBQVdPLFlBQVksRUFBQyxLQUFjLE9BQVhiLEtBQUt5SCxHQUFHLElBQUc7WUFFMUZqSCxRQUFRQyxHQUFHLENBQUMsNENBQTRDK0c7WUFDeEQsTUFBTXVELE9BQU9DLFNBQVNDLGFBQWEsQ0FBQztZQUNwQ0YsS0FBS0csSUFBSSxHQUFHTjtZQUNaRyxLQUFLSSxRQUFRLEdBQUczRDtZQUNoQndELFNBQVNJLElBQUksQ0FBQ0MsV0FBVyxDQUFDTjtZQUMxQkEsS0FBS08sS0FBSztZQUNWTixTQUFTSSxJQUFJLENBQUNHLFdBQVcsQ0FBQ1I7WUFDMUJGLElBQUlXLGVBQWUsQ0FBQ1o7WUFDcEJwSyxRQUFRQyxHQUFHLENBQUM7UUFDZCxFQUFFLE9BQU8yRCxPQUFPO1lBQ2Q1RCxRQUFRNEQsS0FBSyxDQUFDLHNCQUFzQkE7WUFDcEMsTUFBTSxJQUFJMUQsTUFBTSx1QkFBZ0YsT0FBekQwRCxpQkFBaUIxRCxRQUFRMEQsTUFBTXdELE9BQU8sR0FBRztRQUNsRjtJQUNGO0FBQ0Y7QUFFTyxNQUFNNkQsaUJBQWlCLElBQUkzTCxpQkFBZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL2V4cG9ydC11dGlscy50cz8xMGQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqc1BERiBmcm9tIFwianNwZGZcIlxuaW1wb3J0IHsgRG9jdW1lbnQsIFBhY2tlciwgUGFyYWdyYXBoLCBUZXh0UnVuLCBIZWFkaW5nTGV2ZWwsIEFsaWdubWVudFR5cGUsIFVuZGVybGluZVR5cGUgfSBmcm9tIFwiZG9jeFwiXG5cbmludGVyZmFjZSBMZXNzb25EYXRhIHtcbiAgbGVzc29uVGl0bGU6IHN0cmluZ1xuICBsZXNzb25UeXBlOiBzdHJpbmdcbiAgc3R1ZGVudExldmVsOiBzdHJpbmdcbiAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZ1xuICBzZWN0aW9uczoge1xuICAgIHdhcm11cDogc3RyaW5nW11cbiAgICB2b2NhYnVsYXJ5OiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgbWVhbmluZzogc3RyaW5nOyBleGFtcGxlPzogc3RyaW5nOyBleGFtcGxlcz86IHN0cmluZ1tdIH0+XG4gICAgcmVhZGluZzogc3RyaW5nXG4gICAgY29tcHJlaGVuc2lvbjogc3RyaW5nW11cbiAgICBkaXNjdXNzaW9uOiBzdHJpbmdbXVxuICAgIGRpYWxvZ3VlUHJhY3RpY2U/OiB7XG4gICAgICBpbnN0cnVjdGlvbjogc3RyaW5nXG4gICAgICBkaWFsb2d1ZTogQXJyYXk8eyBjaGFyYWN0ZXI6IHN0cmluZzsgbGluZTogc3RyaW5nIH0+XG4gICAgICBmb2xsb3dVcFF1ZXN0aW9uczogc3RyaW5nW11cbiAgICB9XG4gICAgZGlhbG9ndWVGaWxsR2FwPzoge1xuICAgICAgaW5zdHJ1Y3Rpb246IHN0cmluZ1xuICAgICAgZGlhbG9ndWU6IEFycmF5PHsgY2hhcmFjdGVyOiBzdHJpbmc7IGxpbmU6IHN0cmluZzsgaXNHYXA/OiBib29sZWFuIH0+XG4gICAgICBhbnN3ZXJzOiBzdHJpbmdbXVxuICAgIH1cbiAgICBncmFtbWFyOiB7XG4gICAgICBmb2N1czogc3RyaW5nXG4gICAgICBleGFtcGxlczogc3RyaW5nW11cbiAgICAgIGV4ZXJjaXNlOiBzdHJpbmdbXVxuICAgIH1cbiAgICBwcm9udW5jaWF0aW9uOiB7XG4gICAgICB3b3JkOiBzdHJpbmdcbiAgICAgIGlwYTogc3RyaW5nXG4gICAgICBwcmFjdGljZTogc3RyaW5nXG4gICAgfVxuICAgIHdyYXB1cDogc3RyaW5nW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVzc29uRXhwb3J0ZXIge1xuICBwcml2YXRlIGZvcm1hdERhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCB7XG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgfSlcbiAgfVxuXG5cblxuICBwcml2YXRlIHZhbGlkYXRlTGVzc29uRGF0YShsZXNzb25EYXRhOiBMZXNzb25EYXRhKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpbmcgbGVzc29uIGRhdGE6JywgbGVzc29uRGF0YSlcblxuICAgIGlmICghbGVzc29uRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZXNzb24gZGF0YSBpcyByZXF1aXJlZCcpXG4gICAgfVxuICAgIGlmICghbGVzc29uRGF0YS5sZXNzb25UaXRsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSS1nZW5lcmF0ZWQgbGVzc29uIHRpdGxlIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLmxlc3NvblR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTGVzc29uIHR5cGUgaXMgcmVxdWlyZWQnKVxuICAgIH1cbiAgICBpZiAoIWxlc3NvbkRhdGEuc3R1ZGVudExldmVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0dWRlbnQgbGV2ZWwgaXMgcmVxdWlyZWQnKVxuICAgIH1cbiAgICBpZiAoIWxlc3NvbkRhdGEudGFyZ2V0TGFuZ3VhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGFyZ2V0IGxhbmd1YWdlIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLnNlY3Rpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlc3NvbiBzZWN0aW9ucyBhcmUgcmVxdWlyZWQnKVxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHNlY3Rpb25zIHN0cnVjdHVyZSB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICBjb25zdCBzZWN0aW9ucyA9IGxlc3NvbkRhdGEuc2VjdGlvbnNcbiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGluZyBzZWN0aW9uIHR5cGVzOicsIHtcbiAgICAgIHdhcm11cDogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMud2FybXVwLCBpc0FycmF5OiBBcnJheS5pc0FycmF5KHNlY3Rpb25zLndhcm11cCksIHZhbHVlOiBzZWN0aW9ucy53YXJtdXAgfSxcbiAgICAgIHZvY2FidWxhcnk6IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLnZvY2FidWxhcnksIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMudm9jYWJ1bGFyeSksIGxlbmd0aDogc2VjdGlvbnMudm9jYWJ1bGFyeT8ubGVuZ3RoIH0sXG4gICAgICByZWFkaW5nOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy5yZWFkaW5nLCBsZW5ndGg6IHNlY3Rpb25zLnJlYWRpbmc/Lmxlbmd0aCB9LFxuICAgICAgY29tcHJlaGVuc2lvbjogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMuY29tcHJlaGVuc2lvbiwgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWN0aW9ucy5jb21wcmVoZW5zaW9uKSwgbGVuZ3RoOiBzZWN0aW9ucy5jb21wcmVoZW5zaW9uPy5sZW5ndGggfSxcbiAgICAgIGRpc2N1c3Npb246IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLmRpc2N1c3Npb24sIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMuZGlzY3Vzc2lvbiksIGxlbmd0aDogc2VjdGlvbnMuZGlzY3Vzc2lvbj8ubGVuZ3RoIH0sXG4gICAgICBncmFtbWFyOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy5ncmFtbWFyLCBoYXNGb2N1czogISFzZWN0aW9ucy5ncmFtbWFyPy5mb2N1cyB9LFxuICAgICAgcHJvbnVuY2lhdGlvbjogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMucHJvbnVuY2lhdGlvbiwgaGFzV29yZDogISFzZWN0aW9ucy5wcm9udW5jaWF0aW9uPy53b3JkIH0sXG4gICAgICB3cmFwdXA6IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLndyYXB1cCwgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWN0aW9ucy53cmFwdXApLCBsZW5ndGg6IHNlY3Rpb25zLndyYXB1cD8ubGVuZ3RoIH1cbiAgICB9KVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLndhcm11cCkpIHtcbiAgICAgIGNvbnNvbGUud2FybignV2FybXVwIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLndhcm11cClcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLnZvY2FidWxhcnkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1ZvY2FidWxhcnkgc2VjdGlvbiBpcyBub3QgYW4gYXJyYXk6Jywgc2VjdGlvbnMudm9jYWJ1bGFyeSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWN0aW9ucy5yZWFkaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc29sZS53YXJuKCdSZWFkaW5nIHNlY3Rpb24gaXMgbm90IGEgc3RyaW5nOicsIHNlY3Rpb25zLnJlYWRpbmcpXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy5jb21wcmVoZW5zaW9uKSkge1xuICAgICAgY29uc29sZS53YXJuKCdDb21wcmVoZW5zaW9uIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLmNvbXByZWhlbnNpb24pXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy5kaXNjdXNzaW9uKSkge1xuICAgICAgY29uc29sZS53YXJuKCdEaXNjdXNzaW9uIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLmRpc2N1c3Npb24pXG4gICAgfVxuICAgIGlmICghc2VjdGlvbnMuZ3JhbW1hciB8fCAhc2VjdGlvbnMuZ3JhbW1hci5mb2N1cykge1xuICAgICAgY29uc29sZS53YXJuKCdHcmFtbWFyIHNlY3Rpb24gaXMgbWFsZm9ybWVkOicsIHNlY3Rpb25zLmdyYW1tYXIpXG4gICAgfVxuICAgIGlmICghc2VjdGlvbnMucHJvbnVuY2lhdGlvbiB8fCAhc2VjdGlvbnMucHJvbnVuY2lhdGlvbi53b3JkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1Byb251bmNpYXRpb24gc2VjdGlvbiBpcyBtYWxmb3JtZWQ6Jywgc2VjdGlvbnMucHJvbnVuY2lhdGlvbilcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLndyYXB1cCkpIHtcbiAgICAgIGNvbnNvbGUud2FybignV3JhcHVwIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLndyYXB1cClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnTGVzc29uIGRhdGEgdmFsaWRhdGlvbiBjb21wbGV0ZWQnKVxuICB9XG5cbiAgYXN5bmMgZXhwb3J0VG9QREYobGVzc29uRGF0YTogTGVzc29uRGF0YSwgZW5hYmxlZFNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgUERGIGV4cG9ydCB3aXRoIGRhdGE6JywgeyBsZXNzb25EYXRhLCBlbmFibGVkU2VjdGlvbnMgfSlcblxuICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQREYgZXhwb3J0IGlzIG9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXIgZW52aXJvbm1lbnQnKVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBqc1BERiBpcyBhdmFpbGFibGVcbiAgICAgIGlmICh0eXBlb2YganNQREYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignanNQREYgbGlicmFyeSBpcyBub3QgYXZhaWxhYmxlJylcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0Vudmlyb25tZW50IGNoZWNrcyBwYXNzZWQnKVxuICAgICAgdGhpcy52YWxpZGF0ZUxlc3NvbkRhdGEobGVzc29uRGF0YSlcblxuICAgICAgLy8gQWRkaXRpb25hbCB2YWxpZGF0aW9uIGZvciBlbmFibGVkIHNlY3Rpb25zXG4gICAgICBpZiAoIWVuYWJsZWRTZWN0aW9ucyB8fCBPYmplY3Qua2V5cyhlbmFibGVkU2VjdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3Rpb25zIGVuYWJsZWQgZm9yIGV4cG9ydCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBqc1BERiBpbnN0YW5jZS4uLicpXG4gICAgICBjb25zdCBwZGYgPSBuZXcganNQREYoKVxuICAgICAgY29uc29sZS5sb2coJ2pzUERGIGluc3RhbmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JylcblxuICAgICAgbGV0IHlQb3NpdGlvbiA9IDIwXG4gICAgICBjb25zdCBwYWdlSGVpZ2h0ID0gcGRmLmludGVybmFsLnBhZ2VTaXplLmhlaWdodFxuICAgICAgY29uc3QgbWFyZ2luID0gMjBcbiAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSA3XG5cbiAgICAgIGNvbnNvbGUubG9nKCdQREYgZGltZW5zaW9uczonLCB7IHBhZ2VIZWlnaHQsIG1hcmdpbiwgbGluZUhlaWdodCB9KVxuXG4gICAgICAvLyBUeXBvZ3JhcGh5IGhpZXJhcmNoeSBjb25zdGFudHMgKG1hdGNoaW5nIHdlYiBpbnRlcmZhY2UpXG4gICAgICBjb25zdCBGT05UX1NJWkVTID0ge1xuICAgICAgICBMRVNTT05fVElUTEU6IDMyLCAgICAgIC8vIFByaW1hcnkgaGVhZGluZ1xuICAgICAgICBTRUNUSU9OX0hFQURFUjogMjgsICAgIC8vIFNlY29uZGFyeSBoZWFkaW5nc1xuICAgICAgICBNQUlOX0NPTlRFTlQ6IDE2LCAgICAgIC8vIEJvZHkgdGV4dFxuICAgICAgICBJTlNUUlVDVElPTlM6IDE1LCAgICAgIC8vIEd1aWRhbmNlIHRleHRcbiAgICAgICAgU1VQUExFTUVOVEFSWTogMTQgICAgICAvLyBBbnN3ZXIga2V5cywgZXhwbGFuYXRpb25zXG4gICAgICB9XG5cbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdGV4dCB3aXRoIHdvcmQgd3JhcHBpbmdcbiAgICAgIGNvbnN0IGFkZFRleHQgPSAodGV4dDogc3RyaW5nLCBmb250U2l6ZSA9IEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBpc0JvbGQgPSBmYWxzZSwgaW5kZW50ID0gMCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFNhbml0aXplIHRleHQgdG8gcHJldmVudCBQREYgZXJyb3JzXG4gICAgICAgICAgY29uc3Qgc2FuaXRpemVkVGV4dCA9IHRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDAwMC1cXHUwMDFGXFx1MDA3Ri1cXHUwMDlGXS9nLCAnJykgLy8gUmVtb3ZlIGNvbnRyb2wgY2hhcmFjdGVyc1xuICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUyMDAwLVxcdTIwNkZcXHUyRTAwLVxcdTJFN0ZcXHUzMDAwLVxcdTMwM0ZdL2csICcgJykgLy8gUmVwbGFjZSBzcGVjaWFsIHNwYWNlc1xuICAgICAgICAgICAgLnRyaW0oKVxuXG4gICAgICAgICAgaWYgKCFzYW5pdGl6ZWRUZXh0KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VtcHR5IHRleHQgYWZ0ZXIgc2FuaXRpemF0aW9uLCBza2lwcGluZycpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgQWRkaW5nIHRleHQ6IFwiJHtzYW5pdGl6ZWRUZXh0LnN1YnN0cmluZygwLCA1MCl9JHtzYW5pdGl6ZWRUZXh0Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJ31cImApXG5cbiAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoZm9udFNpemUpXG4gICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgaXNCb2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiKVxuXG4gICAgICAgICAgY29uc3QgbWF4V2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gaW5kZW50XG4gICAgICAgICAgY29uc3QgbGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHNhbml0aXplZFRleHQsIG1heFdpZHRoKVxuXG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBpZiAoeVBvc2l0aW9uID4gcGFnZUhlaWdodCAtIDMwKSB7XG4gICAgICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIGluZGVudCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgeVBvc2l0aW9uICs9IDMgLy8gRXh0cmEgc3BhY2luZyBhZnRlciB0ZXh0IGJsb2NrXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIHRleHQgdG8gUERGOicsIGVycm9yLCAnVGV4dDonLCB0ZXh0KVxuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgYWRkU2VjdGlvbiA9ICh0aXRsZTogc3RyaW5nLCBjb250ZW50OiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gNTApIHtcbiAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgfVxuICAgICAgICBhZGRUZXh0KHRpdGxlLCBGT05UX1NJWkVTLlNFQ1RJT05fSEVBREVSLCB0cnVlKVxuICAgICAgICB5UG9zaXRpb24gKz0gNVxuICAgICAgICBjb250ZW50KClcbiAgICAgICAgeVBvc2l0aW9uICs9IDEwXG4gICAgICB9XG5cbiAgICAgIC8vIFRpdGxlIGFuZCBtZXRhZGF0YVxuICAgICAgYWRkVGV4dChsZXNzb25EYXRhLmxlc3NvblRpdGxlLCBGT05UX1NJWkVTLkxFU1NPTl9USVRMRSwgdHJ1ZSlcbiAgICAgIGFkZFRleHQoXG4gICAgICAgIGBUYXJnZXQgTGFuZ3VhZ2U6ICR7bGVzc29uRGF0YS50YXJnZXRMYW5ndWFnZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxlc3NvbkRhdGEudGFyZ2V0TGFuZ3VhZ2Uuc2xpY2UoMSl9YCxcbiAgICAgICAgRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgKVxuICAgICAgYWRkVGV4dChgR2VuZXJhdGVkIG9uOiAke3RoaXMuZm9ybWF0RGF0ZSgpfWAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSlcbiAgICAgIHlQb3NpdGlvbiArPSAxMFxuXG4gICAgICAvLyBBZGQgc2VjdGlvbnMgYmFzZWQgb24gZW5hYmxlZCBzdGF0ZVxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy53YXJtdXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXApIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIldhcm0tdXAgUXVlc3Rpb25zXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCB3YXJtdXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMud2FybXVwKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMud2FybXVwIDogW11cbiAgICAgICAgICB3YXJtdXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBhZGRUZXh0KHF1ZXN0aW9uLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMudm9jYWJ1bGFyeSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIktleSBWb2NhYnVsYXJ5XCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5SXRlbXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMudm9jYWJ1bGFyeSkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkgOiBbXVxuICAgICAgICAgIHZvY2FidWxhcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gRmlyc3QgaXRlbSBtaWdodCBiZSBhbiBpbnN0cnVjdGlvblxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwICYmIGl0ZW0ud29yZCA9PT0gXCJJTlNUUlVDVElPTlwiKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjQxLCAyNTAsIDI1NSkgLy8gI0YxRkFGRlxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGl0ZW0ubWVhbmluZywgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBhZGRUZXh0KGl0ZW0ubWVhbmluZywgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIGZhbHNlLCAxMClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXggKyAxfS4gJHtpdGVtLndvcmR9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIHRydWUsIDEwKVxuICAgICAgICAgICAgYWRkVGV4dChgICAgTWVhbmluZzogJHtpdGVtLm1lYW5pbmd9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCAxNSlcblxuICAgICAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIGZvcm1hdCAoZXhhbXBsZSkgYW5kIG5ldyBmb3JtYXQgKGV4YW1wbGVzIGFycmF5KVxuICAgICAgICAgICAgaWYgKGl0ZW0uZXhhbXBsZXMgJiYgQXJyYXkuaXNBcnJheShpdGVtLmV4YW1wbGVzKSAmJiBpdGVtLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYWRkVGV4dChgICAgRXhhbXBsZXM6YCwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIHRydWUsIDE1KVxuICAgICAgICAgICAgICBjb25zdCBleGFtcGxlcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5leGFtcGxlcykgPyBpdGVtLmV4YW1wbGVzIDogW11cbiAgICAgICAgICAgICAgZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgZXhJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGFkZFRleHQoYCAgICR7ZXhJbmRleCArIDF9LiBcIiR7ZXhhbXBsZX1cImAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIDIwKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmV4YW1wbGUpIHtcbiAgICAgICAgICAgICAgYWRkVGV4dChgICAgRXhhbXBsZTogXCIke2l0ZW0uZXhhbXBsZX1cImAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIDE1KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLnJlYWRpbmcgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5yZWFkaW5nKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJSZWFkaW5nIFBhc3NhZ2VcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlYWRpbmdDb250ZW50ID0gbGVzc29uRGF0YS5zZWN0aW9ucy5yZWFkaW5nXG4gICAgICAgICAgY29uc3QgcGFydHMgPSByZWFkaW5nQ29udGVudC5zcGxpdCgnXFxuXFxuJylcblxuICAgICAgICAgIC8vIENoZWNrIGlmIGZpcnN0IHBhcnQgaXMgYW4gaW5zdHJ1Y3Rpb25cbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID4gMSAmJiBwYXJ0c1swXS5pbmNsdWRlcygnUmVhZCB0aGUgZm9sbG93aW5nIHRleHQgY2FyZWZ1bGx5JykpIHtcbiAgICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUocGFydHNbMF0sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgYWRkVGV4dChwYXJ0c1swXSwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVzdCBvZiB0aGUgcmVhZGluZyBwYXNzYWdlXG4gICAgICAgICAgICBhZGRUZXh0KHBhcnRzLnNsaWNlKDEpLmpvaW4oJ1xcblxcbicpLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDEwKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBpbnN0cnVjdGlvbiwgZGlzcGxheSBhcyBiZWZvcmVcbiAgICAgICAgICAgIGFkZFRleHQocmVhZGluZ0NvbnRlbnQsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmNvbXByZWhlbnNpb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJSZWFkaW5nIENvbXByZWhlbnNpb25cIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbXByZWhlbnNpb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24gOiBbXVxuICAgICAgICAgIGNvbXByZWhlbnNpb25RdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjQxLCAyNTAsIDI1NSkgLy8gI0YxRkFGRlxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHF1ZXN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICAgIGFkZFRleHQocXVlc3Rpb24sIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCBmYWxzZSwgMTApXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5kaXNjdXNzaW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbikge1xuICAgICAgICBhZGRTZWN0aW9uKFwiRGlzY3Vzc2lvbiBRdWVzdGlvbnNcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRpc2N1c3Npb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24gOiBbXVxuICAgICAgICAgIGRpc2N1c3Npb25RdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBhZGRUZXh0KHF1ZXN0aW9uLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlhbG9ndWVQcmFjdGljZSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkRpYWxvZ3VlIFByYWN0aWNlXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZVNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UhXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCBjb2xvclxuICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uV2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTBcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgYWRkVGV4dChkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24sIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCBmYWxzZSwgMTApXG4gICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXNcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZVByYWN0aWNlTGluZXMgPSBBcnJheS5pc0FycmF5KGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSkgPyBkaWFsb2d1ZVNlY3Rpb24uZGlhbG9ndWUgOiBbXVxuICAgICAgICAgIGRpYWxvZ3VlUHJhY3RpY2VMaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICAvLyBDaGFyYWN0ZXIgbmFtZSBpbiBib2xkLCB0aGVuIGxpbmVcbiAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLk1BSU5fQ09OVEVOVClcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgY29uc3QgY2hhcldpZHRoID0gcGRmLmdldFRleHRXaWR0aChgJHtsaW5lLmNoYXJhY3Rlcn06IGApXG4gICAgICAgICAgICBwZGYudGV4dChgJHtsaW5lLmNoYXJhY3Rlcn06IGAsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMCAtIGNoYXJXaWR0aFxuICAgICAgICAgICAgY29uc3QgbGluZVRleHQgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGxpbmUubGluZSwgbWF4V2lkdGgpXG4gICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFswXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSB3cmFwcGVkIGxpbmVzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVUZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFtpXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgJiYgZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSA1XG4gICAgICAgICAgICBhZGRUZXh0KFwiRm9sbG93LXVwIFF1ZXN0aW9uczpcIiwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIHRydWUsIDEwKVxuICAgICAgICAgICAgY29uc3QgZm9sbG93VXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucykgPyBkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgOiBbXVxuICAgICAgICAgICAgZm9sbG93VXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXggKyAxfS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDE1KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJEaWFsb2d1ZSBGaWxsLWluLXRoZS1HYXBcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRpYWxvZ3VlU2VjdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwIVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZCBjb2xvclxuICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjQxLCAyNTAsIDI1NSkgLy8gI0YxRkFGRlxuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uV2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTBcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgYWRkVGV4dChkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24sIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCBmYWxzZSwgMTApXG4gICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXNcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZUZpbGxHYXBMaW5lcyA9IEFycmF5LmlzQXJyYXkoZGlhbG9ndWVTZWN0aW9uLmRpYWxvZ3VlKSA/IGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSA6IFtdXG4gICAgICAgICAgZGlhbG9ndWVGaWxsR2FwTGluZXMuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hhcmFjdGVyIG5hbWUgaW4gYm9sZCwgdGhlbiBsaW5lXG4gICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQpXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcImJvbGRcIilcbiAgICAgICAgICAgIGNvbnN0IGNoYXJXaWR0aCA9IHBkZi5nZXRUZXh0V2lkdGgoYCR7bGluZS5jaGFyYWN0ZXJ9OiBgKVxuICAgICAgICAgICAgcGRmLnRleHQoYCR7bGluZS5jaGFyYWN0ZXJ9OiBgLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgY29uc3QgbWF4V2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTAgLSBjaGFyV2lkdGhcbiAgICAgICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShsaW5lLmxpbmUsIG1heFdpZHRoKVxuICAgICAgICAgICAgcGRmLnRleHQobGluZVRleHRbMF0sIG1hcmdpbiArIDEwICsgY2hhcldpZHRoLCB5UG9zaXRpb24pXG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgd3JhcHBlZCBsaW5lc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsaW5lVGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoeVBvc2l0aW9uID4gcGFnZUhlaWdodCAtIDMwKSB7XG4gICAgICAgICAgICAgICAgcGRmLmFkZFBhZ2UoKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGRmLnRleHQobGluZVRleHRbaV0sIG1hcmdpbiArIDEwICsgY2hhcldpZHRoLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMgJiYgZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgeVBvc2l0aW9uICs9IDVcbiAgICAgICAgICAgIGFkZFRleHQoXCJBbnN3ZXIgS2V5OlwiLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgMTApXG4gICAgICAgICAgICBhZGRUZXh0KGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmpvaW4oJywgJyksIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIDE1KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5ncmFtbWFyICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hcikge1xuICAgICAgICBhZGRTZWN0aW9uKFwiR3JhbW1hciBGb2N1c1wiLCAoKSA9PiB7XG4gICAgICAgICAgYWRkVGV4dChgRm9jdXM6ICR7bGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmZvY3VzfWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCB0cnVlLCAxMClcbiAgICAgICAgICB5UG9zaXRpb24gKz0gM1xuICAgICAgICAgIGFkZFRleHQoXCJFeGFtcGxlczpcIiwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIHRydWUsIDEwKVxuICAgICAgICAgIGNvbnN0IGdyYW1tYXJFeGFtcGxlcyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4YW1wbGVzKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGFtcGxlcyA6IFtdXG4gICAgICAgICAgZ3JhbW1hckV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhZGRUZXh0KGDigKIgJHtleGFtcGxlfWAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIDE1KVxuICAgICAgICAgIH0pXG4gICAgICAgICAgeVBvc2l0aW9uICs9IDNcbiAgICAgICAgICBhZGRUZXh0KFwiUHJhY3RpY2UgRXhlcmNpc2U6XCIsIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCB0cnVlLCAxMClcbiAgICAgICAgICBjb25zdCBncmFtbWFyRXhlcmNpc2VzID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2UpID8gbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlIDogW11cbiAgICAgICAgICBncmFtbWFyRXhlcmNpc2VzLmZvckVhY2goKGV4ZXJjaXNlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgYWRkVGV4dChgJHtpbmRleCArIDF9LiAke2V4ZXJjaXNlfWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgMTUpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5wcm9udW5jaWF0aW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbikge1xuICAgICAgICBhZGRTZWN0aW9uKFwiUHJvbnVuY2lhdGlvbiBQcmFjdGljZVwiLCAoKSA9PiB7XG4gICAgICAgICAgYWRkVGV4dChgV29yZDogJHtsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb24ud29yZH1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgdHJ1ZSwgMTApXG4gICAgICAgICAgYWRkVGV4dChgSVBBOiAke2xlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbi5pcGF9YCwgRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLCBmYWxzZSwgMTApXG4gICAgICAgICAgYWRkVGV4dChgUHJhY3RpY2U6IFwiJHtsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb24ucHJhY3RpY2V9XCJgLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDEwKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLndyYXB1cCAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCkge1xuICAgICAgICBhZGRTZWN0aW9uKFwiTGVzc29uIFdyYXAtdXBcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdyYXB1cFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXApID8gbGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXAgOiBbXVxuICAgICAgICAgIHdyYXB1cFF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXggKyAxfS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIDEwKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEZvb3RlclxuICAgICAgY29uc3QgcGFnZUNvdW50ID0gKHBkZiBhcyBhbnkpLmludGVybmFsLmdldE51bWJlck9mUGFnZXMoKVxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcGFnZUNvdW50OyBpKyspIHtcbiAgICAgICAgcGRmLnNldFBhZ2UoaSlcbiAgICAgICAgcGRmLnNldEZvbnRTaXplKDgpXG4gICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgIHBkZi50ZXh0KGBHZW5lcmF0ZWQgYnkgTGluZ3VhU3BhcmsgLSBQYWdlICR7aX0gb2YgJHtwYWdlQ291bnR9YCwgbWFyZ2luLCBwYWdlSGVpZ2h0IC0gMTApXG4gICAgICB9XG5cbiAgICAgIC8vIERvd25sb2FkIHRoZSBQREZcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7bGVzc29uRGF0YS5sZXNzb25UeXBlfS1sZXNzb24tJHtsZXNzb25EYXRhLnN0dWRlbnRMZXZlbH0tJHtEYXRlLm5vdygpfS5wZGZgXG4gICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgUERGIHdpdGggZmlsZW5hbWU6JywgZmlsZU5hbWUpXG4gICAgICAgIHBkZi5zYXZlKGZpbGVOYW1lKVxuICAgICAgICBjb25zb2xlLmxvZygnUERGIGV4cG9ydCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgUERGOicsIHNhdmVFcnJvcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSBQREY6ICR7c2F2ZUVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBzYXZlRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIHNhdmUgZXJyb3InfWApXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BERiBleHBvcnQgZXJyb3I6JywgZXJyb3IpXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKVxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG5hbWU6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5uYW1lIDogJ1Vua25vd24nLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgbGVzc29uRGF0YUtleXM6IGxlc3NvbkRhdGEgPyBPYmplY3Qua2V5cyhsZXNzb25EYXRhKSA6ICdObyBsZXNzb24gZGF0YScsXG4gICAgICAgIHNlY3Rpb25zS2V5czogbGVzc29uRGF0YT8uc2VjdGlvbnMgPyBPYmplY3Qua2V5cyhsZXNzb25EYXRhLnNlY3Rpb25zKSA6ICdObyBzZWN0aW9ucycsXG4gICAgICAgIGVuYWJsZWRTZWN0aW9uc0tleXM6IGVuYWJsZWRTZWN0aW9ucyA/IE9iamVjdC5rZXlzKGVuYWJsZWRTZWN0aW9ucykgOiAnTm8gZW5hYmxlZCBzZWN0aW9ucydcbiAgICAgIH0pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFBERiBleHBvcnQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZXhwb3J0VG9Xb3JkKGxlc3NvbkRhdGE6IExlc3NvbkRhdGEsIGVuYWJsZWRTZWN0aW9uczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIFdvcmQgZXhwb3J0IHdpdGggZGF0YTonLCB7IGxlc3NvbkRhdGEsIGVuYWJsZWRTZWN0aW9ucyB9KVxuICAgICAgdGhpcy52YWxpZGF0ZUxlc3NvbkRhdGEobGVzc29uRGF0YSlcblxuICAgICAgLy8gQWRkaXRpb25hbCB2YWxpZGF0aW9uIGZvciBlbmFibGVkIHNlY3Rpb25zXG4gICAgICBpZiAoIWVuYWJsZWRTZWN0aW9ucyB8fCBPYmplY3Qua2V5cyhlbmFibGVkU2VjdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3Rpb25zIGVuYWJsZWQgZm9yIGV4cG9ydCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoaWxkcmVuOiBhbnlbXSA9IFtdXG5cbiAgICAgIC8vIFR5cG9ncmFwaHkgaGllcmFyY2h5IGNvbnN0YW50cyAoaW4gaGFsZi1wb2ludHMgZm9yIFdvcmQgLSBtdWx0aXBseSBieSAyKVxuICAgICAgLy8gMzJweCA9IDI0cHQsIDI4cHggPSAyMXB0LCAxNnB4ID0gMTJwdCwgMTVweCA9IDExLjI1cHQsIDE0cHggPSAxMC41cHRcbiAgICAgIGNvbnN0IFdPUkRfRk9OVF9TSVpFUyA9IHtcbiAgICAgICAgTEVTU09OX1RJVExFOiA0OCwgICAgICAvLyAyNHB0ICgzMnB4IGVxdWl2YWxlbnQpXG4gICAgICAgIFNFQ1RJT05fSEVBREVSOiA0MiwgICAgLy8gMjFwdCAoMjhweCBlcXVpdmFsZW50KSAgXG4gICAgICAgIE1BSU5fQ09OVEVOVDogMjQsICAgICAgLy8gMTJwdCAoMTZweCBlcXVpdmFsZW50KVxuICAgICAgICBJTlNUUlVDVElPTlM6IDIzLCAgICAgIC8vIDExLjVwdCAoMTVweCBlcXVpdmFsZW50KVxuICAgICAgICBTVVBQTEVNRU5UQVJZOiAyMSAgICAgIC8vIDEwLjVwdCAoMTRweCBlcXVpdmFsZW50KVxuICAgICAgfVxuXG4gICAgICAvLyBUaXRsZSBhbmQgbWV0YWRhdGFcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgIHRleHQ6IGxlc3NvbkRhdGEubGVzc29uVGl0bGUsXG4gICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5MRVNTT05fVElUTEUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGhlYWRpbmc6IEhlYWRpbmdMZXZlbC5USVRMRSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLFxuICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDQwMCB9LFxuICAgICAgICB9KSxcbiAgICAgIClcblxuICAgICAgY2hpbGRyZW4ucHVzaChcbiAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgdGV4dDogYFRhcmdldCBMYW5ndWFnZTogJHtsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGVzc29uRGF0YS50YXJnZXRMYW5ndWFnZS5zbGljZSgxKX1gLFxuICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICB0ZXh0OiBgR2VuZXJhdGVkIG9uOiAke3RoaXMuZm9ybWF0RGF0ZSgpfWAsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiA0MDAgfSxcbiAgICAgICAgfSksXG4gICAgICApXG5cbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgc2VjdGlvblxuICAgICAgY29uc3QgYWRkU2VjdGlvbiA9ICh0aXRsZTogc3RyaW5nLCBjb250ZW50OiBhbnlbXSkgPT4ge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNFQ1RJT05fSEVBREVSLFxuICAgICAgICAgICAgICAgIHVuZGVybGluZTogeyB0eXBlOiBVbmRlcmxpbmVUeXBlLlNJTkdMRSB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBoZWFkaW5nOiBIZWFkaW5nTGV2ZWwuSEVBRElOR18yLFxuICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDQwMCwgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIGNoaWxkcmVuLnB1c2goLi4uY29udGVudClcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHNlY3Rpb25zIGJhc2VkIG9uIGVuYWJsZWQgc3RhdGVcbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMud2FybXVwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMud2FybXVwKSB7XG4gICAgICAgIGNvbnN0IHdhcm11cFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXApID8gbGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXAgOiBbXVxuICAgICAgICBjb25zdCB3YXJtdXBDb250ZW50ID0gd2FybXVwUXVlc3Rpb25zLm1hcCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogcXVlc3Rpb24sXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiV2FybS11cCBRdWVzdGlvbnNcIiwgd2FybXVwQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy52b2NhYnVsYXJ5ICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMudm9jYWJ1bGFyeSkge1xuICAgICAgICBjb25zdCB2b2NhYkNvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgY29uc3Qgdm9jYWJ1bGFyeUl0ZW1zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkpID8gbGVzc29uRGF0YS5zZWN0aW9ucy52b2NhYnVsYXJ5IDogW11cbiAgICAgICAgdm9jYWJ1bGFyeUl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgaXRlbSBtaWdodCBiZSBhbiBpbnN0cnVjdGlvblxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBpdGVtLndvcmQgPT09IFwiSU5TVFJVQ1RJT05cIikge1xuICAgICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGl0ZW0ubWVhbmluZyxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgICAgZmlsbDogXCJGMUZBRkZcIiwgLy8gTGlnaHQgYmx1ZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7aW5kZXggKyAxfS4gJHtpdGVtLndvcmR9YCxcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGAgICBNZWFuaW5nOiAke2l0ZW0ubWVhbmluZ31gLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG5cbiAgICAgICAgICAvLyBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChleGFtcGxlKSBhbmQgbmV3IGZvcm1hdCAoZXhhbXBsZXMgYXJyYXkpXG4gICAgICAgICAgaWYgKGl0ZW0uZXhhbXBsZXMgJiYgQXJyYXkuaXNBcnJheShpdGVtLmV4YW1wbGVzKSAmJiBpdGVtLmV4YW1wbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgICAgRXhhbXBsZXM6YCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBzYWZldHkgY2hlY2sgYmVmb3JlIGZvckVhY2hcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzID0gQXJyYXkuaXNBcnJheShpdGVtLmV4YW1wbGVzKSA/IGl0ZW0uZXhhbXBsZXMgOiBbXVxuICAgICAgICAgICAgZXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSwgZXhJbmRleCkgPT4ge1xuICAgICAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgICAgICAgJHtleEluZGV4ICsgMX0uIFwiJHtleGFtcGxlfVwiYCxcbiAgICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW25ldyBUZXh0UnVuKHsgdGV4dDogXCJcIiB9KV0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5leGFtcGxlKSB7XG4gICAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCAgIEV4YW1wbGU6IFwiJHtpdGVtLmV4YW1wbGV9XCJgLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYWRkU2VjdGlvbihcIktleSBWb2NhYnVsYXJ5XCIsIHZvY2FiQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5yZWFkaW5nICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZykge1xuICAgICAgICBjb25zdCByZWFkaW5nVGV4dCA9IGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZ1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHJlYWRpbmdUZXh0LnNwbGl0KCdcXG5cXG4nKVxuICAgICAgICBjb25zdCByZWFkaW5nQ29udGVudDogYW55W10gPSBbXVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGZpcnN0IHBhcnQgaXMgYW4gaW5zdHJ1Y3Rpb25cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ1JlYWQgdGhlIGZvbGxvd2luZyB0ZXh0IGNhcmVmdWxseScpKSB7XG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgIHJlYWRpbmdDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBwYXJ0c1swXSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgIGZpbGw6IFwiRUVGN0RDXCIsIC8vIExpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcblxuICAgICAgICAgIC8vIEFkZCB0aGUgcmVzdCBvZiB0aGUgcmVhZGluZyBwYXNzYWdlXG4gICAgICAgICAgcmVhZGluZ0NvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHBhcnRzLnNsaWNlKDEpLmpvaW4oJ1xcblxcbicpLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gaW5zdHJ1Y3Rpb24sIGRpc3BsYXkgYXMgYmVmb3JlXG4gICAgICAgICAgcmVhZGluZ0NvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHJlYWRpbmdUZXh0LFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBhZGRTZWN0aW9uKFwiUmVhZGluZyBQYXNzYWdlXCIsIHJlYWRpbmdDb250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmNvbXByZWhlbnNpb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbXByZWhlbnNpb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24gOiBbXVxuICAgICAgICBjb25zdCBjb21wcmVoZW5zaW9uQ29udGVudCA9IGNvbXByZWhlbnNpb25RdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHF1ZXN0aW9uLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogXCJGMUZBRkZcIiwgLy8gTGlnaHQgYmx1ZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiUmVhZGluZyBDb21wcmVoZW5zaW9uXCIsIGNvbXByZWhlbnNpb25Db250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpc2N1c3Npb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGRpc2N1c3Npb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24gOiBbXVxuICAgICAgICBjb25zdCBkaXNjdXNzaW9uQ29udGVudCA9IGRpc2N1c3Npb25RdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBxdWVzdGlvbixcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgIGZpbGw6IFwiRUVGN0RDXCIsIC8vIExpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc3QgYXJlIGFjdHVhbCBxdWVzdGlvbnMgKHJlbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtpbmRleH0uICR7cXVlc3Rpb259YCxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFkZFNlY3Rpb24oXCJEaXNjdXNzaW9uIFF1ZXN0aW9uc1wiLCBkaXNjdXNzaW9uQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5kaWFsb2d1ZVByYWN0aWNlICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVQcmFjdGljZSkge1xuICAgICAgICBjb25zdCBkaWFsb2d1ZVByYWN0aWNlQ29udGVudDogYW55W10gPSBbXVxuICAgICAgICBjb25zdCBkaWFsb2d1ZVNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2VcblxuICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kICgjRUVGN0RDKVxuICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IGRpYWxvZ3VlU2VjdGlvbi5pbnN0cnVjdGlvbixcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuXG4gICAgICAgIC8vIEFkZCBkaWFsb2d1ZSBsaW5lcyB3aXRoIGNoYXJhY3RlciBuYW1lcyBpbiBib2xkXG4gICAgICAgIGNvbnN0IGRpYWxvZ3VlTGluZXMgPSBBcnJheS5pc0FycmF5KGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSkgPyBkaWFsb2d1ZVNlY3Rpb24uZGlhbG9ndWUgOiBbXVxuICAgICAgICBkaWFsb2d1ZUxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYCR7bGluZS5jaGFyYWN0ZXJ9OiBgLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogbGluZS5saW5lLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gQWRkIGZvbGxvdy11cCBxdWVzdGlvbnMgaWYgYW55XG4gICAgICAgIGlmIChkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgJiYgZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogXCJGb2xsb3ctdXAgUXVlc3Rpb25zOlwiLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAyMDAsIGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBmb2xsb3dVcFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkoZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zKSA/IGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucyA6IFtdXG4gICAgICAgICAgZm9sbG93VXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtpbmRleCArIDF9LiAke3F1ZXN0aW9ufWAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgYWRkU2VjdGlvbihcIkRpYWxvZ3VlIFByYWN0aWNlXCIsIGRpYWxvZ3VlUHJhY3RpY2VDb250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcCAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcCkge1xuICAgICAgICBjb25zdCBkaWFsb2d1ZUZpbGxHYXBDb250ZW50OiBhbnlbXSA9IFtdXG4gICAgICAgIGNvbnN0IGRpYWxvZ3VlU2VjdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlhbG9ndWVGaWxsR2FwXG5cbiAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgYmx1ZSBiYWNrZ3JvdW5kICgjRjFGQUZGKVxuICAgICAgICBkaWFsb2d1ZUZpbGxHYXBDb250ZW50LnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogZGlhbG9ndWVTZWN0aW9uLmluc3RydWN0aW9uLFxuICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgIGZpbGw6IFwiRjFGQUZGXCIsIC8vIExpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcblxuICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXMgaW4gYm9sZFxuICAgICAgICBjb25zdCBkaWFsb2d1ZUZpbGxHYXBMaW5lcyA9IEFycmF5LmlzQXJyYXkoZGlhbG9ndWVTZWN0aW9uLmRpYWxvZ3VlKSA/IGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSA6IFtdXG4gICAgICAgIGRpYWxvZ3VlRmlsbEdhcExpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICAgICAgICBkaWFsb2d1ZUZpbGxHYXBDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtsaW5lLmNoYXJhY3Rlcn06IGAsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBsaW5lLmxpbmUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBBZGQgYW5zd2VyIGtleSBpZiBhbnlcbiAgICAgICAgaWYgKGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzICYmIGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkaWFsb2d1ZUZpbGxHYXBDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBcIkFuc3dlciBLZXk6XCIsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDIwMCwgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICAgIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBhZGRTZWN0aW9uKFwiRGlhbG9ndWUgRmlsbC1pbi10aGUtR2FwXCIsIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZ3JhbW1hciAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIpIHtcbiAgICAgICAgY29uc3QgZ3JhbW1hckNvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgRm9jdXM6ICR7bGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmZvY3VzfWAsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiRXhhbXBsZXM6XCIsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBncmFtbWFyRXhhbXBsZXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGFtcGxlcykgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhhbXBsZXMgOiBbXVxuICAgICAgICBncmFtbWFyRXhhbXBsZXMuZm9yRWFjaCgoZXhhbXBsZSkgPT4ge1xuICAgICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBg4oCiICR7ZXhhbXBsZX1gLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiUHJhY3RpY2UgRXhlcmNpc2U6XCIsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogMjAwLCBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZ3JhbW1hckV4ZXJjaXNlcyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZSA6IFtdXG4gICAgICAgIGdyYW1tYXJFeGVyY2lzZXMuZm9yRWFjaCgoZXhlcmNpc2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGAke2luZGV4ICsgMX0uICR7ZXhlcmNpc2V9YCxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiR3JhbW1hciBGb2N1c1wiLCBncmFtbWFyQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5wcm9udW5jaWF0aW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbikge1xuICAgICAgICBjb25zdCBwcm9udW5jaWF0aW9uQ29udGVudCA9IFtcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgV29yZDogJHtsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb24ud29yZH1gLFxuICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogYElQQTogJHtsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb24uaXBhfWAsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IGBQcmFjdGljZTogXCIke2xlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbi5wcmFjdGljZX1cImAsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXVxuICAgICAgICBhZGRTZWN0aW9uKFwiUHJvbnVuY2lhdGlvbiBQcmFjdGljZVwiLCBwcm9udW5jaWF0aW9uQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy53cmFwdXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXApIHtcbiAgICAgICAgY29uc3Qgd3JhcHVwUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCA6IFtdXG4gICAgICAgIGNvbnN0IHdyYXB1cENvbnRlbnQgPSB3cmFwdXBRdWVzdGlvbnMubWFwKFxuICAgICAgICAgIChxdWVzdGlvbiwgaW5kZXgpID0+XG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtpbmRleCArIDF9LiAke3F1ZXN0aW9ufWAsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIGFkZFNlY3Rpb24oXCJMZXNzb24gV3JhcC11cFwiLCB3cmFwdXBDb250ZW50KVxuICAgICAgfVxuXG4gICAgICAvLyBGb290ZXJcbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgIHRleHQ6IFwiR2VuZXJhdGVkIGJ5IExpbmd1YVNwYXJrXCIsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLFxuICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiA2MDAgfSxcbiAgICAgICAgfSksXG4gICAgICApXG5cbiAgICAgIC8vIENyZWF0ZSBkb2N1bWVudFxuICAgICAgY29uc3QgZG9jID0gbmV3IERvY3VtZW50KHtcbiAgICAgICAgc2VjdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSlcblxuICAgICAgLy8gR2VuZXJhdGUgYW5kIGRvd25sb2FkXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgV29yZCBkb2N1bWVudC4uLicpXG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBQYWNrZXIudG9CdWZmZXIoZG9jKVxuICAgICAgY29uc29sZS5sb2coJ0RvY3VtZW50IGJ1ZmZlciBjcmVhdGVkLCBzaXplOicsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuXG4gICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1ZmZlciBhcyBhbnldLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIiB9KVxuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtsZXNzb25EYXRhLmxlc3NvblR5cGV9LWxlc3Nvbi0ke2xlc3NvbkRhdGEuc3R1ZGVudExldmVsfS0ke0RhdGUubm93KCl9LmRvY3hgXG5cbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZGluZyBXb3JkIGRvY3VtZW50IHdpdGggZmlsZW5hbWU6JywgZmlsZU5hbWUpXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcbiAgICAgIGxpbmsuaHJlZiA9IHVybFxuICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspXG4gICAgICBsaW5rLmNsaWNrKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluaylcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKVxuICAgICAgY29uc29sZS5sb2coJ1dvcmQgZXhwb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdXb3JkIGV4cG9ydCBlcnJvcjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgV29yZCBleHBvcnQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsZXNzb25FeHBvcnRlciA9IG5ldyBMZXNzb25FeHBvcnRlcigpXG4iXSwibmFtZXMiOlsianNQREYiLCJEb2N1bWVudCIsIlBhY2tlciIsIlBhcmFncmFwaCIsIlRleHRSdW4iLCJIZWFkaW5nTGV2ZWwiLCJBbGlnbm1lbnRUeXBlIiwiVW5kZXJsaW5lVHlwZSIsIkxlc3NvbkV4cG9ydGVyIiwiZm9ybWF0RGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJ2YWxpZGF0ZUxlc3NvbkRhdGEiLCJsZXNzb25EYXRhIiwic2VjdGlvbnMiLCJjb25zb2xlIiwibG9nIiwiRXJyb3IiLCJsZXNzb25UaXRsZSIsImxlc3NvblR5cGUiLCJzdHVkZW50TGV2ZWwiLCJ0YXJnZXRMYW5ndWFnZSIsIndhcm11cCIsInR5cGUiLCJpc0FycmF5IiwiQXJyYXkiLCJ2YWx1ZSIsInZvY2FidWxhcnkiLCJsZW5ndGgiLCJyZWFkaW5nIiwiY29tcHJlaGVuc2lvbiIsImRpc2N1c3Npb24iLCJncmFtbWFyIiwiaGFzRm9jdXMiLCJmb2N1cyIsInByb251bmNpYXRpb24iLCJoYXNXb3JkIiwid29yZCIsIndyYXB1cCIsIndhcm4iLCJleHBvcnRUb1BERiIsImVuYWJsZWRTZWN0aW9ucyIsIk9iamVjdCIsImtleXMiLCJwZGYiLCJ5UG9zaXRpb24iLCJwYWdlSGVpZ2h0IiwiaW50ZXJuYWwiLCJwYWdlU2l6ZSIsImhlaWdodCIsIm1hcmdpbiIsImxpbmVIZWlnaHQiLCJGT05UX1NJWkVTIiwiTEVTU09OX1RJVExFIiwiU0VDVElPTl9IRUFERVIiLCJNQUlOX0NPTlRFTlQiLCJJTlNUUlVDVElPTlMiLCJTVVBQTEVNRU5UQVJZIiwiYWRkVGV4dCIsInRleHQiLCJmb250U2l6ZSIsImlzQm9sZCIsImluZGVudCIsInNhbml0aXplZFRleHQiLCJyZXBsYWNlIiwidHJpbSIsInN1YnN0cmluZyIsInNldEZvbnRTaXplIiwic2V0Rm9udCIsIm1heFdpZHRoIiwid2lkdGgiLCJsaW5lcyIsInNwbGl0VGV4dFRvU2l6ZSIsImxpbmUiLCJhZGRQYWdlIiwiZXJyb3IiLCJhZGRTZWN0aW9uIiwidGl0bGUiLCJjb250ZW50IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIndhcm11cFF1ZXN0aW9ucyIsImZvckVhY2giLCJxdWVzdGlvbiIsImluZGV4Iiwic2V0RmlsbENvbG9yIiwiaW5zdHJ1Y3Rpb25XaWR0aCIsImluc3RydWN0aW9uTGluZXMiLCJpbnN0cnVjdGlvbkhlaWdodCIsInJlY3QiLCJ2b2NhYnVsYXJ5SXRlbXMiLCJpdGVtIiwibWVhbmluZyIsImV4YW1wbGVzIiwiZXhhbXBsZSIsImV4SW5kZXgiLCJyZWFkaW5nQ29udGVudCIsInBhcnRzIiwic3BsaXQiLCJpbmNsdWRlcyIsImpvaW4iLCJjb21wcmVoZW5zaW9uUXVlc3Rpb25zIiwiZGlzY3Vzc2lvblF1ZXN0aW9ucyIsImRpYWxvZ3VlUHJhY3RpY2UiLCJkaWFsb2d1ZVNlY3Rpb24iLCJpbnN0cnVjdGlvbiIsImRpYWxvZ3VlUHJhY3RpY2VMaW5lcyIsImRpYWxvZ3VlIiwiY2hhcldpZHRoIiwiZ2V0VGV4dFdpZHRoIiwiY2hhcmFjdGVyIiwibGluZVRleHQiLCJpIiwiZm9sbG93VXBRdWVzdGlvbnMiLCJkaWFsb2d1ZUZpbGxHYXAiLCJkaWFsb2d1ZUZpbGxHYXBMaW5lcyIsImFuc3dlcnMiLCJncmFtbWFyRXhhbXBsZXMiLCJncmFtbWFyRXhlcmNpc2VzIiwiZXhlcmNpc2UiLCJpcGEiLCJwcmFjdGljZSIsIndyYXB1cFF1ZXN0aW9ucyIsInBhZ2VDb3VudCIsImdldE51bWJlck9mUGFnZXMiLCJzZXRQYWdlIiwiZmlsZU5hbWUiLCJub3ciLCJzYXZlIiwic2F2ZUVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwibmFtZSIsImxlc3NvbkRhdGFLZXlzIiwic2VjdGlvbnNLZXlzIiwiZW5hYmxlZFNlY3Rpb25zS2V5cyIsImV4cG9ydFRvV29yZCIsImNoaWxkcmVuIiwiV09SRF9GT05UX1NJWkVTIiwicHVzaCIsImJvbGQiLCJzaXplIiwiaGVhZGluZyIsIlRJVExFIiwiYWxpZ25tZW50IiwiQ0VOVEVSIiwic3BhY2luZyIsImFmdGVyIiwidW5kZXJsaW5lIiwiU0lOR0xFIiwiSEVBRElOR18yIiwiYmVmb3JlIiwid2FybXVwQ29udGVudCIsIm1hcCIsIml0YWxpY3MiLCJzaGFkaW5nIiwiZmlsbCIsImJvcmRlciIsImxlZnQiLCJjb2xvciIsInN0eWxlIiwidm9jYWJDb250ZW50IiwicmVhZGluZ1RleHQiLCJjb21wcmVoZW5zaW9uQ29udGVudCIsImRpc2N1c3Npb25Db250ZW50IiwiZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQiLCJkaWFsb2d1ZUxpbmVzIiwiZGlhbG9ndWVGaWxsR2FwQ29udGVudCIsImdyYW1tYXJDb250ZW50IiwicHJvbnVuY2lhdGlvbkNvbnRlbnQiLCJ3cmFwdXBDb250ZW50IiwiZG9jIiwicHJvcGVydGllcyIsImJ1ZmZlciIsInRvQnVmZmVyIiwiYnl0ZUxlbmd0aCIsImJsb2IiLCJCbG9iIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJsZXNzb25FeHBvcnRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/export-utils.ts\n"));

/***/ })

});