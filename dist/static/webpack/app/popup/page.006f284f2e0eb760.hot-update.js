"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/popup/page",{

/***/ "(app-pages-browser)/./lib/export-utils.ts":
/*!*****************************!*\
  !*** ./lib/export-utils.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonExporter: function() { return /* binding */ LessonExporter; },\n/* harmony export */   lessonExporter: function() { return /* binding */ lessonExporter; },\n/* harmony export */   safeStripMarkdown: function() { return /* binding */ safeStripMarkdown; },\n/* harmony export */   stripMarkdown: function() { return /* binding */ stripMarkdown; }\n/* harmony export */ });\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jspdf */ \"(app-pages-browser)/./node_modules/jspdf/dist/jspdf.es.min.js\");\n/* harmony import */ var docx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! docx */ \"(app-pages-browser)/./node_modules/docx/dist/index.mjs\");\n/* harmony import */ var _avatar_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./avatar-utils */ \"(app-pages-browser)/./lib/avatar-utils.ts\");\n\n\n\n/**\n * Strips markdown formatting from text while preserving content.\n * Handles bold syntax (**text**, __text__) and italic syntax (*text*, _text_).\n * Recursively processes nested markdown.\n * \n * @param text - The text containing markdown syntax\n * @returns The text with markdown syntax removed\n */ function stripMarkdown(text) {\n    if (!text || typeof text !== \"string\") {\n        return text;\n    }\n    let result = text;\n    // Remove bold syntax: **text** and __text__\n    // Use non-greedy matching to handle nested markdown\n    result = result.replace(/\\*\\*(.+?)\\*\\*/g, \"$1\");\n    result = result.replace(/__(.+?)__/g, \"$1\");\n    // Remove italic syntax: *text* and _text_\n    // Use non-greedy matching to handle nested markdown\n    result = result.replace(/\\*(.+?)\\*/g, \"$1\");\n    result = result.replace(/_(.+?)_/g, \"$1\");\n    return result;\n}\n/**\n * Safely strips markdown formatting from text with error handling.\n * If stripping fails, returns the original text and logs the error.\n * This ensures export processes never break due to markdown stripping failures.\n * \n * @param text - The text containing markdown syntax\n * @returns The text with markdown syntax removed, or original text if stripping fails\n */ function safeStripMarkdown(text) {\n    try {\n        return stripMarkdown(text);\n    } catch (error) {\n        console.error(\"Markdown stripping error:\", error);\n        console.error(\"Failed text:\", text === null || text === void 0 ? void 0 : text.substring(0, 100));\n        // Return original text if stripping fails to ensure export continues\n        return text;\n    }\n}\nclass LessonExporter {\n    formatDate() {\n        return new Date().toLocaleDateString(\"en-US\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        });\n    }\n    validateLessonData(lessonData) {\n        var _sections_vocabulary, _sections_reading, _sections_comprehension, _sections_discussion, _sections_grammar, _sections_pronunciation, _sections_wrapup;\n        console.log(\"Validating lesson data:\", lessonData);\n        if (!lessonData) {\n            throw new Error(\"Lesson data is required\");\n        }\n        if (!lessonData.lessonTitle) {\n            throw new Error(\"AI-generated lesson title is required\");\n        }\n        if (!lessonData.lessonType) {\n            throw new Error(\"Lesson type is required\");\n        }\n        if (!lessonData.studentLevel) {\n            throw new Error(\"Student level is required\");\n        }\n        if (!lessonData.targetLanguage) {\n            throw new Error(\"Target language is required\");\n        }\n        if (!lessonData.sections) {\n            throw new Error(\"Lesson sections are required\");\n        }\n        // Validate sections structure with detailed logging\n        const sections = lessonData.sections;\n        console.log(\"Validating section types:\", {\n            warmup: {\n                type: typeof sections.warmup,\n                isArray: Array.isArray(sections.warmup),\n                value: sections.warmup\n            },\n            vocabulary: {\n                type: typeof sections.vocabulary,\n                isArray: Array.isArray(sections.vocabulary),\n                length: (_sections_vocabulary = sections.vocabulary) === null || _sections_vocabulary === void 0 ? void 0 : _sections_vocabulary.length\n            },\n            reading: {\n                type: typeof sections.reading,\n                length: (_sections_reading = sections.reading) === null || _sections_reading === void 0 ? void 0 : _sections_reading.length\n            },\n            comprehension: {\n                type: typeof sections.comprehension,\n                isArray: Array.isArray(sections.comprehension),\n                length: (_sections_comprehension = sections.comprehension) === null || _sections_comprehension === void 0 ? void 0 : _sections_comprehension.length\n            },\n            discussion: {\n                type: typeof sections.discussion,\n                isArray: Array.isArray(sections.discussion),\n                length: (_sections_discussion = sections.discussion) === null || _sections_discussion === void 0 ? void 0 : _sections_discussion.length\n            },\n            grammar: {\n                type: typeof sections.grammar,\n                hasFocus: !!((_sections_grammar = sections.grammar) === null || _sections_grammar === void 0 ? void 0 : _sections_grammar.focus)\n            },\n            pronunciation: {\n                type: typeof sections.pronunciation,\n                hasWord: !!((_sections_pronunciation = sections.pronunciation) === null || _sections_pronunciation === void 0 ? void 0 : _sections_pronunciation.word)\n            },\n            wrapup: {\n                type: typeof sections.wrapup,\n                isArray: Array.isArray(sections.wrapup),\n                length: (_sections_wrapup = sections.wrapup) === null || _sections_wrapup === void 0 ? void 0 : _sections_wrapup.length\n            }\n        });\n        if (!Array.isArray(sections.warmup)) {\n            console.warn(\"Warmup section is not an array:\", sections.warmup);\n        }\n        if (!Array.isArray(sections.vocabulary)) {\n            console.warn(\"Vocabulary section is not an array:\", sections.vocabulary);\n        }\n        if (typeof sections.reading !== \"string\") {\n            console.warn(\"Reading section is not a string:\", sections.reading);\n        }\n        if (!Array.isArray(sections.comprehension)) {\n            console.warn(\"Comprehension section is not an array:\", sections.comprehension);\n        }\n        if (!Array.isArray(sections.discussion)) {\n            console.warn(\"Discussion section is not an array:\", sections.discussion);\n        }\n        if (!sections.grammar || !sections.grammar.focus) {\n            console.warn(\"Grammar section is malformed:\", sections.grammar);\n        }\n        if (!sections.pronunciation || !sections.pronunciation.word) {\n            console.warn(\"Pronunciation section is malformed:\", sections.pronunciation);\n        }\n        if (!Array.isArray(sections.wrapup)) {\n            console.warn(\"Wrapup section is not an array:\", sections.wrapup);\n        }\n        console.log(\"Lesson data validation completed\");\n    }\n    async exportToPDF(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting PDF export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            // Check if we're in a browser environment\n            if (false) {}\n            // Check if jsPDF is available\n            if (typeof jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"] === \"undefined\") {\n                throw new Error(\"jsPDF library is not available\");\n            }\n            console.log(\"Environment checks passed\");\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            console.log(\"Creating jsPDF instance...\");\n            const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n            console.log(\"jsPDF instance created successfully\");\n            let yPosition = 20;\n            const pageHeight = pdf.internal.pageSize.height;\n            const margin = 20;\n            const lineHeight = 7;\n            console.log(\"PDF dimensions:\", {\n                pageHeight,\n                margin,\n                lineHeight\n            });\n            // Typography hierarchy constants (matching web interface)\n            const FONT_SIZES = {\n                LESSON_TITLE: 32,\n                SECTION_HEADER: 28,\n                MAIN_CONTENT: 16,\n                INSTRUCTIONS: 15,\n                SUPPLEMENTARY: 14 // Answer keys, explanations\n            };\n            // Helper function to add text with word wrapping\n            const addText = function(text) {\n                let fontSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : FONT_SIZES.MAIN_CONTENT, isBold = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false, isItalic = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false, indent = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 0;\n                try {\n                    // Sanitize text to prevent PDF errors and strip markdown formatting\n                    const sanitizedText = text.replace(/\\*\\*(.*?)\\*\\*/g, \"$1\") // Remove bold markdown (**text**)\n                    .replace(/\\*(.*?)\\*/g, \"$1\") // Remove italic markdown (*text*)\n                    .replace(/__(.*?)__/g, \"$1\") // Remove bold markdown (__text__)\n                    .replace(/_(.*?)_/g, \"$1\") // Remove italic markdown (_text_)\n                    .replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, \"\") // Remove control characters\n                    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\u3000-\\u303F]/g, \" \") // Replace special spaces\n                    .trim();\n                    if (!sanitizedText) {\n                        console.warn(\"Empty text after sanitization, skipping\");\n                        return;\n                    }\n                    console.log('Adding text: \"'.concat(sanitizedText.substring(0, 50)).concat(sanitizedText.length > 50 ? \"...\" : \"\", '\"'));\n                    pdf.setFontSize(fontSize);\n                    // Set font style based on bold and italic flags\n                    let fontStyle = \"normal\";\n                    if (isBold && isItalic) {\n                        fontStyle = \"bolditalic\";\n                    } else if (isBold) {\n                        fontStyle = \"bold\";\n                    } else if (isItalic) {\n                        fontStyle = \"italic\";\n                    }\n                    pdf.setFont(\"helvetica\", fontStyle);\n                    const maxWidth = pdf.internal.pageSize.width - margin * 2 - indent;\n                    const lines = pdf.splitTextToSize(sanitizedText, maxWidth);\n                    for (const line of lines){\n                        if (yPosition > pageHeight - 30) {\n                            pdf.addPage();\n                            yPosition = 20;\n                        }\n                        pdf.text(line, margin + indent, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 3 // Extra spacing after text block\n                    ;\n                } catch (error) {\n                    console.error(\"Error adding text to PDF:\", error, \"Text:\", text);\n                    throw error;\n                }\n            };\n            const addSection = (title, content)=>{\n                if (yPosition > pageHeight - 50) {\n                    pdf.addPage();\n                    yPosition = 20;\n                }\n                addText(title, FONT_SIZES.SECTION_HEADER, true);\n                yPosition += 5;\n                content();\n                yPosition += 10;\n            };\n            // Title and metadata\n            addText(lessonData.lessonTitle, FONT_SIZES.LESSON_TITLE, true);\n            addText(\"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)), FONT_SIZES.SUPPLEMENTARY);\n            addText(\"Generated on: \".concat(this.formatDate()), FONT_SIZES.SUPPLEMENTARY);\n            yPosition += 10;\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                addSection(\"Warm-up Questions\", ()=>{\n                    const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                    warmupQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                addSection(\"Key Vocabulary\", ()=>{\n                    const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                    let vocabIndex = 0 // Track actual vocabulary item numbering\n                    ;\n                    vocabularyItems.forEach((item, index)=>{\n                        // First item might be an instruction\n                        if (index === 0 && item.word === \"INSTRUCTION\") {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(item.meaning, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                            return;\n                        }\n                        vocabIndex++;\n                        addText(\"\".concat(vocabIndex, \". \").concat(item.word), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                        addText(\"   Meaning: \".concat(item.meaning), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                        // Handle both old format (example) and new format (examples array)\n                        if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                            addText(\"   Examples:\", FONT_SIZES.INSTRUCTIONS, true, false, 15);\n                            const examples = Array.isArray(item.examples) ? item.examples : [];\n                            examples.forEach((example, exIndex)=>{\n                                addText(\"   \".concat(exIndex + 1, '. \"').concat(example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, false, 20);\n                            });\n                        } else if (item.example) {\n                            addText('   Example: \"'.concat(item.example, '\"'), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                        }\n                        yPosition += 3;\n                    });\n                });\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                addSection(\"Reading Passage\", ()=>{\n                    const readingContent = lessonData.sections.reading;\n                    const parts = readingContent.split(\"\\n\\n\");\n                    // Check if first part is an instruction\n                    if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                        // Add instruction with light green background (italic) - manual rendering\n                        pdf.setFillColor(238, 247, 220) // #EEF7DC\n                        ;\n                        pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                        pdf.setFont(\"helvetica\", \"italic\");\n                        const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                        const instructionLines = pdf.splitTextToSize(parts[0], instructionWidth);\n                        const instructionHeight = instructionLines.length * lineHeight + 6;\n                        // Draw background rectangle\n                        pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                        // Add instruction text\n                        for (const line of instructionLines){\n                            pdf.text(line, margin + 10, yPosition);\n                            yPosition += lineHeight;\n                        }\n                        yPosition += 8 // Extra spacing after instruction\n                        ;\n                        // Add the rest of the reading passage\n                        addText(parts.slice(1).join(\"\\n\\n\"), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    } else {\n                        // No instruction, display as before\n                        addText(readingContent, FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    }\n                });\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                addSection(\"Reading Comprehension\", ()=>{\n                    const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                    comprehensionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light blue background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(241, 250, 255) // #F1FAFF\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                addSection(\"Discussion Questions\", ()=>{\n                    const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                    discussionQuestions.forEach((question, index)=>{\n                        // First item is the instruction with light green background (italic) - manual rendering\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                addSection(\"Dialogue Practice\", ()=>{\n                    const dialogueSection = lessonData.sections.dialoguePractice;\n                    // Add instruction with light green background color (italic) - manually without addText\n                    pdf.setFillColor(238, 247, 220) // #EEF7DC\n                    ;\n                    pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                    pdf.setFont(\"helvetica\", \"italic\");\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    // Draw background rectangle\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    // Add instruction text\n                    for (const line of instructionLines){\n                        pdf.text(line, margin + 10, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 8 // Extra spacing after instruction before dialogue starts\n                    ;\n                    // Enhance dialogue with avatar names\n                    const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialoguePractice\");\n                    // Add dialogue lines with character names and spacing\n                    const dialoguePracticeLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                    dialoguePracticeLines.forEach((line, index)=>{\n                        // Add 3px gap between dialogue lines (except first)\n                        if (index > 0) {\n                            yPosition += 3;\n                        }\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                        yPosition += 5;\n                        addText(\"Follow-up Questions:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                        const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                        followUpQuestions.forEach((question, index)=>{\n                            addText(\"\".concat(index + 1, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                        });\n                    }\n                });\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                addSection(\"Dialogue Fill-in-the-Gap\", ()=>{\n                    const dialogueSection = lessonData.sections.dialogueFillGap;\n                    // Add instruction with light blue background color (italic) - manually without addText\n                    pdf.setFillColor(241, 250, 255) // #F1FAFF\n                    ;\n                    pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                    pdf.setFont(\"helvetica\", \"italic\");\n                    const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                    const instructionLines = pdf.splitTextToSize(dialogueSection.instruction, instructionWidth);\n                    const instructionHeight = instructionLines.length * lineHeight + 6;\n                    // Draw background rectangle\n                    pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                    // Add instruction text\n                    for (const line of instructionLines){\n                        pdf.text(line, margin + 10, yPosition);\n                        yPosition += lineHeight;\n                    }\n                    yPosition += 8 // Extra spacing after instruction before dialogue starts\n                    ;\n                    // Enhance dialogue with avatar names\n                    const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialogueFillGap\");\n                    // Add dialogue lines with character names and spacing\n                    const dialogueFillGapLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                    dialogueFillGapLines.forEach((line, index)=>{\n                        // Add 3px gap between dialogue lines (except first)\n                        if (index > 0) {\n                            yPosition += 3;\n                        }\n                        // Character name in bold, then line\n                        pdf.setFontSize(FONT_SIZES.MAIN_CONTENT);\n                        pdf.setFont(\"helvetica\", \"bold\");\n                        const charWidth = pdf.getTextWidth(\"\".concat(line.character, \": \"));\n                        pdf.text(\"\".concat(line.character, \": \"), margin + 10, yPosition);\n                        pdf.setFont(\"helvetica\", \"normal\");\n                        const maxWidth = pdf.internal.pageSize.width - margin * 2 - 10 - charWidth;\n                        const lineText = pdf.splitTextToSize(line.line, maxWidth);\n                        pdf.text(lineText[0], margin + 10 + charWidth, yPosition);\n                        yPosition += lineHeight;\n                        // Handle wrapped lines\n                        for(let i = 1; i < lineText.length; i++){\n                            if (yPosition > pageHeight - 30) {\n                                pdf.addPage();\n                                yPosition = 20;\n                            }\n                            pdf.text(lineText[i], margin + 10 + charWidth, yPosition);\n                            yPosition += lineHeight;\n                        }\n                    });\n                    if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                        yPosition += 5;\n                        addText(\"Answer Key:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                        addText(dialogueSection.answers.join(\", \"), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                    }\n                });\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                addSection(\"Grammar Focus\", ()=>{\n                    addText(\"Focus: \".concat(lessonData.sections.grammar.focus), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                    yPosition += 3;\n                    addText(\"Examples:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                    const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                    grammarExamples.forEach((example, index)=>{\n                        addText(\"• \".concat(example), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                    });\n                    yPosition += 3;\n                    addText(\"Practice Exercise:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                    const grammarExercises = Array.isArray(lessonData.sections.grammar.exercise) ? lessonData.sections.grammar.exercise : [];\n                    grammarExercises.forEach((exercise, index)=>{\n                        addText(\"\".concat(index + 1, \". \").concat(exercise), FONT_SIZES.MAIN_CONTENT, false, false, 15);\n                    });\n                });\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                addSection(\"Pronunciation Practice\", ()=>{\n                    const pronSection = lessonData.sections.pronunciation;\n                    // Handle both old format (single word) and new format (words array)\n                    if (pronSection.words && Array.isArray(pronSection.words) && pronSection.words.length > 0) {\n                        // New format with multiple words\n                        pronSection.words.forEach((wordItem, index)=>{\n                            if (index > 0) yPosition += 5 // Spacing between words\n                            ;\n                            addText(\"Word: \".concat(wordItem.word || \"N/A\"), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                            addText(\"IPA: \".concat(wordItem.ipa || \"N/A\"), FONT_SIZES.SUPPLEMENTARY, false, false, 10);\n                            if (wordItem.practiceSentence) {\n                                addText('Practice: \"'.concat(wordItem.practiceSentence, '\"'), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                            }\n                            if (wordItem.tips && wordItem.tips.length > 0) {\n                                addText(\"Tips:\", FONT_SIZES.INSTRUCTIONS, true, false, 10);\n                                wordItem.tips.forEach((tip)=>{\n                                    addText(\"• \".concat(tip), FONT_SIZES.SUPPLEMENTARY, false, false, 15);\n                                });\n                            }\n                        });\n                    } else if (pronSection.word) {\n                        // Old format with single word\n                        addText(\"Word: \".concat(pronSection.word || \"N/A\"), FONT_SIZES.MAIN_CONTENT, true, false, 10);\n                        addText(\"IPA: \".concat(pronSection.ipa || \"N/A\"), FONT_SIZES.SUPPLEMENTARY, false, false, 10);\n                        if (pronSection.practice) {\n                            addText('Practice: \"'.concat(pronSection.practice, '\"'), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    } else {\n                        addText(\"No pronunciation data available\", FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                    }\n                });\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                addSection(\"Lesson Wrap-up\", ()=>{\n                    const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                    wrapupQuestions.forEach((question, index)=>{\n                        // First item is the instruction - manual rendering (no numbering)\n                        if (index === 0) {\n                            pdf.setFillColor(238, 247, 220) // #EEF7DC\n                            ;\n                            pdf.setFontSize(FONT_SIZES.INSTRUCTIONS);\n                            pdf.setFont(\"helvetica\", \"italic\");\n                            const instructionWidth = pdf.internal.pageSize.width - margin * 2 - 10;\n                            const instructionLines = pdf.splitTextToSize(question, instructionWidth);\n                            const instructionHeight = instructionLines.length * lineHeight + 6;\n                            // Draw background rectangle\n                            pdf.rect(margin + 10, yPosition - 4, instructionWidth, instructionHeight, \"F\");\n                            // Add instruction text\n                            for (const line of instructionLines){\n                                pdf.text(line, margin + 10, yPosition);\n                                yPosition += lineHeight;\n                            }\n                            yPosition += 8 // Extra spacing after instruction\n                            ;\n                        } else {\n                            // Rest are actual questions (renumber starting from 1)\n                            addText(\"\".concat(index, \". \").concat(question), FONT_SIZES.MAIN_CONTENT, false, false, 10);\n                        }\n                    });\n                });\n            }\n            // Footer\n            const pageCount = pdf.internal.getNumberOfPages();\n            for(let i = 1; i <= pageCount; i++){\n                pdf.setPage(i);\n                pdf.setFontSize(8);\n                pdf.setFont(\"helvetica\", \"normal\");\n                pdf.text(\"Generated by LinguaSpark - Page \".concat(i, \" of \").concat(pageCount), margin, pageHeight - 10);\n            }\n            // Download the PDF\n            try {\n                const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".pdf\");\n                console.log(\"Saving PDF with filename:\", fileName);\n                pdf.save(fileName);\n                console.log(\"PDF export completed successfully\");\n            } catch (saveError) {\n                console.error(\"Error saving PDF:\", saveError);\n                throw new Error(\"Failed to save PDF: \".concat(saveError instanceof Error ? saveError.message : \"Unknown save error\"));\n            }\n        } catch (error) {\n            console.error(\"PDF export error:\", error);\n            console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n            console.error(\"Error details:\", {\n                name: error instanceof Error ? error.name : \"Unknown\",\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                lessonDataKeys: lessonData ? Object.keys(lessonData) : \"No lesson data\",\n                sectionsKeys: (lessonData === null || lessonData === void 0 ? void 0 : lessonData.sections) ? Object.keys(lessonData.sections) : \"No sections\",\n                enabledSectionsKeys: enabledSections ? Object.keys(enabledSections) : \"No enabled sections\"\n            });\n            throw new Error(\"PDF export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n    async exportToWord(lessonData, enabledSections) {\n        try {\n            console.log(\"Starting Word export with data:\", {\n                lessonData,\n                enabledSections\n            });\n            this.validateLessonData(lessonData);\n            // Additional validation for enabled sections\n            if (!enabledSections || Object.keys(enabledSections).length === 0) {\n                throw new Error(\"No sections enabled for export\");\n            }\n            const children = [];\n            // Typography hierarchy constants (in half-points for Word - multiply by 2)\n            // 32px = 24pt, 28px = 21pt, 16px = 12pt, 15px = 11.25pt, 14px = 10.5pt\n            const WORD_FONT_SIZES = {\n                LESSON_TITLE: 48,\n                SECTION_HEADER: 42,\n                MAIN_CONTENT: 24,\n                INSTRUCTIONS: 23,\n                SUPPLEMENTARY: 21 // 10.5pt (14px equivalent)\n            };\n            // Title and metadata\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: safeStripMarkdown(lessonData.lessonTitle),\n                        bold: true,\n                        size: WORD_FONT_SIZES.LESSON_TITLE\n                    })\n                ],\n                heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.TITLE,\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    after: 400\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Target Language: \".concat(lessonData.targetLanguage.charAt(0).toUpperCase() + lessonData.targetLanguage.slice(1)),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 200\n                }\n            }));\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated on: \".concat(this.formatDate()),\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY\n                    })\n                ],\n                spacing: {\n                    after: 400\n                }\n            }));\n            // Helper function to add section\n            const addSection = (title, content)=>{\n                children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: title,\n                            bold: true,\n                            size: WORD_FONT_SIZES.SECTION_HEADER,\n                            underline: {\n                                type: docx__WEBPACK_IMPORTED_MODULE_1__.UnderlineType.SINGLE\n                            }\n                        })\n                    ],\n                    heading: docx__WEBPACK_IMPORTED_MODULE_1__.HeadingLevel.HEADING_2,\n                    spacing: {\n                        before: 400,\n                        after: 200\n                    }\n                }));\n                children.push(...content);\n            };\n            // Add sections based on enabled state\n            if (enabledSections.warmup && lessonData.sections.warmup) {\n                const warmupQuestions = Array.isArray(lessonData.sections.warmup) ? lessonData.sections.warmup : [];\n                const warmupContent = warmupQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Warm-up Questions\", warmupContent);\n            }\n            if (enabledSections.vocabulary && lessonData.sections.vocabulary) {\n                const vocabContent = [];\n                const vocabularyItems = Array.isArray(lessonData.sections.vocabulary) ? lessonData.sections.vocabulary : [];\n                vocabularyItems.forEach((item, index)=>{\n                    // First item might be an instruction\n                    if (index === 0 && item.word === \"INSTRUCTION\") {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(item.meaning),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        }));\n                        return;\n                    }\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(index + 1, \". \").concat(safeStripMarkdown(item.word)),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"   Meaning: \".concat(safeStripMarkdown(item.meaning)),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                    // Handle both old format (example) and new format (examples array)\n                    if (item.examples && Array.isArray(item.examples) && item.examples.length > 0) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"   Examples:\",\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    bold: true\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        // Additional safety check before forEach\n                        const examples = Array.isArray(item.examples) ? item.examples : [];\n                        examples.forEach((example, exIndex)=>{\n                            vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"      \".concat(exIndex + 1, '. \"').concat(safeStripMarkdown(example), '\"'),\n                                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                        italics: true\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                        });\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"\"\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    } else if (item.example) {\n                        vocabContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: '   Example: \"'.concat(safeStripMarkdown(item.example), '\"'),\n                                    size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            }\n                        }));\n                    }\n                });\n                addSection(\"Key Vocabulary\", vocabContent);\n            }\n            if (enabledSections.reading && lessonData.sections.reading) {\n                const readingText = lessonData.sections.reading;\n                const parts = readingText.split(\"\\n\\n\");\n                const readingContent = [];\n                // Check if first part is an instruction\n                if (parts.length > 1 && parts[0].includes(\"Read the following text carefully\")) {\n                    // Add instruction with light green background\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(parts[0]),\n                                size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                italics: true\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        },\n                        shading: {\n                            fill: \"EEF7DC\"\n                        },\n                        border: {\n                            left: {\n                                color: \"CCCCCC\",\n                                size: 6,\n                                style: \"single\"\n                            }\n                        }\n                    }));\n                    // Add the rest of the reading passage\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(parts.slice(1).join(\"\\n\\n\")),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                } else {\n                    // No instruction, display as before\n                    readingContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(readingText),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                }\n                addSection(\"Reading Passage\", readingContent);\n            }\n            if (enabledSections.comprehension && lessonData.sections.comprehension) {\n                const comprehensionQuestions = Array.isArray(lessonData.sections.comprehension) ? lessonData.sections.comprehension : [];\n                const comprehensionContent = comprehensionQuestions.map((question, index)=>{\n                    // First item is the instruction with light blue background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"F1FAFF\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Reading Comprehension\", comprehensionContent);\n            }\n            if (enabledSections.discussion && lessonData.sections.discussion) {\n                const discussionQuestions = Array.isArray(lessonData.sections.discussion) ? lessonData.sections.discussion : [];\n                const discussionContent = discussionQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Discussion Questions\", discussionContent);\n            }\n            if (enabledSections.dialoguePractice && lessonData.sections.dialoguePractice) {\n                const dialoguePracticeContent = [];\n                const dialogueSection = lessonData.sections.dialoguePractice;\n                // Add instruction with light green background (#EEF7DC)\n                dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: safeStripMarkdown(dialogueSection.instruction),\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"EEF7DC\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Enhance dialogue with avatar names\n                const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialoguePractice\");\n                // Add dialogue lines with character names in bold and 3px spacing between lines\n                const dialogueLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                dialogueLines.forEach((line, index)=>{\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(safeStripMarkdown(line.character), \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(line.line),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            before: index === 0 ? 0 : 60,\n                            after: 0\n                        }\n                    }));\n                });\n                // Add follow-up questions if any\n                if (dialogueSection.followUpQuestions && dialogueSection.followUpQuestions.length > 0) {\n                    dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Follow-up Questions:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    const followUpQuestions = Array.isArray(dialogueSection.followUpQuestions) ? dialogueSection.followUpQuestions : [];\n                    followUpQuestions.forEach((question, index)=>{\n                        dialoguePracticeContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index + 1, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                    });\n                }\n                addSection(\"Dialogue Practice\", dialoguePracticeContent);\n            }\n            if (enabledSections.dialogueFillGap && lessonData.sections.dialogueFillGap) {\n                const dialogueFillGapContent = [];\n                const dialogueSection = lessonData.sections.dialogueFillGap;\n                // Add instruction with light blue background (#F1FAFF)\n                dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: safeStripMarkdown(dialogueSection.instruction),\n                            size: WORD_FONT_SIZES.INSTRUCTIONS,\n                            italics: true\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    },\n                    shading: {\n                        fill: \"F1FAFF\"\n                    },\n                    border: {\n                        left: {\n                            color: \"CCCCCC\",\n                            size: 6,\n                            style: \"single\"\n                        }\n                    }\n                }));\n                // Enhance dialogue with avatar names\n                const enhancedDialogue = (0,_avatar_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceDialogueWithAvatars)(dialogueSection.dialogue, lessonData.id, \"dialogueFillGap\");\n                // Add dialogue lines with character names in bold and 3px spacing between lines\n                const dialogueFillGapLines = Array.isArray(enhancedDialogue) ? enhancedDialogue : [];\n                dialogueFillGapLines.forEach((line, index)=>{\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"\".concat(safeStripMarkdown(line.character), \": \"),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            }),\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(line.line),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            before: index === 0 ? 0 : 60,\n                            after: 0\n                        }\n                    }));\n                });\n                // Add answer key if any\n                if (dialogueSection.answers && dialogueSection.answers.length > 0) {\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Answer Key:\",\n                                bold: true,\n                                size: WORD_FONT_SIZES.INSTRUCTIONS\n                            })\n                        ],\n                        spacing: {\n                            before: 200,\n                            after: 100\n                        }\n                    }));\n                    dialogueFillGapContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(dialogueSection.answers.join(\", \")),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                }\n                addSection(\"Dialogue Fill-in-the-Gap\", dialogueFillGapContent);\n            }\n            if (enabledSections.grammar && lessonData.sections.grammar) {\n                const grammarContent = [];\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Focus: \".concat(safeStripMarkdown(lessonData.sections.grammar.focus)),\n                            bold: true,\n                            size: WORD_FONT_SIZES.MAIN_CONTENT\n                        })\n                    ],\n                    spacing: {\n                        after: 200\n                    }\n                }));\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Examples:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        after: 100\n                    }\n                }));\n                const grammarExamples = Array.isArray(lessonData.sections.grammar.examples) ? lessonData.sections.grammar.examples : [];\n                grammarExamples.forEach((example)=>{\n                    grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"• \".concat(safeStripMarkdown(example)),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                    children: [\n                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                            text: \"Practice Exercise:\",\n                            bold: true,\n                            size: WORD_FONT_SIZES.INSTRUCTIONS\n                        })\n                    ],\n                    spacing: {\n                        before: 200,\n                        after: 100\n                    }\n                }));\n                const grammarExercises = Array.isArray(lessonData.sections.grammar.exercise) ? lessonData.sections.grammar.exercise : [];\n                grammarExercises.forEach((exercise, index)=>{\n                    grammarContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: safeStripMarkdown(\"\".concat(index + 1, \". \").concat(exercise)),\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 100\n                        }\n                    }));\n                });\n                addSection(\"Grammar Focus\", grammarContent);\n            }\n            if (enabledSections.pronunciation && lessonData.sections.pronunciation) {\n                const pronSection = lessonData.sections.pronunciation;\n                const pronunciationContent = [];\n                // Handle both old format (single word) and new format (words array)\n                if (pronSection.words && Array.isArray(pronSection.words) && pronSection.words.length > 0) {\n                    // New format with multiple words\n                    pronSection.words.forEach((wordItem, index)=>{\n                        if (index > 0) {\n                            // Add spacing between words\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"\"\n                                    })\n                                ],\n                                spacing: {\n                                    before: 200\n                                }\n                            }));\n                        }\n                        pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"Word: \".concat(safeStripMarkdown(wordItem.word || \"N/A\")),\n                                    bold: true,\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: \"IPA: \".concat(safeStripMarkdown(wordItem.ipa || \"N/A\")),\n                                    size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                })\n                            ],\n                            spacing: {\n                                after: 100\n                            }\n                        }));\n                        if (wordItem.practiceSentence) {\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: 'Practice: \"'.concat(safeStripMarkdown(wordItem.practiceSentence), '\"'),\n                                        size: WORD_FONT_SIZES.MAIN_CONTENT,\n                                        italics: true\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                        }\n                        if (wordItem.tips && wordItem.tips.length > 0) {\n                            pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                children: [\n                                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                        text: \"Tips:\",\n                                        bold: true,\n                                        size: WORD_FONT_SIZES.INSTRUCTIONS\n                                    })\n                                ],\n                                spacing: {\n                                    after: 100\n                                }\n                            }));\n                            wordItem.tips.forEach((tip)=>{\n                                pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                                    children: [\n                                        new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                            text: \"• \".concat(safeStripMarkdown(tip)),\n                                            size: WORD_FONT_SIZES.SUPPLEMENTARY\n                                        })\n                                    ],\n                                    spacing: {\n                                        after: 100\n                                    }\n                                }));\n                            });\n                        }\n                    });\n                } else if (pronSection.word) {\n                    // Old format with single word\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"Word: \".concat(safeStripMarkdown(pronSection.word || \"N/A\")),\n                                bold: true,\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }));\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"IPA: \".concat(safeStripMarkdown(pronSection.ipa || \"N/A\")),\n                                size: WORD_FONT_SIZES.SUPPLEMENTARY\n                            })\n                        ],\n                        spacing: {\n                            after: 150\n                        }\n                    }));\n                    if (pronSection.practice) {\n                        pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: 'Practice: \"'.concat(safeStripMarkdown(pronSection.practice), '\"'),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            }\n                        }));\n                    }\n                } else {\n                    pronunciationContent.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                        children: [\n                            new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                text: \"No pronunciation data available\",\n                                size: WORD_FONT_SIZES.MAIN_CONTENT\n                            })\n                        ],\n                        spacing: {\n                            after: 200\n                        }\n                    }));\n                }\n                addSection(\"Pronunciation Practice\", pronunciationContent);\n            }\n            if (enabledSections.wrapup && lessonData.sections.wrapup) {\n                const wrapupQuestions = Array.isArray(lessonData.sections.wrapup) ? lessonData.sections.wrapup : [];\n                const wrapupContent = wrapupQuestions.map((question, index)=>{\n                    // First item is the instruction with light green background\n                    if (index === 0) {\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(question),\n                                    size: WORD_FONT_SIZES.INSTRUCTIONS,\n                                    italics: true\n                                })\n                            ],\n                            spacing: {\n                                after: 200\n                            },\n                            shading: {\n                                fill: \"EEF7DC\"\n                            },\n                            border: {\n                                left: {\n                                    color: \"CCCCCC\",\n                                    size: 6,\n                                    style: \"single\"\n                                }\n                            }\n                        });\n                    } else {\n                        // Rest are actual questions (renumber starting from 1)\n                        return new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                            children: [\n                                new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                                    text: safeStripMarkdown(\"\".concat(index, \". \").concat(question)),\n                                    size: WORD_FONT_SIZES.MAIN_CONTENT\n                                })\n                            ],\n                            spacing: {\n                                after: 150\n                            }\n                        });\n                    }\n                });\n                addSection(\"Lesson Wrap-up\", wrapupContent);\n            }\n            // Footer\n            children.push(new docx__WEBPACK_IMPORTED_MODULE_1__.Paragraph({\n                children: [\n                    new docx__WEBPACK_IMPORTED_MODULE_1__.TextRun({\n                        text: \"Generated by LinguaSpark\",\n                        size: WORD_FONT_SIZES.SUPPLEMENTARY,\n                        italics: true\n                    })\n                ],\n                alignment: docx__WEBPACK_IMPORTED_MODULE_1__.AlignmentType.CENTER,\n                spacing: {\n                    before: 600\n                }\n            }));\n            // Create document\n            const doc = new docx__WEBPACK_IMPORTED_MODULE_1__.Document({\n                sections: [\n                    {\n                        properties: {},\n                        children: children\n                    }\n                ]\n            });\n            // Generate and download\n            console.log(\"Creating Word document...\");\n            const buffer = await docx__WEBPACK_IMPORTED_MODULE_1__.Packer.toBuffer(doc);\n            console.log(\"Document buffer created, size:\", buffer.byteLength);\n            const blob = new Blob([\n                buffer\n            ], {\n                type: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n            });\n            const url = URL.createObjectURL(blob);\n            const fileName = \"\".concat(lessonData.lessonType, \"-lesson-\").concat(lessonData.studentLevel, \"-\").concat(Date.now(), \".docx\");\n            console.log(\"Downloading Word document with filename:\", fileName);\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            URL.revokeObjectURL(url);\n            console.log(\"Word export completed successfully\");\n        } catch (error) {\n            console.error(\"Word export error:\", error);\n            throw new Error(\"Word export failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n        }\n    }\n}\nconst lessonExporter = new LessonExporter();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9leHBvcnQtdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QjtBQUM4RTtBQUM1QztBQUUzRDs7Ozs7OztDQU9DLEdBQ00sU0FBU1MsY0FBY0MsSUFBWTtJQUN4QyxJQUFJLENBQUNBLFFBQVEsT0FBT0EsU0FBUyxVQUFVO1FBQ3JDLE9BQU9BO0lBQ1Q7SUFFQSxJQUFJQyxTQUFTRDtJQUViLDRDQUE0QztJQUM1QyxvREFBb0Q7SUFDcERDLFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxrQkFBa0I7SUFDMUNELFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxjQUFjO0lBRXRDLDBDQUEwQztJQUMxQyxvREFBb0Q7SUFDcERELFNBQVNBLE9BQU9DLE9BQU8sQ0FBQyxjQUFjO0lBQ3RDRCxTQUFTQSxPQUFPQyxPQUFPLENBQUMsWUFBWTtJQUVwQyxPQUFPRDtBQUNUO0FBRUE7Ozs7Ozs7Q0FPQyxHQUNNLFNBQVNFLGtCQUFrQkgsSUFBWTtJQUM1QyxJQUFJO1FBQ0YsT0FBT0QsY0FBY0M7SUFDdkIsRUFBRSxPQUFPSSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDQyxRQUFRRCxLQUFLLENBQUMsZ0JBQWdCSixpQkFBQUEsMkJBQUFBLEtBQU1NLFNBQVMsQ0FBQyxHQUFHO1FBQ2pELHFFQUFxRTtRQUNyRSxPQUFPTjtJQUNUO0FBQ0Y7QUFnRE8sTUFBTU87SUFDSEMsYUFBcUI7UUFDM0IsT0FBTyxJQUFJQyxPQUFPQyxrQkFBa0IsQ0FBQyxTQUFTO1lBQzVDQyxNQUFNO1lBQ05DLE9BQU87WUFDUEMsS0FBSztRQUNQO0lBQ0Y7SUFJUUMsbUJBQW1CQyxVQUFzQixFQUFRO1lBMEJnREMsc0JBQ25EQSxtQkFDNERBLHlCQUNUQSxzQkFDL0NBLG1CQUNXQSx5QkFDd0JBO1FBL0IzRlgsUUFBUVksR0FBRyxDQUFDLDJCQUEyQkY7UUFFdkMsSUFBSSxDQUFDQSxZQUFZO1lBQ2YsTUFBTSxJQUFJRyxNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDSCxXQUFXSSxXQUFXLEVBQUU7WUFDM0IsTUFBTSxJQUFJRCxNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDSCxXQUFXSyxVQUFVLEVBQUU7WUFDMUIsTUFBTSxJQUFJRixNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDSCxXQUFXTSxZQUFZLEVBQUU7WUFDNUIsTUFBTSxJQUFJSCxNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDSCxXQUFXTyxjQUFjLEVBQUU7WUFDOUIsTUFBTSxJQUFJSixNQUFNO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDSCxXQUFXQyxRQUFRLEVBQUU7WUFDeEIsTUFBTSxJQUFJRSxNQUFNO1FBQ2xCO1FBRUEsb0RBQW9EO1FBQ3BELE1BQU1GLFdBQVdELFdBQVdDLFFBQVE7UUFDcENYLFFBQVFZLEdBQUcsQ0FBQyw2QkFBNkI7WUFDdkNNLFFBQVE7Z0JBQUVDLE1BQU0sT0FBT1IsU0FBU08sTUFBTTtnQkFBRUUsU0FBU0MsTUFBTUQsT0FBTyxDQUFDVCxTQUFTTyxNQUFNO2dCQUFHSSxPQUFPWCxTQUFTTyxNQUFNO1lBQUM7WUFDeEdLLFlBQVk7Z0JBQUVKLE1BQU0sT0FBT1IsU0FBU1ksVUFBVTtnQkFBRUgsU0FBU0MsTUFBTUQsT0FBTyxDQUFDVCxTQUFTWSxVQUFVO2dCQUFHQyxNQUFNLEdBQUViLHVCQUFBQSxTQUFTWSxVQUFVLGNBQW5CWiwyQ0FBQUEscUJBQXFCYSxNQUFNO1lBQUM7WUFDaklDLFNBQVM7Z0JBQUVOLE1BQU0sT0FBT1IsU0FBU2MsT0FBTztnQkFBRUQsTUFBTSxHQUFFYixvQkFBQUEsU0FBU2MsT0FBTyxjQUFoQmQsd0NBQUFBLGtCQUFrQmEsTUFBTTtZQUFDO1lBQzNFRSxlQUFlO2dCQUFFUCxNQUFNLE9BQU9SLFNBQVNlLGFBQWE7Z0JBQUVOLFNBQVNDLE1BQU1ELE9BQU8sQ0FBQ1QsU0FBU2UsYUFBYTtnQkFBR0YsTUFBTSxHQUFFYiwwQkFBQUEsU0FBU2UsYUFBYSxjQUF0QmYsOENBQUFBLHdCQUF3QmEsTUFBTTtZQUFDO1lBQzdJRyxZQUFZO2dCQUFFUixNQUFNLE9BQU9SLFNBQVNnQixVQUFVO2dCQUFFUCxTQUFTQyxNQUFNRCxPQUFPLENBQUNULFNBQVNnQixVQUFVO2dCQUFHSCxNQUFNLEdBQUViLHVCQUFBQSxTQUFTZ0IsVUFBVSxjQUFuQmhCLDJDQUFBQSxxQkFBcUJhLE1BQU07WUFBQztZQUNqSUksU0FBUztnQkFBRVQsTUFBTSxPQUFPUixTQUFTaUIsT0FBTztnQkFBRUMsVUFBVSxDQUFDLEdBQUNsQixvQkFBQUEsU0FBU2lCLE9BQU8sY0FBaEJqQix3Q0FBQUEsa0JBQWtCbUIsS0FBSztZQUFDO1lBQzlFQyxlQUFlO2dCQUFFWixNQUFNLE9BQU9SLFNBQVNvQixhQUFhO2dCQUFFQyxTQUFTLENBQUMsR0FBQ3JCLDBCQUFBQSxTQUFTb0IsYUFBYSxjQUF0QnBCLDhDQUFBQSx3QkFBd0JzQixJQUFJO1lBQUM7WUFDOUZDLFFBQVE7Z0JBQUVmLE1BQU0sT0FBT1IsU0FBU3VCLE1BQU07Z0JBQUVkLFNBQVNDLE1BQU1ELE9BQU8sQ0FBQ1QsU0FBU3VCLE1BQU07Z0JBQUdWLE1BQU0sR0FBRWIsbUJBQUFBLFNBQVN1QixNQUFNLGNBQWZ2Qix1Q0FBQUEsaUJBQWlCYSxNQUFNO1lBQUM7UUFDbkg7UUFFQSxJQUFJLENBQUNILE1BQU1ELE9BQU8sQ0FBQ1QsU0FBU08sTUFBTSxHQUFHO1lBQ25DbEIsUUFBUW1DLElBQUksQ0FBQyxtQ0FBbUN4QixTQUFTTyxNQUFNO1FBQ2pFO1FBQ0EsSUFBSSxDQUFDRyxNQUFNRCxPQUFPLENBQUNULFNBQVNZLFVBQVUsR0FBRztZQUN2Q3ZCLFFBQVFtQyxJQUFJLENBQUMsdUNBQXVDeEIsU0FBU1ksVUFBVTtRQUN6RTtRQUNBLElBQUksT0FBT1osU0FBU2MsT0FBTyxLQUFLLFVBQVU7WUFDeEN6QixRQUFRbUMsSUFBSSxDQUFDLG9DQUFvQ3hCLFNBQVNjLE9BQU87UUFDbkU7UUFDQSxJQUFJLENBQUNKLE1BQU1ELE9BQU8sQ0FBQ1QsU0FBU2UsYUFBYSxHQUFHO1lBQzFDMUIsUUFBUW1DLElBQUksQ0FBQywwQ0FBMEN4QixTQUFTZSxhQUFhO1FBQy9FO1FBQ0EsSUFBSSxDQUFDTCxNQUFNRCxPQUFPLENBQUNULFNBQVNnQixVQUFVLEdBQUc7WUFDdkMzQixRQUFRbUMsSUFBSSxDQUFDLHVDQUF1Q3hCLFNBQVNnQixVQUFVO1FBQ3pFO1FBQ0EsSUFBSSxDQUFDaEIsU0FBU2lCLE9BQU8sSUFBSSxDQUFDakIsU0FBU2lCLE9BQU8sQ0FBQ0UsS0FBSyxFQUFFO1lBQ2hEOUIsUUFBUW1DLElBQUksQ0FBQyxpQ0FBaUN4QixTQUFTaUIsT0FBTztRQUNoRTtRQUNBLElBQUksQ0FBQ2pCLFNBQVNvQixhQUFhLElBQUksQ0FBQ3BCLFNBQVNvQixhQUFhLENBQUNFLElBQUksRUFBRTtZQUMzRGpDLFFBQVFtQyxJQUFJLENBQUMsdUNBQXVDeEIsU0FBU29CLGFBQWE7UUFDNUU7UUFDQSxJQUFJLENBQUNWLE1BQU1ELE9BQU8sQ0FBQ1QsU0FBU3VCLE1BQU0sR0FBRztZQUNuQ2xDLFFBQVFtQyxJQUFJLENBQUMsbUNBQW1DeEIsU0FBU3VCLE1BQU07UUFDakU7UUFFQWxDLFFBQVFZLEdBQUcsQ0FBQztJQUNkO0lBRUEsTUFBTXdCLFlBQVkxQixVQUFzQixFQUFFMkIsZUFBd0MsRUFBaUI7UUFDakcsSUFBSTtZQUNGckMsUUFBUVksR0FBRyxDQUFDLGtDQUFrQztnQkFBRUY7Z0JBQVkyQjtZQUFnQjtZQUU1RSwwQ0FBMEM7WUFDMUMsSUFBSSxLQUFrQixFQUFhLEVBRWxDO1lBRUQsOEJBQThCO1lBQzlCLElBQUksT0FBT3BELDZDQUFLQSxLQUFLLGFBQWE7Z0JBQ2hDLE1BQU0sSUFBSTRCLE1BQU07WUFDbEI7WUFFQWIsUUFBUVksR0FBRyxDQUFDO1lBQ1osSUFBSSxDQUFDSCxrQkFBa0IsQ0FBQ0M7WUFFeEIsNkNBQTZDO1lBQzdDLElBQUksQ0FBQzJCLG1CQUFtQkMsT0FBT0MsSUFBSSxDQUFDRixpQkFBaUJiLE1BQU0sS0FBSyxHQUFHO2dCQUNqRSxNQUFNLElBQUlYLE1BQU07WUFDbEI7WUFFQWIsUUFBUVksR0FBRyxDQUFDO1lBQ1osTUFBTTRCLE1BQU0sSUFBSXZELDZDQUFLQTtZQUNyQmUsUUFBUVksR0FBRyxDQUFDO1lBRVosSUFBSTZCLFlBQVk7WUFDaEIsTUFBTUMsYUFBYUYsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNDLE1BQU07WUFDL0MsTUFBTUMsU0FBUztZQUNmLE1BQU1DLGFBQWE7WUFFbkIvQyxRQUFRWSxHQUFHLENBQUMsbUJBQW1CO2dCQUFFOEI7Z0JBQVlJO2dCQUFRQztZQUFXO1lBRWhFLDBEQUEwRDtZQUMxRCxNQUFNQyxhQUFhO2dCQUNqQkMsY0FBYztnQkFDZEMsZ0JBQWdCO2dCQUNoQkMsY0FBYztnQkFDZEMsY0FBYztnQkFDZEMsZUFBZSxHQUFRLDRCQUE0QjtZQUNyRDtZQUVBLGlEQUFpRDtZQUNqRCxNQUFNQyxVQUFVLFNBQUMzRDtvQkFBYzRELDRFQUFXUCxXQUFXRyxZQUFZLEVBQUVLLDBFQUFTLE9BQU9DLDRFQUFXLE9BQU9DLDBFQUFTO2dCQUM1RyxJQUFJO29CQUNGLG9FQUFvRTtvQkFDcEUsTUFBTUMsZ0JBQWdCaEUsS0FDbkJFLE9BQU8sQ0FBQyxrQkFBa0IsTUFBTSxrQ0FBa0M7cUJBQ2xFQSxPQUFPLENBQUMsY0FBYyxNQUFNLGtDQUFrQztxQkFDOURBLE9BQU8sQ0FBQyxjQUFjLE1BQU0sa0NBQWtDO3FCQUM5REEsT0FBTyxDQUFDLFlBQVksTUFBTSxrQ0FBa0M7cUJBQzVEQSxPQUFPLENBQUMsaUNBQWlDLElBQUksNEJBQTRCO3FCQUN6RUEsT0FBTyxDQUFDLDhDQUE4QyxLQUFLLHlCQUF5QjtxQkFDcEYrRCxJQUFJO29CQUVQLElBQUksQ0FBQ0QsZUFBZTt3QkFDbEIzRCxRQUFRbUMsSUFBSSxDQUFDO3dCQUNiO29CQUNGO29CQUVBbkMsUUFBUVksR0FBRyxDQUFDLGlCQUFrRCtDLE9BQWpDQSxjQUFjMUQsU0FBUyxDQUFDLEdBQUcsS0FBNkMsT0FBdkMwRCxjQUFjbkMsTUFBTSxHQUFHLEtBQUssUUFBUSxJQUFHO29CQUVyR2dCLElBQUlxQixXQUFXLENBQUNOO29CQUNoQixnREFBZ0Q7b0JBQ2hELElBQUlPLFlBQVk7b0JBQ2hCLElBQUlOLFVBQVVDLFVBQVU7d0JBQ3RCSyxZQUFZO29CQUNkLE9BQU8sSUFBSU4sUUFBUTt3QkFDakJNLFlBQVk7b0JBQ2QsT0FBTyxJQUFJTCxVQUFVO3dCQUNuQkssWUFBWTtvQkFDZDtvQkFDQXRCLElBQUl1QixPQUFPLENBQUMsYUFBYUQ7b0JBRXpCLE1BQU1FLFdBQVd4QixJQUFJRyxRQUFRLENBQUNDLFFBQVEsQ0FBQ3FCLEtBQUssR0FBR25CLFNBQVMsSUFBSVk7b0JBQzVELE1BQU1RLFFBQVExQixJQUFJMkIsZUFBZSxDQUFDUixlQUFlSztvQkFFakQsS0FBSyxNQUFNSSxRQUFRRixNQUFPO3dCQUN4QixJQUFJekIsWUFBWUMsYUFBYSxJQUFJOzRCQUMvQkYsSUFBSTZCLE9BQU87NEJBQ1g1QixZQUFZO3dCQUNkO3dCQUNBRCxJQUFJN0MsSUFBSSxDQUFDeUUsTUFBTXRCLFNBQVNZLFFBQVFqQjt3QkFDaENBLGFBQWFNO29CQUNmO29CQUNBTixhQUFhLEVBQUUsaUNBQWlDOztnQkFDbEQsRUFBRSxPQUFPMUMsT0FBTztvQkFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkEsT0FBTyxTQUFTSjtvQkFDM0QsTUFBTUk7Z0JBQ1I7WUFDRjtZQUVBLE1BQU11RSxhQUFhLENBQUNDLE9BQWVDO2dCQUNqQyxJQUFJL0IsWUFBWUMsYUFBYSxJQUFJO29CQUMvQkYsSUFBSTZCLE9BQU87b0JBQ1g1QixZQUFZO2dCQUNkO2dCQUNBYSxRQUFRaUIsT0FBT3ZCLFdBQVdFLGNBQWMsRUFBRTtnQkFDMUNULGFBQWE7Z0JBQ2IrQjtnQkFDQS9CLGFBQWE7WUFDZjtZQUVBLHFCQUFxQjtZQUNyQmEsUUFBUTVDLFdBQVdJLFdBQVcsRUFBRWtDLFdBQVdDLFlBQVksRUFBRTtZQUN6REssUUFDRSxvQkFBMkcsT0FBdkY1QyxXQUFXTyxjQUFjLENBQUN3RCxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUFLaEUsV0FBV08sY0FBYyxDQUFDMEQsS0FBSyxDQUFDLEtBQ3hHM0IsV0FBV0ssYUFBYTtZQUUxQkMsUUFBUSxpQkFBbUMsT0FBbEIsSUFBSSxDQUFDbkQsVUFBVSxLQUFNNkMsV0FBV0ssYUFBYTtZQUN0RVosYUFBYTtZQUViLHNDQUFzQztZQUN0QyxJQUFJSixnQkFBZ0JuQixNQUFNLElBQUlSLFdBQVdDLFFBQVEsQ0FBQ08sTUFBTSxFQUFFO2dCQUN4RG9ELFdBQVcscUJBQXFCO29CQUM5QixNQUFNTSxrQkFBa0J2RCxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ08sTUFBTSxJQUFJUixXQUFXQyxRQUFRLENBQUNPLE1BQU0sR0FBRyxFQUFFO29CQUNuRzBELGdCQUFnQkMsT0FBTyxDQUFDLENBQUNDLFVBQVVDO3dCQUNqQyx3RkFBd0Y7d0JBQ3hGLElBQUlBLFVBQVUsR0FBRzs0QkFDZnZDLElBQUl3QyxZQUFZLENBQUMsS0FBSyxLQUFLLEtBQUssVUFBVTs7NEJBQzFDeEMsSUFBSXFCLFdBQVcsQ0FBQ2IsV0FBV0ksWUFBWTs0QkFDdkNaLElBQUl1QixPQUFPLENBQUMsYUFBYTs0QkFFekIsTUFBTWtCLG1CQUFtQnpDLElBQUlHLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDcUIsS0FBSyxHQUFHbkIsU0FBUyxJQUFJOzRCQUNwRSxNQUFNb0MsbUJBQW1CMUMsSUFBSTJCLGVBQWUsQ0FBQ1csVUFBVUc7NEJBQ3ZELE1BQU1FLG9CQUFvQkQsaUJBQWlCMUQsTUFBTSxHQUFHdUIsYUFBYTs0QkFFakUsNEJBQTRCOzRCQUM1QlAsSUFBSTRDLElBQUksQ0FBQ3RDLFNBQVMsSUFBSUwsWUFBWSxHQUFHd0Msa0JBQWtCRSxtQkFBbUI7NEJBRTFFLHVCQUF1Qjs0QkFDdkIsS0FBSyxNQUFNZixRQUFRYyxpQkFBa0I7Z0NBQ25DMUMsSUFBSTdDLElBQUksQ0FBQ3lFLE1BQU10QixTQUFTLElBQUlMO2dDQUM1QkEsYUFBYU07NEJBQ2Y7NEJBQ0FOLGFBQWEsRUFBRSxrQ0FBa0M7O3dCQUNuRCxPQUFPOzRCQUNMLHVEQUF1RDs0QkFDdkRhLFFBQVEsR0FBYXdCLE9BQVZDLE9BQU0sTUFBYSxPQUFURCxXQUFZOUIsV0FBV0csWUFBWSxFQUFFLE9BQU8sT0FBTzt3QkFDMUU7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLElBQUlkLGdCQUFnQmQsVUFBVSxJQUFJYixXQUFXQyxRQUFRLENBQUNZLFVBQVUsRUFBRTtnQkFDaEUrQyxXQUFXLGtCQUFrQjtvQkFDM0IsTUFBTWUsa0JBQWtCaEUsTUFBTUQsT0FBTyxDQUFDVixXQUFXQyxRQUFRLENBQUNZLFVBQVUsSUFBSWIsV0FBV0MsUUFBUSxDQUFDWSxVQUFVLEdBQUcsRUFBRTtvQkFDM0csSUFBSStELGFBQWEsRUFBRSx5Q0FBeUM7O29CQUM1REQsZ0JBQWdCUixPQUFPLENBQUMsQ0FBQ1UsTUFBTVI7d0JBQzdCLHFDQUFxQzt3QkFDckMsSUFBSUEsVUFBVSxLQUFLUSxLQUFLdEQsSUFBSSxLQUFLLGVBQWU7NEJBQzlDTyxJQUFJd0MsWUFBWSxDQUFDLEtBQUssS0FBSyxLQUFLLFVBQVU7OzRCQUMxQ3hDLElBQUlxQixXQUFXLENBQUNiLFdBQVdJLFlBQVk7NEJBQ3ZDWixJQUFJdUIsT0FBTyxDQUFDLGFBQWE7NEJBRXpCLE1BQU1rQixtQkFBbUJ6QyxJQUFJRyxRQUFRLENBQUNDLFFBQVEsQ0FBQ3FCLEtBQUssR0FBR25CLFNBQVMsSUFBSTs0QkFDcEUsTUFBTW9DLG1CQUFtQjFDLElBQUkyQixlQUFlLENBQUNvQixLQUFLQyxPQUFPLEVBQUVQOzRCQUMzRCxNQUFNRSxvQkFBb0JELGlCQUFpQjFELE1BQU0sR0FBR3VCLGFBQWE7NEJBRWpFLDRCQUE0Qjs0QkFDNUJQLElBQUk0QyxJQUFJLENBQUN0QyxTQUFTLElBQUlMLFlBQVksR0FBR3dDLGtCQUFrQkUsbUJBQW1COzRCQUUxRSx1QkFBdUI7NEJBQ3ZCLEtBQUssTUFBTWYsUUFBUWMsaUJBQWtCO2dDQUNuQzFDLElBQUk3QyxJQUFJLENBQUN5RSxNQUFNdEIsU0FBUyxJQUFJTDtnQ0FDNUJBLGFBQWFNOzRCQUNmOzRCQUNBTixhQUFhLEVBQUUsa0NBQWtDOzs0QkFDakQ7d0JBQ0Y7d0JBRUE2Qzt3QkFDQWhDLFFBQVEsR0FBa0JpQyxPQUFmRCxZQUFXLE1BQWMsT0FBVkMsS0FBS3RELElBQUksR0FBSWUsV0FBV0csWUFBWSxFQUFFLE1BQU0sT0FBTzt3QkFDN0VHLFFBQVEsZUFBNEIsT0FBYmlDLEtBQUtDLE9BQU8sR0FBSXhDLFdBQVdHLFlBQVksRUFBRSxPQUFPLE9BQU87d0JBRTlFLG1FQUFtRTt3QkFDbkUsSUFBSW9DLEtBQUtFLFFBQVEsSUFBSXBFLE1BQU1ELE9BQU8sQ0FBQ21FLEtBQUtFLFFBQVEsS0FBS0YsS0FBS0UsUUFBUSxDQUFDakUsTUFBTSxHQUFHLEdBQUc7NEJBQzdFOEIsUUFBUyxnQkFBZU4sV0FBV0ksWUFBWSxFQUFFLE1BQU0sT0FBTzs0QkFDOUQsTUFBTXFDLFdBQVdwRSxNQUFNRCxPQUFPLENBQUNtRSxLQUFLRSxRQUFRLElBQUlGLEtBQUtFLFFBQVEsR0FBRyxFQUFFOzRCQUNsRUEsU0FBU1osT0FBTyxDQUFDLENBQUNhLFNBQVNDO2dDQUN6QnJDLFFBQVEsTUFBdUJvQyxPQUFqQkMsVUFBVSxHQUFFLE9BQWEsT0FBUkQsU0FBUSxNQUFJMUMsV0FBV0ssYUFBYSxFQUFFLE9BQU8sT0FBTzs0QkFDckY7d0JBQ0YsT0FBTyxJQUFJa0MsS0FBS0csT0FBTyxFQUFFOzRCQUN2QnBDLFFBQVEsZ0JBQTZCLE9BQWJpQyxLQUFLRyxPQUFPLEVBQUMsTUFBSTFDLFdBQVdLLGFBQWEsRUFBRSxPQUFPLE9BQU87d0JBQ25GO3dCQUNBWixhQUFhO29CQUNmO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJSixnQkFBZ0JaLE9BQU8sSUFBSWYsV0FBV0MsUUFBUSxDQUFDYyxPQUFPLEVBQUU7Z0JBQzFENkMsV0FBVyxtQkFBbUI7b0JBQzVCLE1BQU1zQixpQkFBaUJsRixXQUFXQyxRQUFRLENBQUNjLE9BQU87b0JBQ2xELE1BQU1vRSxRQUFRRCxlQUFlRSxLQUFLLENBQUM7b0JBRW5DLHdDQUF3QztvQkFDeEMsSUFBSUQsTUFBTXJFLE1BQU0sR0FBRyxLQUFLcUUsS0FBSyxDQUFDLEVBQUUsQ0FBQ0UsUUFBUSxDQUFDLHNDQUFzQzt3QkFDOUUsMEVBQTBFO3dCQUMxRXZELElBQUl3QyxZQUFZLENBQUMsS0FBSyxLQUFLLEtBQUssVUFBVTs7d0JBQzFDeEMsSUFBSXFCLFdBQVcsQ0FBQ2IsV0FBV0ksWUFBWTt3QkFDdkNaLElBQUl1QixPQUFPLENBQUMsYUFBYTt3QkFFekIsTUFBTWtCLG1CQUFtQnpDLElBQUlHLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDcUIsS0FBSyxHQUFHbkIsU0FBUyxJQUFJO3dCQUNwRSxNQUFNb0MsbUJBQW1CMUMsSUFBSTJCLGVBQWUsQ0FBQzBCLEtBQUssQ0FBQyxFQUFFLEVBQUVaO3dCQUN2RCxNQUFNRSxvQkFBb0JELGlCQUFpQjFELE1BQU0sR0FBR3VCLGFBQWE7d0JBRWpFLDRCQUE0Qjt3QkFDNUJQLElBQUk0QyxJQUFJLENBQUN0QyxTQUFTLElBQUlMLFlBQVksR0FBR3dDLGtCQUFrQkUsbUJBQW1CO3dCQUUxRSx1QkFBdUI7d0JBQ3ZCLEtBQUssTUFBTWYsUUFBUWMsaUJBQWtCOzRCQUNuQzFDLElBQUk3QyxJQUFJLENBQUN5RSxNQUFNdEIsU0FBUyxJQUFJTDs0QkFDNUJBLGFBQWFNO3dCQUNmO3dCQUNBTixhQUFhLEVBQUUsa0NBQWtDOzt3QkFFakQsc0NBQXNDO3dCQUN0Q2EsUUFBUXVDLE1BQU1sQixLQUFLLENBQUMsR0FBR3FCLElBQUksQ0FBQyxTQUFTaEQsV0FBV0csWUFBWSxFQUFFLE9BQU8sT0FBTztvQkFDOUUsT0FBTzt3QkFDTCxvQ0FBb0M7d0JBQ3BDRyxRQUFRc0MsZ0JBQWdCNUMsV0FBV0csWUFBWSxFQUFFLE9BQU8sT0FBTztvQkFDakU7Z0JBQ0Y7WUFDRjtZQUVBLElBQUlkLGdCQUFnQlgsYUFBYSxJQUFJaEIsV0FBV0MsUUFBUSxDQUFDZSxhQUFhLEVBQUU7Z0JBQ3RFNEMsV0FBVyx5QkFBeUI7b0JBQ2xDLE1BQU0yQix5QkFBeUI1RSxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ2UsYUFBYSxJQUFJaEIsV0FBV0MsUUFBUSxDQUFDZSxhQUFhLEdBQUcsRUFBRTtvQkFDeEh1RSx1QkFBdUJwQixPQUFPLENBQUMsQ0FBQ0MsVUFBVUM7d0JBQ3hDLHVGQUF1Rjt3QkFDdkYsSUFBSUEsVUFBVSxHQUFHOzRCQUNmdkMsSUFBSXdDLFlBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxVQUFVOzs0QkFDMUN4QyxJQUFJcUIsV0FBVyxDQUFDYixXQUFXSSxZQUFZOzRCQUN2Q1osSUFBSXVCLE9BQU8sQ0FBQyxhQUFhOzRCQUV6QixNQUFNa0IsbUJBQW1CekMsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNxQixLQUFLLEdBQUduQixTQUFTLElBQUk7NEJBQ3BFLE1BQU1vQyxtQkFBbUIxQyxJQUFJMkIsZUFBZSxDQUFDVyxVQUFVRzs0QkFDdkQsTUFBTUUsb0JBQW9CRCxpQkFBaUIxRCxNQUFNLEdBQUd1QixhQUFhOzRCQUVqRSw0QkFBNEI7NEJBQzVCUCxJQUFJNEMsSUFBSSxDQUFDdEMsU0FBUyxJQUFJTCxZQUFZLEdBQUd3QyxrQkFBa0JFLG1CQUFtQjs0QkFFMUUsdUJBQXVCOzRCQUN2QixLQUFLLE1BQU1mLFFBQVFjLGlCQUFrQjtnQ0FDbkMxQyxJQUFJN0MsSUFBSSxDQUFDeUUsTUFBTXRCLFNBQVMsSUFBSUw7Z0NBQzVCQSxhQUFhTTs0QkFDZjs0QkFDQU4sYUFBYSxFQUFFLGtDQUFrQzs7d0JBQ25ELE9BQU87NEJBQ0wsdURBQXVEOzRCQUN2RGEsUUFBUSxHQUFhd0IsT0FBVkMsT0FBTSxNQUFhLE9BQVRELFdBQVk5QixXQUFXRyxZQUFZLEVBQUUsT0FBTyxPQUFPO3dCQUMxRTtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsSUFBSWQsZ0JBQWdCVixVQUFVLElBQUlqQixXQUFXQyxRQUFRLENBQUNnQixVQUFVLEVBQUU7Z0JBQ2hFMkMsV0FBVyx3QkFBd0I7b0JBQ2pDLE1BQU00QixzQkFBc0I3RSxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ2dCLFVBQVUsSUFBSWpCLFdBQVdDLFFBQVEsQ0FBQ2dCLFVBQVUsR0FBRyxFQUFFO29CQUMvR3VFLG9CQUFvQnJCLE9BQU8sQ0FBQyxDQUFDQyxVQUFVQzt3QkFDckMsd0ZBQXdGO3dCQUN4RixJQUFJQSxVQUFVLEdBQUc7NEJBQ2Z2QyxJQUFJd0MsWUFBWSxDQUFDLEtBQUssS0FBSyxLQUFLLFVBQVU7OzRCQUMxQ3hDLElBQUlxQixXQUFXLENBQUNiLFdBQVdJLFlBQVk7NEJBQ3ZDWixJQUFJdUIsT0FBTyxDQUFDLGFBQWE7NEJBRXpCLE1BQU1rQixtQkFBbUJ6QyxJQUFJRyxRQUFRLENBQUNDLFFBQVEsQ0FBQ3FCLEtBQUssR0FBR25CLFNBQVMsSUFBSTs0QkFDcEUsTUFBTW9DLG1CQUFtQjFDLElBQUkyQixlQUFlLENBQUNXLFVBQVVHOzRCQUN2RCxNQUFNRSxvQkFBb0JELGlCQUFpQjFELE1BQU0sR0FBR3VCLGFBQWE7NEJBRWpFLDRCQUE0Qjs0QkFDNUJQLElBQUk0QyxJQUFJLENBQUN0QyxTQUFTLElBQUlMLFlBQVksR0FBR3dDLGtCQUFrQkUsbUJBQW1COzRCQUUxRSx1QkFBdUI7NEJBQ3ZCLEtBQUssTUFBTWYsUUFBUWMsaUJBQWtCO2dDQUNuQzFDLElBQUk3QyxJQUFJLENBQUN5RSxNQUFNdEIsU0FBUyxJQUFJTDtnQ0FDNUJBLGFBQWFNOzRCQUNmOzRCQUNBTixhQUFhLEVBQUUsa0NBQWtDOzt3QkFDbkQsT0FBTzs0QkFDTCx1REFBdUQ7NEJBQ3ZEYSxRQUFRLEdBQWF3QixPQUFWQyxPQUFNLE1BQWEsT0FBVEQsV0FBWTlCLFdBQVdHLFlBQVksRUFBRSxPQUFPLE9BQU87d0JBQzFFO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJZCxnQkFBZ0I4RCxnQkFBZ0IsSUFBSXpGLFdBQVdDLFFBQVEsQ0FBQ3dGLGdCQUFnQixFQUFFO2dCQUM1RTdCLFdBQVcscUJBQXFCO29CQUM5QixNQUFNOEIsa0JBQWtCMUYsV0FBV0MsUUFBUSxDQUFDd0YsZ0JBQWdCO29CQUU1RCx3RkFBd0Y7b0JBQ3hGM0QsSUFBSXdDLFlBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxVQUFVOztvQkFDMUN4QyxJQUFJcUIsV0FBVyxDQUFDYixXQUFXSSxZQUFZO29CQUN2Q1osSUFBSXVCLE9BQU8sQ0FBQyxhQUFhO29CQUV6QixNQUFNa0IsbUJBQW1CekMsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNxQixLQUFLLEdBQUduQixTQUFTLElBQUk7b0JBQ3BFLE1BQU1vQyxtQkFBbUIxQyxJQUFJMkIsZUFBZSxDQUFDaUMsZ0JBQWdCQyxXQUFXLEVBQUVwQjtvQkFDMUUsTUFBTUUsb0JBQW9CRCxpQkFBaUIxRCxNQUFNLEdBQUd1QixhQUFhO29CQUVqRSw0QkFBNEI7b0JBQzVCUCxJQUFJNEMsSUFBSSxDQUFDdEMsU0FBUyxJQUFJTCxZQUFZLEdBQUd3QyxrQkFBa0JFLG1CQUFtQjtvQkFFMUUsdUJBQXVCO29CQUN2QixLQUFLLE1BQU1mLFFBQVFjLGlCQUFrQjt3QkFDbkMxQyxJQUFJN0MsSUFBSSxDQUFDeUUsTUFBTXRCLFNBQVMsSUFBSUw7d0JBQzVCQSxhQUFhTTtvQkFDZjtvQkFDQU4sYUFBYSxFQUFFLHlEQUF5RDs7b0JBRXhFLHFDQUFxQztvQkFDckMsTUFBTTZELG1CQUFtQjdHLHlFQUEwQkEsQ0FDakQyRyxnQkFBZ0JHLFFBQVEsRUFDeEI3RixXQUFXOEYsRUFBRSxFQUNiO29CQUdGLHNEQUFzRDtvQkFDdEQsTUFBTUMsd0JBQXdCcEYsTUFBTUQsT0FBTyxDQUFDa0Ysb0JBQW9CQSxtQkFBbUIsRUFBRTtvQkFDckZHLHNCQUFzQjVCLE9BQU8sQ0FBQyxDQUFDVCxNQUFNVzt3QkFDbkMsb0RBQW9EO3dCQUNwRCxJQUFJQSxRQUFRLEdBQUc7NEJBQ2J0QyxhQUFhO3dCQUNmO3dCQUVBLG9DQUFvQzt3QkFDcENELElBQUlxQixXQUFXLENBQUNiLFdBQVdHLFlBQVk7d0JBQ3ZDWCxJQUFJdUIsT0FBTyxDQUFDLGFBQWE7d0JBQ3pCLE1BQU0yQyxZQUFZbEUsSUFBSW1FLFlBQVksQ0FBQyxHQUFrQixPQUFmdkMsS0FBS3dDLFNBQVMsRUFBQzt3QkFDckRwRSxJQUFJN0MsSUFBSSxDQUFDLEdBQWtCLE9BQWZ5RSxLQUFLd0MsU0FBUyxFQUFDLE9BQUs5RCxTQUFTLElBQUlMO3dCQUU3Q0QsSUFBSXVCLE9BQU8sQ0FBQyxhQUFhO3dCQUN6QixNQUFNQyxXQUFXeEIsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNxQixLQUFLLEdBQUduQixTQUFTLElBQUksS0FBSzREO3dCQUNqRSxNQUFNRyxXQUFXckUsSUFBSTJCLGVBQWUsQ0FBQ0MsS0FBS0EsSUFBSSxFQUFFSjt3QkFDaER4QixJQUFJN0MsSUFBSSxDQUFDa0gsUUFBUSxDQUFDLEVBQUUsRUFBRS9ELFNBQVMsS0FBSzRELFdBQVdqRTt3QkFDL0NBLGFBQWFNO3dCQUViLHVCQUF1Qjt3QkFDdkIsSUFBSyxJQUFJK0QsSUFBSSxHQUFHQSxJQUFJRCxTQUFTckYsTUFBTSxFQUFFc0YsSUFBSzs0QkFDeEMsSUFBSXJFLFlBQVlDLGFBQWEsSUFBSTtnQ0FDL0JGLElBQUk2QixPQUFPO2dDQUNYNUIsWUFBWTs0QkFDZDs0QkFDQUQsSUFBSTdDLElBQUksQ0FBQ2tILFFBQVEsQ0FBQ0MsRUFBRSxFQUFFaEUsU0FBUyxLQUFLNEQsV0FBV2pFOzRCQUMvQ0EsYUFBYU07d0JBQ2Y7b0JBQ0Y7b0JBRUEsSUFBSXFELGdCQUFnQlcsaUJBQWlCLElBQUlYLGdCQUFnQlcsaUJBQWlCLENBQUN2RixNQUFNLEdBQUcsR0FBRzt3QkFDckZpQixhQUFhO3dCQUNiYSxRQUFRLHdCQUF3Qk4sV0FBV0ksWUFBWSxFQUFFLE1BQU0sT0FBTzt3QkFDdEUsTUFBTTJELG9CQUFvQjFGLE1BQU1ELE9BQU8sQ0FBQ2dGLGdCQUFnQlcsaUJBQWlCLElBQUlYLGdCQUFnQlcsaUJBQWlCLEdBQUcsRUFBRTt3QkFDbkhBLGtCQUFrQmxDLE9BQU8sQ0FBQyxDQUFDQyxVQUFVQzs0QkFDbkN6QixRQUFRLEdBQWlCd0IsT0FBZEMsUUFBUSxHQUFFLE1BQWEsT0FBVEQsV0FBWTlCLFdBQVdHLFlBQVksRUFBRSxPQUFPLE9BQU87d0JBQzlFO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJZCxnQkFBZ0IyRSxlQUFlLElBQUl0RyxXQUFXQyxRQUFRLENBQUNxRyxlQUFlLEVBQUU7Z0JBQzFFMUMsV0FBVyw0QkFBNEI7b0JBQ3JDLE1BQU04QixrQkFBa0IxRixXQUFXQyxRQUFRLENBQUNxRyxlQUFlO29CQUUzRCx1RkFBdUY7b0JBQ3ZGeEUsSUFBSXdDLFlBQVksQ0FBQyxLQUFLLEtBQUssS0FBSyxVQUFVOztvQkFDMUN4QyxJQUFJcUIsV0FBVyxDQUFDYixXQUFXSSxZQUFZO29CQUN2Q1osSUFBSXVCLE9BQU8sQ0FBQyxhQUFhO29CQUV6QixNQUFNa0IsbUJBQW1CekMsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNxQixLQUFLLEdBQUduQixTQUFTLElBQUk7b0JBQ3BFLE1BQU1vQyxtQkFBbUIxQyxJQUFJMkIsZUFBZSxDQUFDaUMsZ0JBQWdCQyxXQUFXLEVBQUVwQjtvQkFDMUUsTUFBTUUsb0JBQW9CRCxpQkFBaUIxRCxNQUFNLEdBQUd1QixhQUFhO29CQUVqRSw0QkFBNEI7b0JBQzVCUCxJQUFJNEMsSUFBSSxDQUFDdEMsU0FBUyxJQUFJTCxZQUFZLEdBQUd3QyxrQkFBa0JFLG1CQUFtQjtvQkFFMUUsdUJBQXVCO29CQUN2QixLQUFLLE1BQU1mLFFBQVFjLGlCQUFrQjt3QkFDbkMxQyxJQUFJN0MsSUFBSSxDQUFDeUUsTUFBTXRCLFNBQVMsSUFBSUw7d0JBQzVCQSxhQUFhTTtvQkFDZjtvQkFDQU4sYUFBYSxFQUFFLHlEQUF5RDs7b0JBRXhFLHFDQUFxQztvQkFDckMsTUFBTTZELG1CQUFtQjdHLHlFQUEwQkEsQ0FDakQyRyxnQkFBZ0JHLFFBQVEsRUFDeEI3RixXQUFXOEYsRUFBRSxFQUNiO29CQUdGLHNEQUFzRDtvQkFDdEQsTUFBTVMsdUJBQXVCNUYsTUFBTUQsT0FBTyxDQUFDa0Ysb0JBQW9CQSxtQkFBbUIsRUFBRTtvQkFDcEZXLHFCQUFxQnBDLE9BQU8sQ0FBQyxDQUFDVCxNQUFNVzt3QkFDbEMsb0RBQW9EO3dCQUNwRCxJQUFJQSxRQUFRLEdBQUc7NEJBQ2J0QyxhQUFhO3dCQUNmO3dCQUVBLG9DQUFvQzt3QkFDcENELElBQUlxQixXQUFXLENBQUNiLFdBQVdHLFlBQVk7d0JBQ3ZDWCxJQUFJdUIsT0FBTyxDQUFDLGFBQWE7d0JBQ3pCLE1BQU0yQyxZQUFZbEUsSUFBSW1FLFlBQVksQ0FBQyxHQUFrQixPQUFmdkMsS0FBS3dDLFNBQVMsRUFBQzt3QkFDckRwRSxJQUFJN0MsSUFBSSxDQUFDLEdBQWtCLE9BQWZ5RSxLQUFLd0MsU0FBUyxFQUFDLE9BQUs5RCxTQUFTLElBQUlMO3dCQUU3Q0QsSUFBSXVCLE9BQU8sQ0FBQyxhQUFhO3dCQUN6QixNQUFNQyxXQUFXeEIsSUFBSUcsUUFBUSxDQUFDQyxRQUFRLENBQUNxQixLQUFLLEdBQUduQixTQUFTLElBQUksS0FBSzREO3dCQUNqRSxNQUFNRyxXQUFXckUsSUFBSTJCLGVBQWUsQ0FBQ0MsS0FBS0EsSUFBSSxFQUFFSjt3QkFDaER4QixJQUFJN0MsSUFBSSxDQUFDa0gsUUFBUSxDQUFDLEVBQUUsRUFBRS9ELFNBQVMsS0FBSzRELFdBQVdqRTt3QkFDL0NBLGFBQWFNO3dCQUViLHVCQUF1Qjt3QkFDdkIsSUFBSyxJQUFJK0QsSUFBSSxHQUFHQSxJQUFJRCxTQUFTckYsTUFBTSxFQUFFc0YsSUFBSzs0QkFDeEMsSUFBSXJFLFlBQVlDLGFBQWEsSUFBSTtnQ0FDL0JGLElBQUk2QixPQUFPO2dDQUNYNUIsWUFBWTs0QkFDZDs0QkFDQUQsSUFBSTdDLElBQUksQ0FBQ2tILFFBQVEsQ0FBQ0MsRUFBRSxFQUFFaEUsU0FBUyxLQUFLNEQsV0FBV2pFOzRCQUMvQ0EsYUFBYU07d0JBQ2Y7b0JBQ0Y7b0JBRUEsSUFBSXFELGdCQUFnQmMsT0FBTyxJQUFJZCxnQkFBZ0JjLE9BQU8sQ0FBQzFGLE1BQU0sR0FBRyxHQUFHO3dCQUNqRWlCLGFBQWE7d0JBQ2JhLFFBQVEsZUFBZU4sV0FBV0ksWUFBWSxFQUFFLE1BQU0sT0FBTzt3QkFDN0RFLFFBQVE4QyxnQkFBZ0JjLE9BQU8sQ0FBQ2xCLElBQUksQ0FBQyxPQUFPaEQsV0FBV0ssYUFBYSxFQUFFLE9BQU8sT0FBTztvQkFDdEY7Z0JBQ0Y7WUFDRjtZQUVBLElBQUloQixnQkFBZ0JULE9BQU8sSUFBSWxCLFdBQVdDLFFBQVEsQ0FBQ2lCLE9BQU8sRUFBRTtnQkFDMUQwQyxXQUFXLGlCQUFpQjtvQkFDMUJoQixRQUFRLFVBQTRDLE9BQWxDNUMsV0FBV0MsUUFBUSxDQUFDaUIsT0FBTyxDQUFDRSxLQUFLLEdBQUlrQixXQUFXRyxZQUFZLEVBQUUsTUFBTSxPQUFPO29CQUM3RlYsYUFBYTtvQkFDYmEsUUFBUSxhQUFhTixXQUFXSSxZQUFZLEVBQUUsTUFBTSxPQUFPO29CQUMzRCxNQUFNK0Qsa0JBQWtCOUYsTUFBTUQsT0FBTyxDQUFDVixXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUM2RCxRQUFRLElBQUkvRSxXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUM2RCxRQUFRLEdBQUcsRUFBRTtvQkFDdkgwQixnQkFBZ0J0QyxPQUFPLENBQUMsQ0FBQ2EsU0FBU1g7d0JBQ2hDekIsUUFBUSxLQUFhLE9BQVJvQyxVQUFXMUMsV0FBV0ssYUFBYSxFQUFFLE9BQU8sT0FBTztvQkFDbEU7b0JBQ0FaLGFBQWE7b0JBQ2JhLFFBQVEsc0JBQXNCTixXQUFXSSxZQUFZLEVBQUUsTUFBTSxPQUFPO29CQUNwRSxNQUFNZ0UsbUJBQW1CL0YsTUFBTUQsT0FBTyxDQUFDVixXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUN5RixRQUFRLElBQUkzRyxXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUN5RixRQUFRLEdBQUcsRUFBRTtvQkFDeEhELGlCQUFpQnZDLE9BQU8sQ0FBQyxDQUFDd0MsVUFBVXRDO3dCQUNsQ3pCLFFBQVEsR0FBaUIrRCxPQUFkdEMsUUFBUSxHQUFFLE1BQWEsT0FBVHNDLFdBQVlyRSxXQUFXRyxZQUFZLEVBQUUsT0FBTyxPQUFPO29CQUM5RTtnQkFDRjtZQUNGO1lBRUEsSUFBSWQsZ0JBQWdCTixhQUFhLElBQUlyQixXQUFXQyxRQUFRLENBQUNvQixhQUFhLEVBQUU7Z0JBQ3RFdUMsV0FBVywwQkFBMEI7b0JBQ25DLE1BQU1nRCxjQUFjNUcsV0FBV0MsUUFBUSxDQUFDb0IsYUFBYTtvQkFFckQsb0VBQW9FO29CQUNwRSxJQUFJdUYsWUFBWUMsS0FBSyxJQUFJbEcsTUFBTUQsT0FBTyxDQUFDa0csWUFBWUMsS0FBSyxLQUFLRCxZQUFZQyxLQUFLLENBQUMvRixNQUFNLEdBQUcsR0FBRzt3QkFDekYsaUNBQWlDO3dCQUNqQzhGLFlBQVlDLEtBQUssQ0FBQzFDLE9BQU8sQ0FBQyxDQUFDMkMsVUFBVXpDOzRCQUNuQyxJQUFJQSxRQUFRLEdBQUd0QyxhQUFhLEVBQUUsd0JBQXdCOzs0QkFFdERhLFFBQVEsU0FBZ0MsT0FBdkJrRSxTQUFTdkYsSUFBSSxJQUFJLFFBQVNlLFdBQVdHLFlBQVksRUFBRSxNQUFNLE9BQU87NEJBQ2pGRyxRQUFRLFFBQThCLE9BQXRCa0UsU0FBU0MsR0FBRyxJQUFJLFFBQVN6RSxXQUFXSyxhQUFhLEVBQUUsT0FBTyxPQUFPOzRCQUVqRixJQUFJbUUsU0FBU0UsZ0JBQWdCLEVBQUU7Z0NBQzdCcEUsUUFBUSxjQUF3QyxPQUExQmtFLFNBQVNFLGdCQUFnQixFQUFDLE1BQUkxRSxXQUFXRyxZQUFZLEVBQUUsT0FBTyxPQUFPOzRCQUM3Rjs0QkFFQSxJQUFJcUUsU0FBU0csSUFBSSxJQUFJSCxTQUFTRyxJQUFJLENBQUNuRyxNQUFNLEdBQUcsR0FBRztnQ0FDN0M4QixRQUFTLFNBQVFOLFdBQVdJLFlBQVksRUFBRSxNQUFNLE9BQU87Z0NBQ3ZEb0UsU0FBU0csSUFBSSxDQUFDOUMsT0FBTyxDQUFDK0MsQ0FBQUE7b0NBQ3BCdEUsUUFBUSxLQUFTLE9BQUpzRSxNQUFPNUUsV0FBV0ssYUFBYSxFQUFFLE9BQU8sT0FBTztnQ0FDOUQ7NEJBQ0Y7d0JBQ0Y7b0JBQ0YsT0FBTyxJQUFJaUUsWUFBWXJGLElBQUksRUFBRTt3QkFDM0IsOEJBQThCO3dCQUM5QnFCLFFBQVEsU0FBbUMsT0FBMUJnRSxZQUFZckYsSUFBSSxJQUFJLFFBQVNlLFdBQVdHLFlBQVksRUFBRSxNQUFNLE9BQU87d0JBQ3BGRyxRQUFRLFFBQWlDLE9BQXpCZ0UsWUFBWUcsR0FBRyxJQUFJLFFBQVN6RSxXQUFXSyxhQUFhLEVBQUUsT0FBTyxPQUFPO3dCQUNwRixJQUFJaUUsWUFBWU8sUUFBUSxFQUFFOzRCQUN4QnZFLFFBQVEsY0FBbUMsT0FBckJnRSxZQUFZTyxRQUFRLEVBQUMsTUFBSTdFLFdBQVdHLFlBQVksRUFBRSxPQUFPLE9BQU87d0JBQ3hGO29CQUNGLE9BQU87d0JBQ0xHLFFBQVEsbUNBQW1DTixXQUFXRyxZQUFZLEVBQUUsT0FBTyxPQUFPO29CQUNwRjtnQkFDRjtZQUNGO1lBRUEsSUFBSWQsZ0JBQWdCSCxNQUFNLElBQUl4QixXQUFXQyxRQUFRLENBQUN1QixNQUFNLEVBQUU7Z0JBQ3hEb0MsV0FBVyxrQkFBa0I7b0JBQzNCLE1BQU13RCxrQkFBa0J6RyxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ3VCLE1BQU0sSUFBSXhCLFdBQVdDLFFBQVEsQ0FBQ3VCLE1BQU0sR0FBRyxFQUFFO29CQUNuRzRGLGdCQUFnQmpELE9BQU8sQ0FBQyxDQUFDQyxVQUFVQzt3QkFDakMsa0VBQWtFO3dCQUNsRSxJQUFJQSxVQUFVLEdBQUc7NEJBQ2Z2QyxJQUFJd0MsWUFBWSxDQUFDLEtBQUssS0FBSyxLQUFLLFVBQVU7OzRCQUMxQ3hDLElBQUlxQixXQUFXLENBQUNiLFdBQVdJLFlBQVk7NEJBQ3ZDWixJQUFJdUIsT0FBTyxDQUFDLGFBQWE7NEJBRXpCLE1BQU1rQixtQkFBbUJ6QyxJQUFJRyxRQUFRLENBQUNDLFFBQVEsQ0FBQ3FCLEtBQUssR0FBR25CLFNBQVMsSUFBSTs0QkFDcEUsTUFBTW9DLG1CQUFtQjFDLElBQUkyQixlQUFlLENBQUNXLFVBQVVHOzRCQUN2RCxNQUFNRSxvQkFBb0JELGlCQUFpQjFELE1BQU0sR0FBR3VCLGFBQWE7NEJBRWpFLDRCQUE0Qjs0QkFDNUJQLElBQUk0QyxJQUFJLENBQUN0QyxTQUFTLElBQUlMLFlBQVksR0FBR3dDLGtCQUFrQkUsbUJBQW1COzRCQUUxRSx1QkFBdUI7NEJBQ3ZCLEtBQUssTUFBTWYsUUFBUWMsaUJBQWtCO2dDQUNuQzFDLElBQUk3QyxJQUFJLENBQUN5RSxNQUFNdEIsU0FBUyxJQUFJTDtnQ0FDNUJBLGFBQWFNOzRCQUNmOzRCQUNBTixhQUFhLEVBQUUsa0NBQWtDOzt3QkFDbkQsT0FBTzs0QkFDTCx1REFBdUQ7NEJBQ3ZEYSxRQUFRLEdBQWF3QixPQUFWQyxPQUFNLE1BQWEsT0FBVEQsV0FBWTlCLFdBQVdHLFlBQVksRUFBRSxPQUFPLE9BQU87d0JBQzFFO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxTQUFTO1lBQ1QsTUFBTTRFLFlBQVksSUFBYXBGLFFBQVEsQ0FBQ3FGLGdCQUFnQjtZQUN4RCxJQUFLLElBQUlsQixJQUFJLEdBQUdBLEtBQUtpQixXQUFXakIsSUFBSztnQkFDbkN0RSxJQUFJeUYsT0FBTyxDQUFDbkI7Z0JBQ1p0RSxJQUFJcUIsV0FBVyxDQUFDO2dCQUNoQnJCLElBQUl1QixPQUFPLENBQUMsYUFBYTtnQkFDekJ2QixJQUFJN0MsSUFBSSxDQUFDLG1DQUEyQ29JLE9BQVJqQixHQUFFLFFBQWdCLE9BQVZpQixZQUFhakYsUUFBUUosYUFBYTtZQUN4RjtZQUVBLG1CQUFtQjtZQUNuQixJQUFJO2dCQUNGLE1BQU13RixXQUFXLEdBQW1DeEgsT0FBaENBLFdBQVdLLFVBQVUsRUFBQyxZQUFxQ1gsT0FBM0JNLFdBQVdNLFlBQVksRUFBQyxLQUFjLE9BQVhaLEtBQUsrSCxHQUFHLElBQUc7Z0JBQzFGbkksUUFBUVksR0FBRyxDQUFDLDZCQUE2QnNIO2dCQUN6QzFGLElBQUk0RixJQUFJLENBQUNGO2dCQUNUbEksUUFBUVksR0FBRyxDQUFDO1lBQ2QsRUFBRSxPQUFPeUgsV0FBVztnQkFDbEJySSxRQUFRRCxLQUFLLENBQUMscUJBQXFCc0k7Z0JBQ25DLE1BQU0sSUFBSXhILE1BQU0sdUJBQTZGLE9BQXRFd0gscUJBQXFCeEgsUUFBUXdILFVBQVVDLE9BQU8sR0FBRztZQUMxRjtRQUNGLEVBQUUsT0FBT3ZJLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLHFCQUFxQkE7WUFDbkNDLFFBQVFELEtBQUssQ0FBQyxnQkFBZ0JBLGlCQUFpQmMsUUFBUWQsTUFBTXdJLEtBQUssR0FBRztZQUNyRXZJLFFBQVFELEtBQUssQ0FBQyxrQkFBa0I7Z0JBQzlCeUksTUFBTXpJLGlCQUFpQmMsUUFBUWQsTUFBTXlJLElBQUksR0FBRztnQkFDNUNGLFNBQVN2SSxpQkFBaUJjLFFBQVFkLE1BQU11SSxPQUFPLEdBQUc7Z0JBQ2xERyxnQkFBZ0IvSCxhQUFhNEIsT0FBT0MsSUFBSSxDQUFDN0IsY0FBYztnQkFDdkRnSSxjQUFjaEksQ0FBQUEsdUJBQUFBLGlDQUFBQSxXQUFZQyxRQUFRLElBQUcyQixPQUFPQyxJQUFJLENBQUM3QixXQUFXQyxRQUFRLElBQUk7Z0JBQ3hFZ0kscUJBQXFCdEcsa0JBQWtCQyxPQUFPQyxJQUFJLENBQUNGLG1CQUFtQjtZQUN4RTtZQUNBLE1BQU0sSUFBSXhCLE1BQU0sc0JBQStFLE9BQXpEZCxpQkFBaUJjLFFBQVFkLE1BQU11SSxPQUFPLEdBQUc7UUFDakY7SUFDRjtJQUVBLE1BQU1NLGFBQWFsSSxVQUFzQixFQUFFMkIsZUFBd0MsRUFBaUI7UUFDbEcsSUFBSTtZQUNGckMsUUFBUVksR0FBRyxDQUFDLG1DQUFtQztnQkFBRUY7Z0JBQVkyQjtZQUFnQjtZQUM3RSxJQUFJLENBQUM1QixrQkFBa0IsQ0FBQ0M7WUFFeEIsNkNBQTZDO1lBQzdDLElBQUksQ0FBQzJCLG1CQUFtQkMsT0FBT0MsSUFBSSxDQUFDRixpQkFBaUJiLE1BQU0sS0FBSyxHQUFHO2dCQUNqRSxNQUFNLElBQUlYLE1BQU07WUFDbEI7WUFFQSxNQUFNZ0ksV0FBa0IsRUFBRTtZQUUxQiwyRUFBMkU7WUFDM0UsdUVBQXVFO1lBQ3ZFLE1BQU1DLGtCQUFrQjtnQkFDdEI3RixjQUFjO2dCQUNkQyxnQkFBZ0I7Z0JBQ2hCQyxjQUFjO2dCQUNkQyxjQUFjO2dCQUNkQyxlQUFlLEdBQVEsMkJBQTJCO1lBQ3BEO1lBRUEscUJBQXFCO1lBQ3JCd0YsU0FBU0UsSUFBSSxDQUNYLElBQUkzSiwyQ0FBU0EsQ0FBQztnQkFDWnlKLFVBQVU7b0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO3dCQUNWTSxNQUFNRyxrQkFBa0JZLFdBQVdJLFdBQVc7d0JBQzlDa0ksTUFBTTt3QkFDTkMsTUFBTUgsZ0JBQWdCN0YsWUFBWTtvQkFDcEM7aUJBQ0Q7Z0JBQ0RpRyxTQUFTNUosOENBQVlBLENBQUM2SixLQUFLO2dCQUMzQkMsV0FBVzdKLCtDQUFhQSxDQUFDOEosTUFBTTtnQkFDL0JDLFNBQVM7b0JBQUVDLE9BQU87Z0JBQUk7WUFDeEI7WUFHRlYsU0FBU0UsSUFBSSxDQUNYLElBQUkzSiwyQ0FBU0EsQ0FBQztnQkFDWnlKLFVBQVU7b0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO3dCQUNWTSxNQUFNLG9CQUEyRyxPQUF2RmUsV0FBV08sY0FBYyxDQUFDd0QsTUFBTSxDQUFDLEdBQUdDLFdBQVcsS0FBS2hFLFdBQVdPLGNBQWMsQ0FBQzBELEtBQUssQ0FBQzt3QkFDOUdzRSxNQUFNSCxnQkFBZ0J6RixhQUFhO29CQUNyQztpQkFDRDtnQkFDRGlHLFNBQVM7b0JBQUVDLE9BQU87Z0JBQUk7WUFDeEI7WUFHRlYsU0FBU0UsSUFBSSxDQUNYLElBQUkzSiwyQ0FBU0EsQ0FBQztnQkFDWnlKLFVBQVU7b0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO3dCQUNWTSxNQUFNLGlCQUFtQyxPQUFsQixJQUFJLENBQUNRLFVBQVU7d0JBQ3RDOEksTUFBTUgsZ0JBQWdCekYsYUFBYTtvQkFDckM7aUJBQ0Q7Z0JBQ0RpRyxTQUFTO29CQUFFQyxPQUFPO2dCQUFJO1lBQ3hCO1lBR0YsaUNBQWlDO1lBQ2pDLE1BQU1qRixhQUFhLENBQUNDLE9BQWVDO2dCQUNqQ3FFLFNBQVNFLElBQUksQ0FDWCxJQUFJM0osMkNBQVNBLENBQUM7b0JBQ1p5SixVQUFVO3dCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQzs0QkFDVk0sTUFBTTRFOzRCQUNOeUUsTUFBTTs0QkFDTkMsTUFBTUgsZ0JBQWdCNUYsY0FBYzs0QkFDcENzRyxXQUFXO2dDQUFFckksTUFBTTNCLCtDQUFhQSxDQUFDaUssTUFBTTs0QkFBQzt3QkFDMUM7cUJBQ0Q7b0JBQ0RQLFNBQVM1Siw4Q0FBWUEsQ0FBQ29LLFNBQVM7b0JBQy9CSixTQUFTO3dCQUFFSyxRQUFRO3dCQUFLSixPQUFPO29CQUFJO2dCQUNyQztnQkFFRlYsU0FBU0UsSUFBSSxJQUFJdkU7WUFDbkI7WUFFQSxzQ0FBc0M7WUFDdEMsSUFBSW5DLGdCQUFnQm5CLE1BQU0sSUFBSVIsV0FBV0MsUUFBUSxDQUFDTyxNQUFNLEVBQUU7Z0JBQ3hELE1BQU0wRCxrQkFBa0J2RCxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ08sTUFBTSxJQUFJUixXQUFXQyxRQUFRLENBQUNPLE1BQU0sR0FBRyxFQUFFO2dCQUNuRyxNQUFNMEksZ0JBQWdCaEYsZ0JBQWdCaUYsR0FBRyxDQUFDLENBQUMvRSxVQUFVQztvQkFDbkQsNERBQTREO29CQUM1RCxJQUFJQSxVQUFVLEdBQUc7d0JBQ2YsT0FBTyxJQUFJM0YsMkNBQVNBLENBQUM7NEJBQ25CeUosVUFBVTtnQ0FDUixJQUFJeEoseUNBQU9BLENBQUM7b0NBQ1ZNLE1BQU1HLGtCQUFrQmdGO29DQUN4Qm1FLE1BQU1ILGdCQUFnQjFGLFlBQVk7b0NBQ2xDMEcsU0FBUztnQ0FDWDs2QkFDRDs0QkFDRFIsU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTs0QkFDdEJRLFNBQVM7Z0NBQ1BDLE1BQU07NEJBQ1I7NEJBQ0FDLFFBQVE7Z0NBQ05DLE1BQU07b0NBQ0pDLE9BQU87b0NBQ1BsQixNQUFNO29DQUNObUIsT0FBTztnQ0FDVDs0QkFDRjt3QkFDRjtvQkFDRixPQUFPO3dCQUNMLHVEQUF1RDt3QkFDdkQsT0FBTyxJQUFJaEwsMkNBQVNBLENBQUM7NEJBQ25CeUosVUFBVTtnQ0FDUixJQUFJeEoseUNBQU9BLENBQUM7b0NBQ1ZNLE1BQU1HLGtCQUFrQixHQUFhZ0YsT0FBVkMsT0FBTSxNQUFhLE9BQVREO29DQUNyQ21FLE1BQU1ILGdCQUFnQjNGLFlBQVk7Z0NBQ3BDOzZCQUNEOzRCQUNEbUcsU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTt3QkFDeEI7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FqRixXQUFXLHFCQUFxQnNGO1lBQ2xDO1lBRUEsSUFBSXZILGdCQUFnQmQsVUFBVSxJQUFJYixXQUFXQyxRQUFRLENBQUNZLFVBQVUsRUFBRTtnQkFDaEUsTUFBTThJLGVBQXNCLEVBQUU7Z0JBQzlCLE1BQU1oRixrQkFBa0JoRSxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ1ksVUFBVSxJQUFJYixXQUFXQyxRQUFRLENBQUNZLFVBQVUsR0FBRyxFQUFFO2dCQUMzRzhELGdCQUFnQlIsT0FBTyxDQUFDLENBQUNVLE1BQU1SO29CQUM3QixxQ0FBcUM7b0JBQ3JDLElBQUlBLFVBQVUsS0FBS1EsS0FBS3RELElBQUksS0FBSyxlQUFlO3dCQUM5Q29JLGFBQWF0QixJQUFJLENBQ2YsSUFBSTNKLDJDQUFTQSxDQUFDOzRCQUNaeUosVUFBVTtnQ0FDUixJQUFJeEoseUNBQU9BLENBQUM7b0NBQ1ZNLE1BQU1HLGtCQUFrQnlGLEtBQUtDLE9BQU87b0NBQ3BDeUQsTUFBTUgsZ0JBQWdCMUYsWUFBWTtvQ0FDbEMwRyxTQUFTO2dDQUNYOzZCQUNEOzRCQUNEUixTQUFTO2dDQUFFQyxPQUFPOzRCQUFJOzRCQUN0QlEsU0FBUztnQ0FDUEMsTUFBTTs0QkFDUjs0QkFDQUMsUUFBUTtnQ0FDTkMsTUFBTTtvQ0FDSkMsT0FBTztvQ0FDUGxCLE1BQU07b0NBQ05tQixPQUFPO2dDQUNUOzRCQUNGO3dCQUNGO3dCQUVGO29CQUNGO29CQUVBQyxhQUFhdEIsSUFBSSxDQUNmLElBQUkzSiwyQ0FBU0EsQ0FBQzt3QkFDWnlKLFVBQVU7NEJBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO2dDQUNWTSxNQUFNLEdBQWlCRyxPQUFkaUYsUUFBUSxHQUFFLE1BQWlDLE9BQTdCakYsa0JBQWtCeUYsS0FBS3RELElBQUk7Z0NBQ2xEK0csTUFBTTtnQ0FDTkMsTUFBTUgsZ0JBQWdCM0YsWUFBWTs0QkFDcEM7eUJBQ0Q7d0JBQ0RtRyxTQUFTOzRCQUFFQyxPQUFPO3dCQUFJO29CQUN4QjtvQkFFRmMsYUFBYXRCLElBQUksQ0FDZixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTSxlQUErQyxPQUFoQ0csa0JBQWtCeUYsS0FBS0MsT0FBTztnQ0FDbkR5RCxNQUFNSCxnQkFBZ0IzRixZQUFZOzRCQUNwQzt5QkFDRDt3QkFDRG1HLFNBQVM7NEJBQUVDLE9BQU87d0JBQUk7b0JBQ3hCO29CQUdGLG1FQUFtRTtvQkFDbkUsSUFBSWhFLEtBQUtFLFFBQVEsSUFBSXBFLE1BQU1ELE9BQU8sQ0FBQ21FLEtBQUtFLFFBQVEsS0FBS0YsS0FBS0UsUUFBUSxDQUFDakUsTUFBTSxHQUFHLEdBQUc7d0JBQzdFNkksYUFBYXRCLElBQUksQ0FDZixJQUFJM0osMkNBQVNBLENBQUM7NEJBQ1p5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTztvQ0FDUHNKLE1BQU1ILGdCQUFnQjFGLFlBQVk7b0NBQ2xDNEYsTUFBTTtnQ0FDUjs2QkFDRDs0QkFDRE0sU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTt3QkFDeEI7d0JBRUYseUNBQXlDO3dCQUN6QyxNQUFNOUQsV0FBV3BFLE1BQU1ELE9BQU8sQ0FBQ21FLEtBQUtFLFFBQVEsSUFBSUYsS0FBS0UsUUFBUSxHQUFHLEVBQUU7d0JBQ2xFQSxTQUFTWixPQUFPLENBQUMsQ0FBQ2EsU0FBU0M7NEJBQ3pCMEUsYUFBYXRCLElBQUksQ0FDZixJQUFJM0osMkNBQVNBLENBQUM7Z0NBQ1p5SixVQUFVO29DQUNSLElBQUl4Six5Q0FBT0EsQ0FBQzt3Q0FDVk0sTUFBTSxTQUEwQkcsT0FBakI2RixVQUFVLEdBQUUsT0FBZ0MsT0FBM0I3RixrQkFBa0I0RixVQUFTO3dDQUMzRHVELE1BQU1ILGdCQUFnQnpGLGFBQWE7d0NBQ25DeUcsU0FBUztvQ0FDWDtpQ0FDRDtnQ0FDRFIsU0FBUztvQ0FBRUMsT0FBTztnQ0FBSTs0QkFDeEI7d0JBRUo7d0JBQ0FjLGFBQWF0QixJQUFJLENBQ2YsSUFBSTNKLDJDQUFTQSxDQUFDOzRCQUNaeUosVUFBVTtnQ0FBQyxJQUFJeEoseUNBQU9BLENBQUM7b0NBQUVNLE1BQU07Z0NBQUc7NkJBQUc7NEJBQ3JDMkosU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTt3QkFDeEI7b0JBRUosT0FBTyxJQUFJaEUsS0FBS0csT0FBTyxFQUFFO3dCQUN2QjJFLGFBQWF0QixJQUFJLENBQ2YsSUFBSTNKLDJDQUFTQSxDQUFDOzRCQUNaeUosVUFBVTtnQ0FDUixJQUFJeEoseUNBQU9BLENBQUM7b0NBQ1ZNLE1BQU0sZ0JBQWdELE9BQWhDRyxrQkFBa0J5RixLQUFLRyxPQUFPLEdBQUU7b0NBQ3REdUQsTUFBTUgsZ0JBQWdCekYsYUFBYTtvQ0FDbkN5RyxTQUFTO2dDQUNYOzZCQUNEOzRCQUNEUixTQUFTO2dDQUFFQyxPQUFPOzRCQUFJO3dCQUN4QjtvQkFFSjtnQkFDRjtnQkFDQWpGLFdBQVcsa0JBQWtCK0Y7WUFDL0I7WUFFQSxJQUFJaEksZ0JBQWdCWixPQUFPLElBQUlmLFdBQVdDLFFBQVEsQ0FBQ2MsT0FBTyxFQUFFO2dCQUMxRCxNQUFNNkksY0FBYzVKLFdBQVdDLFFBQVEsQ0FBQ2MsT0FBTztnQkFDL0MsTUFBTW9FLFFBQVF5RSxZQUFZeEUsS0FBSyxDQUFDO2dCQUNoQyxNQUFNRixpQkFBd0IsRUFBRTtnQkFFaEMsd0NBQXdDO2dCQUN4QyxJQUFJQyxNQUFNckUsTUFBTSxHQUFHLEtBQUtxRSxLQUFLLENBQUMsRUFBRSxDQUFDRSxRQUFRLENBQUMsc0NBQXNDO29CQUM5RSw4Q0FBOEM7b0JBQzlDSCxlQUFlbUQsSUFBSSxDQUNqQixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTUcsa0JBQWtCK0YsS0FBSyxDQUFDLEVBQUU7Z0NBQ2hDb0QsTUFBTUgsZ0JBQWdCMUYsWUFBWTtnQ0FDbEMwRyxTQUFTOzRCQUNYO3lCQUNEO3dCQUNEUixTQUFTOzRCQUFFQyxPQUFPO3dCQUFJO3dCQUN0QlEsU0FBUzs0QkFDUEMsTUFBTTt3QkFDUjt3QkFDQUMsUUFBUTs0QkFDTkMsTUFBTTtnQ0FDSkMsT0FBTztnQ0FDUGxCLE1BQU07Z0NBQ05tQixPQUFPOzRCQUNUO3dCQUNGO29CQUNGO29CQUdGLHNDQUFzQztvQkFDdEN4RSxlQUFlbUQsSUFBSSxDQUNqQixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTUcsa0JBQWtCK0YsTUFBTWxCLEtBQUssQ0FBQyxHQUFHcUIsSUFBSSxDQUFDO2dDQUM1Q2lELE1BQU1ILGdCQUFnQjNGLFlBQVk7NEJBQ3BDO3lCQUNEO3dCQUNEbUcsU0FBUzs0QkFBRUMsT0FBTzt3QkFBSTtvQkFDeEI7Z0JBRUosT0FBTztvQkFDTCxvQ0FBb0M7b0JBQ3BDM0QsZUFBZW1ELElBQUksQ0FDakIsSUFBSTNKLDJDQUFTQSxDQUFDO3dCQUNaeUosVUFBVTs0QkFDUixJQUFJeEoseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU1HLGtCQUFrQndLO2dDQUN4QnJCLE1BQU1ILGdCQUFnQjNGLFlBQVk7NEJBQ3BDO3lCQUNEO3dCQUNEbUcsU0FBUzs0QkFBRUMsT0FBTzt3QkFBSTtvQkFDeEI7Z0JBRUo7Z0JBRUFqRixXQUFXLG1CQUFtQnNCO1lBQ2hDO1lBRUEsSUFBSXZELGdCQUFnQlgsYUFBYSxJQUFJaEIsV0FBV0MsUUFBUSxDQUFDZSxhQUFhLEVBQUU7Z0JBQ3RFLE1BQU11RSx5QkFBeUI1RSxNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ2UsYUFBYSxJQUFJaEIsV0FBV0MsUUFBUSxDQUFDZSxhQUFhLEdBQUcsRUFBRTtnQkFDeEgsTUFBTTZJLHVCQUF1QnRFLHVCQUF1QjRELEdBQUcsQ0FBQyxDQUFDL0UsVUFBVUM7b0JBQ2pFLDJEQUEyRDtvQkFDM0QsSUFBSUEsVUFBVSxHQUFHO3dCQUNmLE9BQU8sSUFBSTNGLDJDQUFTQSxDQUFDOzRCQUNuQnlKLFVBQVU7Z0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO29DQUNWTSxNQUFNRyxrQkFBa0JnRjtvQ0FDeEJtRSxNQUFNSCxnQkFBZ0IxRixZQUFZO29DQUNsQzBHLFNBQVM7Z0NBQ1g7NkJBQ0Q7NEJBQ0RSLFNBQVM7Z0NBQUVDLE9BQU87NEJBQUk7NEJBQ3RCUSxTQUFTO2dDQUNQQyxNQUFNOzRCQUNSOzRCQUNBQyxRQUFRO2dDQUNOQyxNQUFNO29DQUNKQyxPQUFPO29DQUNQbEIsTUFBTTtvQ0FDTm1CLE9BQU87Z0NBQ1Q7NEJBQ0Y7d0JBQ0Y7b0JBQ0YsT0FBTzt3QkFDTCx1REFBdUQ7d0JBQ3ZELE9BQU8sSUFBSWhMLDJDQUFTQSxDQUFDOzRCQUNuQnlKLFVBQVU7Z0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO29DQUNWTSxNQUFNRyxrQkFBa0IsR0FBYWdGLE9BQVZDLE9BQU0sTUFBYSxPQUFURDtvQ0FDckNtRSxNQUFNSCxnQkFBZ0IzRixZQUFZO2dDQUNwQzs2QkFDRDs0QkFDRG1HLFNBQVM7Z0NBQUVDLE9BQU87NEJBQUk7d0JBQ3hCO29CQUNGO2dCQUNGO2dCQUNBakYsV0FBVyx5QkFBeUJpRztZQUN0QztZQUVBLElBQUlsSSxnQkFBZ0JWLFVBQVUsSUFBSWpCLFdBQVdDLFFBQVEsQ0FBQ2dCLFVBQVUsRUFBRTtnQkFDaEUsTUFBTXVFLHNCQUFzQjdFLE1BQU1ELE9BQU8sQ0FBQ1YsV0FBV0MsUUFBUSxDQUFDZ0IsVUFBVSxJQUFJakIsV0FBV0MsUUFBUSxDQUFDZ0IsVUFBVSxHQUFHLEVBQUU7Z0JBQy9HLE1BQU02SSxvQkFBb0J0RSxvQkFBb0IyRCxHQUFHLENBQUMsQ0FBQy9FLFVBQVVDO29CQUMzRCw0REFBNEQ7b0JBQzVELElBQUlBLFVBQVUsR0FBRzt3QkFDZixPQUFPLElBQUkzRiwyQ0FBU0EsQ0FBQzs0QkFDbkJ5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTUcsa0JBQWtCZ0Y7b0NBQ3hCbUUsTUFBTUgsZ0JBQWdCMUYsWUFBWTtvQ0FDbEMwRyxTQUFTO2dDQUNYOzZCQUNEOzRCQUNEUixTQUFTO2dDQUFFQyxPQUFPOzRCQUFJOzRCQUN0QlEsU0FBUztnQ0FDUEMsTUFBTTs0QkFDUjs0QkFDQUMsUUFBUTtnQ0FDTkMsTUFBTTtvQ0FDSkMsT0FBTztvQ0FDUGxCLE1BQU07b0NBQ05tQixPQUFPO2dDQUNUOzRCQUNGO3dCQUNGO29CQUNGLE9BQU87d0JBQ0wsdURBQXVEO3dCQUN2RCxPQUFPLElBQUloTCwyQ0FBU0EsQ0FBQzs0QkFDbkJ5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTUcsa0JBQWtCLEdBQWFnRixPQUFWQyxPQUFNLE1BQWEsT0FBVEQ7b0NBQ3JDbUUsTUFBTUgsZ0JBQWdCM0YsWUFBWTtnQ0FDcEM7NkJBQ0Q7NEJBQ0RtRyxTQUFTO2dDQUFFQyxPQUFPOzRCQUFJO3dCQUN4QjtvQkFDRjtnQkFDRjtnQkFDQWpGLFdBQVcsd0JBQXdCa0c7WUFDckM7WUFFQSxJQUFJbkksZ0JBQWdCOEQsZ0JBQWdCLElBQUl6RixXQUFXQyxRQUFRLENBQUN3RixnQkFBZ0IsRUFBRTtnQkFDNUUsTUFBTXNFLDBCQUFpQyxFQUFFO2dCQUN6QyxNQUFNckUsa0JBQWtCMUYsV0FBV0MsUUFBUSxDQUFDd0YsZ0JBQWdCO2dCQUU1RCx3REFBd0Q7Z0JBQ3hEc0Usd0JBQXdCMUIsSUFBSSxDQUMxQixJQUFJM0osMkNBQVNBLENBQUM7b0JBQ1p5SixVQUFVO3dCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQzs0QkFDVk0sTUFBTUcsa0JBQWtCc0csZ0JBQWdCQyxXQUFXOzRCQUNuRDRDLE1BQU1ILGdCQUFnQjFGLFlBQVk7NEJBQ2xDMEcsU0FBUzt3QkFDWDtxQkFDRDtvQkFDRFIsU0FBUzt3QkFBRUMsT0FBTztvQkFBSTtvQkFDdEJRLFNBQVM7d0JBQ1BDLE1BQU07b0JBQ1I7b0JBQ0FDLFFBQVE7d0JBQ05DLE1BQU07NEJBQ0pDLE9BQU87NEJBQ1BsQixNQUFNOzRCQUNObUIsT0FBTzt3QkFDVDtvQkFDRjtnQkFDRjtnQkFHRixxQ0FBcUM7Z0JBQ3JDLE1BQU05RCxtQkFBbUI3Ryx5RUFBMEJBLENBQ2pEMkcsZ0JBQWdCRyxRQUFRLEVBQ3hCN0YsV0FBVzhGLEVBQUUsRUFDYjtnQkFHRixnRkFBZ0Y7Z0JBQ2hGLE1BQU1rRSxnQkFBZ0JySixNQUFNRCxPQUFPLENBQUNrRixvQkFBb0JBLG1CQUFtQixFQUFFO2dCQUM3RW9FLGNBQWM3RixPQUFPLENBQUMsQ0FBQ1QsTUFBTVc7b0JBQzNCMEYsd0JBQXdCMUIsSUFBSSxDQUMxQixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTSxHQUFxQyxPQUFsQ0csa0JBQWtCc0UsS0FBS3dDLFNBQVMsR0FBRTtnQ0FDM0NvQyxNQUFNO2dDQUNOQyxNQUFNSCxnQkFBZ0IzRixZQUFZOzRCQUNwQzs0QkFDQSxJQUFJOUQseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU1HLGtCQUFrQnNFLEtBQUtBLElBQUk7Z0NBQ2pDNkUsTUFBTUgsZ0JBQWdCM0YsWUFBWTs0QkFDcEM7eUJBQ0Q7d0JBQ0RtRyxTQUFTOzRCQUNQSyxRQUFRNUUsVUFBVSxJQUFJLElBQUk7NEJBQzFCd0UsT0FBTzt3QkFDVDtvQkFDRjtnQkFFSjtnQkFFQSxpQ0FBaUM7Z0JBQ2pDLElBQUluRCxnQkFBZ0JXLGlCQUFpQixJQUFJWCxnQkFBZ0JXLGlCQUFpQixDQUFDdkYsTUFBTSxHQUFHLEdBQUc7b0JBQ3JGaUosd0JBQXdCMUIsSUFBSSxDQUMxQixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTTtnQ0FDTnFKLE1BQU07Z0NBQ05DLE1BQU1ILGdCQUFnQjFGLFlBQVk7NEJBQ3BDO3lCQUNEO3dCQUNEa0csU0FBUzs0QkFBRUssUUFBUTs0QkFBS0osT0FBTzt3QkFBSTtvQkFDckM7b0JBRUYsTUFBTXhDLG9CQUFvQjFGLE1BQU1ELE9BQU8sQ0FBQ2dGLGdCQUFnQlcsaUJBQWlCLElBQUlYLGdCQUFnQlcsaUJBQWlCLEdBQUcsRUFBRTtvQkFDbkhBLGtCQUFrQmxDLE9BQU8sQ0FBQyxDQUFDQyxVQUFVQzt3QkFDbkMwRix3QkFBd0IxQixJQUFJLENBQzFCLElBQUkzSiwyQ0FBU0EsQ0FBQzs0QkFDWnlKLFVBQVU7Z0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO29DQUNWTSxNQUFNRyxrQkFBa0IsR0FBaUJnRixPQUFkQyxRQUFRLEdBQUUsTUFBYSxPQUFURDtvQ0FDekNtRSxNQUFNSCxnQkFBZ0IzRixZQUFZO2dDQUNwQzs2QkFDRDs0QkFDRG1HLFNBQVM7Z0NBQUVDLE9BQU87NEJBQUk7d0JBQ3hCO29CQUVKO2dCQUNGO2dCQUVBakYsV0FBVyxxQkFBcUJtRztZQUNsQztZQUVBLElBQUlwSSxnQkFBZ0IyRSxlQUFlLElBQUl0RyxXQUFXQyxRQUFRLENBQUNxRyxlQUFlLEVBQUU7Z0JBQzFFLE1BQU0yRCx5QkFBZ0MsRUFBRTtnQkFDeEMsTUFBTXZFLGtCQUFrQjFGLFdBQVdDLFFBQVEsQ0FBQ3FHLGVBQWU7Z0JBRTNELHVEQUF1RDtnQkFDdkQyRCx1QkFBdUI1QixJQUFJLENBQ3pCLElBQUkzSiwyQ0FBU0EsQ0FBQztvQkFDWnlKLFVBQVU7d0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDOzRCQUNWTSxNQUFNRyxrQkFBa0JzRyxnQkFBZ0JDLFdBQVc7NEJBQ25ENEMsTUFBTUgsZ0JBQWdCMUYsWUFBWTs0QkFDbEMwRyxTQUFTO3dCQUNYO3FCQUNEO29CQUNEUixTQUFTO3dCQUFFQyxPQUFPO29CQUFJO29CQUN0QlEsU0FBUzt3QkFDUEMsTUFBTTtvQkFDUjtvQkFDQUMsUUFBUTt3QkFDTkMsTUFBTTs0QkFDSkMsT0FBTzs0QkFDUGxCLE1BQU07NEJBQ05tQixPQUFPO3dCQUNUO29CQUNGO2dCQUNGO2dCQUdGLHFDQUFxQztnQkFDckMsTUFBTTlELG1CQUFtQjdHLHlFQUEwQkEsQ0FDakQyRyxnQkFBZ0JHLFFBQVEsRUFDeEI3RixXQUFXOEYsRUFBRSxFQUNiO2dCQUdGLGdGQUFnRjtnQkFDaEYsTUFBTVMsdUJBQXVCNUYsTUFBTUQsT0FBTyxDQUFDa0Ysb0JBQW9CQSxtQkFBbUIsRUFBRTtnQkFDcEZXLHFCQUFxQnBDLE9BQU8sQ0FBQyxDQUFDVCxNQUFNVztvQkFDbEM0Rix1QkFBdUI1QixJQUFJLENBQ3pCLElBQUkzSiwyQ0FBU0EsQ0FBQzt3QkFDWnlKLFVBQVU7NEJBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO2dDQUNWTSxNQUFNLEdBQXFDLE9BQWxDRyxrQkFBa0JzRSxLQUFLd0MsU0FBUyxHQUFFO2dDQUMzQ29DLE1BQU07Z0NBQ05DLE1BQU1ILGdCQUFnQjNGLFlBQVk7NEJBQ3BDOzRCQUNBLElBQUk5RCx5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTUcsa0JBQWtCc0UsS0FBS0EsSUFBSTtnQ0FDakM2RSxNQUFNSCxnQkFBZ0IzRixZQUFZOzRCQUNwQzt5QkFDRDt3QkFDRG1HLFNBQVM7NEJBQ1BLLFFBQVE1RSxVQUFVLElBQUksSUFBSTs0QkFDMUJ3RSxPQUFPO3dCQUNUO29CQUNGO2dCQUVKO2dCQUVBLHdCQUF3QjtnQkFDeEIsSUFBSW5ELGdCQUFnQmMsT0FBTyxJQUFJZCxnQkFBZ0JjLE9BQU8sQ0FBQzFGLE1BQU0sR0FBRyxHQUFHO29CQUNqRW1KLHVCQUF1QjVCLElBQUksQ0FDekIsSUFBSTNKLDJDQUFTQSxDQUFDO3dCQUNaeUosVUFBVTs0QkFDUixJQUFJeEoseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU07Z0NBQ05xSixNQUFNO2dDQUNOQyxNQUFNSCxnQkFBZ0IxRixZQUFZOzRCQUNwQzt5QkFDRDt3QkFDRGtHLFNBQVM7NEJBQUVLLFFBQVE7NEJBQUtKLE9BQU87d0JBQUk7b0JBQ3JDO29CQUVGb0IsdUJBQXVCNUIsSUFBSSxDQUN6QixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTUcsa0JBQWtCc0csZ0JBQWdCYyxPQUFPLENBQUNsQixJQUFJLENBQUM7Z0NBQ3JEaUQsTUFBTUgsZ0JBQWdCekYsYUFBYTs0QkFDckM7eUJBQ0Q7d0JBQ0RpRyxTQUFTOzRCQUFFQyxPQUFPO3dCQUFJO29CQUN4QjtnQkFFSjtnQkFFQWpGLFdBQVcsNEJBQTRCcUc7WUFDekM7WUFFQSxJQUFJdEksZ0JBQWdCVCxPQUFPLElBQUlsQixXQUFXQyxRQUFRLENBQUNpQixPQUFPLEVBQUU7Z0JBQzFELE1BQU1nSixpQkFBd0IsRUFBRTtnQkFDaENBLGVBQWU3QixJQUFJLENBQ2pCLElBQUkzSiwyQ0FBU0EsQ0FBQztvQkFDWnlKLFVBQVU7d0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDOzRCQUNWTSxNQUFNLFVBQStELE9BQXJERyxrQkFBa0JZLFdBQVdDLFFBQVEsQ0FBQ2lCLE9BQU8sQ0FBQ0UsS0FBSzs0QkFDbkVrSCxNQUFNOzRCQUNOQyxNQUFNSCxnQkFBZ0IzRixZQUFZO3dCQUNwQztxQkFDRDtvQkFDRG1HLFNBQVM7d0JBQUVDLE9BQU87b0JBQUk7Z0JBQ3hCO2dCQUVGcUIsZUFBZTdCLElBQUksQ0FDakIsSUFBSTNKLDJDQUFTQSxDQUFDO29CQUNaeUosVUFBVTt3QkFDUixJQUFJeEoseUNBQU9BLENBQUM7NEJBQ1ZNLE1BQU07NEJBQ05xSixNQUFNOzRCQUNOQyxNQUFNSCxnQkFBZ0IxRixZQUFZO3dCQUNwQztxQkFDRDtvQkFDRGtHLFNBQVM7d0JBQUVDLE9BQU87b0JBQUk7Z0JBQ3hCO2dCQUVGLE1BQU1wQyxrQkFBa0I5RixNQUFNRCxPQUFPLENBQUNWLFdBQVdDLFFBQVEsQ0FBQ2lCLE9BQU8sQ0FBQzZELFFBQVEsSUFBSS9FLFdBQVdDLFFBQVEsQ0FBQ2lCLE9BQU8sQ0FBQzZELFFBQVEsR0FBRyxFQUFFO2dCQUN2SDBCLGdCQUFnQnRDLE9BQU8sQ0FBQyxDQUFDYTtvQkFDdkJrRixlQUFlN0IsSUFBSSxDQUNqQixJQUFJM0osMkNBQVNBLENBQUM7d0JBQ1p5SixVQUFVOzRCQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztnQ0FDVk0sTUFBTSxLQUFnQyxPQUEzQkcsa0JBQWtCNEY7Z0NBQzdCdUQsTUFBTUgsZ0JBQWdCekYsYUFBYTs0QkFDckM7eUJBQ0Q7d0JBQ0RpRyxTQUFTOzRCQUFFQyxPQUFPO3dCQUFJO29CQUN4QjtnQkFFSjtnQkFDQXFCLGVBQWU3QixJQUFJLENBQ2pCLElBQUkzSiwyQ0FBU0EsQ0FBQztvQkFDWnlKLFVBQVU7d0JBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDOzRCQUNWTSxNQUFNOzRCQUNOcUosTUFBTTs0QkFDTkMsTUFBTUgsZ0JBQWdCMUYsWUFBWTt3QkFDcEM7cUJBQ0Q7b0JBQ0RrRyxTQUFTO3dCQUFFSyxRQUFRO3dCQUFLSixPQUFPO29CQUFJO2dCQUNyQztnQkFFRixNQUFNbkMsbUJBQW1CL0YsTUFBTUQsT0FBTyxDQUFDVixXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUN5RixRQUFRLElBQUkzRyxXQUFXQyxRQUFRLENBQUNpQixPQUFPLENBQUN5RixRQUFRLEdBQUcsRUFBRTtnQkFDeEhELGlCQUFpQnZDLE9BQU8sQ0FBQyxDQUFDd0MsVUFBVXRDO29CQUNsQzZGLGVBQWU3QixJQUFJLENBQ2pCLElBQUkzSiwyQ0FBU0EsQ0FBQzt3QkFDWnlKLFVBQVU7NEJBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO2dDQUNWTSxNQUFNRyxrQkFBa0IsR0FBaUJ1SCxPQUFkdEMsUUFBUSxHQUFFLE1BQWEsT0FBVHNDO2dDQUN6QzRCLE1BQU1ILGdCQUFnQjNGLFlBQVk7NEJBQ3BDO3lCQUNEO3dCQUNEbUcsU0FBUzs0QkFBRUMsT0FBTzt3QkFBSTtvQkFDeEI7Z0JBRUo7Z0JBQ0FqRixXQUFXLGlCQUFpQnNHO1lBQzlCO1lBRUEsSUFBSXZJLGdCQUFnQk4sYUFBYSxJQUFJckIsV0FBV0MsUUFBUSxDQUFDb0IsYUFBYSxFQUFFO2dCQUN0RSxNQUFNdUYsY0FBYzVHLFdBQVdDLFFBQVEsQ0FBQ29CLGFBQWE7Z0JBQ3JELE1BQU04SSx1QkFBOEIsRUFBRTtnQkFFdEMsb0VBQW9FO2dCQUNwRSxJQUFJdkQsWUFBWUMsS0FBSyxJQUFJbEcsTUFBTUQsT0FBTyxDQUFDa0csWUFBWUMsS0FBSyxLQUFLRCxZQUFZQyxLQUFLLENBQUMvRixNQUFNLEdBQUcsR0FBRztvQkFDekYsaUNBQWlDO29CQUNqQzhGLFlBQVlDLEtBQUssQ0FBQzFDLE9BQU8sQ0FBQyxDQUFDMkMsVUFBVXpDO3dCQUNuQyxJQUFJQSxRQUFRLEdBQUc7NEJBQ2IsNEJBQTRCOzRCQUM1QjhGLHFCQUFxQjlCLElBQUksQ0FDdkIsSUFBSTNKLDJDQUFTQSxDQUFDO2dDQUNaeUosVUFBVTtvQ0FBQyxJQUFJeEoseUNBQU9BLENBQUM7d0NBQUVNLE1BQU07b0NBQUc7aUNBQUc7Z0NBQ3JDMkosU0FBUztvQ0FBRUssUUFBUTtnQ0FBSTs0QkFDekI7d0JBRUo7d0JBRUFrQixxQkFBcUI5QixJQUFJLENBQ3ZCLElBQUkzSiwyQ0FBU0EsQ0FBQzs0QkFDWnlKLFVBQVU7Z0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO29DQUNWTSxNQUFNLFNBQW1ELE9BQTFDRyxrQkFBa0IwSCxTQUFTdkYsSUFBSSxJQUFJO29DQUNsRCtHLE1BQU07b0NBQ05DLE1BQU1ILGdCQUFnQjNGLFlBQVk7Z0NBQ3BDOzZCQUNEOzRCQUNEbUcsU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTt3QkFDeEI7d0JBR0ZzQixxQkFBcUI5QixJQUFJLENBQ3ZCLElBQUkzSiwyQ0FBU0EsQ0FBQzs0QkFDWnlKLFVBQVU7Z0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO29DQUNWTSxNQUFNLFFBQWlELE9BQXpDRyxrQkFBa0IwSCxTQUFTQyxHQUFHLElBQUk7b0NBQ2hEd0IsTUFBTUgsZ0JBQWdCekYsYUFBYTtnQ0FDckM7NkJBQ0Q7NEJBQ0RpRyxTQUFTO2dDQUFFQyxPQUFPOzRCQUFJO3dCQUN4Qjt3QkFHRixJQUFJL0IsU0FBU0UsZ0JBQWdCLEVBQUU7NEJBQzdCbUQscUJBQXFCOUIsSUFBSSxDQUN2QixJQUFJM0osMkNBQVNBLENBQUM7Z0NBQ1p5SixVQUFVO29DQUNSLElBQUl4Six5Q0FBT0EsQ0FBQzt3Q0FDVk0sTUFBTSxjQUEyRCxPQUE3Q0csa0JBQWtCMEgsU0FBU0UsZ0JBQWdCLEdBQUU7d0NBQ2pFdUIsTUFBTUgsZ0JBQWdCM0YsWUFBWTt3Q0FDbEMyRyxTQUFTO29DQUNYO2lDQUNEO2dDQUNEUixTQUFTO29DQUFFQyxPQUFPO2dDQUFJOzRCQUN4Qjt3QkFFSjt3QkFFQSxJQUFJL0IsU0FBU0csSUFBSSxJQUFJSCxTQUFTRyxJQUFJLENBQUNuRyxNQUFNLEdBQUcsR0FBRzs0QkFDN0NxSixxQkFBcUI5QixJQUFJLENBQ3ZCLElBQUkzSiwyQ0FBU0EsQ0FBQztnQ0FDWnlKLFVBQVU7b0NBQ1IsSUFBSXhKLHlDQUFPQSxDQUFDO3dDQUNWTSxNQUFNO3dDQUNOcUosTUFBTTt3Q0FDTkMsTUFBTUgsZ0JBQWdCMUYsWUFBWTtvQ0FDcEM7aUNBQ0Q7Z0NBQ0RrRyxTQUFTO29DQUFFQyxPQUFPO2dDQUFJOzRCQUN4Qjs0QkFHRi9CLFNBQVNHLElBQUksQ0FBQzlDLE9BQU8sQ0FBQytDLENBQUFBO2dDQUNwQmlELHFCQUFxQjlCLElBQUksQ0FDdkIsSUFBSTNKLDJDQUFTQSxDQUFDO29DQUNaeUosVUFBVTt3Q0FDUixJQUFJeEoseUNBQU9BLENBQUM7NENBQ1ZNLE1BQU0sS0FBNEIsT0FBdkJHLGtCQUFrQjhIOzRDQUM3QnFCLE1BQU1ILGdCQUFnQnpGLGFBQWE7d0NBQ3JDO3FDQUNEO29DQUNEaUcsU0FBUzt3Q0FBRUMsT0FBTztvQ0FBSTtnQ0FDeEI7NEJBRUo7d0JBQ0Y7b0JBQ0Y7Z0JBQ0YsT0FBTyxJQUFJakMsWUFBWXJGLElBQUksRUFBRTtvQkFDM0IsOEJBQThCO29CQUM5QjRJLHFCQUFxQjlCLElBQUksQ0FDdkIsSUFBSTNKLDJDQUFTQSxDQUFDO3dCQUNaeUosVUFBVTs0QkFDUixJQUFJeEoseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU0sU0FBc0QsT0FBN0NHLGtCQUFrQndILFlBQVlyRixJQUFJLElBQUk7Z0NBQ3JEK0csTUFBTTtnQ0FDTkMsTUFBTUgsZ0JBQWdCM0YsWUFBWTs0QkFDcEM7eUJBQ0Q7d0JBQ0RtRyxTQUFTOzRCQUFFQyxPQUFPO3dCQUFJO29CQUN4QjtvQkFHRnNCLHFCQUFxQjlCLElBQUksQ0FDdkIsSUFBSTNKLDJDQUFTQSxDQUFDO3dCQUNaeUosVUFBVTs0QkFDUixJQUFJeEoseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU0sUUFBb0QsT0FBNUNHLGtCQUFrQndILFlBQVlHLEdBQUcsSUFBSTtnQ0FDbkR3QixNQUFNSCxnQkFBZ0J6RixhQUFhOzRCQUNyQzt5QkFDRDt3QkFDRGlHLFNBQVM7NEJBQUVDLE9BQU87d0JBQUk7b0JBQ3hCO29CQUdGLElBQUlqQyxZQUFZTyxRQUFRLEVBQUU7d0JBQ3hCZ0QscUJBQXFCOUIsSUFBSSxDQUN2QixJQUFJM0osMkNBQVNBLENBQUM7NEJBQ1p5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTSxjQUFzRCxPQUF4Q0csa0JBQWtCd0gsWUFBWU8sUUFBUSxHQUFFO29DQUM1RG9CLE1BQU1ILGdCQUFnQjNGLFlBQVk7b0NBQ2xDMkcsU0FBUztnQ0FDWDs2QkFDRDs0QkFDRFIsU0FBUztnQ0FBRUMsT0FBTzs0QkFBSTt3QkFDeEI7b0JBRUo7Z0JBQ0YsT0FBTztvQkFDTHNCLHFCQUFxQjlCLElBQUksQ0FDdkIsSUFBSTNKLDJDQUFTQSxDQUFDO3dCQUNaeUosVUFBVTs0QkFDUixJQUFJeEoseUNBQU9BLENBQUM7Z0NBQ1ZNLE1BQU07Z0NBQ05zSixNQUFNSCxnQkFBZ0IzRixZQUFZOzRCQUNwQzt5QkFDRDt3QkFDRG1HLFNBQVM7NEJBQUVDLE9BQU87d0JBQUk7b0JBQ3hCO2dCQUVKO2dCQUVBakYsV0FBVywwQkFBMEJ1RztZQUN2QztZQUVBLElBQUl4SSxnQkFBZ0JILE1BQU0sSUFBSXhCLFdBQVdDLFFBQVEsQ0FBQ3VCLE1BQU0sRUFBRTtnQkFDeEQsTUFBTTRGLGtCQUFrQnpHLE1BQU1ELE9BQU8sQ0FBQ1YsV0FBV0MsUUFBUSxDQUFDdUIsTUFBTSxJQUFJeEIsV0FBV0MsUUFBUSxDQUFDdUIsTUFBTSxHQUFHLEVBQUU7Z0JBQ25HLE1BQU00SSxnQkFBZ0JoRCxnQkFBZ0IrQixHQUFHLENBQUMsQ0FBQy9FLFVBQVVDO29CQUNuRCw0REFBNEQ7b0JBQzVELElBQUlBLFVBQVUsR0FBRzt3QkFDZixPQUFPLElBQUkzRiwyQ0FBU0EsQ0FBQzs0QkFDbkJ5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTUcsa0JBQWtCZ0Y7b0NBQ3hCbUUsTUFBTUgsZ0JBQWdCMUYsWUFBWTtvQ0FDbEMwRyxTQUFTO2dDQUNYOzZCQUNEOzRCQUNEUixTQUFTO2dDQUFFQyxPQUFPOzRCQUFJOzRCQUN0QlEsU0FBUztnQ0FDUEMsTUFBTTs0QkFDUjs0QkFDQUMsUUFBUTtnQ0FDTkMsTUFBTTtvQ0FDSkMsT0FBTztvQ0FDUGxCLE1BQU07b0NBQ05tQixPQUFPO2dDQUNUOzRCQUNGO3dCQUNGO29CQUNGLE9BQU87d0JBQ0wsdURBQXVEO3dCQUN2RCxPQUFPLElBQUloTCwyQ0FBU0EsQ0FBQzs0QkFDbkJ5SixVQUFVO2dDQUNSLElBQUl4Six5Q0FBT0EsQ0FBQztvQ0FDVk0sTUFBTUcsa0JBQWtCLEdBQWFnRixPQUFWQyxPQUFNLE1BQWEsT0FBVEQ7b0NBQ3JDbUUsTUFBTUgsZ0JBQWdCM0YsWUFBWTtnQ0FDcEM7NkJBQ0Q7NEJBQ0RtRyxTQUFTO2dDQUFFQyxPQUFPOzRCQUFJO3dCQUN4QjtvQkFDRjtnQkFDRjtnQkFDQWpGLFdBQVcsa0JBQWtCd0c7WUFDL0I7WUFFQSxTQUFTO1lBQ1RqQyxTQUFTRSxJQUFJLENBQ1gsSUFBSTNKLDJDQUFTQSxDQUFDO2dCQUNaeUosVUFBVTtvQkFDUixJQUFJeEoseUNBQU9BLENBQUM7d0JBQ1ZNLE1BQU07d0JBQ05zSixNQUFNSCxnQkFBZ0J6RixhQUFhO3dCQUNuQ3lHLFNBQVM7b0JBQ1g7aUJBQ0Q7Z0JBQ0RWLFdBQVc3SiwrQ0FBYUEsQ0FBQzhKLE1BQU07Z0JBQy9CQyxTQUFTO29CQUFFSyxRQUFRO2dCQUFJO1lBQ3pCO1lBR0Ysa0JBQWtCO1lBQ2xCLE1BQU1vQixNQUFNLElBQUk3TCwwQ0FBUUEsQ0FBQztnQkFDdkJ5QixVQUFVO29CQUNSO3dCQUNFcUssWUFBWSxDQUFDO3dCQUNibkMsVUFBVUE7b0JBQ1o7aUJBQ0Q7WUFDSDtZQUVBLHdCQUF3QjtZQUN4QjdJLFFBQVFZLEdBQUcsQ0FBQztZQUNaLE1BQU1xSyxTQUFTLE1BQU05TCx3Q0FBTUEsQ0FBQytMLFFBQVEsQ0FBQ0g7WUFDckMvSyxRQUFRWSxHQUFHLENBQUMsa0NBQWtDcUssT0FBT0UsVUFBVTtZQUUvRCxNQUFNQyxPQUFPLElBQUlDLEtBQUs7Z0JBQUNKO2FBQWMsRUFBRTtnQkFBRTlKLE1BQU07WUFBMEU7WUFDekgsTUFBTW1LLE1BQU1DLElBQUlDLGVBQWUsQ0FBQ0o7WUFDaEMsTUFBTWxELFdBQVcsR0FBbUN4SCxPQUFoQ0EsV0FBV0ssVUFBVSxFQUFDLFlBQXFDWCxPQUEzQk0sV0FBV00sWUFBWSxFQUFDLEtBQWMsT0FBWFosS0FBSytILEdBQUcsSUFBRztZQUUxRm5JLFFBQVFZLEdBQUcsQ0FBQyw0Q0FBNENzSDtZQUN4RCxNQUFNdUQsT0FBT0MsU0FBU0MsYUFBYSxDQUFDO1lBQ3BDRixLQUFLRyxJQUFJLEdBQUdOO1lBQ1pHLEtBQUtJLFFBQVEsR0FBRzNEO1lBQ2hCd0QsU0FBU0ksSUFBSSxDQUFDQyxXQUFXLENBQUNOO1lBQzFCQSxLQUFLTyxLQUFLO1lBQ1ZOLFNBQVNJLElBQUksQ0FBQ0csV0FBVyxDQUFDUjtZQUMxQkYsSUFBSVcsZUFBZSxDQUFDWjtZQUNwQnRMLFFBQVFZLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT2IsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsc0JBQXNCQTtZQUNwQyxNQUFNLElBQUljLE1BQU0sdUJBQWdGLE9BQXpEZCxpQkFBaUJjLFFBQVFkLE1BQU11SSxPQUFPLEdBQUc7UUFDbEY7SUFDRjtBQUNGO0FBRU8sTUFBTTZELGlCQUFpQixJQUFJak0saUJBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9leHBvcnQtdXRpbHMudHM/MTBkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQganNQREYgZnJvbSBcImpzcGRmXCJcbmltcG9ydCB7IERvY3VtZW50LCBQYWNrZXIsIFBhcmFncmFwaCwgVGV4dFJ1biwgSGVhZGluZ0xldmVsLCBBbGlnbm1lbnRUeXBlLCBVbmRlcmxpbmVUeXBlIH0gZnJvbSBcImRvY3hcIlxuaW1wb3J0IHsgZW5oYW5jZURpYWxvZ3VlV2l0aEF2YXRhcnMgfSBmcm9tIFwiLi9hdmF0YXItdXRpbHNcIlxuXG4vKipcbiAqIFN0cmlwcyBtYXJrZG93biBmb3JtYXR0aW5nIGZyb20gdGV4dCB3aGlsZSBwcmVzZXJ2aW5nIGNvbnRlbnQuXG4gKiBIYW5kbGVzIGJvbGQgc3ludGF4ICgqKnRleHQqKiwgX190ZXh0X18pIGFuZCBpdGFsaWMgc3ludGF4ICgqdGV4dCosIF90ZXh0XykuXG4gKiBSZWN1cnNpdmVseSBwcm9jZXNzZXMgbmVzdGVkIG1hcmtkb3duLlxuICogXG4gKiBAcGFyYW0gdGV4dCAtIFRoZSB0ZXh0IGNvbnRhaW5pbmcgbWFya2Rvd24gc3ludGF4XG4gKiBAcmV0dXJucyBUaGUgdGV4dCB3aXRoIG1hcmtkb3duIHN5bnRheCByZW1vdmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpcE1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGV4dCB8fCB0eXBlb2YgdGV4dCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdGV4dFxuICB9XG5cbiAgbGV0IHJlc3VsdCA9IHRleHRcblxuICAvLyBSZW1vdmUgYm9sZCBzeW50YXg6ICoqdGV4dCoqIGFuZCBfX3RleHRfX1xuICAvLyBVc2Ugbm9uLWdyZWVkeSBtYXRjaGluZyB0byBoYW5kbGUgbmVzdGVkIG1hcmtkb3duXG4gIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXCpcXCooLis/KVxcKlxcKi9nLCAnJDEnKVxuICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvX18oLis/KV9fL2csICckMScpXG5cbiAgLy8gUmVtb3ZlIGl0YWxpYyBzeW50YXg6ICp0ZXh0KiBhbmQgX3RleHRfXG4gIC8vIFVzZSBub24tZ3JlZWR5IG1hdGNoaW5nIHRvIGhhbmRsZSBuZXN0ZWQgbWFya2Rvd25cbiAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xcKiguKz8pXFwqL2csICckMScpXG4gIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9fKC4rPylfL2csICckMScpXG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vKipcbiAqIFNhZmVseSBzdHJpcHMgbWFya2Rvd24gZm9ybWF0dGluZyBmcm9tIHRleHQgd2l0aCBlcnJvciBoYW5kbGluZy5cbiAqIElmIHN0cmlwcGluZyBmYWlscywgcmV0dXJucyB0aGUgb3JpZ2luYWwgdGV4dCBhbmQgbG9ncyB0aGUgZXJyb3IuXG4gKiBUaGlzIGVuc3VyZXMgZXhwb3J0IHByb2Nlc3NlcyBuZXZlciBicmVhayBkdWUgdG8gbWFya2Rvd24gc3RyaXBwaW5nIGZhaWx1cmVzLlxuICogXG4gKiBAcGFyYW0gdGV4dCAtIFRoZSB0ZXh0IGNvbnRhaW5pbmcgbWFya2Rvd24gc3ludGF4XG4gKiBAcmV0dXJucyBUaGUgdGV4dCB3aXRoIG1hcmtkb3duIHN5bnRheCByZW1vdmVkLCBvciBvcmlnaW5hbCB0ZXh0IGlmIHN0cmlwcGluZyBmYWlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZVN0cmlwTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gc3RyaXBNYXJrZG93bih0ZXh0KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01hcmtkb3duIHN0cmlwcGluZyBlcnJvcjonLCBlcnJvcilcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdGV4dDonLCB0ZXh0Py5zdWJzdHJpbmcoMCwgMTAwKSlcbiAgICAvLyBSZXR1cm4gb3JpZ2luYWwgdGV4dCBpZiBzdHJpcHBpbmcgZmFpbHMgdG8gZW5zdXJlIGV4cG9ydCBjb250aW51ZXNcbiAgICByZXR1cm4gdGV4dFxuICB9XG59XG5cbmludGVyZmFjZSBMZXNzb25EYXRhIHtcbiAgbGVzc29uVGl0bGU6IHN0cmluZ1xuICBsZXNzb25UeXBlOiBzdHJpbmdcbiAgc3R1ZGVudExldmVsOiBzdHJpbmdcbiAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZ1xuICBpZD86IHN0cmluZ1xuICBzZWN0aW9uczoge1xuICAgIHdhcm11cDogc3RyaW5nW11cbiAgICB2b2NhYnVsYXJ5OiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgbWVhbmluZzogc3RyaW5nOyBleGFtcGxlPzogc3RyaW5nOyBleGFtcGxlcz86IHN0cmluZ1tdIH0+XG4gICAgcmVhZGluZzogc3RyaW5nXG4gICAgY29tcHJlaGVuc2lvbjogc3RyaW5nW11cbiAgICBkaXNjdXNzaW9uOiBzdHJpbmdbXVxuICAgIGRpYWxvZ3VlUHJhY3RpY2U/OiB7XG4gICAgICBpbnN0cnVjdGlvbjogc3RyaW5nXG4gICAgICBkaWFsb2d1ZTogQXJyYXk8eyBjaGFyYWN0ZXI6IHN0cmluZzsgbGluZTogc3RyaW5nIH0+XG4gICAgICBmb2xsb3dVcFF1ZXN0aW9uczogc3RyaW5nW11cbiAgICB9XG4gICAgZGlhbG9ndWVGaWxsR2FwPzoge1xuICAgICAgaW5zdHJ1Y3Rpb246IHN0cmluZ1xuICAgICAgZGlhbG9ndWU6IEFycmF5PHsgY2hhcmFjdGVyOiBzdHJpbmc7IGxpbmU6IHN0cmluZzsgaXNHYXA/OiBib29sZWFuIH0+XG4gICAgICBhbnN3ZXJzOiBzdHJpbmdbXVxuICAgIH1cbiAgICBncmFtbWFyOiB7XG4gICAgICBmb2N1czogc3RyaW5nXG4gICAgICBleHBsYW5hdGlvbj86IHtcbiAgICAgICAgZm9ybT86IHN0cmluZ1xuICAgICAgICB1c2FnZT86IHN0cmluZ1xuICAgICAgICBsZXZlbE5vdGVzPzogc3RyaW5nXG4gICAgICB9XG4gICAgICBleGFtcGxlczogc3RyaW5nW11cbiAgICAgIGV4ZXJjaXNlPzogc3RyaW5nW11cbiAgICAgIGV4ZXJjaXNlcz86IEFycmF5PHtcbiAgICAgICAgcHJvbXB0OiBzdHJpbmdcbiAgICAgICAgYW5zd2VyPzogc3RyaW5nXG4gICAgICAgIGV4cGxhbmF0aW9uPzogc3RyaW5nXG4gICAgICB9PlxuICAgIH1cbiAgICBwcm9udW5jaWF0aW9uOiB7XG4gICAgICB3b3JkOiBzdHJpbmdcbiAgICAgIGlwYTogc3RyaW5nXG4gICAgICBwcmFjdGljZTogc3RyaW5nXG4gICAgfVxuICAgIHdyYXB1cDogc3RyaW5nW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGVzc29uRXhwb3J0ZXIge1xuICBwcml2YXRlIGZvcm1hdERhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCB7XG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgfSlcbiAgfVxuXG5cblxuICBwcml2YXRlIHZhbGlkYXRlTGVzc29uRGF0YShsZXNzb25EYXRhOiBMZXNzb25EYXRhKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpbmcgbGVzc29uIGRhdGE6JywgbGVzc29uRGF0YSlcblxuICAgIGlmICghbGVzc29uRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZXNzb24gZGF0YSBpcyByZXF1aXJlZCcpXG4gICAgfVxuICAgIGlmICghbGVzc29uRGF0YS5sZXNzb25UaXRsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSS1nZW5lcmF0ZWQgbGVzc29uIHRpdGxlIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLmxlc3NvblR5cGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTGVzc29uIHR5cGUgaXMgcmVxdWlyZWQnKVxuICAgIH1cbiAgICBpZiAoIWxlc3NvbkRhdGEuc3R1ZGVudExldmVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0dWRlbnQgbGV2ZWwgaXMgcmVxdWlyZWQnKVxuICAgIH1cbiAgICBpZiAoIWxlc3NvbkRhdGEudGFyZ2V0TGFuZ3VhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGFyZ2V0IGxhbmd1YWdlIGlzIHJlcXVpcmVkJylcbiAgICB9XG4gICAgaWYgKCFsZXNzb25EYXRhLnNlY3Rpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlc3NvbiBzZWN0aW9ucyBhcmUgcmVxdWlyZWQnKVxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHNlY3Rpb25zIHN0cnVjdHVyZSB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICBjb25zdCBzZWN0aW9ucyA9IGxlc3NvbkRhdGEuc2VjdGlvbnNcbiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGluZyBzZWN0aW9uIHR5cGVzOicsIHtcbiAgICAgIHdhcm11cDogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMud2FybXVwLCBpc0FycmF5OiBBcnJheS5pc0FycmF5KHNlY3Rpb25zLndhcm11cCksIHZhbHVlOiBzZWN0aW9ucy53YXJtdXAgfSxcbiAgICAgIHZvY2FidWxhcnk6IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLnZvY2FidWxhcnksIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMudm9jYWJ1bGFyeSksIGxlbmd0aDogc2VjdGlvbnMudm9jYWJ1bGFyeT8ubGVuZ3RoIH0sXG4gICAgICByZWFkaW5nOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy5yZWFkaW5nLCBsZW5ndGg6IHNlY3Rpb25zLnJlYWRpbmc/Lmxlbmd0aCB9LFxuICAgICAgY29tcHJlaGVuc2lvbjogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMuY29tcHJlaGVuc2lvbiwgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWN0aW9ucy5jb21wcmVoZW5zaW9uKSwgbGVuZ3RoOiBzZWN0aW9ucy5jb21wcmVoZW5zaW9uPy5sZW5ndGggfSxcbiAgICAgIGRpc2N1c3Npb246IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLmRpc2N1c3Npb24sIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkoc2VjdGlvbnMuZGlzY3Vzc2lvbiksIGxlbmd0aDogc2VjdGlvbnMuZGlzY3Vzc2lvbj8ubGVuZ3RoIH0sXG4gICAgICBncmFtbWFyOiB7IHR5cGU6IHR5cGVvZiBzZWN0aW9ucy5ncmFtbWFyLCBoYXNGb2N1czogISFzZWN0aW9ucy5ncmFtbWFyPy5mb2N1cyB9LFxuICAgICAgcHJvbnVuY2lhdGlvbjogeyB0eXBlOiB0eXBlb2Ygc2VjdGlvbnMucHJvbnVuY2lhdGlvbiwgaGFzV29yZDogISFzZWN0aW9ucy5wcm9udW5jaWF0aW9uPy53b3JkIH0sXG4gICAgICB3cmFwdXA6IHsgdHlwZTogdHlwZW9mIHNlY3Rpb25zLndyYXB1cCwgaXNBcnJheTogQXJyYXkuaXNBcnJheShzZWN0aW9ucy53cmFwdXApLCBsZW5ndGg6IHNlY3Rpb25zLndyYXB1cD8ubGVuZ3RoIH1cbiAgICB9KVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLndhcm11cCkpIHtcbiAgICAgIGNvbnNvbGUud2FybignV2FybXVwIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLndhcm11cClcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLnZvY2FidWxhcnkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1ZvY2FidWxhcnkgc2VjdGlvbiBpcyBub3QgYW4gYXJyYXk6Jywgc2VjdGlvbnMudm9jYWJ1bGFyeSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWN0aW9ucy5yZWFkaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc29sZS53YXJuKCdSZWFkaW5nIHNlY3Rpb24gaXMgbm90IGEgc3RyaW5nOicsIHNlY3Rpb25zLnJlYWRpbmcpXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy5jb21wcmVoZW5zaW9uKSkge1xuICAgICAgY29uc29sZS53YXJuKCdDb21wcmVoZW5zaW9uIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLmNvbXByZWhlbnNpb24pXG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShzZWN0aW9ucy5kaXNjdXNzaW9uKSkge1xuICAgICAgY29uc29sZS53YXJuKCdEaXNjdXNzaW9uIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLmRpc2N1c3Npb24pXG4gICAgfVxuICAgIGlmICghc2VjdGlvbnMuZ3JhbW1hciB8fCAhc2VjdGlvbnMuZ3JhbW1hci5mb2N1cykge1xuICAgICAgY29uc29sZS53YXJuKCdHcmFtbWFyIHNlY3Rpb24gaXMgbWFsZm9ybWVkOicsIHNlY3Rpb25zLmdyYW1tYXIpXG4gICAgfVxuICAgIGlmICghc2VjdGlvbnMucHJvbnVuY2lhdGlvbiB8fCAhc2VjdGlvbnMucHJvbnVuY2lhdGlvbi53b3JkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1Byb251bmNpYXRpb24gc2VjdGlvbiBpcyBtYWxmb3JtZWQ6Jywgc2VjdGlvbnMucHJvbnVuY2lhdGlvbilcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNlY3Rpb25zLndyYXB1cCkpIHtcbiAgICAgIGNvbnNvbGUud2FybignV3JhcHVwIHNlY3Rpb24gaXMgbm90IGFuIGFycmF5OicsIHNlY3Rpb25zLndyYXB1cClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnTGVzc29uIGRhdGEgdmFsaWRhdGlvbiBjb21wbGV0ZWQnKVxuICB9XG5cbiAgYXN5bmMgZXhwb3J0VG9QREYobGVzc29uRGF0YTogTGVzc29uRGF0YSwgZW5hYmxlZFNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgUERGIGV4cG9ydCB3aXRoIGRhdGE6JywgeyBsZXNzb25EYXRhLCBlbmFibGVkU2VjdGlvbnMgfSlcblxuICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQREYgZXhwb3J0IGlzIG9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXIgZW52aXJvbm1lbnQnKVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBqc1BERiBpcyBhdmFpbGFibGVcbiAgICAgIGlmICh0eXBlb2YganNQREYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignanNQREYgbGlicmFyeSBpcyBub3QgYXZhaWxhYmxlJylcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0Vudmlyb25tZW50IGNoZWNrcyBwYXNzZWQnKVxuICAgICAgdGhpcy52YWxpZGF0ZUxlc3NvbkRhdGEobGVzc29uRGF0YSlcblxuICAgICAgLy8gQWRkaXRpb25hbCB2YWxpZGF0aW9uIGZvciBlbmFibGVkIHNlY3Rpb25zXG4gICAgICBpZiAoIWVuYWJsZWRTZWN0aW9ucyB8fCBPYmplY3Qua2V5cyhlbmFibGVkU2VjdGlvbnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3Rpb25zIGVuYWJsZWQgZm9yIGV4cG9ydCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBqc1BERiBpbnN0YW5jZS4uLicpXG4gICAgICBjb25zdCBwZGYgPSBuZXcganNQREYoKVxuICAgICAgY29uc29sZS5sb2coJ2pzUERGIGluc3RhbmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JylcblxuICAgICAgbGV0IHlQb3NpdGlvbiA9IDIwXG4gICAgICBjb25zdCBwYWdlSGVpZ2h0ID0gcGRmLmludGVybmFsLnBhZ2VTaXplLmhlaWdodFxuICAgICAgY29uc3QgbWFyZ2luID0gMjBcbiAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSA3XG5cbiAgICAgIGNvbnNvbGUubG9nKCdQREYgZGltZW5zaW9uczonLCB7IHBhZ2VIZWlnaHQsIG1hcmdpbiwgbGluZUhlaWdodCB9KVxuXG4gICAgICAvLyBUeXBvZ3JhcGh5IGhpZXJhcmNoeSBjb25zdGFudHMgKG1hdGNoaW5nIHdlYiBpbnRlcmZhY2UpXG4gICAgICBjb25zdCBGT05UX1NJWkVTID0ge1xuICAgICAgICBMRVNTT05fVElUTEU6IDMyLCAgICAgIC8vIFByaW1hcnkgaGVhZGluZ1xuICAgICAgICBTRUNUSU9OX0hFQURFUjogMjgsICAgIC8vIFNlY29uZGFyeSBoZWFkaW5nc1xuICAgICAgICBNQUlOX0NPTlRFTlQ6IDE2LCAgICAgIC8vIEJvZHkgdGV4dFxuICAgICAgICBJTlNUUlVDVElPTlM6IDE1LCAgICAgIC8vIEd1aWRhbmNlIHRleHRcbiAgICAgICAgU1VQUExFTUVOVEFSWTogMTQgICAgICAvLyBBbnN3ZXIga2V5cywgZXhwbGFuYXRpb25zXG4gICAgICB9XG5cbiAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdGV4dCB3aXRoIHdvcmQgd3JhcHBpbmdcbiAgICAgIGNvbnN0IGFkZFRleHQgPSAodGV4dDogc3RyaW5nLCBmb250U2l6ZSA9IEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBpc0JvbGQgPSBmYWxzZSwgaXNJdGFsaWMgPSBmYWxzZSwgaW5kZW50ID0gMCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFNhbml0aXplIHRleHQgdG8gcHJldmVudCBQREYgZXJyb3JzIGFuZCBzdHJpcCBtYXJrZG93biBmb3JtYXR0aW5nXG4gICAgICAgICAgY29uc3Qgc2FuaXRpemVkVGV4dCA9IHRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnJDEnKSAvLyBSZW1vdmUgYm9sZCBtYXJrZG93biAoKip0ZXh0KiopXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJyQxJykgLy8gUmVtb3ZlIGl0YWxpYyBtYXJrZG93biAoKnRleHQqKVxuICAgICAgICAgICAgLnJlcGxhY2UoL19fKC4qPylfXy9nLCAnJDEnKSAvLyBSZW1vdmUgYm9sZCBtYXJrZG93biAoX190ZXh0X18pXG4gICAgICAgICAgICAucmVwbGFjZSgvXyguKj8pXy9nLCAnJDEnKSAvLyBSZW1vdmUgaXRhbGljIG1hcmtkb3duIChfdGV4dF8pXG4gICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAwMDAtXFx1MDAxRlxcdTAwN0YtXFx1MDA5Rl0vZywgJycpIC8vIFJlbW92ZSBjb250cm9sIGNoYXJhY3RlcnNcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MjAwMC1cXHUyMDZGXFx1MkUwMC1cXHUyRTdGXFx1MzAwMC1cXHUzMDNGXS9nLCAnICcpIC8vIFJlcGxhY2Ugc3BlY2lhbCBzcGFjZXNcbiAgICAgICAgICAgIC50cmltKClcblxuICAgICAgICAgIGlmICghc2FuaXRpemVkVGV4dCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFbXB0eSB0ZXh0IGFmdGVyIHNhbml0aXphdGlvbiwgc2tpcHBpbmcnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coYEFkZGluZyB0ZXh0OiBcIiR7c2FuaXRpemVkVGV4dC5zdWJzdHJpbmcoMCwgNTApfSR7c2FuaXRpemVkVGV4dC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9XCJgKVxuXG4gICAgICAgICAgcGRmLnNldEZvbnRTaXplKGZvbnRTaXplKVxuICAgICAgICAgIC8vIFNldCBmb250IHN0eWxlIGJhc2VkIG9uIGJvbGQgYW5kIGl0YWxpYyBmbGFnc1xuICAgICAgICAgIGxldCBmb250U3R5bGUgPSBcIm5vcm1hbFwiXG4gICAgICAgICAgaWYgKGlzQm9sZCAmJiBpc0l0YWxpYykge1xuICAgICAgICAgICAgZm9udFN0eWxlID0gXCJib2xkaXRhbGljXCJcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzQm9sZCkge1xuICAgICAgICAgICAgZm9udFN0eWxlID0gXCJib2xkXCJcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzSXRhbGljKSB7XG4gICAgICAgICAgICBmb250U3R5bGUgPSBcIml0YWxpY1wiXG4gICAgICAgICAgfVxuICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIGZvbnRTdHlsZSlcblxuICAgICAgICAgIGNvbnN0IG1heFdpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIGluZGVudFxuICAgICAgICAgIGNvbnN0IGxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShzYW5pdGl6ZWRUZXh0LCBtYXhXaWR0aClcblxuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSAzMCkge1xuICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyBpbmRlbnQsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICAgIHlQb3NpdGlvbiArPSAzIC8vIEV4dHJhIHNwYWNpbmcgYWZ0ZXIgdGV4dCBibG9ja1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyB0ZXh0IHRvIFBERjonLCBlcnJvciwgJ1RleHQ6JywgdGV4dClcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFkZFNlY3Rpb24gPSAodGl0bGU6IHN0cmluZywgY29udGVudDogKCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICBpZiAoeVBvc2l0aW9uID4gcGFnZUhlaWdodCAtIDUwKSB7XG4gICAgICAgICAgcGRmLmFkZFBhZ2UoKVxuICAgICAgICAgIHlQb3NpdGlvbiA9IDIwXG4gICAgICAgIH1cbiAgICAgICAgYWRkVGV4dCh0aXRsZSwgRk9OVF9TSVpFUy5TRUNUSU9OX0hFQURFUiwgdHJ1ZSlcbiAgICAgICAgeVBvc2l0aW9uICs9IDVcbiAgICAgICAgY29udGVudCgpXG4gICAgICAgIHlQb3NpdGlvbiArPSAxMFxuICAgICAgfVxuXG4gICAgICAvLyBUaXRsZSBhbmQgbWV0YWRhdGFcbiAgICAgIGFkZFRleHQobGVzc29uRGF0YS5sZXNzb25UaXRsZSwgRk9OVF9TSVpFUy5MRVNTT05fVElUTEUsIHRydWUpXG4gICAgICBhZGRUZXh0KFxuICAgICAgICBgVGFyZ2V0IExhbmd1YWdlOiAke2xlc3NvbkRhdGEudGFyZ2V0TGFuZ3VhZ2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlLnNsaWNlKDEpfWAsXG4gICAgICAgIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgIClcbiAgICAgIGFkZFRleHQoYEdlbmVyYXRlZCBvbjogJHt0aGlzLmZvcm1hdERhdGUoKX1gLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlkpXG4gICAgICB5UG9zaXRpb24gKz0gMTBcblxuICAgICAgLy8gQWRkIHNlY3Rpb25zIGJhc2VkIG9uIGVuYWJsZWQgc3RhdGVcbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMud2FybXVwICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMud2FybXVwKSB7XG4gICAgICAgIGFkZFNlY3Rpb24oXCJXYXJtLXVwIFF1ZXN0aW9uc1wiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgd2FybXVwUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLndhcm11cCkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLndhcm11cCA6IFtdXG4gICAgICAgICAgd2FybXVwUXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kIChpdGFsaWMpIC0gbWFudWFsIHJlbmRlcmluZ1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHF1ZXN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gdGV4dFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5zdHJ1Y3Rpb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gOCAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIGluc3RydWN0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMudm9jYWJ1bGFyeSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIktleSBWb2NhYnVsYXJ5XCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCB2b2NhYnVsYXJ5SXRlbXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMudm9jYWJ1bGFyeSkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkgOiBbXVxuICAgICAgICAgIGxldCB2b2NhYkluZGV4ID0gMCAvLyBUcmFjayBhY3R1YWwgdm9jYWJ1bGFyeSBpdGVtIG51bWJlcmluZ1xuICAgICAgICAgIHZvY2FidWxhcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gRmlyc3QgaXRlbSBtaWdodCBiZSBhbiBpbnN0cnVjdGlvblxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwICYmIGl0ZW0ud29yZCA9PT0gXCJJTlNUUlVDVElPTlwiKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjQxLCAyNTAsIDI1NSkgLy8gI0YxRkFGRlxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGl0ZW0ubWVhbmluZywgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdm9jYWJJbmRleCsrXG4gICAgICAgICAgICBhZGRUZXh0KGAke3ZvY2FiSW5kZXh9LiAke2l0ZW0ud29yZH1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgYWRkVGV4dChgICAgTWVhbmluZzogJHtpdGVtLm1lYW5pbmd9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTUpXG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBib3RoIG9sZCBmb3JtYXQgKGV4YW1wbGUpIGFuZCBuZXcgZm9ybWF0IChleGFtcGxlcyBhcnJheSlcbiAgICAgICAgICAgIGlmIChpdGVtLmV4YW1wbGVzICYmIEFycmF5LmlzQXJyYXkoaXRlbS5leGFtcGxlcykgJiYgaXRlbS5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGFkZFRleHQoYCAgIEV4YW1wbGVzOmAsIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCB0cnVlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzID0gQXJyYXkuaXNBcnJheShpdGVtLmV4YW1wbGVzKSA/IGl0ZW0uZXhhbXBsZXMgOiBbXVxuICAgICAgICAgICAgICBleGFtcGxlcy5mb3JFYWNoKChleGFtcGxlLCBleEluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkVGV4dChgICAgJHtleEluZGV4ICsgMX0uIFwiJHtleGFtcGxlfVwiYCwgRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLCBmYWxzZSwgZmFsc2UsIDIwKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmV4YW1wbGUpIHtcbiAgICAgICAgICAgICAgYWRkVGV4dChgICAgRXhhbXBsZTogXCIke2l0ZW0uZXhhbXBsZX1cImAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAxNSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5yZWFkaW5nICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZykge1xuICAgICAgICBhZGRTZWN0aW9uKFwiUmVhZGluZyBQYXNzYWdlXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZWFkaW5nQ29udGVudCA9IGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZ1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gcmVhZGluZ0NvbnRlbnQuc3BsaXQoJ1xcblxcbicpXG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBmaXJzdCBwYXJ0IGlzIGFuIGluc3RydWN0aW9uXG4gICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ1JlYWQgdGhlIGZvbGxvd2luZyB0ZXh0IGNhcmVmdWxseScpKSB7XG4gICAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kIChpdGFsaWMpIC0gbWFudWFsIHJlbmRlcmluZ1xuICAgICAgICAgICAgcGRmLnNldEZpbGxDb2xvcigyMzgsIDI0NywgMjIwKSAvLyAjRUVGN0RDXG4gICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShwYXJ0c1swXSwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uSGVpZ2h0ID0gaW5zdHJ1Y3Rpb25MaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0ICsgNlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgaW5zdHJ1Y3Rpb25XaWR0aCwgaW5zdHJ1Y3Rpb25IZWlnaHQsICdGJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gOCAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIGluc3RydWN0aW9uXG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVzdCBvZiB0aGUgcmVhZGluZyBwYXNzYWdlXG4gICAgICAgICAgICBhZGRUZXh0KHBhcnRzLnNsaWNlKDEpLmpvaW4oJ1xcblxcbicpLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gaW5zdHJ1Y3Rpb24sIGRpc3BsYXkgYXMgYmVmb3JlXG4gICAgICAgICAgICBhZGRUZXh0KHJlYWRpbmdDb250ZW50LCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuY29tcHJlaGVuc2lvbiAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24pIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIlJlYWRpbmcgQ29tcHJlaGVuc2lvblwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY29tcHJlaGVuc2lvblF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbiA6IFtdXG4gICAgICAgICAgY29tcHJlaGVuc2lvblF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gaXMgdGhlIGluc3RydWN0aW9uIHdpdGggbGlnaHQgYmx1ZSBiYWNrZ3JvdW5kIChpdGFsaWMpIC0gbWFudWFsIHJlbmRlcmluZ1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjQxLCAyNTAsIDI1NSkgLy8gI0YxRkFGRlxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHF1ZXN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gdGV4dFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5zdHJ1Y3Rpb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gOCAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIGluc3RydWN0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlzY3Vzc2lvbiAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24pIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkRpc2N1c3Npb24gUXVlc3Rpb25zXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkaXNjdXNzaW9uUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24pID8gbGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uIDogW11cbiAgICAgICAgICBkaXNjdXNzaW9uUXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gRmlyc3QgaXRlbSBpcyB0aGUgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBncmVlbiBiYWNrZ3JvdW5kIChpdGFsaWMpIC0gbWFudWFsIHJlbmRlcmluZ1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiaXRhbGljXCIpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uTGluZXMgPSBwZGYuc3BsaXRUZXh0VG9TaXplKHF1ZXN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkhlaWdodCA9IGluc3RydWN0aW9uTGluZXMubGVuZ3RoICogbGluZUhlaWdodCArIDZcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICAgICAgcGRmLnJlY3QobWFyZ2luICsgMTAsIHlQb3NpdGlvbiAtIDQsIGluc3RydWN0aW9uV2lkdGgsIGluc3RydWN0aW9uSGVpZ2h0LCAnRicpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gdGV4dFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5zdHJ1Y3Rpb25MaW5lcykge1xuICAgICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gOCAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIGluc3RydWN0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlhbG9ndWVQcmFjdGljZSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkRpYWxvZ3VlIFByYWN0aWNlXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZVNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UhXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCBjb2xvciAoaXRhbGljKSAtIG1hbnVhbGx5IHdpdGhvdXQgYWRkVGV4dFxuICAgICAgICAgIHBkZi5zZXRGaWxsQ29sb3IoMjM4LCAyNDcsIDIyMCkgLy8gI0VFRjdEQ1xuICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLklOU1RSVUNUSU9OUylcbiAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uV2lkdGggPSBwZGYuaW50ZXJuYWwucGFnZVNpemUud2lkdGggLSBtYXJnaW4gKiAyIC0gMTBcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uV2lkdGgpXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB0ZXh0XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgIHBkZi50ZXh0KGxpbmUsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgICB5UG9zaXRpb24gKz0gOCAvLyBFeHRyYSBzcGFjaW5nIGFmdGVyIGluc3RydWN0aW9uIGJlZm9yZSBkaWFsb2d1ZSBzdGFydHNcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFbmhhbmNlIGRpYWxvZ3VlIHdpdGggYXZhdGFyIG5hbWVzXG4gICAgICAgICAgY29uc3QgZW5oYW5jZWREaWFsb2d1ZSA9IGVuaGFuY2VEaWFsb2d1ZVdpdGhBdmF0YXJzKFxuICAgICAgICAgICAgZGlhbG9ndWVTZWN0aW9uLmRpYWxvZ3VlLFxuICAgICAgICAgICAgbGVzc29uRGF0YS5pZCxcbiAgICAgICAgICAgICdkaWFsb2d1ZVByYWN0aWNlJ1xuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXMgYW5kIHNwYWNpbmdcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZVByYWN0aWNlTGluZXMgPSBBcnJheS5pc0FycmF5KGVuaGFuY2VkRGlhbG9ndWUpID8gZW5oYW5jZWREaWFsb2d1ZSA6IFtdXG4gICAgICAgICAgZGlhbG9ndWVQcmFjdGljZUxpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBBZGQgM3B4IGdhcCBiZXR3ZWVuIGRpYWxvZ3VlIGxpbmVzIChleGNlcHQgZmlyc3QpXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoYXJhY3RlciBuYW1lIGluIGJvbGQsIHRoZW4gbGluZVxuICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuTUFJTl9DT05URU5UKVxuICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJib2xkXCIpXG4gICAgICAgICAgICBjb25zdCBjaGFyV2lkdGggPSBwZGYuZ2V0VGV4dFdpZHRoKGAke2xpbmUuY2hhcmFjdGVyfTogYClcbiAgICAgICAgICAgIHBkZi50ZXh0KGAke2xpbmUuY2hhcmFjdGVyfTogYCwgbWFyZ2luICsgMTAsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJub3JtYWxcIilcbiAgICAgICAgICAgIGNvbnN0IG1heFdpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwIC0gY2hhcldpZHRoXG4gICAgICAgICAgICBjb25zdCBsaW5lVGV4dCA9IHBkZi5zcGxpdFRleHRUb1NpemUobGluZS5saW5lLCBtYXhXaWR0aClcbiAgICAgICAgICAgIHBkZi50ZXh0KGxpbmVUZXh0WzBdLCBtYXJnaW4gKyAxMCArIGNoYXJXaWR0aCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFuZGxlIHdyYXBwZWQgbGluZXNcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGluZVRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHlQb3NpdGlvbiA+IHBhZ2VIZWlnaHQgLSAzMCkge1xuICAgICAgICAgICAgICAgIHBkZi5hZGRQYWdlKClcbiAgICAgICAgICAgICAgICB5UG9zaXRpb24gPSAyMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBkZi50ZXh0KGxpbmVUZXh0W2ldLCBtYXJnaW4gKyAxMCArIGNoYXJXaWR0aCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gbGluZUhlaWdodFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucyAmJiBkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgeVBvc2l0aW9uICs9IDVcbiAgICAgICAgICAgIGFkZFRleHQoXCJGb2xsb3ctdXAgUXVlc3Rpb25zOlwiLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgY29uc3QgZm9sbG93VXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucykgPyBkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgOiBbXVxuICAgICAgICAgICAgZm9sbG93VXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGFkZFRleHQoYCR7aW5kZXggKyAxfS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxNSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcCAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcCkge1xuICAgICAgICBhZGRTZWN0aW9uKFwiRGlhbG9ndWUgRmlsbC1pbi10aGUtR2FwXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZVNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcCFcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gd2l0aCBsaWdodCBibHVlIGJhY2tncm91bmQgY29sb3IgKGl0YWxpYykgLSBtYW51YWxseSB3aXRob3V0IGFkZFRleHRcbiAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDI0MSwgMjUwLCAyNTUpIC8vICNGMUZBRkZcbiAgICAgICAgICBwZGYuc2V0Rm9udFNpemUoRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMpXG4gICAgICAgICAgcGRmLnNldEZvbnQoXCJoZWx2ZXRpY2FcIiwgXCJpdGFsaWNcIilcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbldpZHRoID0gcGRmLmludGVybmFsLnBhZ2VTaXplLndpZHRoIC0gbWFyZ2luICogMiAtIDEwXG4gICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25MaW5lcyA9IHBkZi5zcGxpdFRleHRUb1NpemUoZGlhbG9ndWVTZWN0aW9uLmluc3RydWN0aW9uLCBpbnN0cnVjdGlvbldpZHRoKVxuICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uSGVpZ2h0ID0gaW5zdHJ1Y3Rpb25MaW5lcy5sZW5ndGggKiBsaW5lSGVpZ2h0ICsgNlxuICAgICAgICAgIFxuICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgICBwZGYucmVjdChtYXJnaW4gKyAxMCwgeVBvc2l0aW9uIC0gNCwgaW5zdHJ1Y3Rpb25XaWR0aCwgaW5zdHJ1Y3Rpb25IZWlnaHQsICdGJylcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgaW5zdHJ1Y3Rpb24gdGV4dFxuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnN0cnVjdGlvbkxpbmVzKSB7XG4gICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvbiBiZWZvcmUgZGlhbG9ndWUgc3RhcnRzXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW5oYW5jZSBkaWFsb2d1ZSB3aXRoIGF2YXRhciBuYW1lc1xuICAgICAgICAgIGNvbnN0IGVuaGFuY2VkRGlhbG9ndWUgPSBlbmhhbmNlRGlhbG9ndWVXaXRoQXZhdGFycyhcbiAgICAgICAgICAgIGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSxcbiAgICAgICAgICAgIGxlc3NvbkRhdGEuaWQsXG4gICAgICAgICAgICAnZGlhbG9ndWVGaWxsR2FwJ1xuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXMgYW5kIHNwYWNpbmdcbiAgICAgICAgICBjb25zdCBkaWFsb2d1ZUZpbGxHYXBMaW5lcyA9IEFycmF5LmlzQXJyYXkoZW5oYW5jZWREaWFsb2d1ZSkgPyBlbmhhbmNlZERpYWxvZ3VlIDogW11cbiAgICAgICAgICBkaWFsb2d1ZUZpbGxHYXBMaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gQWRkIDNweCBnYXAgYmV0d2VlbiBkaWFsb2d1ZSBsaW5lcyAoZXhjZXB0IGZpcnN0KVxuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICB5UG9zaXRpb24gKz0gM1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGFyYWN0ZXIgbmFtZSBpbiBib2xkLCB0aGVuIGxpbmVcbiAgICAgICAgICAgIHBkZi5zZXRGb250U2l6ZShGT05UX1NJWkVTLk1BSU5fQ09OVEVOVClcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwiYm9sZFwiKVxuICAgICAgICAgICAgY29uc3QgY2hhcldpZHRoID0gcGRmLmdldFRleHRXaWR0aChgJHtsaW5lLmNoYXJhY3Rlcn06IGApXG4gICAgICAgICAgICBwZGYudGV4dChgJHtsaW5lLmNoYXJhY3Rlcn06IGAsIG1hcmdpbiArIDEwLCB5UG9zaXRpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBkZi5zZXRGb250KFwiaGVsdmV0aWNhXCIsIFwibm9ybWFsXCIpXG4gICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMCAtIGNoYXJXaWR0aFxuICAgICAgICAgICAgY29uc3QgbGluZVRleHQgPSBwZGYuc3BsaXRUZXh0VG9TaXplKGxpbmUubGluZSwgbWF4V2lkdGgpXG4gICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFswXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSB3cmFwcGVkIGxpbmVzXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVUZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh5UG9zaXRpb24gPiBwYWdlSGVpZ2h0IC0gMzApIHtcbiAgICAgICAgICAgICAgICBwZGYuYWRkUGFnZSgpXG4gICAgICAgICAgICAgICAgeVBvc2l0aW9uID0gMjBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwZGYudGV4dChsaW5lVGV4dFtpXSwgbWFyZ2luICsgMTAgKyBjaGFyV2lkdGgsIHlQb3NpdGlvbilcbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IGxpbmVIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkaWFsb2d1ZVNlY3Rpb24uYW5zd2VycyAmJiBkaWFsb2d1ZVNlY3Rpb24uYW5zd2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB5UG9zaXRpb24gKz0gNVxuICAgICAgICAgICAgYWRkVGV4dChcIkFuc3dlciBLZXk6XCIsIEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLCB0cnVlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICBhZGRUZXh0KGRpYWxvZ3VlU2VjdGlvbi5hbnN3ZXJzLmpvaW4oJywgJyksIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAxNSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZ3JhbW1hciAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIpIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkdyYW1tYXIgRm9jdXNcIiwgKCkgPT4ge1xuICAgICAgICAgIGFkZFRleHQoYEZvY3VzOiAke2xlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5mb2N1c31gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgYWRkVGV4dChcIkV4YW1wbGVzOlwiLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgIGNvbnN0IGdyYW1tYXJFeGFtcGxlcyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4YW1wbGVzKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGFtcGxlcyA6IFtdXG4gICAgICAgICAgZ3JhbW1hckV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhZGRUZXh0KGDigKIgJHtleGFtcGxlfWAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAxNSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIHlQb3NpdGlvbiArPSAzXG4gICAgICAgICAgYWRkVGV4dChcIlByYWN0aWNlIEV4ZXJjaXNlOlwiLCBGT05UX1NJWkVTLklOU1RSVUNUSU9OUywgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgIGNvbnN0IGdyYW1tYXJFeGVyY2lzZXMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuZ3JhbW1hci5leGVyY2lzZSkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2UgOiBbXVxuICAgICAgICAgIGdyYW1tYXJFeGVyY2lzZXMuZm9yRWFjaCgoZXhlcmNpc2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4ICsgMX0uICR7ZXhlcmNpc2V9YCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5wcm9udW5jaWF0aW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbikge1xuICAgICAgICBhZGRTZWN0aW9uKFwiUHJvbnVuY2lhdGlvbiBQcmFjdGljZVwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJvblNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLnByb251bmNpYXRpb25cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYW5kbGUgYm90aCBvbGQgZm9ybWF0IChzaW5nbGUgd29yZCkgYW5kIG5ldyBmb3JtYXQgKHdvcmRzIGFycmF5KVxuICAgICAgICAgIGlmIChwcm9uU2VjdGlvbi53b3JkcyAmJiBBcnJheS5pc0FycmF5KHByb25TZWN0aW9uLndvcmRzKSAmJiBwcm9uU2VjdGlvbi53b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBOZXcgZm9ybWF0IHdpdGggbXVsdGlwbGUgd29yZHNcbiAgICAgICAgICAgIHByb25TZWN0aW9uLndvcmRzLmZvckVhY2goKHdvcmRJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB5UG9zaXRpb24gKz0gNSAvLyBTcGFjaW5nIGJldHdlZW4gd29yZHNcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGFkZFRleHQoYFdvcmQ6ICR7d29yZEl0ZW0ud29yZCB8fCAnTi9BJ31gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgdHJ1ZSwgZmFsc2UsIDEwKVxuICAgICAgICAgICAgICBhZGRUZXh0KGBJUEE6ICR7d29yZEl0ZW0uaXBhIHx8ICdOL0EnfWAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICh3b3JkSXRlbS5wcmFjdGljZVNlbnRlbmNlKSB7XG4gICAgICAgICAgICAgICAgYWRkVGV4dChgUHJhY3RpY2U6IFwiJHt3b3JkSXRlbS5wcmFjdGljZVNlbnRlbmNlfVwiYCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICh3b3JkSXRlbS50aXBzICYmIHdvcmRJdGVtLnRpcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFkZFRleHQoYFRpcHM6YCwgRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsIHRydWUsIGZhbHNlLCAxMClcbiAgICAgICAgICAgICAgICB3b3JkSXRlbS50aXBzLmZvckVhY2godGlwID0+IHtcbiAgICAgICAgICAgICAgICAgIGFkZFRleHQoYOKAoiAke3RpcH1gLCBGT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksIGZhbHNlLCBmYWxzZSwgMTUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKHByb25TZWN0aW9uLndvcmQpIHtcbiAgICAgICAgICAgIC8vIE9sZCBmb3JtYXQgd2l0aCBzaW5nbGUgd29yZFxuICAgICAgICAgICAgYWRkVGV4dChgV29yZDogJHtwcm9uU2VjdGlvbi53b3JkIHx8ICdOL0EnfWAsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCB0cnVlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICBhZGRUZXh0KGBJUEE6ICR7cHJvblNlY3Rpb24uaXBhIHx8ICdOL0EnfWAsIEZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIGlmIChwcm9uU2VjdGlvbi5wcmFjdGljZSkge1xuICAgICAgICAgICAgICBhZGRUZXh0KGBQcmFjdGljZTogXCIke3Byb25TZWN0aW9uLnByYWN0aWNlfVwiYCwgRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsIGZhbHNlLCBmYWxzZSwgMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZFRleHQoXCJObyBwcm9udW5jaWF0aW9uIGRhdGEgYXZhaWxhYmxlXCIsIEZPTlRfU0laRVMuTUFJTl9DT05URU5ULCBmYWxzZSwgZmFsc2UsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy53cmFwdXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy53cmFwdXApIHtcbiAgICAgICAgYWRkU2VjdGlvbihcIkxlc3NvbiBXcmFwLXVwXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCB3cmFwdXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwIDogW11cbiAgICAgICAgICB3cmFwdXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiAtIG1hbnVhbCByZW5kZXJpbmcgKG5vIG51bWJlcmluZylcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBwZGYuc2V0RmlsbENvbG9yKDIzOCwgMjQ3LCAyMjApIC8vICNFRUY3RENcbiAgICAgICAgICAgICAgcGRmLnNldEZvbnRTaXplKEZPTlRfU0laRVMuSU5TVFJVQ1RJT05TKVxuICAgICAgICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIml0YWxpY1wiKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25XaWR0aCA9IHBkZi5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aCAtIG1hcmdpbiAqIDIgLSAxMFxuICAgICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbkxpbmVzID0gcGRmLnNwbGl0VGV4dFRvU2l6ZShxdWVzdGlvbiwgaW5zdHJ1Y3Rpb25XaWR0aClcbiAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25IZWlnaHQgPSBpbnN0cnVjdGlvbkxpbmVzLmxlbmd0aCAqIGxpbmVIZWlnaHQgKyA2XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgIHBkZi5yZWN0KG1hcmdpbiArIDEwLCB5UG9zaXRpb24gLSA0LCBpbnN0cnVjdGlvbldpZHRoLCBpbnN0cnVjdGlvbkhlaWdodCwgJ0YnKVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHRleHRcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGluc3RydWN0aW9uTGluZXMpIHtcbiAgICAgICAgICAgICAgICBwZGYudGV4dChsaW5lLCBtYXJnaW4gKyAxMCwgeVBvc2l0aW9uKVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSBsaW5lSGVpZ2h0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgeVBvc2l0aW9uICs9IDggLy8gRXh0cmEgc3BhY2luZyBhZnRlciBpbnN0cnVjdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgICBhZGRUZXh0KGAke2luZGV4fS4gJHtxdWVzdGlvbn1gLCBGT05UX1NJWkVTLk1BSU5fQ09OVEVOVCwgZmFsc2UsIGZhbHNlLCAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBGb290ZXJcbiAgICAgIGNvbnN0IHBhZ2VDb3VudCA9IChwZGYgYXMgYW55KS5pbnRlcm5hbC5nZXROdW1iZXJPZlBhZ2VzKClcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHBhZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgIHBkZi5zZXRQYWdlKGkpXG4gICAgICAgIHBkZi5zZXRGb250U2l6ZSg4KVxuICAgICAgICBwZGYuc2V0Rm9udChcImhlbHZldGljYVwiLCBcIm5vcm1hbFwiKVxuICAgICAgICBwZGYudGV4dChgR2VuZXJhdGVkIGJ5IExpbmd1YVNwYXJrIC0gUGFnZSAke2l9IG9mICR7cGFnZUNvdW50fWAsIG1hcmdpbiwgcGFnZUhlaWdodCAtIDEwKVxuICAgICAgfVxuXG4gICAgICAvLyBEb3dubG9hZCB0aGUgUERGXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2xlc3NvbkRhdGEubGVzc29uVHlwZX0tbGVzc29uLSR7bGVzc29uRGF0YS5zdHVkZW50TGV2ZWx9LSR7RGF0ZS5ub3coKX0ucGRmYFxuICAgICAgICBjb25zb2xlLmxvZygnU2F2aW5nIFBERiB3aXRoIGZpbGVuYW1lOicsIGZpbGVOYW1lKVxuICAgICAgICBwZGYuc2F2ZShmaWxlTmFtZSlcbiAgICAgICAgY29uc29sZS5sb2coJ1BERiBleHBvcnQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpXG4gICAgICB9IGNhdGNoIChzYXZlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIFBERjonLCBzYXZlRXJyb3IpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgUERGOiAke3NhdmVFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gc2F2ZUVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBzYXZlIGVycm9yJ31gKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQREYgZXhwb3J0IGVycm9yOicsIGVycm9yKVxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhY2s6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogJ05vIHN0YWNrIHRyYWNlJylcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6Jywge1xuICAgICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIGxlc3NvbkRhdGFLZXlzOiBsZXNzb25EYXRhID8gT2JqZWN0LmtleXMobGVzc29uRGF0YSkgOiAnTm8gbGVzc29uIGRhdGEnLFxuICAgICAgICBzZWN0aW9uc0tleXM6IGxlc3NvbkRhdGE/LnNlY3Rpb25zID8gT2JqZWN0LmtleXMobGVzc29uRGF0YS5zZWN0aW9ucykgOiAnTm8gc2VjdGlvbnMnLFxuICAgICAgICBlbmFibGVkU2VjdGlvbnNLZXlzOiBlbmFibGVkU2VjdGlvbnMgPyBPYmplY3Qua2V5cyhlbmFibGVkU2VjdGlvbnMpIDogJ05vIGVuYWJsZWQgc2VjdGlvbnMnXG4gICAgICB9KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQREYgZXhwb3J0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGV4cG9ydFRvV29yZChsZXNzb25EYXRhOiBMZXNzb25EYXRhLCBlbmFibGVkU2VjdGlvbnM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBXb3JkIGV4cG9ydCB3aXRoIGRhdGE6JywgeyBsZXNzb25EYXRhLCBlbmFibGVkU2VjdGlvbnMgfSlcbiAgICAgIHRoaXMudmFsaWRhdGVMZXNzb25EYXRhKGxlc3NvbkRhdGEpXG5cbiAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBmb3IgZW5hYmxlZCBzZWN0aW9uc1xuICAgICAgaWYgKCFlbmFibGVkU2VjdGlvbnMgfHwgT2JqZWN0LmtleXMoZW5hYmxlZFNlY3Rpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZWN0aW9ucyBlbmFibGVkIGZvciBleHBvcnQnKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZHJlbjogYW55W10gPSBbXVxuXG4gICAgICAvLyBUeXBvZ3JhcGh5IGhpZXJhcmNoeSBjb25zdGFudHMgKGluIGhhbGYtcG9pbnRzIGZvciBXb3JkIC0gbXVsdGlwbHkgYnkgMilcbiAgICAgIC8vIDMycHggPSAyNHB0LCAyOHB4ID0gMjFwdCwgMTZweCA9IDEycHQsIDE1cHggPSAxMS4yNXB0LCAxNHB4ID0gMTAuNXB0XG4gICAgICBjb25zdCBXT1JEX0ZPTlRfU0laRVMgPSB7XG4gICAgICAgIExFU1NPTl9USVRMRTogNDgsICAgICAgLy8gMjRwdCAoMzJweCBlcXVpdmFsZW50KVxuICAgICAgICBTRUNUSU9OX0hFQURFUjogNDIsICAgIC8vIDIxcHQgKDI4cHggZXF1aXZhbGVudCkgIFxuICAgICAgICBNQUlOX0NPTlRFTlQ6IDI0LCAgICAgIC8vIDEycHQgKDE2cHggZXF1aXZhbGVudClcbiAgICAgICAgSU5TVFJVQ1RJT05TOiAyMywgICAgICAvLyAxMS41cHQgKDE1cHggZXF1aXZhbGVudClcbiAgICAgICAgU1VQUExFTUVOVEFSWTogMjEgICAgICAvLyAxMC41cHQgKDE0cHggZXF1aXZhbGVudClcbiAgICAgIH1cblxuICAgICAgLy8gVGl0bGUgYW5kIG1ldGFkYXRhXG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihsZXNzb25EYXRhLmxlc3NvblRpdGxlKSxcbiAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLkxFU1NPTl9USVRMRSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgaGVhZGluZzogSGVhZGluZ0xldmVsLlRJVExFLFxuICAgICAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsXG4gICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogNDAwIH0sXG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICB0ZXh0OiBgVGFyZ2V0IExhbmd1YWdlOiAke2xlc3NvbkRhdGEudGFyZ2V0TGFuZ3VhZ2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsZXNzb25EYXRhLnRhcmdldExhbmd1YWdlLnNsaWNlKDEpfWAsXG4gICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgfSksXG4gICAgICApXG5cbiAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgIHRleHQ6IGBHZW5lcmF0ZWQgb246ICR7dGhpcy5mb3JtYXREYXRlKCl9YCxcbiAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDQwMCB9LFxuICAgICAgICB9KSxcbiAgICAgIClcblxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCBzZWN0aW9uXG4gICAgICBjb25zdCBhZGRTZWN0aW9uID0gKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IGFueVtdKSA9PiB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogdGl0bGUsXG4gICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU0VDVElPTl9IRUFERVIsXG4gICAgICAgICAgICAgICAgdW5kZXJsaW5lOiB7IHR5cGU6IFVuZGVybGluZVR5cGUuU0lOR0xFIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGhlYWRpbmc6IEhlYWRpbmdMZXZlbC5IRUFESU5HXzIsXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogNDAwLCBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgY2hpbGRyZW4ucHVzaCguLi5jb250ZW50KVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc2VjdGlvbnMgYmFzZWQgb24gZW5hYmxlZCBzdGF0ZVxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy53YXJtdXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy53YXJtdXApIHtcbiAgICAgICAgY29uc3Qgd2FybXVwUXVlc3Rpb25zID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLndhcm11cCkgPyBsZXNzb25EYXRhLnNlY3Rpb25zLndhcm11cCA6IFtdXG4gICAgICAgIGNvbnN0IHdhcm11cENvbnRlbnQgPSB3YXJtdXBRdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihxdWVzdGlvbiksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXN0IGFyZSBhY3R1YWwgcXVlc3Rpb25zIChyZW51bWJlciBzdGFydGluZyBmcm9tIDEpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oYCR7aW5kZXh9LiAke3F1ZXN0aW9ufWApLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTUwIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYWRkU2VjdGlvbihcIldhcm0tdXAgUXVlc3Rpb25zXCIsIHdhcm11cENvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMudm9jYWJ1bGFyeSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLnZvY2FidWxhcnkpIHtcbiAgICAgICAgY29uc3Qgdm9jYWJDb250ZW50OiBhbnlbXSA9IFtdXG4gICAgICAgIGNvbnN0IHZvY2FidWxhcnlJdGVtcyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy52b2NhYnVsYXJ5KSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMudm9jYWJ1bGFyeSA6IFtdXG4gICAgICAgIHZvY2FidWxhcnlJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gbWlnaHQgYmUgYW4gaW5zdHJ1Y3Rpb25cbiAgICAgICAgICBpZiAoaW5kZXggPT09IDAgJiYgaXRlbS53b3JkID09PSBcIklOU1RSVUNUSU9OXCIpIHtcbiAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihpdGVtLm1lYW5pbmcpLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgICAgICBmaWxsOiBcIkYxRkFGRlwiLCAvLyBMaWdodCBibHVlIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtpbmRleCArIDF9LiAke3NhZmVTdHJpcE1hcmtkb3duKGl0ZW0ud29yZCl9YCxcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGAgICBNZWFuaW5nOiAke3NhZmVTdHJpcE1hcmtkb3duKGl0ZW0ubWVhbmluZyl9YCxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIGZvcm1hdCAoZXhhbXBsZSkgYW5kIG5ldyBmb3JtYXQgKGV4YW1wbGVzIGFycmF5KVxuICAgICAgICAgIGlmIChpdGVtLmV4YW1wbGVzICYmIEFycmF5LmlzQXJyYXkoaXRlbS5leGFtcGxlcykgJiYgaXRlbS5leGFtcGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2b2NhYkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCAgIEV4YW1wbGVzOmAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgc2FmZXR5IGNoZWNrIGJlZm9yZSBmb3JFYWNoXG4gICAgICAgICAgICBjb25zdCBleGFtcGxlcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5leGFtcGxlcykgPyBpdGVtLmV4YW1wbGVzIDogW11cbiAgICAgICAgICAgIGV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUsIGV4SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogYCAgICAgICR7ZXhJbmRleCArIDF9LiBcIiR7c2FmZVN0cmlwTWFya2Rvd24oZXhhbXBsZSl9XCJgLFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdm9jYWJDb250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbbmV3IFRleHRSdW4oeyB0ZXh0OiBcIlwiIH0pXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmV4YW1wbGUpIHtcbiAgICAgICAgICAgIHZvY2FiQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgICAgRXhhbXBsZTogXCIke3NhZmVTdHJpcE1hcmtkb3duKGl0ZW0uZXhhbXBsZSl9XCJgLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYWRkU2VjdGlvbihcIktleSBWb2NhYnVsYXJ5XCIsIHZvY2FiQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5yZWFkaW5nICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZykge1xuICAgICAgICBjb25zdCByZWFkaW5nVGV4dCA9IGxlc3NvbkRhdGEuc2VjdGlvbnMucmVhZGluZ1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHJlYWRpbmdUZXh0LnNwbGl0KCdcXG5cXG4nKVxuICAgICAgICBjb25zdCByZWFkaW5nQ29udGVudDogYW55W10gPSBbXVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGZpcnN0IHBhcnQgaXMgYW4gaW5zdHJ1Y3Rpb25cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ1JlYWQgdGhlIGZvbGxvd2luZyB0ZXh0IGNhcmVmdWxseScpKSB7XG4gICAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgIHJlYWRpbmdDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihwYXJ0c1swXSksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIkVFRjdEQ1wiLCAvLyBMaWdodCBncmVlbiBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogNixcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG5cbiAgICAgICAgICAvLyBBZGQgdGhlIHJlc3Qgb2YgdGhlIHJlYWRpbmcgcGFzc2FnZVxuICAgICAgICAgIHJlYWRpbmdDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihwYXJ0cy5zbGljZSgxKS5qb2luKCdcXG5cXG4nKSksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyBpbnN0cnVjdGlvbiwgZGlzcGxheSBhcyBiZWZvcmVcbiAgICAgICAgICByZWFkaW5nQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24ocmVhZGluZ1RleHQpLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBhZGRTZWN0aW9uKFwiUmVhZGluZyBQYXNzYWdlXCIsIHJlYWRpbmdDb250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLmNvbXByZWhlbnNpb24gJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5jb21wcmVoZW5zaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbXByZWhlbnNpb25RdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMuY29tcHJlaGVuc2lvbikgPyBsZXNzb25EYXRhLnNlY3Rpb25zLmNvbXByZWhlbnNpb24gOiBbXVxuICAgICAgICBjb25zdCBjb21wcmVoZW5zaW9uQ29udGVudCA9IGNvbXByZWhlbnNpb25RdWVzdGlvbnMubWFwKChxdWVzdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGaXJzdCBpdGVtIGlzIHRoZSBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKHF1ZXN0aW9uKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgIGZpbGw6IFwiRjFGQUZGXCIsIC8vIExpZ2h0IGJsdWUgYmFja2dyb3VuZFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgICBzdHlsZTogXCJzaW5nbGVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzdCBhcmUgYWN0dWFsIHF1ZXN0aW9ucyAocmVudW1iZXIgc3RhcnRpbmcgZnJvbSAxKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGAke2luZGV4fS4gJHtxdWVzdGlvbn1gKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGFkZFNlY3Rpb24oXCJSZWFkaW5nIENvbXByZWhlbnNpb25cIiwgY29tcHJlaGVuc2lvbkNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlzY3Vzc2lvbiAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpc2N1c3Npb24pIHtcbiAgICAgICAgY29uc3QgZGlzY3Vzc2lvblF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkobGVzc29uRGF0YS5zZWN0aW9ucy5kaXNjdXNzaW9uKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMuZGlzY3Vzc2lvbiA6IFtdXG4gICAgICAgIGNvbnN0IGRpc2N1c3Npb25Db250ZW50ID0gZGlzY3Vzc2lvblF1ZXN0aW9ucy5tYXAoKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gaXMgdGhlIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKHF1ZXN0aW9uKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgIGZpbGw6IFwiRUVGN0RDXCIsIC8vIExpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc3QgYXJlIGFjdHVhbCBxdWVzdGlvbnMgKHJlbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihgJHtpbmRleH0uICR7cXVlc3Rpb259YCksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiRGlzY3Vzc2lvbiBRdWVzdGlvbnNcIiwgZGlzY3Vzc2lvbkNvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZGlhbG9ndWVQcmFjdGljZSAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlUHJhY3RpY2UpIHtcbiAgICAgICAgY29uc3QgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgY29uc3QgZGlhbG9ndWVTZWN0aW9uID0gbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZVByYWN0aWNlXG5cbiAgICAgICAgLy8gQWRkIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZCAoI0VFRjdEQylcbiAgICAgICAgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQucHVzaChcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihkaWFsb2d1ZVNlY3Rpb24uaW5zdHJ1Y3Rpb24pLFxuICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICBzaGFkaW5nOiB7XG4gICAgICAgICAgICAgIGZpbGw6IFwiRUVGN0RDXCIsIC8vIExpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib3JkZXI6IHtcbiAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBcIkNDQ0NDQ1wiLFxuICAgICAgICAgICAgICAgIHNpemU6IDYsXG4gICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG5cbiAgICAgICAgLy8gRW5oYW5jZSBkaWFsb2d1ZSB3aXRoIGF2YXRhciBuYW1lc1xuICAgICAgICBjb25zdCBlbmhhbmNlZERpYWxvZ3VlID0gZW5oYW5jZURpYWxvZ3VlV2l0aEF2YXRhcnMoXG4gICAgICAgICAgZGlhbG9ndWVTZWN0aW9uLmRpYWxvZ3VlLFxuICAgICAgICAgIGxlc3NvbkRhdGEuaWQsXG4gICAgICAgICAgJ2RpYWxvZ3VlUHJhY3RpY2UnXG4gICAgICAgIClcblxuICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXMgaW4gYm9sZCBhbmQgM3B4IHNwYWNpbmcgYmV0d2VlbiBsaW5lc1xuICAgICAgICBjb25zdCBkaWFsb2d1ZUxpbmVzID0gQXJyYXkuaXNBcnJheShlbmhhbmNlZERpYWxvZ3VlKSA/IGVuaGFuY2VkRGlhbG9ndWUgOiBbXVxuICAgICAgICBkaWFsb2d1ZUxpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgZGlhbG9ndWVQcmFjdGljZUNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IGAke3NhZmVTdHJpcE1hcmtkb3duKGxpbmUuY2hhcmFjdGVyKX06IGAsXG4gICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihsaW5lLmxpbmUpLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGluZGV4ID09PSAwID8gMCA6IDYwLCAvLyAzcHggZ2FwIGJldHdlZW4gbGluZXMgKDYwID0gM3B0IGluIFdvcmQgdW5pdHMpXG4gICAgICAgICAgICAgICAgYWZ0ZXI6IDAgXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gQWRkIGZvbGxvdy11cCBxdWVzdGlvbnMgaWYgYW55XG4gICAgICAgIGlmIChkaWFsb2d1ZVNlY3Rpb24uZm9sbG93VXBRdWVzdGlvbnMgJiYgZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogXCJGb2xsb3ctdXAgUXVlc3Rpb25zOlwiLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAyMDAsIGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBmb2xsb3dVcFF1ZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkoZGlhbG9ndWVTZWN0aW9uLmZvbGxvd1VwUXVlc3Rpb25zKSA/IGRpYWxvZ3VlU2VjdGlvbi5mb2xsb3dVcFF1ZXN0aW9ucyA6IFtdXG4gICAgICAgICAgZm9sbG93VXBRdWVzdGlvbnMuZm9yRWFjaCgocXVlc3Rpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBkaWFsb2d1ZVByYWN0aWNlQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihgJHtpbmRleCArIDF9LiAke3F1ZXN0aW9ufWApLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZFNlY3Rpb24oXCJEaWFsb2d1ZSBQcmFjdGljZVwiLCBkaWFsb2d1ZVByYWN0aWNlQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXAgJiYgbGVzc29uRGF0YS5zZWN0aW9ucy5kaWFsb2d1ZUZpbGxHYXApIHtcbiAgICAgICAgY29uc3QgZGlhbG9ndWVGaWxsR2FwQ29udGVudDogYW55W10gPSBbXVxuICAgICAgICBjb25zdCBkaWFsb2d1ZVNlY3Rpb24gPSBsZXNzb25EYXRhLnNlY3Rpb25zLmRpYWxvZ3VlRmlsbEdhcFxuXG4gICAgICAgIC8vIEFkZCBpbnN0cnVjdGlvbiB3aXRoIGxpZ2h0IGJsdWUgYmFja2dyb3VuZCAoI0YxRkFGRilcbiAgICAgICAgZGlhbG9ndWVGaWxsR2FwQ29udGVudC5wdXNoKFxuICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKGRpYWxvZ3VlU2VjdGlvbi5pbnN0cnVjdGlvbiksXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgIHNoYWRpbmc6IHtcbiAgICAgICAgICAgICAgZmlsbDogXCJGMUZBRkZcIiwgLy8gTGlnaHQgYmx1ZSBiYWNrZ3JvdW5kXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJDQ0NDQ0NcIixcbiAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgIHN0eWxlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuXG4gICAgICAgIC8vIEVuaGFuY2UgZGlhbG9ndWUgd2l0aCBhdmF0YXIgbmFtZXNcbiAgICAgICAgY29uc3QgZW5oYW5jZWREaWFsb2d1ZSA9IGVuaGFuY2VEaWFsb2d1ZVdpdGhBdmF0YXJzKFxuICAgICAgICAgIGRpYWxvZ3VlU2VjdGlvbi5kaWFsb2d1ZSxcbiAgICAgICAgICBsZXNzb25EYXRhLmlkLFxuICAgICAgICAgICdkaWFsb2d1ZUZpbGxHYXAnXG4gICAgICAgIClcblxuICAgICAgICAvLyBBZGQgZGlhbG9ndWUgbGluZXMgd2l0aCBjaGFyYWN0ZXIgbmFtZXMgaW4gYm9sZCBhbmQgM3B4IHNwYWNpbmcgYmV0d2VlbiBsaW5lc1xuICAgICAgICBjb25zdCBkaWFsb2d1ZUZpbGxHYXBMaW5lcyA9IEFycmF5LmlzQXJyYXkoZW5oYW5jZWREaWFsb2d1ZSkgPyBlbmhhbmNlZERpYWxvZ3VlIDogW11cbiAgICAgICAgZGlhbG9ndWVGaWxsR2FwTGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBkaWFsb2d1ZUZpbGxHYXBDb250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgJHtzYWZlU3RyaXBNYXJrZG93bihsaW5lLmNoYXJhY3Rlcil9OiBgLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24obGluZS5saW5lKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgXG4gICAgICAgICAgICAgICAgYmVmb3JlOiBpbmRleCA9PT0gMCA/IDAgOiA2MCwgLy8gM3B4IGdhcCBiZXR3ZWVuIGxpbmVzICg2MCA9IDNwdCBpbiBXb3JkIHVuaXRzKVxuICAgICAgICAgICAgICAgIGFmdGVyOiAwIFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIEFkZCBhbnN3ZXIga2V5IGlmIGFueVxuICAgICAgICBpZiAoZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMgJiYgZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IFwiQW5zd2VyIEtleTpcIixcbiAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuSU5TVFJVQ1RJT05TLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogMjAwLCBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICAgZGlhbG9ndWVGaWxsR2FwQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oZGlhbG9ndWVTZWN0aW9uLmFuc3dlcnMuam9pbignLCAnKSksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBhZGRTZWN0aW9uKFwiRGlhbG9ndWUgRmlsbC1pbi10aGUtR2FwXCIsIGRpYWxvZ3VlRmlsbEdhcENvbnRlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChlbmFibGVkU2VjdGlvbnMuZ3JhbW1hciAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIpIHtcbiAgICAgICAgY29uc3QgZ3JhbW1hckNvbnRlbnQ6IGFueVtdID0gW11cbiAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgRm9jdXM6ICR7c2FmZVN0cmlwTWFya2Rvd24obGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmZvY3VzKX1gLFxuICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgZ3JhbW1hckNvbnRlbnQucHVzaChcbiAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkV4YW1wbGVzOlwiLFxuICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZ3JhbW1hckV4YW1wbGVzID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhhbXBsZXMpID8gbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4YW1wbGVzIDogW11cbiAgICAgICAgZ3JhbW1hckV4YW1wbGVzLmZvckVhY2goKGV4YW1wbGUpID0+IHtcbiAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogYOKAoiAke3NhZmVTdHJpcE1hcmtkb3duKGV4YW1wbGUpfWAsXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICAgIGdyYW1tYXJDb250ZW50LnB1c2goXG4gICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJQcmFjdGljZSBFeGVyY2lzZTpcIixcbiAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHNwYWNpbmc6IHsgYmVmb3JlOiAyMDAsIGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBncmFtbWFyRXhlcmNpc2VzID0gQXJyYXkuaXNBcnJheShsZXNzb25EYXRhLnNlY3Rpb25zLmdyYW1tYXIuZXhlcmNpc2UpID8gbGVzc29uRGF0YS5zZWN0aW9ucy5ncmFtbWFyLmV4ZXJjaXNlIDogW11cbiAgICAgICAgZ3JhbW1hckV4ZXJjaXNlcy5mb3JFYWNoKChleGVyY2lzZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBncmFtbWFyQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICAgICAgdGV4dDogc2FmZVN0cmlwTWFya2Rvd24oYCR7aW5kZXggKyAxfS4gJHtleGVyY2lzZX1gKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiR3JhbW1hciBGb2N1c1wiLCBncmFtbWFyQ29udGVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGVuYWJsZWRTZWN0aW9ucy5wcm9udW5jaWF0aW9uICYmIGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvbikge1xuICAgICAgICBjb25zdCBwcm9uU2VjdGlvbiA9IGxlc3NvbkRhdGEuc2VjdGlvbnMucHJvbnVuY2lhdGlvblxuICAgICAgICBjb25zdCBwcm9udW5jaWF0aW9uQ29udGVudDogYW55W10gPSBbXVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIGZvcm1hdCAoc2luZ2xlIHdvcmQpIGFuZCBuZXcgZm9ybWF0ICh3b3JkcyBhcnJheSlcbiAgICAgICAgaWYgKHByb25TZWN0aW9uLndvcmRzICYmIEFycmF5LmlzQXJyYXkocHJvblNlY3Rpb24ud29yZHMpICYmIHByb25TZWN0aW9uLndvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBOZXcgZm9ybWF0IHdpdGggbXVsdGlwbGUgd29yZHNcbiAgICAgICAgICBwcm9uU2VjdGlvbi53b3Jkcy5mb3JFYWNoKCh3b3JkSXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgLy8gQWRkIHNwYWNpbmcgYmV0d2VlbiB3b3Jkc1xuICAgICAgICAgICAgICBwcm9udW5jaWF0aW9uQ29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtuZXcgVGV4dFJ1bih7IHRleHQ6IFwiXCIgfSldLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBiZWZvcmU6IDIwMCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBXb3JkOiAke3NhZmVTdHJpcE1hcmtkb3duKHdvcmRJdGVtLndvcmQgfHwgJ04vQScpfWAsXG4gICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYElQQTogJHtzYWZlU3RyaXBNYXJrZG93bih3b3JkSXRlbS5pcGEgfHwgJ04vQScpfWAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxMDAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh3b3JkSXRlbS5wcmFjdGljZVNlbnRlbmNlKSB7XG4gICAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogYFByYWN0aWNlOiBcIiR7c2FmZVN0cmlwTWFya2Rvd24od29yZEl0ZW0ucHJhY3RpY2VTZW50ZW5jZSl9XCJgLFxuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHdvcmRJdGVtLnRpcHMgJiYgd29yZEl0ZW0udGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJUaXBzOlwiLFxuICAgICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLklOU1RSVUNUSU9OUyxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMTAwIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHdvcmRJdGVtLnRpcHMuZm9yRWFjaCh0aXAgPT4ge1xuICAgICAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBg4oCiICR7c2FmZVN0cmlwTWFya2Rvd24odGlwKX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLlNVUFBMRU1FTlRBUlksXG4gICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDEwMCB9LFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAocHJvblNlY3Rpb24ud29yZCkge1xuICAgICAgICAgIC8vIE9sZCBmb3JtYXQgd2l0aCBzaW5nbGUgd29yZFxuICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgV29yZDogJHtzYWZlU3RyaXBNYXJrZG93bihwcm9uU2VjdGlvbi53b3JkIHx8ICdOL0EnKX1gLFxuICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDE1MCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuICAgICAgICAgIFxuICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBgSVBBOiAke3NhZmVTdHJpcE1hcmtkb3duKHByb25TZWN0aW9uLmlwYSB8fCAnTi9BJyl9YCxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5TVVBQTEVNRU5UQVJZLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocHJvblNlY3Rpb24ucHJhY3RpY2UpIHtcbiAgICAgICAgICAgIHByb251bmNpYXRpb25Db250ZW50LnB1c2goXG4gICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGBQcmFjdGljZTogXCIke3NhZmVTdHJpcE1hcmtkb3duKHByb25TZWN0aW9uLnByYWN0aWNlKX1cImAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5NQUlOX0NPTlRFTlQsXG4gICAgICAgICAgICAgICAgICAgIGl0YWxpY3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsgYWZ0ZXI6IDIwMCB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbnVuY2lhdGlvbkNvbnRlbnQucHVzaChcbiAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IFwiTm8gcHJvbnVuY2lhdGlvbiBkYXRhIGF2YWlsYWJsZVwiLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogV09SRF9GT05UX1NJWkVTLk1BSU5fQ09OVEVOVCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3BhY2luZzogeyBhZnRlcjogMjAwIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGFkZFNlY3Rpb24oXCJQcm9udW5jaWF0aW9uIFByYWN0aWNlXCIsIHByb251bmNpYXRpb25Db250ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoZW5hYmxlZFNlY3Rpb25zLndyYXB1cCAmJiBsZXNzb25EYXRhLnNlY3Rpb25zLndyYXB1cCkge1xuICAgICAgICBjb25zdCB3cmFwdXBRdWVzdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwKSA/IGxlc3NvbkRhdGEuc2VjdGlvbnMud3JhcHVwIDogW11cbiAgICAgICAgY29uc3Qgd3JhcHVwQ29udGVudCA9IHdyYXB1cFF1ZXN0aW9ucy5tYXAoKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIC8vIEZpcnN0IGl0ZW0gaXMgdGhlIGluc3RydWN0aW9uIHdpdGggbGlnaHQgZ3JlZW4gYmFja2dyb3VuZFxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIG5ldyBUZXh0UnVuKHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHNhZmVTdHJpcE1hcmtkb3duKHF1ZXN0aW9uKSxcbiAgICAgICAgICAgICAgICAgIHNpemU6IFdPUkRfRk9OVF9TSVpFUy5JTlNUUlVDVElPTlMsXG4gICAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAyMDAgfSxcbiAgICAgICAgICAgICAgc2hhZGluZzoge1xuICAgICAgICAgICAgICAgIGZpbGw6IFwiRUVGN0RDXCIsIC8vIExpZ2h0IGdyZWVuIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9yZGVyOiB7XG4gICAgICAgICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IFwiQ0NDQ0NDXCIsXG4gICAgICAgICAgICAgICAgICBzaXplOiA2LFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic2luZ2xlXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc3QgYXJlIGFjdHVhbCBxdWVzdGlvbnMgKHJlbnVtYmVyIHN0YXJ0aW5nIGZyb20gMSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICBuZXcgVGV4dFJ1bih7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBzYWZlU3RyaXBNYXJrZG93bihgJHtpbmRleH0uICR7cXVlc3Rpb259YCksXG4gICAgICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuTUFJTl9DT05URU5ULFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzcGFjaW5nOiB7IGFmdGVyOiAxNTAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhZGRTZWN0aW9uKFwiTGVzc29uIFdyYXAtdXBcIiwgd3JhcHVwQ29udGVudClcbiAgICAgIH1cblxuICAgICAgLy8gRm9vdGVyXG4gICAgICBjaGlsZHJlbi5wdXNoKFxuICAgICAgICBuZXcgUGFyYWdyYXBoKHtcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbmV3IFRleHRSdW4oe1xuICAgICAgICAgICAgICB0ZXh0OiBcIkdlbmVyYXRlZCBieSBMaW5ndWFTcGFya1wiLFxuICAgICAgICAgICAgICBzaXplOiBXT1JEX0ZPTlRfU0laRVMuU1VQUExFTUVOVEFSWSxcbiAgICAgICAgICAgICAgaXRhbGljczogdHJ1ZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUixcbiAgICAgICAgICBzcGFjaW5nOiB7IGJlZm9yZTogNjAwIH0sXG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgICAvLyBDcmVhdGUgZG9jdW1lbnRcbiAgICAgIGNvbnN0IGRvYyA9IG5ldyBEb2N1bWVudCh7XG4gICAgICAgIHNlY3Rpb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIEdlbmVyYXRlIGFuZCBkb3dubG9hZFxuICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIFdvcmQgZG9jdW1lbnQuLi4nKVxuICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgUGFja2VyLnRvQnVmZmVyKGRvYylcbiAgICAgIGNvbnNvbGUubG9nKCdEb2N1bWVudCBidWZmZXIgY3JlYXRlZCwgc2l6ZTonLCBidWZmZXIuYnl0ZUxlbmd0aClcblxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtidWZmZXIgYXMgYW55XSwgeyB0eXBlOiBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCIgfSlcbiAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7bGVzc29uRGF0YS5sZXNzb25UeXBlfS1sZXNzb24tJHtsZXNzb25EYXRhLnN0dWRlbnRMZXZlbH0tJHtEYXRlLm5vdygpfS5kb2N4YFxuXG4gICAgICBjb25zb2xlLmxvZygnRG93bmxvYWRpbmcgV29yZCBkb2N1bWVudCB3aXRoIGZpbGVuYW1lOicsIGZpbGVOYW1lKVxuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpXG4gICAgICBsaW5rLmhyZWYgPSB1cmxcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKVxuICAgICAgbGluay5jbGljaygpXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspXG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybClcbiAgICAgIGNvbnNvbGUubG9nKCdXb3JkIGV4cG9ydCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignV29yZCBleHBvcnQgZXJyb3I6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFdvcmQgZXhwb3J0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbGVzc29uRXhwb3J0ZXIgPSBuZXcgTGVzc29uRXhwb3J0ZXIoKVxuIl0sIm5hbWVzIjpbImpzUERGIiwiRG9jdW1lbnQiLCJQYWNrZXIiLCJQYXJhZ3JhcGgiLCJUZXh0UnVuIiwiSGVhZGluZ0xldmVsIiwiQWxpZ25tZW50VHlwZSIsIlVuZGVybGluZVR5cGUiLCJlbmhhbmNlRGlhbG9ndWVXaXRoQXZhdGFycyIsInN0cmlwTWFya2Rvd24iLCJ0ZXh0IiwicmVzdWx0IiwicmVwbGFjZSIsInNhZmVTdHJpcE1hcmtkb3duIiwiZXJyb3IiLCJjb25zb2xlIiwic3Vic3RyaW5nIiwiTGVzc29uRXhwb3J0ZXIiLCJmb3JtYXREYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsInZhbGlkYXRlTGVzc29uRGF0YSIsImxlc3NvbkRhdGEiLCJzZWN0aW9ucyIsImxvZyIsIkVycm9yIiwibGVzc29uVGl0bGUiLCJsZXNzb25UeXBlIiwic3R1ZGVudExldmVsIiwidGFyZ2V0TGFuZ3VhZ2UiLCJ3YXJtdXAiLCJ0eXBlIiwiaXNBcnJheSIsIkFycmF5IiwidmFsdWUiLCJ2b2NhYnVsYXJ5IiwibGVuZ3RoIiwicmVhZGluZyIsImNvbXByZWhlbnNpb24iLCJkaXNjdXNzaW9uIiwiZ3JhbW1hciIsImhhc0ZvY3VzIiwiZm9jdXMiLCJwcm9udW5jaWF0aW9uIiwiaGFzV29yZCIsIndvcmQiLCJ3cmFwdXAiLCJ3YXJuIiwiZXhwb3J0VG9QREYiLCJlbmFibGVkU2VjdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwicGRmIiwieVBvc2l0aW9uIiwicGFnZUhlaWdodCIsImludGVybmFsIiwicGFnZVNpemUiLCJoZWlnaHQiLCJtYXJnaW4iLCJsaW5lSGVpZ2h0IiwiRk9OVF9TSVpFUyIsIkxFU1NPTl9USVRMRSIsIlNFQ1RJT05fSEVBREVSIiwiTUFJTl9DT05URU5UIiwiSU5TVFJVQ1RJT05TIiwiU1VQUExFTUVOVEFSWSIsImFkZFRleHQiLCJmb250U2l6ZSIsImlzQm9sZCIsImlzSXRhbGljIiwiaW5kZW50Iiwic2FuaXRpemVkVGV4dCIsInRyaW0iLCJzZXRGb250U2l6ZSIsImZvbnRTdHlsZSIsInNldEZvbnQiLCJtYXhXaWR0aCIsIndpZHRoIiwibGluZXMiLCJzcGxpdFRleHRUb1NpemUiLCJsaW5lIiwiYWRkUGFnZSIsImFkZFNlY3Rpb24iLCJ0aXRsZSIsImNvbnRlbnQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwid2FybXVwUXVlc3Rpb25zIiwiZm9yRWFjaCIsInF1ZXN0aW9uIiwiaW5kZXgiLCJzZXRGaWxsQ29sb3IiLCJpbnN0cnVjdGlvbldpZHRoIiwiaW5zdHJ1Y3Rpb25MaW5lcyIsImluc3RydWN0aW9uSGVpZ2h0IiwicmVjdCIsInZvY2FidWxhcnlJdGVtcyIsInZvY2FiSW5kZXgiLCJpdGVtIiwibWVhbmluZyIsImV4YW1wbGVzIiwiZXhhbXBsZSIsImV4SW5kZXgiLCJyZWFkaW5nQ29udGVudCIsInBhcnRzIiwic3BsaXQiLCJpbmNsdWRlcyIsImpvaW4iLCJjb21wcmVoZW5zaW9uUXVlc3Rpb25zIiwiZGlzY3Vzc2lvblF1ZXN0aW9ucyIsImRpYWxvZ3VlUHJhY3RpY2UiLCJkaWFsb2d1ZVNlY3Rpb24iLCJpbnN0cnVjdGlvbiIsImVuaGFuY2VkRGlhbG9ndWUiLCJkaWFsb2d1ZSIsImlkIiwiZGlhbG9ndWVQcmFjdGljZUxpbmVzIiwiY2hhcldpZHRoIiwiZ2V0VGV4dFdpZHRoIiwiY2hhcmFjdGVyIiwibGluZVRleHQiLCJpIiwiZm9sbG93VXBRdWVzdGlvbnMiLCJkaWFsb2d1ZUZpbGxHYXAiLCJkaWFsb2d1ZUZpbGxHYXBMaW5lcyIsImFuc3dlcnMiLCJncmFtbWFyRXhhbXBsZXMiLCJncmFtbWFyRXhlcmNpc2VzIiwiZXhlcmNpc2UiLCJwcm9uU2VjdGlvbiIsIndvcmRzIiwid29yZEl0ZW0iLCJpcGEiLCJwcmFjdGljZVNlbnRlbmNlIiwidGlwcyIsInRpcCIsInByYWN0aWNlIiwid3JhcHVwUXVlc3Rpb25zIiwicGFnZUNvdW50IiwiZ2V0TnVtYmVyT2ZQYWdlcyIsInNldFBhZ2UiLCJmaWxlTmFtZSIsIm5vdyIsInNhdmUiLCJzYXZlRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJuYW1lIiwibGVzc29uRGF0YUtleXMiLCJzZWN0aW9uc0tleXMiLCJlbmFibGVkU2VjdGlvbnNLZXlzIiwiZXhwb3J0VG9Xb3JkIiwiY2hpbGRyZW4iLCJXT1JEX0ZPTlRfU0laRVMiLCJwdXNoIiwiYm9sZCIsInNpemUiLCJoZWFkaW5nIiwiVElUTEUiLCJhbGlnbm1lbnQiLCJDRU5URVIiLCJzcGFjaW5nIiwiYWZ0ZXIiLCJ1bmRlcmxpbmUiLCJTSU5HTEUiLCJIRUFESU5HXzIiLCJiZWZvcmUiLCJ3YXJtdXBDb250ZW50IiwibWFwIiwiaXRhbGljcyIsInNoYWRpbmciLCJmaWxsIiwiYm9yZGVyIiwibGVmdCIsImNvbG9yIiwic3R5bGUiLCJ2b2NhYkNvbnRlbnQiLCJyZWFkaW5nVGV4dCIsImNvbXByZWhlbnNpb25Db250ZW50IiwiZGlzY3Vzc2lvbkNvbnRlbnQiLCJkaWFsb2d1ZVByYWN0aWNlQ29udGVudCIsImRpYWxvZ3VlTGluZXMiLCJkaWFsb2d1ZUZpbGxHYXBDb250ZW50IiwiZ3JhbW1hckNvbnRlbnQiLCJwcm9udW5jaWF0aW9uQ29udGVudCIsIndyYXB1cENvbnRlbnQiLCJkb2MiLCJwcm9wZXJ0aWVzIiwiYnVmZmVyIiwidG9CdWZmZXIiLCJieXRlTGVuZ3RoIiwiYmxvYiIsIkJsb2IiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsImRvd25sb2FkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsInJldm9rZU9iamVjdFVSTCIsImxlc3NvbkV4cG9ydGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/export-utils.ts\n"));

/***/ })

});