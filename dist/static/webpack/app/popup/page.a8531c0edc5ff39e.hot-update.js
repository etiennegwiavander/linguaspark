"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/popup/page",{

/***/ "(app-pages-browser)/./lib/lesson-interface-bridge.ts":
/*!****************************************!*\
  !*** ./lib/lesson-interface-bridge.ts ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonInterfaceBridge: function() { return /* binding */ LessonInterfaceBridge; },\n/* harmony export */   LessonInterfaceUtils: function() { return /* binding */ LessonInterfaceUtils; }\n/* harmony export */ });\n/**\r\n * Lesson Interface Bridge\r\n * \r\n * Connects extracted content to the existing lesson generation interface.\r\n * Handles automatic popup opening, content pre-population, and metadata preservation.\r\n * \r\n * Requirements: 4.1, 4.2, 4.6, 6.6\r\n */ class LessonInterfaceBridge {\n    /**\r\n   * Initialize the bridge with callbacks\r\n   */ initialize(callbacks) {\n        this.callbacks = callbacks;\n    }\n    /**\r\n   * Open lesson interface with extracted content\r\n   * Requirement 4.1: Open the LinguaSpark lesson generation interface\r\n   */ async openLessonInterface(content) {\n        try {\n            // Create lesson pre-configuration\n            const config = this.createLessonPreConfiguration(content);\n            this.currentConfiguration = config;\n            // Store configuration for the lesson interface\n            await this.storeConfiguration(config);\n            // Open the lesson interface\n            await this.openInterface();\n            // Update state\n            this.state.lessonInterfaceOpen = true;\n            this.state.extractionConfirmed = true;\n            // Notify callback\n            if (this.callbacks.onLessonInterfaceOpened) {\n                this.callbacks.onLessonInterfaceOpened(config);\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to open lesson interface\";\n            console.error(\"[LessonInterfaceBridge] Failed to open lesson interface:\", error);\n            if (this.callbacks.onError) {\n                this.callbacks.onError(errorMessage);\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    /**\r\n   * Pre-populate lesson interface with extracted content\r\n   * Requirement 4.2: Pre-populate source content field with extracted content\r\n   */ async populateInterface(content) {\n        try {\n            const config = this.createLessonPreConfiguration(content);\n            // Store the content for the lesson generator\n            await this.storeExtractedContent(config);\n            // Update state\n            this.state.contentPrePopulated = true;\n            this.state.readyForGeneration = true;\n            // Notify callback\n            if (this.callbacks.onContentPrePopulated) {\n                this.callbacks.onContentPrePopulated(config.sourceContent);\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to populate interface\";\n            console.error(\"[LessonInterfaceBridge] Failed to populate interface:\", error);\n            if (this.callbacks.onError) {\n                this.callbacks.onError(errorMessage);\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    /**\r\n   * Enable content editing in the lesson interface\r\n   * Requirement 4.5: User can edit extracted content before generation\r\n   */ enableContentEditing() {\n        if (this.currentConfiguration) {\n            this.currentConfiguration.allowContentEditing = true;\n            this.storeConfiguration(this.currentConfiguration);\n        }\n    }\n    /**\r\n   * Preserve user customizations\r\n   * Requirement 4.4: User can modify lesson type, CEFR level, and other settings\r\n   */ preserveUserCustomizations() {\n        if (this.currentConfiguration) {\n            this.currentConfiguration.userCanModifySettings = true;\n            this.storeConfiguration(this.currentConfiguration);\n        }\n    }\n    /**\r\n   * Integrate with existing lesson generation workflow\r\n   * Requirement 4.6: Follow existing enhanced lesson generation workflow\r\n   */ integrateWithExistingWorkflow() {\n        // The integration happens through the stored configuration\n        // The lesson generator will detect the extraction source and handle accordingly\n        this.state.readyForGeneration = true;\n    }\n    /**\r\n   * Get current interface state\r\n   */ getState() {\n        return {\n            ...this.state\n        };\n    }\n    /**\r\n   * Get current configuration\r\n   */ getCurrentConfiguration() {\n        return this.currentConfiguration ? {\n            ...this.currentConfiguration\n        } : null;\n    }\n    /**\r\n   * Check if content is from extraction\r\n   */ static async isExtractionSource() {\n        try {\n            var _window_chrome;\n            // First try URL parameters (most reliable for web context)\n            if (true) {\n                const urlParams = new URLSearchParams(window.location.search);\n                if (urlParams.get(\"source\") === \"extraction\") {\n                    return true;\n                }\n            }\n            // Try Chrome storage if available (extension context)\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                return new Promise((resolve)=>{\n                    try {\n                        window.chrome.storage.local.get([\n                            \"extractionSource\"\n                        ], (result)=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage error, checking localStorage fallback:\", window.chrome.runtime.lastError.message);\n                                // Check localStorage fallback\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve((fallbackConfig === null || fallbackConfig === void 0 ? void 0 : fallbackConfig.extractionSource) === \"webpage\");\n                            } else {\n                                resolve(result.extractionSource === \"webpage\");\n                            }\n                        });\n                    } catch (error) {\n                        console.warn(\"[LessonInterfaceBridge] Chrome storage access failed, checking localStorage fallback:\", error);\n                        // Check localStorage fallback\n                        const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                        resolve((fallbackConfig === null || fallbackConfig === void 0 ? void 0 : fallbackConfig.extractionSource) === \"webpage\");\n                    }\n                });\n            }\n            // Try localStorage (fallback for extension context invalidation)\n            const localStorageConfig = LessonInterfaceBridge.loadFromLocalStorage();\n            if ((localStorageConfig === null || localStorageConfig === void 0 ? void 0 : localStorageConfig.extractionSource) === \"webpage\") {\n                return true;\n            }\n            // Try session storage (web context fallback)\n            if (typeof sessionStorage !== \"undefined\") {\n                const stored = sessionStorage.getItem(\"linguaspark_lesson_config\");\n                if (stored) {\n                    const config = JSON.parse(stored);\n                    return config.extractionSource === \"webpage\";\n                }\n            }\n            return false;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to check extraction source:\", error);\n            return false;\n        }\n    }\n    /**\r\n   * Load extraction configuration\r\n   */ static async loadExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            // Try Chrome storage if available (extension context)\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                return new Promise((resolve)=>{\n                    try {\n                        window.chrome.storage.local.get([\n                            \"lessonConfiguration\"\n                        ], (result)=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage error, trying localStorage fallback:\", window.chrome.runtime.lastError.message);\n                                // Fallback to localStorage\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve(fallbackConfig);\n                            } else if (result.lessonConfiguration) {\n                                // Parse dates\n                                const config = result.lessonConfiguration;\n                                if (config.metadata.extractedAt) {\n                                    config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                                }\n                                resolve(config);\n                            } else {\n                                // Try localStorage fallback\n                                const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                                resolve(fallbackConfig);\n                            }\n                        });\n                    } catch (error) {\n                        console.warn(\"[LessonInterfaceBridge] Chrome storage access failed, using localStorage fallback:\", error);\n                        const fallbackConfig = LessonInterfaceBridge.loadFromLocalStorage();\n                        resolve(fallbackConfig);\n                    }\n                });\n            }\n            // Try localStorage (fallback for extension context invalidation)\n            const localStorageConfig = LessonInterfaceBridge.loadFromLocalStorage();\n            if (localStorageConfig) {\n                return localStorageConfig;\n            }\n            // Try session storage (web context)\n            if (typeof sessionStorage !== \"undefined\") {\n                const stored = sessionStorage.getItem(\"linguaspark_lesson_config\");\n                if (stored) {\n                    const config = JSON.parse(stored);\n                    // Parse dates\n                    if (config.metadata.extractedAt) {\n                        config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                    }\n                    return config;\n                }\n            }\n            // Try URL parameters (for metadata only, content should be in storage)\n            if (true) {\n                const urlParams = new URLSearchParams(window.location.search);\n                const sourceParam = urlParams.get(\"sourceUrl\");\n                const isExtractionSource = urlParams.get(\"source\") === \"extraction\";\n                // If this is an extraction source but no content in URL, it should be in storage\n                if (isExtractionSource && sourceParam) {\n                    // This indicates content should be available in storage\n                    // Return null here so the caller knows to check storage\n                    console.log(\"[LessonInterfaceBridge] Extraction source detected but content not in URL - should be in storage\");\n                }\n                // Legacy support: if content is in URL parameters (for small content)\n                const contentParam = urlParams.get(\"content\");\n                if (contentParam && sourceParam) {\n                    try {\n                        const decodedContent = decodeURIComponent(contentParam);\n                        return {\n                            sourceContent: decodedContent,\n                            suggestedType: urlParams.get(\"type\") || \"discussion\",\n                            suggestedLevel: urlParams.get(\"level\") || \"B1\",\n                            metadata: {\n                                title: urlParams.get(\"title\") || \"Extracted Content\",\n                                sourceUrl: decodeURIComponent(sourceParam),\n                                domain: new URL(decodeURIComponent(sourceParam)).hostname,\n                                extractedAt: new Date(),\n                                wordCount: decodedContent.split(/\\s+/).length,\n                                readingTime: Math.ceil(decodedContent.split(/\\s+/).length / 200),\n                                complexity: \"intermediate\",\n                                suitabilityScore: 0.8\n                            },\n                            extractionSource: \"webpage\",\n                            allowContentEditing: true,\n                            userCanModifySettings: true,\n                            attribution: \"Source: \".concat(new URL(decodeURIComponent(sourceParam)).hostname)\n                        };\n                    } catch (urlError) {\n                        console.warn(\"[LessonInterfaceBridge] Failed to parse URL parameters:\", urlError);\n                    }\n                }\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to load extraction configuration:\", error);\n            return null;\n        }\n    }\n    /**\r\n   * Clear extraction configuration\r\n   */ static async clearExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                window.chrome.storage.local.remove([\n                    \"lessonConfiguration\",\n                    \"extractionSource\"\n                ]);\n            } else if (typeof sessionStorage !== \"undefined\") {\n                sessionStorage.removeItem(\"linguaspark_lesson_config\");\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to clear extraction configuration:\", error);\n        }\n    }\n    /**\r\n   * Create lesson pre-configuration from extracted content\r\n   */ createLessonPreConfiguration(content) {\n        return {\n            sourceContent: content.text,\n            suggestedType: content.suggestedLessonType,\n            suggestedLevel: content.suggestedCEFRLevel,\n            metadata: {\n                title: content.metadata.title,\n                author: content.metadata.author,\n                sourceUrl: content.metadata.sourceUrl,\n                domain: content.metadata.domain,\n                extractedAt: content.sourceInfo.extractedAt,\n                wordCount: content.quality.wordCount,\n                readingTime: content.quality.readingTime,\n                complexity: content.quality.complexity,\n                suitabilityScore: content.quality.suitabilityScore\n            },\n            extractionSource: \"webpage\",\n            allowContentEditing: true,\n            userCanModifySettings: true,\n            attribution: content.sourceInfo.attribution\n        };\n    }\n    /**\r\n   * Store configuration for lesson interface\r\n   */ async storeConfiguration(config) {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                // Store in Chrome extension storage\n                window.chrome.storage.local.set({\n                    lessonConfiguration: config,\n                    extractionSource: \"webpage\",\n                    extractionTimestamp: Date.now()\n                });\n            } else if (typeof sessionStorage !== \"undefined\") {\n                // Fallback to session storage\n                sessionStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(config));\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to store configuration:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Store extracted content for lesson generator\r\n   */ async storeExtractedContent(config) {\n        try {\n            var _window_chrome;\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                // Store content in the format expected by lesson generator\n                window.chrome.storage.local.set({\n                    selectedText: config.sourceContent,\n                    sourceUrl: config.metadata.sourceUrl,\n                    lessonType: config.suggestedType,\n                    studentLevel: config.suggestedLevel,\n                    extractionMetadata: config.metadata,\n                    attribution: config.attribution\n                });\n            } else if (typeof sessionStorage !== \"undefined\") {\n                // Fallback storage\n                sessionStorage.setItem(\"linguaspark_selected_text\", config.sourceContent);\n                sessionStorage.setItem(\"linguaspark_source_url\", config.metadata.sourceUrl);\n                sessionStorage.setItem(\"linguaspark_lesson_type\", config.suggestedType);\n                sessionStorage.setItem(\"linguaspark_student_level\", config.suggestedLevel);\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to store extracted content:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Open the lesson interface\r\n   */ async openInterface() {\n        try {\n            var _window_chrome;\n            const config = this.currentConfiguration;\n            if (!config) {\n                throw new Error(\"No configuration available\");\n            }\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.action)) {\n                // Extension context - try to open popup\n                try {\n                    await window.chrome.action.openPopup();\n                } catch (popupError) {\n                    // If popup fails, open in new tab with minimal URL parameters\n                    // ALWAYS store full content in Chrome storage, NEVER in URL\n                    await window.chrome.storage.local.set({\n                        lessonConfiguration: config,\n                        extractionSource: \"webpage\",\n                        extractionTimestamp: Date.now()\n                    });\n                    const url = new URL(window.chrome.runtime.getURL(\"popup.html\"));\n                    url.searchParams.set(\"source\", \"extraction\");\n                    url.searchParams.set(\"autoPopulate\", \"true\");\n                    url.searchParams.set(\"sourceUrl\", encodeURIComponent(config.metadata.sourceUrl));\n                    url.searchParams.set(\"type\", config.suggestedType);\n                    url.searchParams.set(\"level\", config.suggestedLevel);\n                    url.searchParams.set(\"title\", encodeURIComponent(config.metadata.title));\n                    // NOTE: NO 'content' parameter to avoid URL length limits\n                    console.log(\"[LessonInterfaceBridge] Stored full content in Chrome storage, opening popup with metadata-only URL\");\n                    await window.chrome.tabs.create({\n                        url: url.toString()\n                    });\n                }\n            } else if (true) {\n                // Web context - ALWAYS store full content in session storage, NEVER in URL\n                sessionStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(config));\n                // Use minimal URL parameters - NO CONTENT in URL to avoid truncation\n                const url = new URL(\"/popup\", window.location.origin);\n                url.searchParams.set(\"source\", \"extraction\");\n                url.searchParams.set(\"autoPopulate\", \"true\");\n                url.searchParams.set(\"sourceUrl\", encodeURIComponent(config.metadata.sourceUrl));\n                url.searchParams.set(\"type\", config.suggestedType);\n                url.searchParams.set(\"level\", config.suggestedLevel);\n                url.searchParams.set(\"title\", encodeURIComponent(config.metadata.title));\n                // NOTE: NO 'content' parameter to avoid URL length limits\n                console.log(\"[LessonInterfaceBridge] Stored full content in session storage, opening popup with metadata-only URL\");\n                window.open(url.toString(), \"_blank\");\n            }\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to open interface:\", error);\n            throw error;\n        }\n    }\n    /**\r\n   * Load configuration from localStorage (fallback for extension context invalidation)\r\n   */ static loadFromLocalStorage() {\n        try {\n            if (typeof localStorage === \"undefined\") return null;\n            const stored = localStorage.getItem(\"linguaspark_lesson_config\");\n            if (stored) {\n                var _config_metadata;\n                const config = JSON.parse(stored);\n                // Parse dates\n                if ((_config_metadata = config.metadata) === null || _config_metadata === void 0 ? void 0 : _config_metadata.extractedAt) {\n                    config.metadata.extractedAt = new Date(config.metadata.extractedAt);\n                }\n                console.log(\"[LessonInterfaceBridge] Loaded configuration from localStorage fallback\");\n                return config;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to load from localStorage:\", error);\n            return null;\n        }\n    }\n    /**\r\n   * Clear extraction configuration from all storage types\r\n   */ static async clearExtractionConfiguration() {\n        try {\n            var _window_chrome;\n            // Clear Chrome storage if available\n            if ( true && ((_window_chrome = window.chrome) === null || _window_chrome === void 0 ? void 0 : _window_chrome.storage)) {\n                try {\n                    await new Promise((resolve)=>{\n                        window.chrome.storage.local.remove([\n                            \"lessonConfiguration\",\n                            \"extractedContent\",\n                            \"extractionSource\",\n                            \"extractionTimestamp\"\n                        ], ()=>{\n                            if (window.chrome.runtime.lastError) {\n                                console.warn(\"[LessonInterfaceBridge] Chrome storage clear error:\", window.chrome.runtime.lastError.message);\n                            }\n                            resolve();\n                        });\n                    });\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear Chrome storage:\", error);\n                }\n            }\n            // Clear localStorage fallback\n            if (typeof localStorage !== \"undefined\") {\n                try {\n                    localStorage.removeItem(\"linguaspark_lesson_config\");\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear localStorage:\", error);\n                }\n            }\n            // Clear sessionStorage\n            if (typeof sessionStorage !== \"undefined\") {\n                try {\n                    sessionStorage.removeItem(\"linguaspark_lesson_config\");\n                    sessionStorage.removeItem(\"linguaspark_selected_text\");\n                    sessionStorage.removeItem(\"linguaspark_source_url\");\n                    sessionStorage.removeItem(\"linguaspark_lesson_type\");\n                    sessionStorage.removeItem(\"linguaspark_student_level\");\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceBridge] Failed to clear sessionStorage:\", error);\n                }\n            }\n            console.log(\"[LessonInterfaceBridge] Cleared extraction configuration from all storage types\");\n        } catch (error) {\n            console.error(\"[LessonInterfaceBridge] Failed to clear extraction configuration:\", error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.state = {\n            contentPrePopulated: false,\n            settingsCustomizable: true,\n            extractionConfirmed: false,\n            readyForGeneration: false,\n            lessonInterfaceOpen: false\n        };\n        this.callbacks = {};\n        this.currentConfiguration = null;\n    }\n}\n/**\r\n * Utility functions for lesson interface integration\r\n */ const LessonInterfaceUtils = {\n    /**\r\n   * Check if current page is lesson interface with extraction source\r\n   */ async isExtractionLessonInterface () {\n        if (false) {}\n        const urlParams = new URLSearchParams(window.location.search);\n        const isExtractionSource = urlParams.get(\"source\") === \"extraction\";\n        const shouldAutoPopulate = urlParams.get(\"autoPopulate\") === \"true\";\n        return isExtractionSource && shouldAutoPopulate;\n    },\n    /**\r\n   * Get extraction parameters from URL\r\n   */ getExtractionParams () {\n        if (false) {}\n        const urlParams = new URLSearchParams(window.location.search);\n        return {\n            source: urlParams.get(\"source\"),\n            autoPopulate: urlParams.get(\"autoPopulate\") === \"true\"\n        };\n    },\n    /**\r\n   * Check if Chrome APIs are available\r\n   */ isChromeExtensionContext () {\n        return  true && typeof window.chrome !== \"undefined\" && typeof window.chrome.storage !== \"undefined\";\n    },\n    /**\r\n   * Safe Chrome storage access with fallback\r\n   */ async safeStorageGet (keys) {\n        console.log(\"[LessonInterfaceUtils] safeStorageGet called with keys:\", keys);\n        console.log(\"[LessonInterfaceUtils] Chrome extension context:\", this.isChromeExtensionContext());\n        if (this.isChromeExtensionContext()) {\n            return new Promise((resolve)=>{\n                try {\n                    window.chrome.storage.local.get(keys, (result)=>{\n                        if (window.chrome.runtime.lastError) {\n                            console.warn(\"[LessonInterfaceUtils] Chrome storage error, trying localStorage fallback:\", window.chrome.runtime.lastError.message);\n                            const fallbackResult = this.getFromLocalStorageFallback(keys);\n                            console.log(\"[LessonInterfaceUtils] Fallback result:\", Object.keys(fallbackResult));\n                            resolve(fallbackResult);\n                        } else {\n                            console.log(\"[LessonInterfaceUtils] Chrome storage result:\", Object.keys(result || {}));\n                            resolve(result);\n                        }\n                    });\n                } catch (error) {\n                    console.warn(\"[LessonInterfaceUtils] Chrome storage access failed:\", error);\n                    const fallbackResult = this.getFromLocalStorageFallback(keys);\n                    console.log(\"[LessonInterfaceUtils] Exception fallback result:\", Object.keys(fallbackResult));\n                    resolve(fallbackResult);\n                }\n            });\n        }\n        const fallbackResult = this.getFromLocalStorageFallback(keys);\n        console.log(\"[LessonInterfaceUtils] Direct fallback result:\", Object.keys(fallbackResult));\n        return fallbackResult;\n    },\n    /**\r\n   * Get data from localStorage fallback\r\n   */ getFromLocalStorageFallback (keys) {\n        const result = {};\n        // First try the main lesson config key (used by content script)\n        try {\n            const mainConfig = localStorage.getItem(\"linguaspark_lesson_config\");\n            if (mainConfig) {\n                const parsed = JSON.parse(mainConfig);\n                console.log(\"[LessonInterfaceUtils] Found localStorage config:\", Object.keys(parsed));\n                // Map the stored data to the expected keys\n                if (parsed.lessonConfiguration) {\n                    result.lessonConfiguration = parsed.lessonConfiguration;\n                }\n                if (parsed.extractedContent) {\n                    result.extractedContent = parsed.extractedContent;\n                }\n                if (parsed.selectedText) {\n                    result.selectedText = parsed.selectedText;\n                }\n                if (parsed.sourceUrl) {\n                    result.sourceUrl = parsed.sourceUrl;\n                }\n                // If we have lesson configuration, that's the primary data\n                if (result.lessonConfiguration) {\n                    return result;\n                }\n            }\n        } catch (error) {\n            console.warn(\"[LessonInterfaceUtils] Failed to parse localStorage config:\", error);\n        }\n        // Fallback to individual sessionStorage keys\n        for (const key of keys){\n            try {\n                const stored = sessionStorage.getItem(\"linguaspark_\".concat(key));\n                if (stored) {\n                    try {\n                        result[key] = JSON.parse(stored);\n                    } catch (e) {\n                        result[key] = stored;\n                    }\n                }\n            } catch (error) {\n                console.warn(\"[LessonInterfaceUtils] Failed to get sessionStorage key \".concat(key, \":\"), error);\n            }\n        }\n        return result;\n    },\n    /**\r\n   * Safe Chrome storage set with fallback\r\n   */ async safeStorageSet (data) {\n        if (this.isChromeExtensionContext()) {\n            try {\n                window.chrome.storage.local.set(data);\n                return;\n            } catch (error) {\n                console.warn(\"[LessonInterfaceUtils] Chrome storage set failed, using localStorage fallback:\", error);\n            }\n        }\n        // Fallback to localStorage with the same format as content script\n        try {\n            localStorage.setItem(\"linguaspark_lesson_config\", JSON.stringify(data));\n            console.log(\"[LessonInterfaceUtils] Stored data in localStorage fallback\");\n        } catch (error) {\n            console.warn(\"[LessonInterfaceUtils] localStorage fallback failed:\", error);\n            // Final fallback to session storage\n            for (const [key, value] of Object.entries(data)){\n                sessionStorage.setItem(\"linguaspark_\".concat(key), JSON.stringify(value));\n            }\n        }\n    },\n    /**\r\n   * Format attribution text for display\r\n   */ formatAttribution (attribution) {\n        return attribution.startsWith(\"Source: \") ? attribution : \"Source: \".concat(attribution);\n    },\n    /**\r\n   * Create lesson metadata display\r\n   */ createMetadataDisplay (metadata) {\n        const parts = [];\n        if (metadata.title) {\n            parts.push(metadata.title);\n        }\n        if (metadata.author) {\n            parts.push(\"by \".concat(metadata.author));\n        }\n        if (metadata.domain) {\n            parts.push(\"from \".concat(metadata.domain));\n        }\n        parts.push(\"\".concat(metadata.wordCount, \" words\"));\n        parts.push(\"\".concat(metadata.readingTime, \" min read\"));\n        return parts.join(\" â€¢ \");\n    },\n    /**\r\n   * Debug storage state for troubleshooting\r\n   */ async debugStorageState () {\n        console.log(\"[LessonInterfaceBridge] Debug Storage State:\");\n        console.log(\"- Chrome extension context:\", this.isChromeExtensionContext());\n        console.log(\"- URL:\", window.location.href);\n        console.log(\"- URL params:\", Object.fromEntries(new URLSearchParams(window.location.search)));\n        if (this.isChromeExtensionContext()) {\n            const chromeData = await this.safeStorageGet([\n                \"lessonConfiguration\",\n                \"extractedContent\",\n                \"selectedText\"\n            ]);\n            console.log(\"- Chrome storage:\", chromeData);\n        }\n        console.log(\"- Session storage keys:\", Object.keys(sessionStorage).filter((k)=>k.startsWith(\"linguaspark_\")));\n        const sessionConfig = sessionStorage.getItem(\"linguaspark_lesson_config\");\n        if (sessionConfig) {\n            try {\n                console.log(\"- Session config:\", JSON.parse(sessionConfig));\n            } catch (e) {\n                console.log(\"- Session config (raw):\", sessionConfig);\n            }\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9sZXNzb24taW50ZXJmYWNlLWJyaWRnZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7O0NBT0MsR0FxRE0sTUFBTUE7SUFZWDs7R0FFQyxHQUNELFdBQWtCRSxTQUF5QyxFQUFRO1FBQ2pFLElBQUksQ0FBQ0EsU0FBUyxHQUFHQTtJQUNuQjtJQUVBOzs7R0FHQyxHQUNELE1BQWFDLG9CQUFvQkMsT0FBeUIsRUFBaUI7UUFDekUsSUFBSTtZQUNGLGtDQUFrQztZQUNsQyxNQUFNQyxTQUFTLElBQUksQ0FBQ0MsNEJBQTRCLENBQUNGO1lBQ2pELElBQUksQ0FBQ0csb0JBQW9CLEdBQUdGO1lBRTVCLCtDQUErQztZQUMvQyxNQUFNLElBQUksQ0FBQ0csa0JBQWtCLENBQUNIO1lBRTlCLDRCQUE0QjtZQUM1QixNQUFNLElBQUksQ0FBQ0ksYUFBYTtZQUV4QixlQUFlO1lBQ2YsSUFBSSxDQUFDQyxLQUFLLENBQUNDLG1CQUFtQixHQUFHO1lBQ2pDLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxtQkFBbUIsR0FBRztZQUVqQyxrQkFBa0I7WUFDbEIsSUFBSSxJQUFJLENBQUNWLFNBQVMsQ0FBQ1csdUJBQXVCLEVBQUU7Z0JBQzFDLElBQUksQ0FBQ1gsU0FBUyxDQUFDVyx1QkFBdUIsQ0FBQ1I7WUFDekM7UUFFRixFQUFFLE9BQU9TLE9BQU87WUFDZCxNQUFNQyxlQUFlRCxpQkFBaUJFLFFBQVFGLE1BQU1HLE9BQU8sR0FBRztZQUM5REMsUUFBUUosS0FBSyxDQUFDLDREQUE0REE7WUFFMUUsSUFBSSxJQUFJLENBQUNaLFNBQVMsQ0FBQ2lCLE9BQU8sRUFBRTtnQkFDMUIsSUFBSSxDQUFDakIsU0FBUyxDQUFDaUIsT0FBTyxDQUFDSjtZQUN6QjtZQUVBLE1BQU0sSUFBSUMsTUFBTUQ7UUFDbEI7SUFDRjtJQUVBOzs7R0FHQyxHQUNELE1BQWFLLGtCQUFrQmhCLE9BQXlCLEVBQWlCO1FBQ3ZFLElBQUk7WUFDRixNQUFNQyxT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cEI7SUFFQTs7R0FFQyxHQUNELE1BQU1DO1FBQ0o3SCxRQUFROEMsR0FBRyxDQUFDO1FBQ1o5QyxRQUFROEMsR0FBRyxDQUFDLCtCQUErQixJQUFJLENBQUMyRCx3QkFBd0I7UUFDeEV6RyxRQUFROEMsR0FBRyxDQUFDLFVBQVU5QixPQUFPRyxRQUFRLENBQUMyRyxJQUFJO1FBQzFDOUgsUUFBUThDLEdBQUcsQ0FBQyxpQkFBaUJnRSxPQUFPaUIsV0FBVyxDQUFDLElBQUk3RyxnQkFBZ0JGLE9BQU9HLFFBQVEsQ0FBQ0MsTUFBTTtRQUUxRixJQUFJLElBQUksQ0FBQ3FGLHdCQUF3QixJQUFJO1lBQ25DLE1BQU11QixhQUFhLE1BQU0sSUFBSSxDQUFDdEIsY0FBYyxDQUFDO2dCQUFDO2dCQUF1QjtnQkFBb0I7YUFBZTtZQUN4RzFHLFFBQVE4QyxHQUFHLENBQUMscUJBQXFCa0Y7UUFDbkM7UUFFQWhJLFFBQVE4QyxHQUFHLENBQUMsMkJBQTJCZ0UsT0FBT0gsSUFBSSxDQUFDeEUsZ0JBQWdCOEYsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFVixVQUFVLENBQUM7UUFFNUYsTUFBTVcsZ0JBQWdCaEcsZUFBZUUsT0FBTyxDQUFDO1FBQzdDLElBQUk4RixlQUFlO1lBQ2pCLElBQUk7Z0JBQ0ZuSSxRQUFROEMsR0FBRyxDQUFDLHFCQUFxQlIsS0FBS0MsS0FBSyxDQUFDNEY7WUFDOUMsRUFBRSxVQUFNO2dCQUNObkksUUFBUThDLEdBQUcsQ0FBQywyQkFBMkJxRjtZQUN6QztRQUNGO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9sZXNzb24taW50ZXJmYWNlLWJyaWRnZS50cz85YzIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBMZXNzb24gSW50ZXJmYWNlIEJyaWRnZVxyXG4gKiBcclxuICogQ29ubmVjdHMgZXh0cmFjdGVkIGNvbnRlbnQgdG8gdGhlIGV4aXN0aW5nIGxlc3NvbiBnZW5lcmF0aW9uIGludGVyZmFjZS5cclxuICogSGFuZGxlcyBhdXRvbWF0aWMgcG9wdXAgb3BlbmluZywgY29udGVudCBwcmUtcG9wdWxhdGlvbiwgYW5kIG1ldGFkYXRhIHByZXNlcnZhdGlvbi5cclxuICogXHJcbiAqIFJlcXVpcmVtZW50czogNC4xLCA0LjIsIDQuNiwgNi42XHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBFeHRyYWN0ZWRDb250ZW50IH0gZnJvbSAnLi9lbmhhbmNlZC1jb250ZW50LWV4dHJhY3Rvcic7XHJcbmltcG9ydCB0eXBlIHsgTGVzc29uVHlwZSwgQ0VGUkxldmVsIH0gZnJvbSAnLi9leHRyYWN0aW9uLWNvbmZpcm1hdGlvbi1tYW5hZ2VyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVzc29uUHJlQ29uZmlndXJhdGlvbiB7XHJcbiAgc291cmNlQ29udGVudDogc3RyaW5nO1xyXG4gIHN1Z2dlc3RlZFR5cGU6IExlc3NvblR5cGU7XHJcbiAgc3VnZ2VzdGVkTGV2ZWw6IENFRlJMZXZlbDtcclxuICBtZXRhZGF0YTogRXh0cmFjdGVkQ29udGVudE1ldGFkYXRhO1xyXG4gIGV4dHJhY3Rpb25Tb3VyY2U6ICd3ZWJwYWdlJztcclxuICBhbGxvd0NvbnRlbnRFZGl0aW5nOiBib29sZWFuO1xyXG4gIHVzZXJDYW5Nb2RpZnlTZXR0aW5nczogYm9vbGVhbjtcclxuICBhdHRyaWJ1dGlvbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4dHJhY3RlZENvbnRlbnRNZXRhZGF0YSB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBhdXRob3I/OiBzdHJpbmc7XHJcbiAgc291cmNlVXJsOiBzdHJpbmc7XHJcbiAgZG9tYWluOiBzdHJpbmc7XHJcbiAgZXh0cmFjdGVkQXQ6IERhdGU7XHJcbiAgd29yZENvdW50OiBudW1iZXI7XHJcbiAgcmVhZGluZ1RpbWU6IG51bWJlcjtcclxuICBjb21wbGV4aXR5OiAnYmVnaW5uZXInIHwgJ2ludGVybWVkaWF0ZScgfCAnYWR2YW5jZWQnO1xyXG4gIHN1aXRhYmlsaXR5U2NvcmU6IG51bWJlcjtcclxuICBiYW5uZXJJbWFnZXM/OiBBcnJheTx7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIGFsdDogc3RyaW5nO1xyXG4gICAgdHlwZTogJ21ldGEnIHwgJ2NvbnRlbnQnO1xyXG4gICAgcHJpb3JpdHk6IG51bWJlcjtcclxuICAgIHdpZHRoPzogbnVtYmVyIHwgbnVsbDtcclxuICAgIGhlaWdodD86IG51bWJlciB8IG51bGw7XHJcbiAgfT47XHJcbiAgYmFubmVySW1hZ2U/OiBzdHJpbmc7IC8vIFVSTCBvZiB0aGUgcHJpbWFyeSBiYW5uZXIgaW1hZ2VcclxuICBpbWFnZXM/OiBBcnJheTxhbnk+OyAvLyBBbGwgZXh0cmFjdGVkIGltYWdlc1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEludGVyZmFjZVN0YXRlIHtcclxuICBjb250ZW50UHJlUG9wdWxhdGVkOiBib29sZWFuO1xyXG4gIHNldHRpbmdzQ3VzdG9taXphYmxlOiBib29sZWFuO1xyXG4gIGV4dHJhY3Rpb25Db25maXJtZWQ6IGJvb2xlYW47XHJcbiAgcmVhZHlGb3JHZW5lcmF0aW9uOiBib29sZWFuO1xyXG4gIGxlc3NvbkludGVyZmFjZU9wZW46IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVzc29uSW50ZXJmYWNlQnJpZGdlQ2FsbGJhY2tzIHtcclxuICBvbkxlc3NvbkludGVyZmFjZU9wZW5lZD86IChjb25maWc6IExlc3NvblByZUNvbmZpZ3VyYXRpb24pID0+IHZvaWQ7XHJcbiAgb25Db250ZW50UHJlUG9wdWxhdGVkPzogKGNvbnRlbnQ6IHN0cmluZykgPT4gdm9pZDtcclxuICBvblNldHRpbmdzQXBwbGllZD86IChsZXNzb25UeXBlOiBMZXNzb25UeXBlLCBjZWZyTGV2ZWw6IENFRlJMZXZlbCkgPT4gdm9pZDtcclxuICBvbkVycm9yPzogKGVycm9yOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMZXNzb25JbnRlcmZhY2VCcmlkZ2Uge1xyXG4gIHByaXZhdGUgc3RhdGU6IEludGVyZmFjZVN0YXRlID0ge1xyXG4gICAgY29udGVudFByZVBvcHVsYXRlZDogZmFsc2UsXHJcbiAgICBzZXR0aW5nc0N1c3RvbWl6YWJsZTogdHJ1ZSxcclxuICAgIGV4dHJhY3Rpb25Db25maXJtZWQ6IGZhbHNlLFxyXG4gICAgcmVhZHlGb3JHZW5lcmF0aW9uOiBmYWxzZSxcclxuICAgIGxlc3NvbkludGVyZmFjZU9wZW46IGZhbHNlXHJcbiAgfTtcclxuICBcclxuICBwcml2YXRlIGNhbGxiYWNrczogTGVzc29uSW50ZXJmYWNlQnJpZGdlQ2FsbGJhY2tzID0ge307XHJcbiAgcHJpdmF0ZSBjdXJyZW50Q29uZmlndXJhdGlvbjogTGVzc29uUHJlQ29uZmlndXJhdGlvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIHRoZSBicmlkZ2Ugd2l0aCBjYWxsYmFja3NcclxuICAgKi9cclxuICBwdWJsaWMgaW5pdGlhbGl6ZShjYWxsYmFja3M6IExlc3NvbkludGVyZmFjZUJyaWRnZUNhbGxiYWNrcyk6IHZvaWQge1xyXG4gICAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVuIGxlc3NvbiBpbnRlcmZhY2Ugd2l0aCBleHRyYWN0ZWQgY29udGVudFxyXG4gICAqIFJlcXVpcmVtZW50IDQuMTogT3BlbiB0aGUgTGluZ3VhU3BhcmsgbGVzc29uIGdlbmVyYXRpb24gaW50ZXJmYWNlXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIG9wZW5MZXNzb25JbnRlcmZhY2UoY29udGVudDogRXh0cmFjdGVkQ29udGVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ3JlYXRlIGxlc3NvbiBwcmUtY29uZmlndXJhdGlvblxyXG4gICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNyZWF0ZUxlc3NvblByZUNvbmZpZ3VyYXRpb24oY29udGVudCk7XHJcbiAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSBjb25maWc7XHJcblxyXG4gICAgICAvLyBTdG9yZSBjb25maWd1cmF0aW9uIGZvciB0aGUgbGVzc29uIGludGVyZmFjZVxyXG4gICAgICBhd2FpdCB0aGlzLnN0b3JlQ29uZmlndXJhdGlvbihjb25maWcpO1xyXG5cclxuICAgICAgLy8gT3BlbiB0aGUgbGVzc29uIGludGVyZmFjZVxyXG4gICAgICBhd2FpdCB0aGlzLm9wZW5JbnRlcmZhY2UoKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxyXG4gICAgICB0aGlzLnN0YXRlLmxlc3NvbkludGVyZmFjZU9wZW4gPSB0cnVlO1xyXG4gICAgICB0aGlzLnN0YXRlLmV4dHJhY3Rpb25Db25maXJtZWQgPSB0cnVlO1xyXG5cclxuICAgICAgLy8gTm90aWZ5IGNhbGxiYWNrXHJcbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrcy5vbkxlc3NvbkludGVyZmFjZU9wZW5lZCkge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uTGVzc29uSW50ZXJmYWNlT3BlbmVkKGNvbmZpZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gb3BlbiBsZXNzb24gaW50ZXJmYWNlJztcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIG9wZW4gbGVzc29uIGludGVyZmFjZTonLCBlcnJvcik7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodGhpcy5jYWxsYmFja3Mub25FcnJvcikge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQcmUtcG9wdWxhdGUgbGVzc29uIGludGVyZmFjZSB3aXRoIGV4dHJhY3RlZCBjb250ZW50XHJcbiAgICogUmVxdWlyZW1lbnQgNC4yOiBQcmUtcG9wdWxhdGUgc291cmNlIGNvbnRlbnQgZmllbGQgd2l0aCBleHRyYWN0ZWQgY29udGVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBwb3B1bGF0ZUludGVyZmFjZShjb250ZW50OiBFeHRyYWN0ZWRDb250ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNyZWF0ZUxlc3NvblByZUNvbmZpZ3VyYXRpb24oY29udGVudCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTdG9yZSB0aGUgY29udGVudCBmb3IgdGhlIGxlc3NvbiBnZW5lcmF0b3JcclxuICAgICAgYXdhaXQgdGhpcy5zdG9yZUV4dHJhY3RlZENvbnRlbnQoY29uZmlnKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZVxyXG4gICAgICB0aGlzLnN0YXRlLmNvbnRlbnRQcmVQb3B1bGF0ZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLnN0YXRlLnJlYWR5Rm9yR2VuZXJhdGlvbiA9IHRydWU7XHJcblxyXG4gICAgICAvLyBOb3RpZnkgY2FsbGJhY2tcclxuICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzLm9uQ29udGVudFByZVBvcHVsYXRlZCkge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uQ29udGVudFByZVBvcHVsYXRlZChjb25maWcuc291cmNlQ29udGVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcG9wdWxhdGUgaW50ZXJmYWNlJztcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIHBvcHVsYXRlIGludGVyZmFjZTonLCBlcnJvcik7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodGhpcy5jYWxsYmFja3Mub25FcnJvcikge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFbmFibGUgY29udGVudCBlZGl0aW5nIGluIHRoZSBsZXNzb24gaW50ZXJmYWNlXHJcbiAgICogUmVxdWlyZW1lbnQgNC41OiBVc2VyIGNhbiBlZGl0IGV4dHJhY3RlZCBjb250ZW50IGJlZm9yZSBnZW5lcmF0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIGVuYWJsZUNvbnRlbnRFZGl0aW5nKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5hbGxvd0NvbnRlbnRFZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5zdG9yZUNvbmZpZ3VyYXRpb24odGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQcmVzZXJ2ZSB1c2VyIGN1c3RvbWl6YXRpb25zXHJcbiAgICogUmVxdWlyZW1lbnQgNC40OiBVc2VyIGNhbiBtb2RpZnkgbGVzc29uIHR5cGUsIENFRlIgbGV2ZWwsIGFuZCBvdGhlciBzZXR0aW5nc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBwcmVzZXJ2ZVVzZXJDdXN0b21pemF0aW9ucygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udXNlckNhbk1vZGlmeVNldHRpbmdzID0gdHJ1ZTtcclxuICAgICAgdGhpcy5zdG9yZUNvbmZpZ3VyYXRpb24odGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlZ3JhdGUgd2l0aCBleGlzdGluZyBsZXNzb24gZ2VuZXJhdGlvbiB3b3JrZmxvd1xyXG4gICAqIFJlcXVpcmVtZW50IDQuNjogRm9sbG93IGV4aXN0aW5nIGVuaGFuY2VkIGxlc3NvbiBnZW5lcmF0aW9uIHdvcmtmbG93XHJcbiAgICovXHJcbiAgcHVibGljIGludGVncmF0ZVdpdGhFeGlzdGluZ1dvcmtmbG93KCk6IHZvaWQge1xyXG4gICAgLy8gVGhlIGludGVncmF0aW9uIGhhcHBlbnMgdGhyb3VnaCB0aGUgc3RvcmVkIGNvbmZpZ3VyYXRpb25cclxuICAgIC8vIFRoZSBsZXNzb24gZ2VuZXJhdG9yIHdpbGwgZGV0ZWN0IHRoZSBleHRyYWN0aW9uIHNvdXJjZSBhbmQgaGFuZGxlIGFjY29yZGluZ2x5XHJcbiAgICB0aGlzLnN0YXRlLnJlYWR5Rm9yR2VuZXJhdGlvbiA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY3VycmVudCBpbnRlcmZhY2Ugc3RhdGVcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0U3RhdGUoKTogSW50ZXJmYWNlU3RhdGUge1xyXG4gICAgcmV0dXJuIHsgLi4udGhpcy5zdGF0ZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGN1cnJlbnQgY29uZmlndXJhdGlvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDdXJyZW50Q29uZmlndXJhdGlvbigpOiBMZXNzb25QcmVDb25maWd1cmF0aW9uIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA/IHsgLi4udGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiB9IDogbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGNvbnRlbnQgaXMgZnJvbSBleHRyYWN0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBpc0V4dHJhY3Rpb25Tb3VyY2UoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBGaXJzdCB0cnkgVVJMIHBhcmFtZXRlcnMgKG1vc3QgcmVsaWFibGUgZm9yIHdlYiBjb250ZXh0KVxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgICAgIGlmICh1cmxQYXJhbXMuZ2V0KCdzb3VyY2UnKSA9PT0gJ2V4dHJhY3Rpb24nKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBDaHJvbWUgc3RvcmFnZSBpZiBhdmFpbGFibGUgKGV4dGVuc2lvbiBjb250ZXh0KVxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uc3RvcmFnZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbJ2V4dHJhY3Rpb25Tb3VyY2UnXSwgKHJlc3VsdDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gQ2hyb21lIHN0b3JhZ2UgZXJyb3IsIGNoZWNraW5nIGxvY2FsU3RvcmFnZSBmYWxsYmFjazonLCB3aW5kb3cuY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgbG9jYWxTdG9yYWdlIGZhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWxsYmFja0NvbmZpZyA9IExlc3NvbkludGVyZmFjZUJyaWRnZS5sb2FkRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxsYmFja0NvbmZpZz8uZXh0cmFjdGlvblNvdXJjZSA9PT0gJ3dlYnBhZ2UnKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZXh0cmFjdGlvblNvdXJjZSA9PT0gJ3dlYnBhZ2UnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBDaHJvbWUgc3RvcmFnZSBhY2Nlc3MgZmFpbGVkLCBjaGVja2luZyBsb2NhbFN0b3JhZ2UgZmFsbGJhY2s6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDaGVjayBsb2NhbFN0b3JhZ2UgZmFsbGJhY2tcclxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxsYmFja0NvbmZpZz8uZXh0cmFjdGlvblNvdXJjZSA9PT0gJ3dlYnBhZ2UnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVHJ5IGxvY2FsU3RvcmFnZSAoZmFsbGJhY2sgZm9yIGV4dGVuc2lvbiBjb250ZXh0IGludmFsaWRhdGlvbilcclxuICAgICAgY29uc3QgbG9jYWxTdG9yYWdlQ29uZmlnID0gTGVzc29uSW50ZXJmYWNlQnJpZGdlLmxvYWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgIGlmIChsb2NhbFN0b3JhZ2VDb25maWc/LmV4dHJhY3Rpb25Tb3VyY2UgPT09ICd3ZWJwYWdlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUcnkgc2Vzc2lvbiBzdG9yYWdlICh3ZWIgY29udGV4dCBmYWxsYmFjaylcclxuICAgICAgaWYgKHR5cGVvZiBzZXNzaW9uU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBjb25zdCBzdG9yZWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICAgICAgaWYgKHN0b3JlZCkge1xyXG4gICAgICAgICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShzdG9yZWQpO1xyXG4gICAgICAgICAgcmV0dXJuIGNvbmZpZy5leHRyYWN0aW9uU291cmNlID09PSAnd2VicGFnZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gY2hlY2sgZXh0cmFjdGlvbiBzb3VyY2U6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2FkIGV4dHJhY3Rpb24gY29uZmlndXJhdGlvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZEV4dHJhY3Rpb25Db25maWd1cmF0aW9uKCk6IFByb21pc2U8TGVzc29uUHJlQ29uZmlndXJhdGlvbiB8IG51bGw+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFRyeSBDaHJvbWUgc3RvcmFnZSBpZiBhdmFpbGFibGUgKGV4dGVuc2lvbiBjb250ZXh0KVxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uc3RvcmFnZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgd2luZG93LmNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbJ2xlc3NvbkNvbmZpZ3VyYXRpb24nXSwgKHJlc3VsdDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gQ2hyb21lIHN0b3JhZ2UgZXJyb3IsIHRyeWluZyBsb2NhbFN0b3JhZ2UgZmFsbGJhY2s6Jywgd2luZG93LmNocm9tZS5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGxvY2FsU3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsbGJhY2tDb25maWcpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lmxlc3NvbkNvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFBhcnNlIGRhdGVzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSByZXN1bHQubGVzc29uQ29uZmlndXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIGlmIChjb25maWcubWV0YWRhdGEuZXh0cmFjdGVkQXQpIHtcclxuICAgICAgICAgICAgICAgICAgY29uZmlnLm1ldGFkYXRhLmV4dHJhY3RlZEF0ID0gbmV3IERhdGUoY29uZmlnLm1ldGFkYXRhLmV4dHJhY3RlZEF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUoY29uZmlnKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVHJ5IGxvY2FsU3RvcmFnZSBmYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsbGJhY2tDb25maWcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIENocm9tZSBzdG9yYWdlIGFjY2VzcyBmYWlsZWQsIHVzaW5nIGxvY2FsU3RvcmFnZSBmYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrQ29uZmlnID0gTGVzc29uSW50ZXJmYWNlQnJpZGdlLmxvYWRGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZmFsbGJhY2tDb25maWcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIChmYWxsYmFjayBmb3IgZXh0ZW5zaW9uIGNvbnRleHQgaW52YWxpZGF0aW9uKVxyXG4gICAgICBjb25zdCBsb2NhbFN0b3JhZ2VDb25maWcgPSBMZXNzb25JbnRlcmZhY2VCcmlkZ2UubG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgaWYgKGxvY2FsU3RvcmFnZUNvbmZpZykge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2VDb25maWc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBzZXNzaW9uIHN0b3JhZ2UgKHdlYiBjb250ZXh0KVxyXG4gICAgICBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnKTtcclxuICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgICAvLyBQYXJzZSBkYXRlc1xyXG4gICAgICAgICAgaWYgKGNvbmZpZy5tZXRhZGF0YS5leHRyYWN0ZWRBdCkge1xyXG4gICAgICAgICAgICBjb25maWcubWV0YWRhdGEuZXh0cmFjdGVkQXQgPSBuZXcgRGF0ZShjb25maWcubWV0YWRhdGEuZXh0cmFjdGVkQXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyeSBVUkwgcGFyYW1ldGVycyAoZm9yIG1ldGFkYXRhIG9ubHksIGNvbnRlbnQgc2hvdWxkIGJlIGluIHN0b3JhZ2UpXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgICAgICAgY29uc3Qgc291cmNlUGFyYW0gPSB1cmxQYXJhbXMuZ2V0KCdzb3VyY2VVcmwnKTtcclxuICAgICAgICBjb25zdCBpc0V4dHJhY3Rpb25Tb3VyY2UgPSB1cmxQYXJhbXMuZ2V0KCdzb3VyY2UnKSA9PT0gJ2V4dHJhY3Rpb24nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gZXh0cmFjdGlvbiBzb3VyY2UgYnV0IG5vIGNvbnRlbnQgaW4gVVJMLCBpdCBzaG91bGQgYmUgaW4gc3RvcmFnZVxyXG4gICAgICAgIGlmIChpc0V4dHJhY3Rpb25Tb3VyY2UgJiYgc291cmNlUGFyYW0pIHtcclxuICAgICAgICAgIC8vIFRoaXMgaW5kaWNhdGVzIGNvbnRlbnQgc2hvdWxkIGJlIGF2YWlsYWJsZSBpbiBzdG9yYWdlXHJcbiAgICAgICAgICAvLyBSZXR1cm4gbnVsbCBoZXJlIHNvIHRoZSBjYWxsZXIga25vd3MgdG8gY2hlY2sgc3RvcmFnZVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEV4dHJhY3Rpb24gc291cmNlIGRldGVjdGVkIGJ1dCBjb250ZW50IG5vdCBpbiBVUkwgLSBzaG91bGQgYmUgaW4gc3RvcmFnZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBMZWdhY3kgc3VwcG9ydDogaWYgY29udGVudCBpcyBpbiBVUkwgcGFyYW1ldGVycyAoZm9yIHNtYWxsIGNvbnRlbnQpXHJcbiAgICAgICAgY29uc3QgY29udGVudFBhcmFtID0gdXJsUGFyYW1zLmdldCgnY29udGVudCcpO1xyXG4gICAgICAgIGlmIChjb250ZW50UGFyYW0gJiYgc291cmNlUGFyYW0pIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZWRDb250ZW50ID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvbnRlbnRQYXJhbSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgc291cmNlQ29udGVudDogZGVjb2RlZENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgc3VnZ2VzdGVkVHlwZTogKHVybFBhcmFtcy5nZXQoJ3R5cGUnKSBhcyBMZXNzb25UeXBlKSB8fCAnZGlzY3Vzc2lvbicsXHJcbiAgICAgICAgICAgICAgc3VnZ2VzdGVkTGV2ZWw6ICh1cmxQYXJhbXMuZ2V0KCdsZXZlbCcpIGFzIENFRlJMZXZlbCkgfHwgJ0IxJyxcclxuICAgICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHVybFBhcmFtcy5nZXQoJ3RpdGxlJykgfHwgJ0V4dHJhY3RlZCBDb250ZW50JyxcclxuICAgICAgICAgICAgICAgIHNvdXJjZVVybDogZGVjb2RlVVJJQ29tcG9uZW50KHNvdXJjZVBhcmFtKSxcclxuICAgICAgICAgICAgICAgIGRvbWFpbjogbmV3IFVSTChkZWNvZGVVUklDb21wb25lbnQoc291cmNlUGFyYW0pKS5ob3N0bmFtZSxcclxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29yZENvdW50OiBkZWNvZGVkQ29udGVudC5zcGxpdCgvXFxzKy8pLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJlYWRpbmdUaW1lOiBNYXRoLmNlaWwoZGVjb2RlZENvbnRlbnQuc3BsaXQoL1xccysvKS5sZW5ndGggLyAyMDApLFxyXG4gICAgICAgICAgICAgICAgY29tcGxleGl0eTogJ2ludGVybWVkaWF0ZScsXHJcbiAgICAgICAgICAgICAgICBzdWl0YWJpbGl0eVNjb3JlOiAwLjhcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGV4dHJhY3Rpb25Tb3VyY2U6ICd3ZWJwYWdlJyxcclxuICAgICAgICAgICAgICBhbGxvd0NvbnRlbnRFZGl0aW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHVzZXJDYW5Nb2RpZnlTZXR0aW5nczogdHJ1ZSxcclxuICAgICAgICAgICAgICBhdHRyaWJ1dGlvbjogYFNvdXJjZTogJHtuZXcgVVJMKGRlY29kZVVSSUNvbXBvbmVudChzb3VyY2VQYXJhbSkpLmhvc3RuYW1lfWBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0gY2F0Y2ggKHVybEVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIHBhcnNlIFVSTCBwYXJhbWV0ZXJzOicsIHVybEVycm9yKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIGxvYWQgZXh0cmFjdGlvbiBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhciBleHRyYWN0aW9uIGNvbmZpZ3VyYXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNsZWFyRXh0cmFjdGlvbkNvbmZpZ3VyYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uc3RvcmFnZSkge1xyXG4gICAgICAgIHdpbmRvdy5jaHJvbWUuc3RvcmFnZS5sb2NhbC5yZW1vdmUoWydsZXNzb25Db25maWd1cmF0aW9uJywgJ2V4dHJhY3Rpb25Tb3VyY2UnXSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIGNsZWFyIGV4dHJhY3Rpb24gY29uZmlndXJhdGlvbjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgbGVzc29uIHByZS1jb25maWd1cmF0aW9uIGZyb20gZXh0cmFjdGVkIGNvbnRlbnRcclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZUxlc3NvblByZUNvbmZpZ3VyYXRpb24oY29udGVudDogRXh0cmFjdGVkQ29udGVudCk6IExlc3NvblByZUNvbmZpZ3VyYXRpb24ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc291cmNlQ29udGVudDogY29udGVudC50ZXh0LFxyXG4gICAgICBzdWdnZXN0ZWRUeXBlOiBjb250ZW50LnN1Z2dlc3RlZExlc3NvblR5cGUsXHJcbiAgICAgIHN1Z2dlc3RlZExldmVsOiBjb250ZW50LnN1Z2dlc3RlZENFRlJMZXZlbCxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICB0aXRsZTogY29udGVudC5tZXRhZGF0YS50aXRsZSxcclxuICAgICAgICBhdXRob3I6IGNvbnRlbnQubWV0YWRhdGEuYXV0aG9yLFxyXG4gICAgICAgIHNvdXJjZVVybDogY29udGVudC5tZXRhZGF0YS5zb3VyY2VVcmwsXHJcbiAgICAgICAgZG9tYWluOiBjb250ZW50Lm1ldGFkYXRhLmRvbWFpbixcclxuICAgICAgICBleHRyYWN0ZWRBdDogY29udGVudC5zb3VyY2VJbmZvLmV4dHJhY3RlZEF0LFxyXG4gICAgICAgIHdvcmRDb3VudDogY29udGVudC5xdWFsaXR5LndvcmRDb3VudCxcclxuICAgICAgICByZWFkaW5nVGltZTogY29udGVudC5xdWFsaXR5LnJlYWRpbmdUaW1lLFxyXG4gICAgICAgIGNvbXBsZXhpdHk6IGNvbnRlbnQucXVhbGl0eS5jb21wbGV4aXR5LFxyXG4gICAgICAgIHN1aXRhYmlsaXR5U2NvcmU6IGNvbnRlbnQucXVhbGl0eS5zdWl0YWJpbGl0eVNjb3JlXHJcbiAgICAgIH0sXHJcbiAgICAgIGV4dHJhY3Rpb25Tb3VyY2U6ICd3ZWJwYWdlJyxcclxuICAgICAgYWxsb3dDb250ZW50RWRpdGluZzogdHJ1ZSxcclxuICAgICAgdXNlckNhbk1vZGlmeVNldHRpbmdzOiB0cnVlLFxyXG4gICAgICBhdHRyaWJ1dGlvbjogY29udGVudC5zb3VyY2VJbmZvLmF0dHJpYnV0aW9uXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmUgY29uZmlndXJhdGlvbiBmb3IgbGVzc29uIGludGVyZmFjZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgc3RvcmVDb25maWd1cmF0aW9uKGNvbmZpZzogTGVzc29uUHJlQ29uZmlndXJhdGlvbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jaHJvbWU/LnN0b3JhZ2UpIHtcclxuICAgICAgICAvLyBTdG9yZSBpbiBDaHJvbWUgZXh0ZW5zaW9uIHN0b3JhZ2VcclxuICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcclxuICAgICAgICAgIGxlc3NvbkNvbmZpZ3VyYXRpb246IGNvbmZpZyxcclxuICAgICAgICAgIGV4dHJhY3Rpb25Tb3VyY2U6ICd3ZWJwYWdlJyxcclxuICAgICAgICAgIGV4dHJhY3Rpb25UaW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2Vzc2lvblN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gc2Vzc2lvbiBzdG9yYWdlXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBGYWlsZWQgdG8gc3RvcmUgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmUgZXh0cmFjdGVkIGNvbnRlbnQgZm9yIGxlc3NvbiBnZW5lcmF0b3JcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHN0b3JlRXh0cmFjdGVkQ29udGVudChjb25maWc6IExlc3NvblByZUNvbmZpZ3VyYXRpb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5zdG9yYWdlKSB7XHJcbiAgICAgICAgLy8gU3RvcmUgY29udGVudCBpbiB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IGxlc3NvbiBnZW5lcmF0b3JcclxuICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcclxuICAgICAgICAgIHNlbGVjdGVkVGV4dDogY29uZmlnLnNvdXJjZUNvbnRlbnQsXHJcbiAgICAgICAgICBzb3VyY2VVcmw6IGNvbmZpZy5tZXRhZGF0YS5zb3VyY2VVcmwsXHJcbiAgICAgICAgICBsZXNzb25UeXBlOiBjb25maWcuc3VnZ2VzdGVkVHlwZSxcclxuICAgICAgICAgIHN0dWRlbnRMZXZlbDogY29uZmlnLnN1Z2dlc3RlZExldmVsLFxyXG4gICAgICAgICAgZXh0cmFjdGlvbk1ldGFkYXRhOiBjb25maWcubWV0YWRhdGEsXHJcbiAgICAgICAgICBhdHRyaWJ1dGlvbjogY29uZmlnLmF0dHJpYnV0aW9uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIEZhbGxiYWNrIHN0b3JhZ2VcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsaW5ndWFzcGFya19zZWxlY3RlZF90ZXh0JywgY29uZmlnLnNvdXJjZUNvbnRlbnQpO1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2xpbmd1YXNwYXJrX3NvdXJjZV91cmwnLCBjb25maWcubWV0YWRhdGEuc291cmNlVXJsKTtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fdHlwZScsIGNvbmZpZy5zdWdnZXN0ZWRUeXBlKTtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsaW5ndWFzcGFya19zdHVkZW50X2xldmVsJywgY29uZmlnLnN1Z2dlc3RlZExldmVsKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIHN0b3JlIGV4dHJhY3RlZCBjb250ZW50OicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPcGVuIHRoZSBsZXNzb24gaW50ZXJmYWNlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBvcGVuSW50ZXJmYWNlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbjtcclxuICAgICAgaWYgKCFjb25maWcpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbmZpZ3VyYXRpb24gYXZhaWxhYmxlJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2hyb21lPy5hY3Rpb24pIHtcclxuICAgICAgICAvLyBFeHRlbnNpb24gY29udGV4dCAtIHRyeSB0byBvcGVuIHBvcHVwXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHdpbmRvdy5jaHJvbWUuYWN0aW9uLm9wZW5Qb3B1cCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKHBvcHVwRXJyb3IpIHtcclxuICAgICAgICAgIC8vIElmIHBvcHVwIGZhaWxzLCBvcGVuIGluIG5ldyB0YWIgd2l0aCBtaW5pbWFsIFVSTCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAvLyBBTFdBWVMgc3RvcmUgZnVsbCBjb250ZW50IGluIENocm9tZSBzdG9yYWdlLCBORVZFUiBpbiBVUkxcclxuICAgICAgICAgIGF3YWl0IHdpbmRvdy5jaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xyXG4gICAgICAgICAgICBsZXNzb25Db25maWd1cmF0aW9uOiBjb25maWcsXHJcbiAgICAgICAgICAgIGV4dHJhY3Rpb25Tb3VyY2U6ICd3ZWJwYWdlJyxcclxuICAgICAgICAgICAgZXh0cmFjdGlvblRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmNocm9tZS5ydW50aW1lLmdldFVSTCgncG9wdXAuaHRtbCcpKTtcclxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzb3VyY2UnLCAnZXh0cmFjdGlvbicpO1xyXG4gICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2F1dG9Qb3B1bGF0ZScsICd0cnVlJyk7XHJcbiAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc291cmNlVXJsJywgZW5jb2RlVVJJQ29tcG9uZW50KGNvbmZpZy5tZXRhZGF0YS5zb3VyY2VVcmwpKTtcclxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0eXBlJywgY29uZmlnLnN1Z2dlc3RlZFR5cGUpO1xyXG4gICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2xldmVsJywgY29uZmlnLnN1Z2dlc3RlZExldmVsKTtcclxuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0aXRsZScsIGVuY29kZVVSSUNvbXBvbmVudChjb25maWcubWV0YWRhdGEudGl0bGUpKTtcclxuICAgICAgICAgIC8vIE5PVEU6IE5PICdjb250ZW50JyBwYXJhbWV0ZXIgdG8gYXZvaWQgVVJMIGxlbmd0aCBsaW1pdHNcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIFN0b3JlZCBmdWxsIGNvbnRlbnQgaW4gQ2hyb21lIHN0b3JhZ2UsIG9wZW5pbmcgcG9wdXAgd2l0aCBtZXRhZGF0YS1vbmx5IFVSTCcpO1xyXG4gICAgICAgICAgYXdhaXQgd2luZG93LmNocm9tZS50YWJzLmNyZWF0ZSh7IHVybDogdXJsLnRvU3RyaW5nKCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gV2ViIGNvbnRleHQgLSBBTFdBWVMgc3RvcmUgZnVsbCBjb250ZW50IGluIHNlc3Npb24gc3RvcmFnZSwgTkVWRVIgaW4gVVJMXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbGluZ3Vhc3BhcmtfbGVzc29uX2NvbmZpZycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVzZSBtaW5pbWFsIFVSTCBwYXJhbWV0ZXJzIC0gTk8gQ09OVEVOVCBpbiBVUkwgdG8gYXZvaWQgdHJ1bmNhdGlvblxyXG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoJy9wb3B1cCcsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzb3VyY2UnLCAnZXh0cmFjdGlvbicpO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdhdXRvUG9wdWxhdGUnLCAndHJ1ZScpO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzb3VyY2VVcmwnLCBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLm1ldGFkYXRhLnNvdXJjZVVybCkpO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd0eXBlJywgY29uZmlnLnN1Z2dlc3RlZFR5cGUpO1xyXG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdsZXZlbCcsIGNvbmZpZy5zdWdnZXN0ZWRMZXZlbCk7XHJcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3RpdGxlJywgZW5jb2RlVVJJQ29tcG9uZW50KGNvbmZpZy5tZXRhZGF0YS50aXRsZSkpO1xyXG4gICAgICAgIC8vIE5PVEU6IE5PICdjb250ZW50JyBwYXJhbWV0ZXIgdG8gYXZvaWQgVVJMIGxlbmd0aCBsaW1pdHNcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gU3RvcmVkIGZ1bGwgY29udGVudCBpbiBzZXNzaW9uIHN0b3JhZ2UsIG9wZW5pbmcgcG9wdXAgd2l0aCBtZXRhZGF0YS1vbmx5IFVSTCcpO1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKHVybC50b1N0cmluZygpLCAnX2JsYW5rJyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBvcGVuIGludGVyZmFjZTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBsb2NhbFN0b3JhZ2UgKGZhbGxiYWNrIGZvciBleHRlbnNpb24gY29udGV4dCBpbnZhbGlkYXRpb24pXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgbG9hZEZyb21Mb2NhbFN0b3JhZ2UoKTogTGVzc29uUHJlQ29uZmlndXJhdGlvbiB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gbnVsbDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICAgIGlmIChzdG9yZWQpIHtcclxuICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgLy8gUGFyc2UgZGF0ZXNcclxuICAgICAgICBpZiAoY29uZmlnLm1ldGFkYXRhPy5leHRyYWN0ZWRBdCkge1xyXG4gICAgICAgICAgY29uZmlnLm1ldGFkYXRhLmV4dHJhY3RlZEF0ID0gbmV3IERhdGUoY29uZmlnLm1ldGFkYXRhLmV4dHJhY3RlZEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIExvYWRlZCBjb25maWd1cmF0aW9uIGZyb20gbG9jYWxTdG9yYWdlIGZhbGxiYWNrJyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBsb2FkIGZyb20gbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhciBleHRyYWN0aW9uIGNvbmZpZ3VyYXRpb24gZnJvbSBhbGwgc3RvcmFnZSB0eXBlc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2xlYXJFeHRyYWN0aW9uQ29uZmlndXJhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENsZWFyIENocm9tZSBzdG9yYWdlIGlmIGF2YWlsYWJsZVxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNocm9tZT8uc3RvcmFnZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwucmVtb3ZlKFsnbGVzc29uQ29uZmlndXJhdGlvbicsICdleHRyYWN0ZWRDb250ZW50JywgJ2V4dHJhY3Rpb25Tb3VyY2UnLCAnZXh0cmFjdGlvblRpbWVzdGFtcCddLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gQ2hyb21lIHN0b3JhZ2UgY2xlYXIgZXJyb3I6Jywgd2luZG93LmNocm9tZS5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBjbGVhciBDaHJvbWUgc3RvcmFnZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciBsb2NhbFN0b3JhZ2UgZmFsbGJhY2tcclxuICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIGNsZWFyIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciBzZXNzaW9uU3RvcmFnZVxyXG4gICAgICBpZiAodHlwZW9mIHNlc3Npb25TdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJyk7XHJcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdsaW5ndWFzcGFya19zZWxlY3RlZF90ZXh0Jyk7XHJcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdsaW5ndWFzcGFya19zb3VyY2VfdXJsJyk7XHJcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fdHlwZScpO1xyXG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbGluZ3Vhc3Bhcmtfc3R1ZGVudF9sZXZlbCcpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VCcmlkZ2VdIEZhaWxlZCB0byBjbGVhciBzZXNzaW9uU3RvcmFnZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gQ2xlYXJlZCBleHRyYWN0aW9uIGNvbmZpZ3VyYXRpb24gZnJvbSBhbGwgc3RvcmFnZSB0eXBlcycpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0xlc3NvbkludGVyZmFjZUJyaWRnZV0gRmFpbGVkIHRvIGNsZWFyIGV4dHJhY3Rpb24gY29uZmlndXJhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIGZvciBsZXNzb24gaW50ZXJmYWNlIGludGVncmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTGVzc29uSW50ZXJmYWNlVXRpbHMgPSB7XHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgY3VycmVudCBwYWdlIGlzIGxlc3NvbiBpbnRlcmZhY2Ugd2l0aCBleHRyYWN0aW9uIHNvdXJjZVxyXG4gICAqL1xyXG4gIGFzeW5jIGlzRXh0cmFjdGlvbkxlc3NvbkludGVyZmFjZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgY29uc3QgaXNFeHRyYWN0aW9uU291cmNlID0gdXJsUGFyYW1zLmdldCgnc291cmNlJykgPT09ICdleHRyYWN0aW9uJztcclxuICAgIGNvbnN0IHNob3VsZEF1dG9Qb3B1bGF0ZSA9IHVybFBhcmFtcy5nZXQoJ2F1dG9Qb3B1bGF0ZScpID09PSAndHJ1ZSc7XHJcbiAgICBcclxuICAgIHJldHVybiBpc0V4dHJhY3Rpb25Tb3VyY2UgJiYgc2hvdWxkQXV0b1BvcHVsYXRlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBleHRyYWN0aW9uIHBhcmFtZXRlcnMgZnJvbSBVUkxcclxuICAgKi9cclxuICBnZXRFeHRyYWN0aW9uUGFyYW1zKCk6IHsgc291cmNlOiBzdHJpbmcgfCBudWxsOyBhdXRvUG9wdWxhdGU6IGJvb2xlYW4gfSB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmV0dXJuIHsgc291cmNlOiBudWxsLCBhdXRvUG9wdWxhdGU6IGZhbHNlIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzb3VyY2U6IHVybFBhcmFtcy5nZXQoJ3NvdXJjZScpLFxyXG4gICAgICBhdXRvUG9wdWxhdGU6IHVybFBhcmFtcy5nZXQoJ2F1dG9Qb3B1bGF0ZScpID09PSAndHJ1ZSdcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgQ2hyb21lIEFQSXMgYXJlIGF2YWlsYWJsZVxyXG4gICAqL1xyXG4gIGlzQ2hyb21lRXh0ZW5zaW9uQ29udGV4dCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBcclxuICAgICAgICAgICB0eXBlb2Ygd2luZG93LmNocm9tZSAhPT0gJ3VuZGVmaW5lZCcgJiYgXHJcbiAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5jaHJvbWUuc3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCc7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogU2FmZSBDaHJvbWUgc3RvcmFnZSBhY2Nlc3Mgd2l0aCBmYWxsYmFja1xyXG4gICAqL1xyXG4gIGFzeW5jIHNhZmVTdG9yYWdlR2V0KGtleXM6IHN0cmluZ1tdKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIHNhZmVTdG9yYWdlR2V0IGNhbGxlZCB3aXRoIGtleXM6Jywga2V5cyk7XHJcbiAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBDaHJvbWUgZXh0ZW5zaW9uIGNvbnRleHQ6JywgdGhpcy5pc0Nocm9tZUV4dGVuc2lvbkNvbnRleHQoKSk7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmlzQ2hyb21lRXh0ZW5zaW9uQ29udGV4dCgpKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KGtleXMsIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gQ2hyb21lIHN0b3JhZ2UgZXJyb3IsIHRyeWluZyBsb2NhbFN0b3JhZ2UgZmFsbGJhY2s6Jywgd2luZG93LmNocm9tZS5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3VsdCA9IHRoaXMuZ2V0RnJvbUxvY2FsU3RvcmFnZUZhbGxiYWNrKGtleXMpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIEZhbGxiYWNrIHJlc3VsdDonLCBPYmplY3Qua2V5cyhmYWxsYmFja1Jlc3VsdCkpO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoZmFsbGJhY2tSZXN1bHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIENocm9tZSBzdG9yYWdlIHJlc3VsdDonLCBPYmplY3Qua2V5cyhyZXN1bHQgfHwge30pKTtcclxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gQ2hyb21lIHN0b3JhZ2UgYWNjZXNzIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3VsdCA9IHRoaXMuZ2V0RnJvbUxvY2FsU3RvcmFnZUZhbGxiYWNrKGtleXMpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gRXhjZXB0aW9uIGZhbGxiYWNrIHJlc3VsdDonLCBPYmplY3Qua2V5cyhmYWxsYmFja1Jlc3VsdCkpO1xyXG4gICAgICAgICAgcmVzb2x2ZShmYWxsYmFja1Jlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZmFsbGJhY2tSZXN1bHQgPSB0aGlzLmdldEZyb21Mb2NhbFN0b3JhZ2VGYWxsYmFjayhrZXlzKTtcclxuICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIERpcmVjdCBmYWxsYmFjayByZXN1bHQ6JywgT2JqZWN0LmtleXMoZmFsbGJhY2tSZXN1bHQpKTtcclxuICAgIHJldHVybiBmYWxsYmFja1Jlc3VsdDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZGF0YSBmcm9tIGxvY2FsU3RvcmFnZSBmYWxsYmFja1xyXG4gICAqL1xyXG4gIGdldEZyb21Mb2NhbFN0b3JhZ2VGYWxsYmFjayhrZXlzOiBzdHJpbmdbXSk6IGFueSB7XHJcbiAgICBjb25zdCByZXN1bHQ6IGFueSA9IHt9O1xyXG4gICAgXHJcbiAgICAvLyBGaXJzdCB0cnkgdGhlIG1haW4gbGVzc29uIGNvbmZpZyBrZXkgKHVzZWQgYnkgY29udGVudCBzY3JpcHQpXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBtYWluQ29uZmlnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnKTtcclxuICAgICAgaWYgKG1haW5Db25maWcpIHtcclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG1haW5Db25maWcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlVXRpbHNdIEZvdW5kIGxvY2FsU3RvcmFnZSBjb25maWc6JywgT2JqZWN0LmtleXMocGFyc2VkKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTWFwIHRoZSBzdG9yZWQgZGF0YSB0byB0aGUgZXhwZWN0ZWQga2V5c1xyXG4gICAgICAgIGlmIChwYXJzZWQubGVzc29uQ29uZmlndXJhdGlvbikge1xyXG4gICAgICAgICAgcmVzdWx0Lmxlc3NvbkNvbmZpZ3VyYXRpb24gPSBwYXJzZWQubGVzc29uQ29uZmlndXJhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcnNlZC5leHRyYWN0ZWRDb250ZW50KSB7XHJcbiAgICAgICAgICByZXN1bHQuZXh0cmFjdGVkQ29udGVudCA9IHBhcnNlZC5leHRyYWN0ZWRDb250ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFyc2VkLnNlbGVjdGVkVGV4dCkge1xyXG4gICAgICAgICAgcmVzdWx0LnNlbGVjdGVkVGV4dCA9IHBhcnNlZC5zZWxlY3RlZFRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXJzZWQuc291cmNlVXJsKSB7XHJcbiAgICAgICAgICByZXN1bHQuc291cmNlVXJsID0gcGFyc2VkLnNvdXJjZVVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBsZXNzb24gY29uZmlndXJhdGlvbiwgdGhhdCdzIHRoZSBwcmltYXJ5IGRhdGFcclxuICAgICAgICBpZiAocmVzdWx0Lmxlc3NvbkNvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gRmFpbGVkIHRvIHBhcnNlIGxvY2FsU3RvcmFnZSBjb25maWc6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGYWxsYmFjayB0byBpbmRpdmlkdWFsIHNlc3Npb25TdG9yYWdlIGtleXNcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzdG9yZWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBsaW5ndWFzcGFya18ke2tleX1gKTtcclxuICAgICAgICBpZiAoc3RvcmVkKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IEpTT04ucGFyc2Uoc3RvcmVkKTtcclxuICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHN0b3JlZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBbTGVzc29uSW50ZXJmYWNlVXRpbHNdIEZhaWxlZCB0byBnZXQgc2Vzc2lvblN0b3JhZ2Uga2V5ICR7a2V5fTpgLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBTYWZlIENocm9tZSBzdG9yYWdlIHNldCB3aXRoIGZhbGxiYWNrXHJcbiAgICovXHJcbiAgYXN5bmMgc2FmZVN0b3JhZ2VTZXQoZGF0YTogUmVjb3JkPHN0cmluZywgYW55Pik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKHRoaXMuaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0KCkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB3aW5kb3cuY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KGRhdGEpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1tMZXNzb25JbnRlcmZhY2VVdGlsc10gQ2hyb21lIHN0b3JhZ2Ugc2V0IGZhaWxlZCwgdXNpbmcgbG9jYWxTdG9yYWdlIGZhbGxiYWNrOicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGYWxsYmFjayB0byBsb2NhbFN0b3JhZ2Ugd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgY29udGVudCBzY3JpcHRcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsaW5ndWFzcGFya19sZXNzb25fY29uZmlnJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICBjb25zb2xlLmxvZygnW0xlc3NvbkludGVyZmFjZVV0aWxzXSBTdG9yZWQgZGF0YSBpbiBsb2NhbFN0b3JhZ2UgZmFsbGJhY2snKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignW0xlc3NvbkludGVyZmFjZVV0aWxzXSBsb2NhbFN0b3JhZ2UgZmFsbGJhY2sgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZpbmFsIGZhbGxiYWNrIHRvIHNlc3Npb24gc3RvcmFnZVxyXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYGxpbmd1YXNwYXJrXyR7a2V5fWAsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgYXR0cmlidXRpb24gdGV4dCBmb3IgZGlzcGxheVxyXG4gICAqL1xyXG4gIGZvcm1hdEF0dHJpYnV0aW9uKGF0dHJpYnV0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGF0dHJpYnV0aW9uLnN0YXJ0c1dpdGgoJ1NvdXJjZTogJykgPyBhdHRyaWJ1dGlvbiA6IGBTb3VyY2U6ICR7YXR0cmlidXRpb259YDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgbGVzc29uIG1ldGFkYXRhIGRpc3BsYXlcclxuICAgKi9cclxuICBjcmVhdGVNZXRhZGF0YURpc3BsYXkobWV0YWRhdGE6IEV4dHJhY3RlZENvbnRlbnRNZXRhZGF0YSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBwYXJ0cyA9IFtdO1xyXG4gICAgXHJcbiAgICBpZiAobWV0YWRhdGEudGl0bGUpIHtcclxuICAgICAgcGFydHMucHVzaChtZXRhZGF0YS50aXRsZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChtZXRhZGF0YS5hdXRob3IpIHtcclxuICAgICAgcGFydHMucHVzaChgYnkgJHttZXRhZGF0YS5hdXRob3J9YCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChtZXRhZGF0YS5kb21haW4pIHtcclxuICAgICAgcGFydHMucHVzaChgZnJvbSAke21ldGFkYXRhLmRvbWFpbn1gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcGFydHMucHVzaChgJHttZXRhZGF0YS53b3JkQ291bnR9IHdvcmRzYCk7XHJcbiAgICBwYXJ0cy5wdXNoKGAke21ldGFkYXRhLnJlYWRpbmdUaW1lfSBtaW4gcmVhZGApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcGFydHMuam9pbignIOKAoiAnKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBEZWJ1ZyBzdG9yYWdlIHN0YXRlIGZvciB0cm91Ymxlc2hvb3RpbmdcclxuICAgKi9cclxuICBhc3luYyBkZWJ1Z1N0b3JhZ2VTdGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdbTGVzc29uSW50ZXJmYWNlQnJpZGdlXSBEZWJ1ZyBTdG9yYWdlIFN0YXRlOicpO1xyXG4gICAgY29uc29sZS5sb2coJy0gQ2hyb21lIGV4dGVuc2lvbiBjb250ZXh0OicsIHRoaXMuaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0KCkpO1xyXG4gICAgY29uc29sZS5sb2coJy0gVVJMOicsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGNvbnNvbGUubG9nKCctIFVSTCBwYXJhbXM6JywgT2JqZWN0LmZyb21FbnRyaWVzKG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkpKTtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0KCkpIHtcclxuICAgICAgY29uc3QgY2hyb21lRGF0YSA9IGF3YWl0IHRoaXMuc2FmZVN0b3JhZ2VHZXQoWydsZXNzb25Db25maWd1cmF0aW9uJywgJ2V4dHJhY3RlZENvbnRlbnQnLCAnc2VsZWN0ZWRUZXh0J10pO1xyXG4gICAgICBjb25zb2xlLmxvZygnLSBDaHJvbWUgc3RvcmFnZTonLCBjaHJvbWVEYXRhKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJy0gU2Vzc2lvbiBzdG9yYWdlIGtleXM6JywgT2JqZWN0LmtleXMoc2Vzc2lvblN0b3JhZ2UpLmZpbHRlcihrID0+IGsuc3RhcnRzV2l0aCgnbGluZ3Vhc3BhcmtfJykpKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xpbmd1YXNwYXJrX2xlc3Nvbl9jb25maWcnKTtcclxuICAgIGlmIChzZXNzaW9uQ29uZmlnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJy0gU2Vzc2lvbiBjb25maWc6JywgSlNPTi5wYXJzZShzZXNzaW9uQ29uZmlnKSk7XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCctIFNlc3Npb24gY29uZmlnIChyYXcpOicsIHNlc3Npb25Db25maWcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59OyJdLCJuYW1lcyI6WyJMZXNzb25JbnRlcmZhY2VCcmlkZ2UiLCJpbml0aWFsaXplIiwiY2FsbGJhY2tzIiwib3Blbkxlc3NvbkludGVyZmFjZSIsImNvbnRlbnQiLCJjb25maWciLCJjcmVhdGVMZXNzb25QcmVDb25maWd1cmF0aW9uIiwiY3VycmVudENvbmZpZ3VyYXRpb24iLCJzdG9yZUNvbmZpZ3VyYXRpb24iLCJvcGVuSW50ZXJmYWNlIiwic3RhdGUiLCJsZXNzb25JbnRlcmZhY2VPcGVuIiwiZXh0cmFjdGlvbkNvbmZpcm1lZCIsIm9uTGVzc29uSW50ZXJmYWNlT3BlbmVkIiwiZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm1lc3NhZ2UiLCJjb25zb2xlIiwib25FcnJvciIsInBvcHVsYXRlSW50ZXJmYWNlIiwic3RvcmVFeHRyYWN0ZWRDb250ZW50IiwiY29udGVudFByZVBvcHVsYXRlZCIsInJlYWR5Rm9yR2VuZXJhdGlvbiIsIm9uQ29udGVudFByZVBvcHVsYXRlZCIsInNvdXJjZUNvbnRlbnQiLCJlbmFibGVDb250ZW50RWRpdGluZyIsImFsbG93Q29udGVudEVkaXRpbmciLCJwcmVzZXJ2ZVVzZXJDdXN0b21pemF0aW9ucyIsInVzZXJDYW5Nb2RpZnlTZXR0aW5ncyIsImludGVncmF0ZVdpdGhFeGlzdGluZ1dvcmtmbG93IiwiZ2V0U3RhdGUiLCJnZXRDdXJyZW50Q29uZmlndXJhdGlvbiIsImlzRXh0cmFjdGlvblNvdXJjZSIsIndpbmRvdyIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImxvY2F0aW9uIiwic2VhcmNoIiwiZ2V0IiwiY2hyb21lIiwic3RvcmFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwibG9jYWwiLCJyZXN1bHQiLCJydW50aW1lIiwibGFzdEVycm9yIiwid2FybiIsImZhbGxiYWNrQ29uZmlnIiwibG9hZEZyb21Mb2NhbFN0b3JhZ2UiLCJleHRyYWN0aW9uU291cmNlIiwibG9jYWxTdG9yYWdlQ29uZmlnIiwic2Vzc2lvblN0b3JhZ2UiLCJzdG9yZWQiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwibG9hZEV4dHJhY3Rpb25Db25maWd1cmF0aW9uIiwibGVzc29uQ29uZmlndXJhdGlvbiIsIm1ldGFkYXRhIiwiZXh0cmFjdGVkQXQiLCJEYXRlIiwic291cmNlUGFyYW0iLCJsb2ciLCJjb250ZW50UGFyYW0iLCJkZWNvZGVkQ29udGVudCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1Z2dlc3RlZFR5cGUiLCJzdWdnZXN0ZWRMZXZlbCIsInRpdGxlIiwic291cmNlVXJsIiwiZG9tYWluIiwiVVJMIiwiaG9zdG5hbWUiLCJ3b3JkQ291bnQiLCJzcGxpdCIsImxlbmd0aCIsInJlYWRpbmdUaW1lIiwiTWF0aCIsImNlaWwiLCJjb21wbGV4aXR5Iiwic3VpdGFiaWxpdHlTY29yZSIsImF0dHJpYnV0aW9uIiwidXJsRXJyb3IiLCJjbGVhckV4dHJhY3Rpb25Db25maWd1cmF0aW9uIiwicmVtb3ZlIiwicmVtb3ZlSXRlbSIsInRleHQiLCJzdWdnZXN0ZWRMZXNzb25UeXBlIiwic3VnZ2VzdGVkQ0VGUkxldmVsIiwiYXV0aG9yIiwic291cmNlSW5mbyIsInF1YWxpdHkiLCJzZXQiLCJleHRyYWN0aW9uVGltZXN0YW1wIiwibm93Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNlbGVjdGVkVGV4dCIsImxlc3NvblR5cGUiLCJzdHVkZW50TGV2ZWwiLCJleHRyYWN0aW9uTWV0YWRhdGEiLCJhY3Rpb24iLCJvcGVuUG9wdXAiLCJwb3B1cEVycm9yIiwidXJsIiwiZ2V0VVJMIiwic2VhcmNoUGFyYW1zIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGFicyIsImNyZWF0ZSIsInRvU3RyaW5nIiwib3JpZ2luIiwib3BlbiIsImxvY2FsU3RvcmFnZSIsInNldHRpbmdzQ3VzdG9taXphYmxlIiwiTGVzc29uSW50ZXJmYWNlVXRpbHMiLCJpc0V4dHJhY3Rpb25MZXNzb25JbnRlcmZhY2UiLCJzaG91bGRBdXRvUG9wdWxhdGUiLCJnZXRFeHRyYWN0aW9uUGFyYW1zIiwic291cmNlIiwiYXV0b1BvcHVsYXRlIiwiaXNDaHJvbWVFeHRlbnNpb25Db250ZXh0Iiwic2FmZVN0b3JhZ2VHZXQiLCJrZXlzIiwiZmFsbGJhY2tSZXN1bHQiLCJnZXRGcm9tTG9jYWxTdG9yYWdlRmFsbGJhY2siLCJPYmplY3QiLCJtYWluQ29uZmlnIiwicGFyc2VkIiwiZXh0cmFjdGVkQ29udGVudCIsImtleSIsInNhZmVTdG9yYWdlU2V0IiwiZGF0YSIsInZhbHVlIiwiZW50cmllcyIsImZvcm1hdEF0dHJpYnV0aW9uIiwic3RhcnRzV2l0aCIsImNyZWF0ZU1ldGFkYXRhRGlzcGxheSIsInBhcnRzIiwicHVzaCIsImpvaW4iLCJkZWJ1Z1N0b3JhZ2VTdGF0ZSIsImhyZWYiLCJmcm9tRW50cmllcyIsImNocm9tZURhdGEiLCJmaWx0ZXIiLCJrIiwic2Vzc2lvbkNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/lesson-interface-bridge.ts\n"));

/***/ })

});