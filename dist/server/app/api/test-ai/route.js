"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/test-ai/route";
exports.ids = ["app/api/test-ai/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-ai%2Froute&page=%2Fapi%2Ftest-ai%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-ai%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-ai%2Froute&page=%2Fapi%2Ftest-ai%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-ai%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_linguaspark_app_api_test_ai_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/test-ai/route.ts */ \"(rsc)/./app/api/test-ai/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/test-ai/route\",\n        pathname: \"/api/test-ai\",\n        filename: \"route\",\n        bundlePath: \"app/api/test-ai/route\"\n    },\n    resolvedPagePath: \"D:\\\\linguaspark\\\\app\\\\api\\\\test-ai\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_linguaspark_app_api_test_ai_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/test-ai/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZXN0LWFpJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0ZXN0LWFpJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGVzdC1haSUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbGluZ3Vhc3BhcmslNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNsaW5ndWFzcGFyayZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvP2U4NzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbGluZ3Vhc3BhcmtcXFxcYXBwXFxcXGFwaVxcXFx0ZXN0LWFpXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90ZXN0LWFpL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGVzdC1haVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGVzdC1haS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXGxpbmd1YXNwYXJrXFxcXGFwcFxcXFxhcGlcXFxcdGVzdC1haVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdGVzdC1haS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-ai%2Froute&page=%2Fapi%2Ftest-ai%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-ai%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/test-ai/route.ts":
/*!**********************************!*\
  !*** ./app/api/test-ai/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_google_ai_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/google-ai-server */ \"(rsc)/./lib/google-ai-server.ts\");\n\n\nasync function POST(request) {\n    try {\n        console.log(\"\\uD83E\\uDDEA Testing Google AI API connection...\");\n        // Check environment variables first\n        const apiKey = \"AIzaSyAkDCpwWTPKYftoc1Fdm77P6B00Lj89Lio\";\n        const baseUrl = \"https://generativelanguage.googleapis.com\" || 0;\n        console.log(\"\\uD83D\\uDD11 API Key present:\", !!apiKey);\n        console.log(\"\\uD83C\\uDF10 Base URL:\", baseUrl);\n        console.log(\"\\uD83D\\uDD11 API Key format:\", apiKey ? `${apiKey.substring(0, 10)}...` : \"MISSING\");\n        if (!apiKey) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Google AI API key is not configured\",\n                details: \"Check NEXT_PUBLIC_GOOGLE_AI_API_KEY in .env.local\",\n                timestamp: new Date().toISOString()\n            }, {\n                status: 500\n            });\n        }\n        // First, let's list available models\n        console.log(\"\\uD83D\\uDCCB Listing available models...\");\n        const listUrls = [\n            `${baseUrl}/v1beta/models?key=${apiKey}`,\n            `${baseUrl}/v1/models?key=${apiKey}`\n        ];\n        let availableModels = [];\n        for (const listUrl of listUrls){\n            try {\n                console.log(`🔍 Checking models at: ${listUrl.replace(apiKey, \"API_KEY_HIDDEN\")}`);\n                const response = await fetch(listUrl);\n                if (response.ok) {\n                    const result = await response.json();\n                    console.log(\"✅ Models list retrieved successfully\");\n                    if (result.models) {\n                        availableModels = result.models.map((model)=>model.name);\n                        console.log(\"\\uD83D\\uDCCB Available models:\", availableModels);\n                        break;\n                    }\n                } else {\n                    const errorText = await response.text();\n                    console.log(`❌ Models list failed: ${response.status} - ${errorText}`);\n                }\n            } catch (error) {\n                console.log(`❌ Models list exception: ${error.message}`);\n            }\n        }\n        // Test with available models or fallback to common ones\n        const modelsToTest = availableModels.length > 0 ? availableModels : [\n            \"models/gemini-1.5-flash-latest\",\n            \"models/gemini-1.5-pro-latest\",\n            \"models/gemini-pro\",\n            \"models/gemini-1.5-flash\",\n            \"models/gemini-1.5-pro\",\n            \"gemini-1.5-flash-latest\",\n            \"gemini-1.5-pro-latest\",\n            \"gemini-pro\",\n            \"gemini-1.5-flash\",\n            \"gemini-1.5-pro\"\n        ];\n        console.log(\"\\uD83E\\uDDEA Testing models:\", modelsToTest.slice(0, 5));\n        const testUrls = [];\n        // Generate test URLs for different API versions and models\n        for (const model of modelsToTest.slice(0, 5)){\n            testUrls.push(`${baseUrl}/v1beta/models/${model}:generateContent?key=${apiKey}`);\n            testUrls.push(`${baseUrl}/v1/models/${model}:generateContent?key=${apiKey}`);\n        }\n        const requestBody = {\n            contents: [\n                {\n                    parts: [\n                        {\n                            text: \"Say 'Hello, I am working!' if you can understand this message.\"\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: 0.1,\n                maxOutputTokens: 50\n            }\n        };\n        let lastError = null;\n        for(let i = 0; i < testUrls.length; i++){\n            const url = testUrls[i];\n            console.log(`🌐 Testing URL ${i + 1}: ${url.replace(apiKey, \"API_KEY_HIDDEN\")}`);\n            try {\n                const response = await fetch(url, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(requestBody)\n                });\n                console.log(`📡 Response ${i + 1}: ${response.status} ${response.statusText}`);\n                if (response.ok) {\n                    const result = await response.json();\n                    console.log(\"✅ Direct API call successful!\");\n                    if (result.candidates && result.candidates[0] && result.candidates[0].content) {\n                        const aiResponse = result.candidates[0].content.parts[0].text;\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            success: true,\n                            message: \"Google AI API is working!\",\n                            response: aiResponse,\n                            workingUrl: url.replace(apiKey, \"API_KEY_HIDDEN\"),\n                            timestamp: new Date().toISOString()\n                        });\n                    }\n                } else {\n                    const errorText = await response.text();\n                    lastError = `${response.status} ${response.statusText}: ${errorText}`;\n                    console.warn(`❌ URL ${i + 1} failed:`, lastError);\n                }\n            } catch (error) {\n                lastError = error.message;\n                console.warn(`❌ URL ${i + 1} exception:`, lastError);\n            }\n        }\n        // If we get here, all direct calls failed, try the service\n        console.log(\"\\uD83D\\uDD04 Direct calls failed, trying service wrapper...\");\n        const googleAI = (0,_lib_google_ai_server__WEBPACK_IMPORTED_MODULE_1__.createGoogleAIServerService)();\n        const response = await googleAI.prompt(\"Say 'Hello, I am working!' if you can understand this message.\", {\n            temperature: 0.1,\n            maxTokens: 50\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Google AI API is working via service!\",\n            response: response,\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"❌ Google AI API test failed:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message,\n            details: \"Check console logs for detailed error information\",\n            apiKeyPresent: !!\"AIzaSyAkDCpwWTPKYftoc1Fdm77P6B00Lj89Lio\",\n            baseUrl: \"https://generativelanguage.googleapis.com\" || 0,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvdGVzdC1haS9yb3V0ZS50cz81Yjk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXHJcbmltcG9ydCB7IGNyZWF0ZUdvb2dsZUFJU2VydmVyU2VydmljZSB9IGZyb20gXCJAL2xpYi9nb29nbGUtYWktc2VydmVyXCJcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+nqiBUZXN0aW5nIEdvb2dsZSBBSSBBUEkgY29ubmVjdGlvbi4uLlwiKVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZmlyc3RcclxuICAgIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BSV9BUElfS0VZXHJcbiAgICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FJX0JBU0VfVVJMIHx8IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb21cIlxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhcIvCflJEgQVBJIEtleSBwcmVzZW50OlwiLCAhIWFwaUtleSlcclxuICAgIGNvbnNvbGUubG9nKFwi8J+MkCBCYXNlIFVSTDpcIiwgYmFzZVVybClcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UkSBBUEkgS2V5IGZvcm1hdDpcIiwgYXBpS2V5ID8gYCR7YXBpS2V5LnN1YnN0cmluZygwLCAxMCl9Li4uYCA6IFwiTUlTU0lOR1wiKVxyXG4gICAgXHJcbiAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBcIkdvb2dsZSBBSSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkXCIsXHJcbiAgICAgICAgZGV0YWlsczogXCJDaGVjayBORVhUX1BVQkxJQ19HT09HTEVfQUlfQVBJX0tFWSBpbiAuZW52LmxvY2FsXCIsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGaXJzdCwgbGV0J3MgbGlzdCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICBjb25zb2xlLmxvZyhcIvCfk4sgTGlzdGluZyBhdmFpbGFibGUgbW9kZWxzLi4uXCIpXHJcbiAgICBcclxuICAgIGNvbnN0IGxpc3RVcmxzID0gW1xyXG4gICAgICBgJHtiYXNlVXJsfS92MWJldGEvbW9kZWxzP2tleT0ke2FwaUtleX1gLFxyXG4gICAgICBgJHtiYXNlVXJsfS92MS9tb2RlbHM/a2V5PSR7YXBpS2V5fWBcclxuICAgIF1cclxuICAgIFxyXG4gICAgbGV0IGF2YWlsYWJsZU1vZGVscyA9IFtdXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgbGlzdFVybCBvZiBsaXN0VXJscykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENoZWNraW5nIG1vZGVscyBhdDogJHtsaXN0VXJsLnJlcGxhY2UoYXBpS2V5LCAnQVBJX0tFWV9ISURERU4nKX1gKVxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobGlzdFVybClcclxuICAgICAgICBcclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coXCLinIUgTW9kZWxzIGxpc3QgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAocmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICBhdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5uYW1lKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfk4sgQXZhaWxhYmxlIG1vZGVsczpcIiwgYXZhaWxhYmxlTW9kZWxzKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGDinYwgTW9kZWxzIGxpc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg4p2MIE1vZGVscyBsaXN0IGV4Y2VwdGlvbjogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVGVzdCB3aXRoIGF2YWlsYWJsZSBtb2RlbHMgb3IgZmFsbGJhY2sgdG8gY29tbW9uIG9uZXNcclxuICAgIGNvbnN0IG1vZGVsc1RvVGVzdCA9IGF2YWlsYWJsZU1vZGVscy5sZW5ndGggPiAwID8gYXZhaWxhYmxlTW9kZWxzIDogW1xyXG4gICAgICAnbW9kZWxzL2dlbWluaS0xLjUtZmxhc2gtbGF0ZXN0JyxcclxuICAgICAgJ21vZGVscy9nZW1pbmktMS41LXByby1sYXRlc3QnLCBcclxuICAgICAgJ21vZGVscy9nZW1pbmktcHJvJyxcclxuICAgICAgJ21vZGVscy9nZW1pbmktMS41LWZsYXNoJyxcclxuICAgICAgJ21vZGVscy9nZW1pbmktMS41LXBybycsXHJcbiAgICAgICdnZW1pbmktMS41LWZsYXNoLWxhdGVzdCcsXHJcbiAgICAgICdnZW1pbmktMS41LXByby1sYXRlc3QnLFxyXG4gICAgICAnZ2VtaW5pLXBybycsXHJcbiAgICAgICdnZW1pbmktMS41LWZsYXNoJyxcclxuICAgICAgJ2dlbWluaS0xLjUtcHJvJ1xyXG4gICAgXVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhcIvCfp6ogVGVzdGluZyBtb2RlbHM6XCIsIG1vZGVsc1RvVGVzdC5zbGljZSgwLCA1KSlcclxuICAgIFxyXG4gICAgY29uc3QgdGVzdFVybHMgPSBbXVxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSB0ZXN0IFVSTHMgZm9yIGRpZmZlcmVudCBBUEkgdmVyc2lvbnMgYW5kIG1vZGVsc1xyXG4gICAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHNUb1Rlc3Quc2xpY2UoMCwgNSkpIHtcclxuICAgICAgdGVzdFVybHMucHVzaChgJHtiYXNlVXJsfS92MWJldGEvbW9kZWxzLyR7bW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHthcGlLZXl9YClcclxuICAgICAgdGVzdFVybHMucHVzaChgJHtiYXNlVXJsfS92MS9tb2RlbHMvJHttb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke2FwaUtleX1gKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgY29udGVudHM6IFt7XHJcbiAgICAgICAgcGFydHM6IFt7XHJcbiAgICAgICAgICB0ZXh0OiBcIlNheSAnSGVsbG8sIEkgYW0gd29ya2luZyEnIGlmIHlvdSBjYW4gdW5kZXJzdGFuZCB0aGlzIG1lc3NhZ2UuXCJcclxuICAgICAgICB9XVxyXG4gICAgICB9XSxcclxuICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXHJcbiAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiA1MCxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgbGFzdEVycm9yID0gbnVsbFxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlc3RVcmxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHRlc3RVcmxzW2ldXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn4yQIFRlc3RpbmcgVVJMICR7aSArIDF9OiAke3VybC5yZXBsYWNlKGFwaUtleSwgJ0FQSV9LRVlfSElEREVOJyl9YClcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFJlc3BvbnNlICR7aSArIDF9OiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIERpcmVjdCBBUEkgY2FsbCBzdWNjZXNzZnVsIVwiKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAocmVzdWx0LmNhbmRpZGF0ZXMgJiYgcmVzdWx0LmNhbmRpZGF0ZXNbMF0gJiYgcmVzdWx0LmNhbmRpZGF0ZXNbMF0uY29udGVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBhaVJlc3BvbnNlID0gcmVzdWx0LmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJHb29nbGUgQUkgQVBJIGlzIHdvcmtpbmchXCIsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2U6IGFpUmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgd29ya2luZ1VybDogdXJsLnJlcGxhY2UoYXBpS2V5LCAnQVBJX0tFWV9ISURERU4nKSxcclxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcclxuICAgICAgICAgIGxhc3RFcnJvciA9IGAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fTogJHtlcnJvclRleHR9YFxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGDinYwgVVJMICR7aSArIDF9IGZhaWxlZDpgLCBsYXN0RXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGxhc3RFcnJvciA9IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICBjb25zb2xlLndhcm4oYOKdjCBVUkwgJHtpICsgMX0gZXhjZXB0aW9uOmAsIGxhc3RFcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBJZiB3ZSBnZXQgaGVyZSwgYWxsIGRpcmVjdCBjYWxscyBmYWlsZWQsIHRyeSB0aGUgc2VydmljZVxyXG4gICAgY29uc29sZS5sb2coXCLwn5SEIERpcmVjdCBjYWxscyBmYWlsZWQsIHRyeWluZyBzZXJ2aWNlIHdyYXBwZXIuLi5cIilcclxuICAgIFxyXG4gICAgY29uc3QgZ29vZ2xlQUkgPSBjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UoKVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnb29nbGVBSS5wcm9tcHQoXCJTYXkgJ0hlbGxvLCBJIGFtIHdvcmtpbmchJyBpZiB5b3UgY2FuIHVuZGVyc3RhbmQgdGhpcyBtZXNzYWdlLlwiLCB7XHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXHJcbiAgICAgIG1heFRva2VuczogNTAsXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiBcIkdvb2dsZSBBSSBBUEkgaXMgd29ya2luZyB2aWEgc2VydmljZSFcIixcclxuICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSlcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEdvb2dsZSBBSSBBUEkgdGVzdCBmYWlsZWQ6XCIsIGVycm9yKVxyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGRldGFpbHM6IFwiQ2hlY2sgY29uc29sZSBsb2dzIGZvciBkZXRhaWxlZCBlcnJvciBpbmZvcm1hdGlvblwiLFxyXG4gICAgICBhcGlLZXlQcmVzZW50OiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BSV9BUElfS0VZLFxyXG4gICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0FJX0FQSV9LRVkiLCJiYXNlVXJsIiwiTkVYVF9QVUJMSUNfR09PR0xFX0FJX0JBU0VfVVJMIiwic3Vic3RyaW5nIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImRldGFpbHMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJsaXN0VXJscyIsImF2YWlsYWJsZU1vZGVscyIsImxpc3RVcmwiLCJyZXBsYWNlIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwicmVzdWx0IiwibW9kZWxzIiwibWFwIiwibW9kZWwiLCJuYW1lIiwiZXJyb3JUZXh0IiwidGV4dCIsIm1lc3NhZ2UiLCJtb2RlbHNUb1Rlc3QiLCJsZW5ndGgiLCJzbGljZSIsInRlc3RVcmxzIiwicHVzaCIsInJlcXVlc3RCb2R5IiwiY29udGVudHMiLCJwYXJ0cyIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsIm1heE91dHB1dFRva2VucyIsImxhc3RFcnJvciIsImkiLCJ1cmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGF0dXNUZXh0IiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJhaVJlc3BvbnNlIiwid29ya2luZ1VybCIsIndhcm4iLCJnb29nbGVBSSIsInByb21wdCIsIm1heFRva2VucyIsImFwaUtleVByZXNlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/test-ai/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google-ai-server.ts":
/*!*********************************!*\
  !*** ./lib/google-ai-server.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGoogleAIServerService: () => (/* binding */ createGoogleAIServerService)\n/* harmony export */ });\n// Server-side Google AI (Gemini) APIs service layer\nclass GoogleAIServerService {\n    constructor(config){\n        this.model = \"models/gemini-2.5-flash\" // Use actual available model\n        ;\n        this.config = config;\n    }\n    async makeGeminiRequest(prompt, options = {}) {\n        // Try different model names based on actual available models from API\n        const modelsToTry = [\n            \"models/gemini-2.5-flash\",\n            \"models/gemini-2.5-pro\",\n            \"models/gemini-2.0-flash\",\n            \"models/gemini-flash-latest\",\n            \"models/gemini-pro-latest\",\n            \"models/gemini-2.0-flash-001\",\n            \"gemini-2.5-flash\",\n            \"gemini-2.5-pro\",\n            \"gemini-2.0-flash\",\n            \"gemini-flash-latest\",\n            \"gemini-pro-latest\"\n        ];\n        const possibleUrls = [];\n        // Generate URLs for different combinations\n        for (const model of modelsToTry){\n            possibleUrls.push(`${this.config.baseUrl}/v1beta/models/${model}:generateContent?key=${this.config.apiKey}`);\n            possibleUrls.push(`${this.config.baseUrl}/v1/models/${model}:generateContent?key=${this.config.apiKey}`);\n        }\n        const requestBody = {\n            contents: [\n                {\n                    parts: [\n                        {\n                            text: prompt\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: options.temperature || 0.7,\n                maxOutputTokens: options.maxTokens || 1000,\n                topP: options.topP || 0.9\n            }\n        };\n        console.log(\"\\uD83D\\uDD17 Trying Gemini API endpoints...\");\n        // Try each URL until one works\n        for(let i = 0; i < possibleUrls.length; i++){\n            const url = possibleUrls[i];\n            console.log(`🌐 Attempt ${i + 1}: ${url.replace(this.config.apiKey, \"API_KEY_HIDDEN\")}`);\n            try {\n                const response = await fetch(url, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(requestBody)\n                });\n                console.log(`📡 Response status: ${response.status} ${response.statusText}`);\n                if (response.ok) {\n                    const result = await response.json();\n                    console.log(\"✅ Successful API response received\");\n                    if (result.candidates && result.candidates[0] && result.candidates[0].content) {\n                        return result.candidates[0].content.parts[0].text;\n                    } else {\n                        console.warn(\"⚠️ Invalid response structure:\", result);\n                        throw new Error(\"Invalid response structure from Gemini API\");\n                    }\n                } else {\n                    const errorText = await response.text();\n                    console.warn(`❌ Attempt ${i + 1} failed:`, response.status, errorText);\n                    // If this is the last attempt, throw the error\n                    if (i === possibleUrls.length - 1) {\n                        throw new Error(`Gemini API error: ${response.status} ${response.statusText} - ${errorText}`);\n                    }\n                }\n            } catch (error) {\n                console.warn(`❌ Attempt ${i + 1} exception:`, error.message);\n                // If this is the last attempt, throw the error\n                if (i === possibleUrls.length - 1) {\n                    throw error;\n                }\n            }\n        }\n    }\n    async summarize(text, options = {}) {\n        const summaryType = options.type || \"key-points\";\n        const length = options.length || \"medium\";\n        const lengthInstructions = {\n            short: \"in 2-3 sentences\",\n            medium: \"in 4-6 sentences\",\n            long: \"in 7-10 sentences\"\n        };\n        const typeInstructions = {\n            \"key-points\": \"Extract and summarize the key points\",\n            \"tl-dr\": \"Create a TL;DR summary\",\n            \"teaser\": \"Write an engaging teaser summary\",\n            \"headline\": \"Create a headline-style summary\"\n        };\n        const prompt = `${typeInstructions[summaryType]} of the following text ${lengthInstructions[length]}:\n\n${text}\n\nSummary:`;\n        try {\n            return await this.makeGeminiRequest(prompt, {\n                temperature: 0.3\n            });\n        } catch (error) {\n            console.error(\"Summarization failed:\", error);\n            // Fallback to simple truncation\n            return text.substring(0, 500) + \"...\";\n        }\n    }\n    async translate(text, options) {\n        const targetLang = this.getLanguageName(options.targetLanguage);\n        const prompt = `Translate the following text to ${targetLang}. Maintain the original meaning and tone:\n\n${text}\n\nTranslation:`;\n        try {\n            return await this.makeGeminiRequest(prompt, {\n                temperature: 0.2\n            });\n        } catch (error) {\n            console.error(\"Translation failed:\", error);\n            // Return original text if translation fails\n            return text;\n        }\n    }\n    async prompt(prompt, options = {}) {\n        try {\n            return await this.makeGeminiRequest(prompt, options);\n        } catch (error) {\n            console.error(\"Prompt generation failed:\", error);\n            throw error;\n        }\n    }\n    async write(prompt, options = {}) {\n        const tone = options.tone || \"casual\";\n        const length = options.length || \"medium\";\n        const format = options.format || \"paragraph\";\n        const lengthInstructions = {\n            short: \"Keep it brief and concise\",\n            medium: \"Write a moderate length response\",\n            long: \"Provide a detailed and comprehensive response\"\n        };\n        const formatInstructions = {\n            paragraph: \"Write in paragraph form\",\n            \"bullet-points\": \"Format as bullet points\",\n            \"numbered-list\": \"Format as a numbered list\"\n        };\n        const enhancedPrompt = `${prompt}\n\nInstructions:\n- Tone: ${tone}\n- ${lengthInstructions[length]}\n- ${formatInstructions[format]}\n\nResponse:`;\n        try {\n            return await this.makeGeminiRequest(enhancedPrompt, {\n                temperature: 0.7\n            });\n        } catch (error) {\n            console.error(\"Writing failed:\", error);\n            throw error;\n        }\n    }\n    async rewrite(text, options = {}) {\n        const tone = options.tone || \"casual\";\n        const length = options.length || \"same\";\n        const audience = options.audience || \"general\";\n        const lengthInstructions = {\n            shorter: \"Make it more concise\",\n            longer: \"Expand and add more detail\",\n            same: \"Keep approximately the same length\"\n        };\n        const prompt = `Rewrite the following text with these requirements:\n- Tone: ${tone}\n- Audience: ${audience}\n- Length: ${lengthInstructions[length]}\n\nOriginal text:\n${text}\n\nRewritten text:`;\n        try {\n            return await this.makeGeminiRequest(prompt, {\n                temperature: 0.5\n            });\n        } catch (error) {\n            console.error(\"Rewriting failed:\", error);\n            return text // Return original if rewriting fails\n            ;\n        }\n    }\n    async proofread(text, options = {}) {\n        const checkGrammar = options.checkGrammar !== false;\n        const checkSpelling = options.checkSpelling !== false;\n        const checkStyle = options.checkStyle !== false;\n        const checks = [];\n        if (checkGrammar) checks.push(\"grammar\");\n        if (checkSpelling) checks.push(\"spelling\");\n        if (checkStyle) checks.push(\"style and clarity\");\n        const prompt = `Proofread and correct the following text for ${checks.join(\", \")}. Return only the corrected text:\n\n${text}\n\nCorrected text:`;\n        try {\n            const correctedText = await this.makeGeminiRequest(prompt, {\n                temperature: 0.2\n            });\n            return {\n                corrected_text: correctedText,\n                suggestions: [],\n                errors: []\n            };\n        } catch (error) {\n            console.error(\"Proofreading failed:\", error);\n            return {\n                corrected_text: text,\n                suggestions: [],\n                errors: []\n            };\n        }\n    }\n    getLanguageName(code) {\n        const languageMap = {\n            es: \"Spanish\",\n            fr: \"French\",\n            de: \"German\",\n            it: \"Italian\",\n            pt: \"Portuguese\",\n            ja: \"Japanese\",\n            ko: \"Korean\",\n            zh: \"Chinese\",\n            en: \"English\"\n        };\n        return languageMap[code] || \"English\";\n    }\n}\n// Server-side only initialization\nconst createGoogleAIServerService = ()=>{\n    const apiKey = \"AIzaSyAkDCpwWTPKYftoc1Fdm77P6B00Lj89Lio\";\n    const baseUrl = \"https://generativelanguage.googleapis.com\" || 0;\n    if (!apiKey) {\n        console.warn(\"Google AI API key not found. Lesson generation will use fallback templates.\");\n        // Return a service that will always throw errors, triggering fallbacks\n        return new GoogleAIServerService({\n            apiKey: \"dummy\",\n            baseUrl\n        });\n    }\n    return new GoogleAIServerService({\n        apiKey,\n        baseUrl\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9nb29nbGUtYWktc2VydmVyLnRzPzUyZDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VydmVyLXNpZGUgR29vZ2xlIEFJIChHZW1pbmkpIEFQSXMgc2VydmljZSBsYXllclxuaW50ZXJmYWNlIEdvb2dsZUFJQ29uZmlnIHtcbiAgYXBpS2V5OiBzdHJpbmdcbiAgYmFzZVVybDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdW1tYXJpemVyT3B0aW9ucyB7XG4gIHR5cGU/OiBcImtleS1wb2ludHNcIiB8IFwidGwtZHJcIiB8IFwidGVhc2VyXCIgfCBcImhlYWRsaW5lXCJcbiAgbGVuZ3RoPzogXCJzaG9ydFwiIHwgXCJtZWRpdW1cIiB8IFwibG9uZ1wiXG4gIGZvcm1hdD86IFwibWFya2Rvd25cIiB8IFwicGxhaW4tdGV4dFwiXG59XG5cbmludGVyZmFjZSBUcmFuc2xhdG9yT3B0aW9ucyB7XG4gIHNvdXJjZUxhbmd1YWdlPzogc3RyaW5nXG4gIHRhcmdldExhbmd1YWdlOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFByb21wdE9wdGlvbnMge1xuICB0ZW1wZXJhdHVyZT86IG51bWJlclxuICBtYXhUb2tlbnM/OiBudW1iZXJcbiAgdG9wUD86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgV3JpdGVyT3B0aW9ucyB7XG4gIHRvbmU/OiBcImZvcm1hbFwiIHwgXCJjYXN1YWxcIiB8IFwiYWNhZGVtaWNcIiB8IFwiY3JlYXRpdmVcIlxuICBsZW5ndGg/OiBcInNob3J0XCIgfCBcIm1lZGl1bVwiIHwgXCJsb25nXCJcbiAgZm9ybWF0PzogXCJwYXJhZ3JhcGhcIiB8IFwiYnVsbGV0LXBvaW50c1wiIHwgXCJudW1iZXJlZC1saXN0XCJcbn1cblxuaW50ZXJmYWNlIFJld3JpdGVyT3B0aW9ucyB7XG4gIHRvbmU/OiBcImZvcm1hbFwiIHwgXCJjYXN1YWxcIiB8IFwiYWNhZGVtaWNcIiB8IFwiY3JlYXRpdmVcIlxuICBsZW5ndGg/OiBcInNob3J0ZXJcIiB8IFwibG9uZ2VyXCIgfCBcInNhbWVcIlxuICBhdWRpZW5jZT86IFwiZ2VuZXJhbFwiIHwgXCJleHBlcnRcIiB8IFwiYmVnaW5uZXJcIlxufVxuXG5pbnRlcmZhY2UgUHJvb2ZyZWFkZXJPcHRpb25zIHtcbiAgY2hlY2tHcmFtbWFyPzogYm9vbGVhblxuICBjaGVja1NwZWxsaW5nPzogYm9vbGVhblxuICBjaGVja1N0eWxlPzogYm9vbGVhblxuICBzdWdnZXN0SW1wcm92ZW1lbnRzPzogYm9vbGVhblxufVxuXG5jbGFzcyBHb29nbGVBSVNlcnZlclNlcnZpY2Uge1xuICBwcml2YXRlIGNvbmZpZzogR29vZ2xlQUlDb25maWdcbiAgcHJpdmF0ZSBtb2RlbDogc3RyaW5nID0gXCJtb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaFwiIC8vIFVzZSBhY3R1YWwgYXZhaWxhYmxlIG1vZGVsXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBHb29nbGVBSUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VHZW1pbmlSZXF1ZXN0KHByb21wdDogc3RyaW5nLCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICAgIC8vIFRyeSBkaWZmZXJlbnQgbW9kZWwgbmFtZXMgYmFzZWQgb24gYWN0dWFsIGF2YWlsYWJsZSBtb2RlbHMgZnJvbSBBUElcbiAgICBjb25zdCBtb2RlbHNUb1RyeSA9IFtcbiAgICAgICdtb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaCcsXG4gICAgICAnbW9kZWxzL2dlbWluaS0yLjUtcHJvJywgXG4gICAgICAnbW9kZWxzL2dlbWluaS0yLjAtZmxhc2gnLFxuICAgICAgJ21vZGVscy9nZW1pbmktZmxhc2gtbGF0ZXN0JyxcbiAgICAgICdtb2RlbHMvZ2VtaW5pLXByby1sYXRlc3QnLFxuICAgICAgJ21vZGVscy9nZW1pbmktMi4wLWZsYXNoLTAwMScsXG4gICAgICAnZ2VtaW5pLTIuNS1mbGFzaCcsXG4gICAgICAnZ2VtaW5pLTIuNS1wcm8nLFxuICAgICAgJ2dlbWluaS0yLjAtZmxhc2gnLFxuICAgICAgJ2dlbWluaS1mbGFzaC1sYXRlc3QnLFxuICAgICAgJ2dlbWluaS1wcm8tbGF0ZXN0J1xuICAgIF1cbiAgICBcbiAgICBjb25zdCBwb3NzaWJsZVVybHMgPSBbXVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIFVSTHMgZm9yIGRpZmZlcmVudCBjb21iaW5hdGlvbnNcbiAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIG1vZGVsc1RvVHJ5KSB7XG4gICAgICBwb3NzaWJsZVVybHMucHVzaChgJHt0aGlzLmNvbmZpZy5iYXNlVXJsfS92MWJldGEvbW9kZWxzLyR7bW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmNvbmZpZy5hcGlLZXl9YClcbiAgICAgIHBvc3NpYmxlVXJscy5wdXNoKGAke3RoaXMuY29uZmlnLmJhc2VVcmx9L3YxL21vZGVscy8ke21vZGVsfTpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7dGhpcy5jb25maWcuYXBpS2V5fWApXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgY29udGVudHM6IFt7XG4gICAgICAgIHBhcnRzOiBbe1xuICAgICAgICAgIHRleHQ6IHByb21wdFxuICAgICAgICB9XVxuICAgICAgfV0sXG4gICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiBvcHRpb25zLm1heFRva2VucyB8fCAxMDAwLFxuICAgICAgICB0b3BQOiBvcHRpb25zLnRvcFAgfHwgMC45LFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi8J+UlyBUcnlpbmcgR2VtaW5pIEFQSSBlbmRwb2ludHMuLi5cIilcblxuICAgIC8vIFRyeSBlYWNoIFVSTCB1bnRpbCBvbmUgd29ya3NcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmxlVXJscy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdXJsID0gcG9zc2libGVVcmxzW2ldXG4gICAgICBjb25zb2xlLmxvZyhg8J+MkCBBdHRlbXB0ICR7aSArIDF9OiAke3VybC5yZXBsYWNlKHRoaXMuY29uZmlnLmFwaUtleSwgJ0FQSV9LRVlfSElEREVOJyl9YClcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFJlc3BvbnNlIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFN1Y2Nlc3NmdWwgQVBJIHJlc3BvbnNlIHJlY2VpdmVkXCIpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlc3VsdC5jYW5kaWRhdGVzICYmIHJlc3VsdC5jYW5kaWRhdGVzWzBdICYmIHJlc3VsdC5jYW5kaWRhdGVzWzBdLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPIEludmFsaWQgcmVzcG9uc2Ugc3RydWN0dXJlOlwiLCByZXN1bHQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJlc3BvbnNlIHN0cnVjdHVyZSBmcm9tIEdlbWluaSBBUElcIilcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgY29uc29sZS53YXJuKGDinYwgQXR0ZW1wdCAke2kgKyAxfSBmYWlsZWQ6YCwgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgbGFzdCBhdHRlbXB0LCB0aHJvdyB0aGUgZXJyb3JcbiAgICAgICAgICBpZiAoaSA9PT0gcG9zc2libGVVcmxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR2VtaW5pIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0gLSAke2Vycm9yVGV4dH1gKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDinYwgQXR0ZW1wdCAke2kgKyAxfSBleGNlcHRpb246YCwgZXJyb3IubWVzc2FnZSlcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgYXR0ZW1wdCwgdGhyb3cgdGhlIGVycm9yXG4gICAgICAgIGlmIChpID09PSBwb3NzaWJsZVVybHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzdW1tYXJpemUodGV4dDogc3RyaW5nLCBvcHRpb25zOiBTdW1tYXJpemVyT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc3VtbWFyeVR5cGUgPSBvcHRpb25zLnR5cGUgfHwgXCJrZXktcG9pbnRzXCJcbiAgICBjb25zdCBsZW5ndGggPSBvcHRpb25zLmxlbmd0aCB8fCBcIm1lZGl1bVwiXG4gICAgXG4gICAgY29uc3QgbGVuZ3RoSW5zdHJ1Y3Rpb25zID0ge1xuICAgICAgc2hvcnQ6IFwiaW4gMi0zIHNlbnRlbmNlc1wiLFxuICAgICAgbWVkaXVtOiBcImluIDQtNiBzZW50ZW5jZXNcIiwgXG4gICAgICBsb25nOiBcImluIDctMTAgc2VudGVuY2VzXCJcbiAgICB9XG5cbiAgICBjb25zdCB0eXBlSW5zdHJ1Y3Rpb25zID0ge1xuICAgICAgXCJrZXktcG9pbnRzXCI6IFwiRXh0cmFjdCBhbmQgc3VtbWFyaXplIHRoZSBrZXkgcG9pbnRzXCIsXG4gICAgICBcInRsLWRyXCI6IFwiQ3JlYXRlIGEgVEw7RFIgc3VtbWFyeVwiLFxuICAgICAgXCJ0ZWFzZXJcIjogXCJXcml0ZSBhbiBlbmdhZ2luZyB0ZWFzZXIgc3VtbWFyeVwiLFxuICAgICAgXCJoZWFkbGluZVwiOiBcIkNyZWF0ZSBhIGhlYWRsaW5lLXN0eWxlIHN1bW1hcnlcIlxuICAgIH1cblxuICAgIGNvbnN0IHByb21wdCA9IGAke3R5cGVJbnN0cnVjdGlvbnNbc3VtbWFyeVR5cGVdfSBvZiB0aGUgZm9sbG93aW5nIHRleHQgJHtsZW5ndGhJbnN0cnVjdGlvbnNbbGVuZ3RoXX06XG5cbiR7dGV4dH1cblxuU3VtbWFyeTpgXG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZUdlbWluaVJlcXVlc3QocHJvbXB0LCB7IHRlbXBlcmF0dXJlOiAwLjMgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlN1bW1hcml6YXRpb24gZmFpbGVkOlwiLCBlcnJvcilcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHNpbXBsZSB0cnVuY2F0aW9uXG4gICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgNTAwKSArIFwiLi4uXCJcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmFuc2xhdGUodGV4dDogc3RyaW5nLCBvcHRpb25zOiBUcmFuc2xhdG9yT3B0aW9ucykge1xuICAgIGNvbnN0IHRhcmdldExhbmcgPSB0aGlzLmdldExhbmd1YWdlTmFtZShvcHRpb25zLnRhcmdldExhbmd1YWdlKVxuICAgIFxuICAgIGNvbnN0IHByb21wdCA9IGBUcmFuc2xhdGUgdGhlIGZvbGxvd2luZyB0ZXh0IHRvICR7dGFyZ2V0TGFuZ30uIE1haW50YWluIHRoZSBvcmlnaW5hbCBtZWFuaW5nIGFuZCB0b25lOlxuXG4ke3RleHR9XG5cblRyYW5zbGF0aW9uOmBcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5tYWtlR2VtaW5pUmVxdWVzdChwcm9tcHQsIHsgdGVtcGVyYXR1cmU6IDAuMiB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiVHJhbnNsYXRpb24gZmFpbGVkOlwiLCBlcnJvcilcbiAgICAgIC8vIFJldHVybiBvcmlnaW5hbCB0ZXh0IGlmIHRyYW5zbGF0aW9uIGZhaWxzXG4gICAgICByZXR1cm4gdGV4dFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb21wdChwcm9tcHQ6IHN0cmluZywgb3B0aW9uczogUHJvbXB0T3B0aW9ucyA9IHt9KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1ha2VHZW1pbmlSZXF1ZXN0KHByb21wdCwgb3B0aW9ucylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlByb21wdCBnZW5lcmF0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHdyaXRlKHByb21wdDogc3RyaW5nLCBvcHRpb25zOiBXcml0ZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0b25lID0gb3B0aW9ucy50b25lIHx8IFwiY2FzdWFsXCJcbiAgICBjb25zdCBsZW5ndGggPSBvcHRpb25zLmxlbmd0aCB8fCBcIm1lZGl1bVwiXG4gICAgY29uc3QgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgXCJwYXJhZ3JhcGhcIlxuXG4gICAgY29uc3QgbGVuZ3RoSW5zdHJ1Y3Rpb25zID0ge1xuICAgICAgc2hvcnQ6IFwiS2VlcCBpdCBicmllZiBhbmQgY29uY2lzZVwiLFxuICAgICAgbWVkaXVtOiBcIldyaXRlIGEgbW9kZXJhdGUgbGVuZ3RoIHJlc3BvbnNlXCIsXG4gICAgICBsb25nOiBcIlByb3ZpZGUgYSBkZXRhaWxlZCBhbmQgY29tcHJlaGVuc2l2ZSByZXNwb25zZVwiXG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0SW5zdHJ1Y3Rpb25zID0ge1xuICAgICAgcGFyYWdyYXBoOiBcIldyaXRlIGluIHBhcmFncmFwaCBmb3JtXCIsXG4gICAgICBcImJ1bGxldC1wb2ludHNcIjogXCJGb3JtYXQgYXMgYnVsbGV0IHBvaW50c1wiLFxuICAgICAgXCJudW1iZXJlZC1saXN0XCI6IFwiRm9ybWF0IGFzIGEgbnVtYmVyZWQgbGlzdFwiXG4gICAgfVxuXG4gICAgY29uc3QgZW5oYW5jZWRQcm9tcHQgPSBgJHtwcm9tcHR9XG5cbkluc3RydWN0aW9uczpcbi0gVG9uZTogJHt0b25lfVxuLSAke2xlbmd0aEluc3RydWN0aW9uc1tsZW5ndGhdfVxuLSAke2Zvcm1hdEluc3RydWN0aW9uc1tmb3JtYXRdfVxuXG5SZXNwb25zZTpgXG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZUdlbWluaVJlcXVlc3QoZW5oYW5jZWRQcm9tcHQsIHsgdGVtcGVyYXR1cmU6IDAuNyB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiV3JpdGluZyBmYWlsZWQ6XCIsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXdyaXRlKHRleHQ6IHN0cmluZywgb3B0aW9uczogUmV3cml0ZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0b25lID0gb3B0aW9ucy50b25lIHx8IFwiY2FzdWFsXCJcbiAgICBjb25zdCBsZW5ndGggPSBvcHRpb25zLmxlbmd0aCB8fCBcInNhbWVcIlxuICAgIGNvbnN0IGF1ZGllbmNlID0gb3B0aW9ucy5hdWRpZW5jZSB8fCBcImdlbmVyYWxcIlxuXG4gICAgY29uc3QgbGVuZ3RoSW5zdHJ1Y3Rpb25zID0ge1xuICAgICAgc2hvcnRlcjogXCJNYWtlIGl0IG1vcmUgY29uY2lzZVwiLFxuICAgICAgbG9uZ2VyOiBcIkV4cGFuZCBhbmQgYWRkIG1vcmUgZGV0YWlsXCIsXG4gICAgICBzYW1lOiBcIktlZXAgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBsZW5ndGhcIlxuICAgIH1cblxuICAgIGNvbnN0IHByb21wdCA9IGBSZXdyaXRlIHRoZSBmb2xsb3dpbmcgdGV4dCB3aXRoIHRoZXNlIHJlcXVpcmVtZW50czpcbi0gVG9uZTogJHt0b25lfVxuLSBBdWRpZW5jZTogJHthdWRpZW5jZX1cbi0gTGVuZ3RoOiAke2xlbmd0aEluc3RydWN0aW9uc1tsZW5ndGhdfVxuXG5PcmlnaW5hbCB0ZXh0OlxuJHt0ZXh0fVxuXG5SZXdyaXR0ZW4gdGV4dDpgXG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZUdlbWluaVJlcXVlc3QocHJvbXB0LCB7IHRlbXBlcmF0dXJlOiAwLjUgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlJld3JpdGluZyBmYWlsZWQ6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIHRleHQgLy8gUmV0dXJuIG9yaWdpbmFsIGlmIHJld3JpdGluZyBmYWlsc1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb29mcmVhZCh0ZXh0OiBzdHJpbmcsIG9wdGlvbnM6IFByb29mcmVhZGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY2hlY2tHcmFtbWFyID0gb3B0aW9ucy5jaGVja0dyYW1tYXIgIT09IGZhbHNlXG4gICAgY29uc3QgY2hlY2tTcGVsbGluZyA9IG9wdGlvbnMuY2hlY2tTcGVsbGluZyAhPT0gZmFsc2VcbiAgICBjb25zdCBjaGVja1N0eWxlID0gb3B0aW9ucy5jaGVja1N0eWxlICE9PSBmYWxzZVxuXG4gICAgY29uc3QgY2hlY2tzID0gW11cbiAgICBpZiAoY2hlY2tHcmFtbWFyKSBjaGVja3MucHVzaChcImdyYW1tYXJcIilcbiAgICBpZiAoY2hlY2tTcGVsbGluZykgY2hlY2tzLnB1c2goXCJzcGVsbGluZ1wiKVxuICAgIGlmIChjaGVja1N0eWxlKSBjaGVja3MucHVzaChcInN0eWxlIGFuZCBjbGFyaXR5XCIpXG5cbiAgICBjb25zdCBwcm9tcHQgPSBgUHJvb2ZyZWFkIGFuZCBjb3JyZWN0IHRoZSBmb2xsb3dpbmcgdGV4dCBmb3IgJHtjaGVja3Muam9pbihcIiwgXCIpfS4gUmV0dXJuIG9ubHkgdGhlIGNvcnJlY3RlZCB0ZXh0OlxuXG4ke3RleHR9XG5cbkNvcnJlY3RlZCB0ZXh0OmBcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb3JyZWN0ZWRUZXh0ID0gYXdhaXQgdGhpcy5tYWtlR2VtaW5pUmVxdWVzdChwcm9tcHQsIHsgdGVtcGVyYXR1cmU6IDAuMiB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29ycmVjdGVkX3RleHQ6IGNvcnJlY3RlZFRleHQsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXSxcbiAgICAgICAgZXJyb3JzOiBbXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUHJvb2ZyZWFkaW5nIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb3JyZWN0ZWRfdGV4dDogdGV4dCxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtdLFxuICAgICAgICBlcnJvcnM6IFtdXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRMYW5ndWFnZU5hbWUoY29kZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsYW5ndWFnZU1hcCA9IHtcbiAgICAgIGVzOiBcIlNwYW5pc2hcIixcbiAgICAgIGZyOiBcIkZyZW5jaFwiLCBcbiAgICAgIGRlOiBcIkdlcm1hblwiLFxuICAgICAgaXQ6IFwiSXRhbGlhblwiLFxuICAgICAgcHQ6IFwiUG9ydHVndWVzZVwiLFxuICAgICAgamE6IFwiSmFwYW5lc2VcIixcbiAgICAgIGtvOiBcIktvcmVhblwiLFxuICAgICAgemg6IFwiQ2hpbmVzZVwiLFxuICAgICAgZW46IFwiRW5nbGlzaFwiXG4gICAgfVxuICAgIHJldHVybiBsYW5ndWFnZU1hcFtjb2RlXSB8fCBcIkVuZ2xpc2hcIlxuICB9XG59XG5cbi8vIFNlcnZlci1zaWRlIG9ubHkgaW5pdGlhbGl6YXRpb25cbmV4cG9ydCBjb25zdCBjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UgPSAoKSA9PiB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BSV9BUElfS0VZXG4gIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiXG5cbiAgaWYgKCFhcGlLZXkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJHb29nbGUgQUkgQVBJIGtleSBub3QgZm91bmQuIExlc3NvbiBnZW5lcmF0aW9uIHdpbGwgdXNlIGZhbGxiYWNrIHRlbXBsYXRlcy5cIilcbiAgICAvLyBSZXR1cm4gYSBzZXJ2aWNlIHRoYXQgd2lsbCBhbHdheXMgdGhyb3cgZXJyb3JzLCB0cmlnZ2VyaW5nIGZhbGxiYWNrc1xuICAgIHJldHVybiBuZXcgR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlKHsgYXBpS2V5OiBcImR1bW15XCIsIGJhc2VVcmwgfSlcbiAgfVxuXG4gIHJldHVybiBuZXcgR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlKHsgYXBpS2V5LCBiYXNlVXJsIH0pXG59XG5cbmV4cG9ydCB0eXBlIHsgU3VtbWFyaXplck9wdGlvbnMsIFRyYW5zbGF0b3JPcHRpb25zLCBQcm9tcHRPcHRpb25zLCBXcml0ZXJPcHRpb25zLCBSZXdyaXRlck9wdGlvbnMsIFByb29mcmVhZGVyT3B0aW9ucyB9XG4iXSwibmFtZXMiOlsiR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJtb2RlbCIsIm1ha2VHZW1pbmlSZXF1ZXN0IiwicHJvbXB0Iiwib3B0aW9ucyIsIm1vZGVsc1RvVHJ5IiwicG9zc2libGVVcmxzIiwicHVzaCIsImJhc2VVcmwiLCJhcGlLZXkiLCJyZXF1ZXN0Qm9keSIsImNvbnRlbnRzIiwicGFydHMiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkNvbmZpZyIsInRlbXBlcmF0dXJlIiwibWF4T3V0cHV0VG9rZW5zIiwibWF4VG9rZW5zIiwidG9wUCIsImNvbnNvbGUiLCJsb2ciLCJpIiwibGVuZ3RoIiwidXJsIiwicmVwbGFjZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib2siLCJyZXN1bHQiLCJqc29uIiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJ3YXJuIiwiRXJyb3IiLCJlcnJvclRleHQiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdW1tYXJpemUiLCJzdW1tYXJ5VHlwZSIsInR5cGUiLCJsZW5ndGhJbnN0cnVjdGlvbnMiLCJzaG9ydCIsIm1lZGl1bSIsImxvbmciLCJ0eXBlSW5zdHJ1Y3Rpb25zIiwic3Vic3RyaW5nIiwidHJhbnNsYXRlIiwidGFyZ2V0TGFuZyIsImdldExhbmd1YWdlTmFtZSIsInRhcmdldExhbmd1YWdlIiwid3JpdGUiLCJ0b25lIiwiZm9ybWF0IiwiZm9ybWF0SW5zdHJ1Y3Rpb25zIiwicGFyYWdyYXBoIiwiZW5oYW5jZWRQcm9tcHQiLCJyZXdyaXRlIiwiYXVkaWVuY2UiLCJzaG9ydGVyIiwibG9uZ2VyIiwic2FtZSIsInByb29mcmVhZCIsImNoZWNrR3JhbW1hciIsImNoZWNrU3BlbGxpbmciLCJjaGVja1N0eWxlIiwiY2hlY2tzIiwiam9pbiIsImNvcnJlY3RlZFRleHQiLCJjb3JyZWN0ZWRfdGV4dCIsInN1Z2dlc3Rpb25zIiwiZXJyb3JzIiwiY29kZSIsImxhbmd1YWdlTWFwIiwiZXMiLCJmciIsImRlIiwiaXQiLCJwdCIsImphIiwia28iLCJ6aCIsImVuIiwiY3JlYXRlR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0dPT0dMRV9BSV9BUElfS0VZIiwiTkVYVF9QVUJMSUNfR09PR0xFX0FJX0JBU0VfVVJMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/google-ai-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-ai%2Froute&page=%2Fapi%2Ftest-ai%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-ai%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();