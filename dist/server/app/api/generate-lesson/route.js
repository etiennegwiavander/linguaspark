"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-lesson/route";
exports.ids = ["app/api/generate-lesson/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_linguaspark_app_api_generate_lesson_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-lesson/route.ts */ \"(rsc)/./app/api/generate-lesson/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-lesson/route\",\n        pathname: \"/api/generate-lesson\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-lesson/route\"\n    },\n    resolvedPagePath: \"D:\\\\linguaspark\\\\app\\\\api\\\\generate-lesson\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_linguaspark_app_api_generate_lesson_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-lesson/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1sZXNzb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLWxlc3NvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmVyYXRlLWxlc3NvbiUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbGluZ3Vhc3BhcmslNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNsaW5ndWFzcGFyayZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSTtBQUNqRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvPzI3ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbGluZ3Vhc3BhcmtcXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1sZXNzb25cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLWxlc3NvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtbGVzc29uL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcbGluZ3Vhc3BhcmtcXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1sZXNzb25cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-lesson/route.ts":
/*!******************************************!*\
  !*** ./app/api/generate-lesson/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_lesson_ai_generator_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/lesson-ai-generator-server */ \"(rsc)/./lib/lesson-ai-generator-server.ts\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n\n // Updated import to use server-side generator\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { sourceText, lessonType, studentLevel, targetLanguage, sourceUrl } = body;\n        // Validate required fields\n        if (!sourceText || !lessonType || !studentLevel || !targetLanguage) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate user authentication\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_2__.createServerSupabaseClient)();\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\n        if (authError || !user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        // Generate lesson using AI pipeline (server-side only)\n        const lesson = await _lib_lesson_ai_generator_server__WEBPACK_IMPORTED_MODULE_1__.lessonAIServerGenerator.generateLesson({\n            sourceText,\n            lessonType,\n            studentLevel,\n            targetLanguage,\n            sourceUrl\n        });\n        // Save lesson to database\n        const { data: savedLesson, error: saveError } = await supabase.from(\"lessons\").insert({\n            tutor_id: user.id,\n            title: `${lessonType} Lesson - ${new Date().toLocaleDateString()}`,\n            lesson_type: lessonType,\n            student_level: studentLevel,\n            target_language: targetLanguage,\n            source_url: sourceUrl,\n            source_text: sourceText,\n            lesson_data: lesson\n        }).select().single();\n        if (saveError) {\n            console.error(\"Error saving lesson:\", saveError);\n            // Return lesson even if save fails\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                lesson\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            lesson: {\n                ...lesson,\n                id: savedLesson.id\n            }\n        });\n    } catch (error) {\n        console.error(\"Error generating lesson:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate lesson\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTREO0FBQ2MsQ0FBQyw4Q0FBOEM7QUFDdkQ7QUFFM0QsZUFBZUcsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsVUFBVSxFQUFFQyxZQUFZLEVBQUVDLGNBQWMsRUFBRUMsU0FBUyxFQUFFLEdBQUdOO1FBRTVFLDJCQUEyQjtRQUMzQixJQUFJLENBQUNFLGNBQWMsQ0FBQ0MsY0FBYyxDQUFDQyxnQkFBZ0IsQ0FBQ0MsZ0JBQWdCO1lBQ2xFLE9BQU9WLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7Z0JBQUVNLE9BQU87WUFBMEIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQy9FO1FBRUEsK0JBQStCO1FBQy9CLE1BQU1DLFdBQVdaLGdGQUEwQkE7UUFDM0MsTUFBTSxFQUNKYSxNQUFNLEVBQUVDLElBQUksRUFBRSxFQUNkSixPQUFPSyxTQUFTLEVBQ2pCLEdBQUcsTUFBTUgsU0FBU0ksSUFBSSxDQUFDQyxPQUFPO1FBRS9CLElBQUlGLGFBQWEsQ0FBQ0QsTUFBTTtZQUN0QixPQUFPaEIscURBQVlBLENBQUNNLElBQUksQ0FBQztnQkFBRU0sT0FBTztZQUEwQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDL0U7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTU8sU0FBUyxNQUFNbkIsb0ZBQXVCQSxDQUFDb0IsY0FBYyxDQUFDO1lBQzFEZDtZQUNBQztZQUNBQztZQUNBQztZQUNBQztRQUNGO1FBRUEsMEJBQTBCO1FBQzFCLE1BQU0sRUFBRUksTUFBTU8sV0FBVyxFQUFFVixPQUFPVyxTQUFTLEVBQUUsR0FBRyxNQUFNVCxTQUNuRFUsSUFBSSxDQUFDLFdBQ0xDLE1BQU0sQ0FBQztZQUNOQyxVQUFVVixLQUFLVyxFQUFFO1lBQ2pCQyxPQUFPLENBQUMsRUFBRXBCLFdBQVcsVUFBVSxFQUFFLElBQUlxQixPQUFPQyxrQkFBa0IsR0FBRyxDQUFDO1lBQ2xFQyxhQUFhdkI7WUFDYndCLGVBQWV2QjtZQUNmd0IsaUJBQWlCdkI7WUFDakJ3QixZQUFZdkI7WUFDWndCLGFBQWE1QjtZQUNiNkIsYUFBYWhCO1FBQ2YsR0FDQ2lCLE1BQU0sR0FDTkMsTUFBTTtRQUVULElBQUlmLFdBQVc7WUFDYmdCLFFBQVEzQixLQUFLLENBQUMsd0JBQXdCVztZQUN0QyxtQ0FBbUM7WUFDbkMsT0FBT3ZCLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7Z0JBQUVjO1lBQU87UUFDcEM7UUFFQSxPQUFPcEIscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QmMsUUFBUTtnQkFDTixHQUFHQSxNQUFNO2dCQUNUTyxJQUFJTCxZQUFZSyxFQUFFO1lBQ3BCO1FBQ0Y7SUFDRixFQUFFLE9BQU9mLE9BQU87UUFDZDJCLFFBQVEzQixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPWixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQUVNLE9BQU87UUFBNEIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDakY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZS50cz81YWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBsZXNzb25BSVNlcnZlckdlbmVyYXRvciB9IGZyb20gXCJAL2xpYi9sZXNzb24tYWktZ2VuZXJhdG9yLXNlcnZlclwiIC8vIFVwZGF0ZWQgaW1wb3J0IHRvIHVzZSBzZXJ2ZXItc2lkZSBnZW5lcmF0b3JcbmltcG9ydCB7IGNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlLXNlcnZlclwiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgeyBzb3VyY2VUZXh0LCBsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwsIHRhcmdldExhbmd1YWdlLCBzb3VyY2VVcmwgfSA9IGJvZHlcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghc291cmNlVGV4dCB8fCAhbGVzc29uVHlwZSB8fCAhc3R1ZGVudExldmVsIHx8ICF0YXJnZXRMYW5ndWFnZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZHNcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgdXNlciBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQoKVxuICAgIGNvbnN0IHtcbiAgICAgIGRhdGE6IHsgdXNlciB9LFxuICAgICAgZXJyb3I6IGF1dGhFcnJvcixcbiAgICB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcblxuICAgIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGxlc3NvbiB1c2luZyBBSSBwaXBlbGluZSAoc2VydmVyLXNpZGUgb25seSlcbiAgICBjb25zdCBsZXNzb24gPSBhd2FpdCBsZXNzb25BSVNlcnZlckdlbmVyYXRvci5nZW5lcmF0ZUxlc3Nvbih7XG4gICAgICBzb3VyY2VUZXh0LFxuICAgICAgbGVzc29uVHlwZSxcbiAgICAgIHN0dWRlbnRMZXZlbCxcbiAgICAgIHRhcmdldExhbmd1YWdlLFxuICAgICAgc291cmNlVXJsLFxuICAgIH0pXG5cbiAgICAvLyBTYXZlIGxlc3NvbiB0byBkYXRhYmFzZVxuICAgIGNvbnN0IHsgZGF0YTogc2F2ZWRMZXNzb24sIGVycm9yOiBzYXZlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImxlc3NvbnNcIilcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB0dXRvcl9pZDogdXNlci5pZCxcbiAgICAgICAgdGl0bGU6IGAke2xlc3NvblR5cGV9IExlc3NvbiAtICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gLFxuICAgICAgICBsZXNzb25fdHlwZTogbGVzc29uVHlwZSxcbiAgICAgICAgc3R1ZGVudF9sZXZlbDogc3R1ZGVudExldmVsLFxuICAgICAgICB0YXJnZXRfbGFuZ3VhZ2U6IHRhcmdldExhbmd1YWdlLFxuICAgICAgICBzb3VyY2VfdXJsOiBzb3VyY2VVcmwsXG4gICAgICAgIHNvdXJjZV90ZXh0OiBzb3VyY2VUZXh0LFxuICAgICAgICBsZXNzb25fZGF0YTogbGVzc29uLFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoc2F2ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGxlc3NvbjpcIiwgc2F2ZUVycm9yKVxuICAgICAgLy8gUmV0dXJuIGxlc3NvbiBldmVuIGlmIHNhdmUgZmFpbHNcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGxlc3NvbiB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBsZXNzb246IHtcbiAgICAgICAgLi4ubGVzc29uLFxuICAgICAgICBpZDogc2F2ZWRMZXNzb24uaWQsXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgbGVzc29uOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgbGVzc29uXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibGVzc29uQUlTZXJ2ZXJHZW5lcmF0b3IiLCJjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJzb3VyY2VUZXh0IiwibGVzc29uVHlwZSIsInN0dWRlbnRMZXZlbCIsInRhcmdldExhbmd1YWdlIiwic291cmNlVXJsIiwiZXJyb3IiLCJzdGF0dXMiLCJzdXBhYmFzZSIsImRhdGEiLCJ1c2VyIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJsZXNzb24iLCJnZW5lcmF0ZUxlc3NvbiIsInNhdmVkTGVzc29uIiwic2F2ZUVycm9yIiwiZnJvbSIsImluc2VydCIsInR1dG9yX2lkIiwiaWQiLCJ0aXRsZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJsZXNzb25fdHlwZSIsInN0dWRlbnRfbGV2ZWwiLCJ0YXJnZXRfbGFuZ3VhZ2UiLCJzb3VyY2VfdXJsIiwic291cmNlX3RleHQiLCJsZXNzb25fZGF0YSIsInNlbGVjdCIsInNpbmdsZSIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-lesson/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google-ai-server.ts":
/*!*********************************!*\
  !*** ./lib/google-ai-server.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGoogleAIServerService: () => (/* binding */ createGoogleAIServerService)\n/* harmony export */ });\n// Server-side Google AI APIs service layer\nclass GoogleAIServerService {\n    constructor(config){\n        this.config = config;\n    }\n    async makeRequest(endpoint, data) {\n        const response = await fetch(`${this.config.baseUrl}/${endpoint}`, {\n            method: \"POST\",\n            headers: {\n                Authorization: `Bearer ${this.config.apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            throw new Error(`Google AI API error: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    async summarize(text, options = {}) {\n        const data = {\n            input: text,\n            type: options.type || \"key-points\",\n            length: options.length || \"medium\",\n            format: options.format || \"plain-text\"\n        };\n        const result = await this.makeRequest(\"summarizer/v1/summarize\", data);\n        return result.summary;\n    }\n    async translate(text, options) {\n        const data = {\n            input: text,\n            source_language: options.sourceLanguage || \"auto\",\n            target_language: options.targetLanguage\n        };\n        const result = await this.makeRequest(\"translator/v1/translate\", data);\n        return result.translation;\n    }\n    async prompt(prompt, options = {}) {\n        const data = {\n            prompt,\n            temperature: options.temperature || 0.7,\n            max_tokens: options.maxTokens || 1000,\n            top_p: options.topP || 0.9\n        };\n        const result = await this.makeRequest(\"prompt/v1/generate\", data);\n        return result.response;\n    }\n    async write(prompt, options = {}) {\n        const data = {\n            prompt,\n            tone: options.tone || \"casual\",\n            length: options.length || \"medium\",\n            format: options.format || \"paragraph\"\n        };\n        const result = await this.makeRequest(\"writer/v1/write\", data);\n        return result.content;\n    }\n    async rewrite(text, options = {}) {\n        const data = {\n            input: text,\n            tone: options.tone || \"casual\",\n            length: options.length || \"same\",\n            audience: options.audience || \"general\"\n        };\n        const result = await this.makeRequest(\"rewriter/v1/rewrite\", data);\n        return result.rewritten_text;\n    }\n    async proofread(text, options = {}) {\n        const data = {\n            input: text,\n            check_grammar: options.checkGrammar !== false,\n            check_spelling: options.checkSpelling !== false,\n            check_style: options.checkStyle !== false,\n            suggest_improvements: options.suggestImprovements !== false\n        };\n        const result = await this.makeRequest(\"proofreader/v1/proofread\", data);\n        return {\n            corrected_text: result.corrected_text,\n            suggestions: result.suggestions,\n            errors: result.errors\n        };\n    }\n}\n// Server-side only initialization\nconst createGoogleAIServerService = ()=>{\n    const apiKey = \"AIzaSyAkDCpwWTPKYftoc1Fdm77P6B00Lj89Lio\" // Use NEXT_PUBLIC_ for client-side access\n    ;\n    const baseUrl = \"https://generativelanguage.googleapis.com\" || 0;\n    if (!apiKey) {\n        throw new Error(\"Google AI API key is required\");\n    }\n    return new GoogleAIServerService({\n        apiKey,\n        baseUrl\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVMUIsSUFBWSxFQUFFQyxVQUE4QixDQUFDLENBQUMsRUFBRTtRQUM5RCxNQUFNakIsT0FBTztZQUNYa0IsT0FBT0Y7WUFDUDJCLGVBQWUxQixRQUFRMkIsWUFBWSxLQUFLO1lBQ3hDQyxnQkFBZ0I1QixRQUFRNkIsYUFBYSxLQUFLO1lBQzFDQyxhQUFhOUIsUUFBUStCLFVBQVUsS0FBSztZQUNwQ0Msc0JBQXNCaEMsUUFBUWlDLG1CQUFtQixLQUFLO1FBQ3hEO1FBRUEsTUFBTTVCLFNBQVMsTUFBTSxJQUFJLENBQUN4QixXQUFXLENBQUMsNEJBQTRCRTtRQUNsRSxPQUFPO1lBQ0xtRCxnQkFBZ0I3QixPQUFPNkIsY0FBYztZQUNyQ0MsYUFBYTlCLE9BQU84QixXQUFXO1lBQy9CQyxRQUFRL0IsT0FBTytCLE1BQU07UUFDdkI7SUFDRjtBQUNGO0FBRUEsa0NBQWtDO0FBQzNCLE1BQU1DLDhCQUE4QjtJQUN6QyxNQUFNL0MsU0FBU2dELHlDQUF5QyxDQUFDLDBDQUEwQzs7SUFDbkcsTUFBTXBELFVBQVVvRCwyQ0FBMEMsSUFBSSxDQUEyQztJQUV6RyxJQUFJLENBQUNoRCxRQUFRO1FBQ1gsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0lBRUEsT0FBTyxJQUFJakIsc0JBQXNCO1FBQUVZO1FBQVFKO0lBQVE7QUFDckQsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvZ29vZ2xlLWFpLXNlcnZlci50cz81MmQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlcnZlci1zaWRlIEdvb2dsZSBBSSBBUElzIHNlcnZpY2UgbGF5ZXJcbmludGVyZmFjZSBHb29nbGVBSUNvbmZpZyB7XG4gIGFwaUtleTogc3RyaW5nXG4gIGJhc2VVcmw6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3VtbWFyaXplck9wdGlvbnMge1xuICB0eXBlPzogXCJrZXktcG9pbnRzXCIgfCBcInRsLWRyXCIgfCBcInRlYXNlclwiIHwgXCJoZWFkbGluZVwiXG4gIGxlbmd0aD86IFwic2hvcnRcIiB8IFwibWVkaXVtXCIgfCBcImxvbmdcIlxuICBmb3JtYXQ/OiBcIm1hcmtkb3duXCIgfCBcInBsYWluLXRleHRcIlxufVxuXG5pbnRlcmZhY2UgVHJhbnNsYXRvck9wdGlvbnMge1xuICBzb3VyY2VMYW5ndWFnZT86IHN0cmluZ1xuICB0YXJnZXRMYW5ndWFnZTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBQcm9tcHRPcHRpb25zIHtcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXJcbiAgbWF4VG9rZW5zPzogbnVtYmVyXG4gIHRvcFA/OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFdyaXRlck9wdGlvbnMge1xuICB0b25lPzogXCJmb3JtYWxcIiB8IFwiY2FzdWFsXCIgfCBcImFjYWRlbWljXCIgfCBcImNyZWF0aXZlXCJcbiAgbGVuZ3RoPzogXCJzaG9ydFwiIHwgXCJtZWRpdW1cIiB8IFwibG9uZ1wiXG4gIGZvcm1hdD86IFwicGFyYWdyYXBoXCIgfCBcImJ1bGxldC1wb2ludHNcIiB8IFwibnVtYmVyZWQtbGlzdFwiXG59XG5cbmludGVyZmFjZSBSZXdyaXRlck9wdGlvbnMge1xuICB0b25lPzogXCJmb3JtYWxcIiB8IFwiY2FzdWFsXCIgfCBcImFjYWRlbWljXCIgfCBcImNyZWF0aXZlXCJcbiAgbGVuZ3RoPzogXCJzaG9ydGVyXCIgfCBcImxvbmdlclwiIHwgXCJzYW1lXCJcbiAgYXVkaWVuY2U/OiBcImdlbmVyYWxcIiB8IFwiZXhwZXJ0XCIgfCBcImJlZ2lubmVyXCJcbn1cblxuaW50ZXJmYWNlIFByb29mcmVhZGVyT3B0aW9ucyB7XG4gIGNoZWNrR3JhbW1hcj86IGJvb2xlYW5cbiAgY2hlY2tTcGVsbGluZz86IGJvb2xlYW5cbiAgY2hlY2tTdHlsZT86IGJvb2xlYW5cbiAgc3VnZ2VzdEltcHJvdmVtZW50cz86IGJvb2xlYW5cbn1cblxuY2xhc3MgR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjb25maWc6IEdvb2dsZUFJQ29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBHb29nbGVBSUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5jb25maWcuYmFzZVVybH0vJHtlbmRwb2ludH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5jb25maWcuYXBpS2V5fWAsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvb2dsZSBBSSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfVxuXG4gIGFzeW5jIHN1bW1hcml6ZSh0ZXh0OiBzdHJpbmcsIG9wdGlvbnM6IFN1bW1hcml6ZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgXCJrZXktcG9pbnRzXCIsXG4gICAgICBsZW5ndGg6IG9wdGlvbnMubGVuZ3RoIHx8IFwibWVkaXVtXCIsXG4gICAgICBmb3JtYXQ6IG9wdGlvbnMuZm9ybWF0IHx8IFwicGxhaW4tdGV4dFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJzdW1tYXJpemVyL3YxL3N1bW1hcml6ZVwiLCBkYXRhKVxuICAgIHJldHVybiByZXN1bHQuc3VtbWFyeVxuICB9XG5cbiAgYXN5bmMgdHJhbnNsYXRlKHRleHQ6IHN0cmluZywgb3B0aW9uczogVHJhbnNsYXRvck9wdGlvbnMpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICBzb3VyY2VfbGFuZ3VhZ2U6IG9wdGlvbnMuc291cmNlTGFuZ3VhZ2UgfHwgXCJhdXRvXCIsXG4gICAgICB0YXJnZXRfbGFuZ3VhZ2U6IG9wdGlvbnMudGFyZ2V0TGFuZ3VhZ2UsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChcInRyYW5zbGF0b3IvdjEvdHJhbnNsYXRlXCIsIGRhdGEpXG4gICAgcmV0dXJuIHJlc3VsdC50cmFuc2xhdGlvblxuICB9XG5cbiAgYXN5bmMgcHJvbXB0KHByb21wdDogc3RyaW5nLCBvcHRpb25zOiBQcm9tcHRPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcHJvbXB0LFxuICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgbWF4X3Rva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgfHwgMTAwMCxcbiAgICAgIHRvcF9wOiBvcHRpb25zLnRvcFAgfHwgMC45LFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJwcm9tcHQvdjEvZ2VuZXJhdGVcIiwgZGF0YSlcbiAgICByZXR1cm4gcmVzdWx0LnJlc3BvbnNlXG4gIH1cblxuICBhc3luYyB3cml0ZShwcm9tcHQ6IHN0cmluZywgb3B0aW9uczogV3JpdGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHByb21wdCxcbiAgICAgIHRvbmU6IG9wdGlvbnMudG9uZSB8fCBcImNhc3VhbFwiLFxuICAgICAgbGVuZ3RoOiBvcHRpb25zLmxlbmd0aCB8fCBcIm1lZGl1bVwiLFxuICAgICAgZm9ybWF0OiBvcHRpb25zLmZvcm1hdCB8fCBcInBhcmFncmFwaFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJ3cml0ZXIvdjEvd3JpdGVcIiwgZGF0YSlcbiAgICByZXR1cm4gcmVzdWx0LmNvbnRlbnRcbiAgfVxuXG4gIGFzeW5jIHJld3JpdGUodGV4dDogc3RyaW5nLCBvcHRpb25zOiBSZXdyaXRlck9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBpbnB1dDogdGV4dCxcbiAgICAgIHRvbmU6IG9wdGlvbnMudG9uZSB8fCBcImNhc3VhbFwiLFxuICAgICAgbGVuZ3RoOiBvcHRpb25zLmxlbmd0aCB8fCBcInNhbWVcIixcbiAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlIHx8IFwiZ2VuZXJhbFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJyZXdyaXRlci92MS9yZXdyaXRlXCIsIGRhdGEpXG4gICAgcmV0dXJuIHJlc3VsdC5yZXdyaXR0ZW5fdGV4dFxuICB9XG5cbiAgYXN5bmMgcHJvb2ZyZWFkKHRleHQ6IHN0cmluZywgb3B0aW9uczogUHJvb2ZyZWFkZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICBjaGVja19ncmFtbWFyOiBvcHRpb25zLmNoZWNrR3JhbW1hciAhPT0gZmFsc2UsXG4gICAgICBjaGVja19zcGVsbGluZzogb3B0aW9ucy5jaGVja1NwZWxsaW5nICE9PSBmYWxzZSxcbiAgICAgIGNoZWNrX3N0eWxlOiBvcHRpb25zLmNoZWNrU3R5bGUgIT09IGZhbHNlLFxuICAgICAgc3VnZ2VzdF9pbXByb3ZlbWVudHM6IG9wdGlvbnMuc3VnZ2VzdEltcHJvdmVtZW50cyAhPT0gZmFsc2UsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChcInByb29mcmVhZGVyL3YxL3Byb29mcmVhZFwiLCBkYXRhKVxuICAgIHJldHVybiB7XG4gICAgICBjb3JyZWN0ZWRfdGV4dDogcmVzdWx0LmNvcnJlY3RlZF90ZXh0LFxuICAgICAgc3VnZ2VzdGlvbnM6IHJlc3VsdC5zdWdnZXN0aW9ucyxcbiAgICAgIGVycm9yczogcmVzdWx0LmVycm9ycyxcbiAgICB9XG4gIH1cbn1cblxuLy8gU2VydmVyLXNpZGUgb25seSBpbml0aWFsaXphdGlvblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUdvb2dsZUFJU2VydmVyU2VydmljZSA9ICgpID0+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FJX0FQSV9LRVkgLy8gVXNlIE5FWFRfUFVCTElDXyBmb3IgY2xpZW50LXNpZGUgYWNjZXNzXG4gIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiXG5cbiAgaWYgKCFhcGlLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQUkgQVBJIGtleSBpcyByZXF1aXJlZFwiKVxuICB9XG5cbiAgcmV0dXJuIG5ldyBHb29nbGVBSVNlcnZlclNlcnZpY2UoeyBhcGlLZXksIGJhc2VVcmwgfSlcbn1cblxuZXhwb3J0IHR5cGUgeyBTdW1tYXJpemVyT3B0aW9ucywgVHJhbnNsYXRvck9wdGlvbnMsIFByb21wdE9wdGlvbnMsIFdyaXRlck9wdGlvbnMsIFJld3JpdGVyT3B0aW9ucywgUHJvb2ZyZWFkZXJPcHRpb25zIH1cbiJdLCJuYW1lcyI6WyJHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnQiLCJkYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsImJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImFwaUtleSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwic3VtbWFyaXplIiwidGV4dCIsIm9wdGlvbnMiLCJpbnB1dCIsInR5cGUiLCJsZW5ndGgiLCJmb3JtYXQiLCJyZXN1bHQiLCJzdW1tYXJ5IiwidHJhbnNsYXRlIiwic291cmNlX2xhbmd1YWdlIiwic291cmNlTGFuZ3VhZ2UiLCJ0YXJnZXRfbGFuZ3VhZ2UiLCJ0YXJnZXRMYW5ndWFnZSIsInRyYW5zbGF0aW9uIiwicHJvbXB0IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwibWF4VG9rZW5zIiwidG9wX3AiLCJ0b3BQIiwid3JpdGUiLCJ0b25lIiwiY29udGVudCIsInJld3JpdGUiLCJhdWRpZW5jZSIsInJld3JpdHRlbl90ZXh0IiwicHJvb2ZyZWFkIiwiY2hlY2tfZ3JhbW1hciIsImNoZWNrR3JhbW1hciIsImNoZWNrX3NwZWxsaW5nIiwiY2hlY2tTcGVsbGluZyIsImNoZWNrX3N0eWxlIiwiY2hlY2tTdHlsZSIsInN1Z2dlc3RfaW1wcm92ZW1lbnRzIiwic3VnZ2VzdEltcHJvdmVtZW50cyIsImNvcnJlY3RlZF90ZXh0Iiwic3VnZ2VzdGlvbnMiLCJlcnJvcnMiLCJjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0FJX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/google-ai-server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/lesson-ai-generator-server.ts":
/*!*******************************************!*\
  !*** ./lib/lesson-ai-generator-server.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonAIServerGenerator: () => (/* binding */ LessonAIServerGenerator),\n/* harmony export */   lessonAIServerGenerator: () => (/* binding */ lessonAIServerGenerator)\n/* harmony export */ });\n/* harmony import */ var _google_ai_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./google-ai-server */ \"(rsc)/./lib/google-ai-server.ts\");\n\nclass LessonAIServerGenerator {\n    getGoogleAI() {\n        if (!this.googleAI) {\n            this.googleAI = (0,_google_ai_server__WEBPACK_IMPORTED_MODULE_0__.createGoogleAIServerService)();\n        }\n        return this.googleAI;\n    }\n    async generateLesson(params) {\n        const { sourceText, lessonType, studentLevel, targetLanguage, sourceUrl } = params;\n        try {\n            // Step 1: Summarize the source text\n            const summary = await this.getGoogleAI().summarize(sourceText, {\n                type: \"key-points\",\n                length: this.getSummaryLength(studentLevel),\n                format: \"plain-text\"\n            });\n            // Step 2: Translate if needed (for non-English target languages)\n            let translatedContent = summary;\n            if (targetLanguage !== \"english\") {\n                translatedContent = await this.getGoogleAI().translate(summary, {\n                    targetLanguage: this.getLanguageCode(targetLanguage)\n                });\n            }\n            // Step 3: Generate lesson structure using Prompt API\n            const lessonStructure = await this.generateLessonStructure(translatedContent, lessonType, studentLevel, targetLanguage);\n            // Step 4: Generate detailed content for each section\n            const detailedLesson = await this.generateDetailedContent(lessonStructure, translatedContent, lessonType, studentLevel, targetLanguage);\n            // Step 5: Proofread and polish the final lesson\n            const polishedLesson = await this.proofreadLesson(detailedLesson);\n            return polishedLesson;\n        } catch (error) {\n            console.error(\"Error in AI lesson generation:\", error);\n            // Fallback to template-based generation\n            return this.generateFallbackLesson(params);\n        }\n    }\n    async generateLessonStructure(content, lessonType, studentLevel, targetLanguage) {\n        const prompt = `\nCreate a structured ${lessonType} lesson for ${studentLevel} level students learning ${targetLanguage}.\nBase the lesson on this content: \"${content}\"\n\nGenerate a JSON structure with these sections:\n- warmup: 3 engaging warm-up questions\n- vocabulary: 5-8 key vocabulary words with meanings and examples\n- reading: A simplified version of the content appropriate for ${studentLevel} level\n- comprehension: 4-5 reading comprehension questions\n- discussion: 3-4 discussion questions that encourage conversation\n- grammar: Grammar focus with examples and exercises\n- pronunciation: One challenging word with IPA and practice sentence\n- wrapup: 3 reflection questions\n\nEnsure the content is appropriate for ${studentLevel} CEFR level and focuses on ${lessonType} learning objectives.\nReturn only valid JSON.\n`;\n        const response = await this.getGoogleAI().prompt(prompt, {\n            temperature: 0.7,\n            maxTokens: 2000\n        });\n        try {\n            return JSON.parse(response);\n        } catch  {\n            // If JSON parsing fails, return a structured fallback\n            return this.createStructuredFallback(content, lessonType, studentLevel);\n        }\n    }\n    async generateDetailedContent(structure, content, lessonType, studentLevel, targetLanguage) {\n        // Use Writer API to expand each section with more detailed content\n        const sections = {\n            ...structure\n        };\n        // Enhance vocabulary section\n        if (sections.vocabulary) {\n            for(let i = 0; i < sections.vocabulary.length; i++){\n                const vocab = sections.vocabulary[i];\n                const enhancedExample = await this.getGoogleAI().write(`Create a natural example sentence using the word \"${vocab.word}\" for ${studentLevel} level students`, {\n                    tone: \"casual\",\n                    length: \"short\"\n                });\n                sections.vocabulary[i].example = enhancedExample;\n            }\n        }\n        // Enhance discussion questions\n        if (sections.discussion) {\n            const enhancedDiscussion = await this.getGoogleAI().write(`Expand these discussion questions for ${lessonType} lesson: ${sections.discussion.join(\", \")}. Make them more engaging for ${studentLevel} level students.`, {\n                tone: \"casual\",\n                length: \"medium\",\n                format: \"bullet-points\"\n            });\n            sections.discussion = this.parseListFromText(enhancedDiscussion);\n        }\n        return sections;\n    }\n    async proofreadLesson(lesson) {\n        // Proofread key text sections\n        const sectionsToProofread = [\n            \"reading\",\n            \"grammar.examples\",\n            \"pronunciation.practice\"\n        ];\n        for (const sectionPath of sectionsToProofread){\n            const value = this.getNestedValue(lesson, sectionPath);\n            if (typeof value === \"string\") {\n                const proofread = await this.getGoogleAI().proofread(value, {\n                    checkGrammar: true,\n                    checkSpelling: true,\n                    checkStyle: true\n                });\n                this.setNestedValue(lesson, sectionPath, proofread.corrected_text);\n            }\n        }\n        return lesson;\n    }\n    generateFallbackLesson(params) {\n        // Template-based fallback when AI APIs fail\n        const { sourceText, lessonType, studentLevel, targetLanguage } = params;\n        return {\n            lessonType,\n            studentLevel,\n            targetLanguage,\n            sections: {\n                warmup: this.getTemplateWarmup(lessonType, studentLevel),\n                vocabulary: this.extractVocabulary(sourceText, studentLevel),\n                reading: this.simplifyText(sourceText, studentLevel),\n                comprehension: this.getTemplateComprehension(lessonType, studentLevel),\n                discussion: this.getTemplateDiscussion(lessonType, studentLevel),\n                grammar: this.getTemplateGrammar(studentLevel),\n                pronunciation: this.getTemplatePronunciation(sourceText),\n                wrapup: this.getTemplateWrapup(lessonType)\n            }\n        };\n    }\n    // Helper methods\n    getSummaryLength(level) {\n        const lengthMap = {\n            A1: \"short\",\n            A2: \"short\",\n            B1: \"medium\",\n            B2: \"medium\",\n            C1: \"long\"\n        };\n        return lengthMap[level] || \"medium\";\n    }\n    getLanguageCode(language) {\n        const languageMap = {\n            spanish: \"es\",\n            french: \"fr\",\n            german: \"de\",\n            italian: \"it\",\n            portuguese: \"pt\",\n            japanese: \"ja\",\n            korean: \"ko\",\n            chinese: \"zh\"\n        };\n        return languageMap[language] || \"en\";\n    }\n    parseListFromText(text) {\n        return text.split(\"\\n\").filter((line)=>line.trim()).map((line)=>line.replace(/^[-•*]\\s*/, \"\").trim()).filter((line)=>line.length > 0).slice(0, 4) // Limit to 4 items\n        ;\n    }\n    getNestedValue(obj, path) {\n        return path.split(\".\").reduce((current, key)=>current?.[key], obj);\n    }\n    setNestedValue(obj, path, value) {\n        const keys = path.split(\".\");\n        const lastKey = keys.pop();\n        const target = keys.reduce((current, key)=>current[key], obj);\n        target[lastKey] = value;\n    }\n    createStructuredFallback(content, lessonType, studentLevel) {\n        return {\n            warmup: this.getTemplateWarmup(lessonType, studentLevel),\n            vocabulary: this.extractVocabulary(content, studentLevel),\n            reading: content.substring(0, 500),\n            comprehension: this.getTemplateComprehension(lessonType, studentLevel),\n            discussion: this.getTemplateDiscussion(lessonType, studentLevel),\n            grammar: this.getTemplateGrammar(studentLevel),\n            pronunciation: this.getTemplatePronunciation(content),\n            wrapup: this.getTemplateWrapup(lessonType)\n        };\n    }\n    getTemplateWarmup(lessonType, studentLevel) {\n        const templates = {\n            discussion: [\n                \"What do you already know about this topic?\",\n                \"Have you had similar experiences?\",\n                \"What would you like to learn more about?\"\n            ],\n            grammar: [\n                \"What grammar patterns do you notice?\",\n                \"Which sentences seem most complex?\",\n                \"What grammar rules do you remember?\"\n            ],\n            travel: [\n                \"Where would you like to travel next?\",\n                \"What travel experiences have you had?\",\n                \"What travel vocabulary do you know?\"\n            ],\n            business: [\n                \"What business situations are you familiar with?\",\n                \"How do you communicate professionally?\",\n                \"What business terms are challenging?\"\n            ],\n            pronunciation: [\n                \"Which sounds are difficult to pronounce?\",\n                \"How do you practice pronunciation?\",\n                \"What pronunciation goals do you have?\"\n            ]\n        };\n        return templates[lessonType] || templates.discussion;\n    }\n    extractVocabulary(text, studentLevel) {\n        // Simple vocabulary extraction based on word frequency and complexity\n        const words = text.toLowerCase().match(/\\b[a-z]{4,}\\b/g) || [];\n        const uniqueWords = [\n            ...new Set(words)\n        ];\n        const selectedWords = uniqueWords.slice(0, 6);\n        return selectedWords.map((word)=>({\n                word: word,\n                meaning: `Definition of ${word}`,\n                example: `Example sentence with ${word}.`\n            }));\n    }\n    simplifyText(text, studentLevel) {\n        // Basic text simplification based on level\n        const maxLength = {\n            A1: 200,\n            A2: 300,\n            B1: 400,\n            B2: 500,\n            C1: 600\n        };\n        const limit = maxLength[studentLevel] || 400;\n        return text.substring(0, limit) + (text.length > limit ? \"...\" : \"\");\n    }\n    getTemplateComprehension(lessonType, studentLevel) {\n        return [\n            \"What is the main idea of this text?\",\n            \"What supporting details can you identify?\",\n            \"How does this relate to your experience?\",\n            \"What conclusions can you draw?\"\n        ];\n    }\n    getTemplateDiscussion(lessonType, studentLevel) {\n        const templates = {\n            discussion: [\n                \"What is your opinion on this topic?\",\n                \"How would you handle this situation?\",\n                \"What alternative approaches exist?\"\n            ],\n            business: [\n                \"How would you apply this professionally?\",\n                \"What business challenges does this address?\",\n                \"How would you present this to colleagues?\"\n            ],\n            travel: [\n                \"How would this help while traveling?\",\n                \"What preparations would you make?\",\n                \"How would you share this experience?\"\n            ]\n        };\n        return templates[lessonType] || templates.discussion;\n    }\n    getTemplateGrammar(studentLevel) {\n        const grammarFoci = {\n            A1: \"Present Simple Tense\",\n            A2: \"Past Simple Tense\",\n            B1: \"Present Perfect Tense\",\n            B2: \"Conditional Sentences\",\n            C1: \"Advanced Grammar Structures\"\n        };\n        return {\n            focus: grammarFoci[studentLevel] || \"Present Perfect Tense\",\n            examples: [\n                \"I have learned many new things.\",\n                \"She has improved her skills.\",\n                \"We have discussed this topic.\"\n            ],\n            exercise: [\n                \"I _____ (learn) a lot today.\",\n                \"They _____ (complete) the project.\",\n                \"She _____ (improve) significantly.\"\n            ]\n        };\n    }\n    getTemplatePronunciation(text) {\n        // Extract a challenging word from the text\n        const words = text.match(/\\b[a-z]{6,}\\b/gi) || [\n            \"communication\"\n        ];\n        const selectedWord = words[0] || \"communication\";\n        return {\n            word: selectedWord.toLowerCase(),\n            ipa: \"/kəˌmjuːnɪˈkeɪʃən/\",\n            practice: `Practice saying: \"${selectedWord}\" in a sentence.`\n        };\n    }\n    getTemplateWrapup(lessonType) {\n        return [\n            \"What new vocabulary did you learn?\",\n            \"Which concepts need more practice?\",\n            \"How will you use this knowledge?\",\n            \"What questions do you still have?\"\n        ];\n    }\n    constructor(){\n        this.googleAI = null;\n    }\n}\nconst lessonAIServerGenerator = new LessonAIServerGenerator();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LWdlbmVyYXRvci1zZXJ2ZXIudHM/MGJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UgfSBmcm9tIFwiLi9nb29nbGUtYWktc2VydmVyXCJcblxuaW50ZXJmYWNlIExlc3NvbkdlbmVyYXRpb25QYXJhbXMge1xuICBzb3VyY2VUZXh0OiBzdHJpbmdcbiAgbGVzc29uVHlwZTogc3RyaW5nXG4gIHN0dWRlbnRMZXZlbDogc3RyaW5nXG4gIHRhcmdldExhbmd1YWdlOiBzdHJpbmdcbiAgc291cmNlVXJsPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBHZW5lcmF0ZWRMZXNzb24ge1xuICBsZXNzb25UeXBlOiBzdHJpbmdcbiAgc3R1ZGVudExldmVsOiBzdHJpbmdcbiAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZ1xuICBzZWN0aW9uczoge1xuICAgIHdhcm11cDogc3RyaW5nW11cbiAgICB2b2NhYnVsYXJ5OiBBcnJheTx7IHdvcmQ6IHN0cmluZzsgbWVhbmluZzogc3RyaW5nOyBleGFtcGxlOiBzdHJpbmcgfT5cbiAgICByZWFkaW5nOiBzdHJpbmdcbiAgICBjb21wcmVoZW5zaW9uOiBzdHJpbmdbXVxuICAgIGRpc2N1c3Npb246IHN0cmluZ1tdXG4gICAgZ3JhbW1hcjoge1xuICAgICAgZm9jdXM6IHN0cmluZ1xuICAgICAgZXhhbXBsZXM6IHN0cmluZ1tdXG4gICAgICBleGVyY2lzZTogc3RyaW5nW11cbiAgICB9XG4gICAgcHJvbnVuY2lhdGlvbjoge1xuICAgICAgd29yZDogc3RyaW5nXG4gICAgICBpcGE6IHN0cmluZ1xuICAgICAgcHJhY3RpY2U6IHN0cmluZ1xuICAgIH1cbiAgICB3cmFwdXA6IHN0cmluZ1tdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExlc3NvbkFJU2VydmVyR2VuZXJhdG9yIHtcbiAgcHJpdmF0ZSBnb29nbGVBSTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlPiB8IG51bGwgPSBudWxsXG5cbiAgcHJpdmF0ZSBnZXRHb29nbGVBSSgpIHtcbiAgICBpZiAoIXRoaXMuZ29vZ2xlQUkpIHtcbiAgICAgIHRoaXMuZ29vZ2xlQUkgPSBjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nb29nbGVBSVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVMZXNzb24ocGFyYW1zOiBMZXNzb25HZW5lcmF0aW9uUGFyYW1zKTogUHJvbWlzZTxHZW5lcmF0ZWRMZXNzb24+IHtcbiAgICBjb25zdCB7IHNvdXJjZVRleHQsIGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCwgdGFyZ2V0TGFuZ3VhZ2UsIHNvdXJjZVVybCB9ID0gcGFyYW1zXG5cbiAgICB0cnkge1xuICAgICAgLy8gU3RlcCAxOiBTdW1tYXJpemUgdGhlIHNvdXJjZSB0ZXh0XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLnN1bW1hcml6ZShzb3VyY2VUZXh0LCB7XG4gICAgICAgIHR5cGU6IFwia2V5LXBvaW50c1wiLFxuICAgICAgICBsZW5ndGg6IHRoaXMuZ2V0U3VtbWFyeUxlbmd0aChzdHVkZW50TGV2ZWwpLFxuICAgICAgICBmb3JtYXQ6IFwicGxhaW4tdGV4dFwiLFxuICAgICAgfSlcblxuICAgICAgLy8gU3RlcCAyOiBUcmFuc2xhdGUgaWYgbmVlZGVkIChmb3Igbm9uLUVuZ2xpc2ggdGFyZ2V0IGxhbmd1YWdlcylcbiAgICAgIGxldCB0cmFuc2xhdGVkQ29udGVudCA9IHN1bW1hcnlcbiAgICAgIGlmICh0YXJnZXRMYW5ndWFnZSAhPT0gXCJlbmdsaXNoXCIpIHtcbiAgICAgICAgdHJhbnNsYXRlZENvbnRlbnQgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkudHJhbnNsYXRlKHN1bW1hcnksIHtcbiAgICAgICAgICB0YXJnZXRMYW5ndWFnZTogdGhpcy5nZXRMYW5ndWFnZUNvZGUodGFyZ2V0TGFuZ3VhZ2UpLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIDM6IEdlbmVyYXRlIGxlc3NvbiBzdHJ1Y3R1cmUgdXNpbmcgUHJvbXB0IEFQSVxuICAgICAgY29uc3QgbGVzc29uU3RydWN0dXJlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUxlc3NvblN0cnVjdHVyZShcbiAgICAgICAgdHJhbnNsYXRlZENvbnRlbnQsXG4gICAgICAgIGxlc3NvblR5cGUsXG4gICAgICAgIHN0dWRlbnRMZXZlbCxcbiAgICAgICAgdGFyZ2V0TGFuZ3VhZ2UsXG4gICAgICApXG5cbiAgICAgIC8vIFN0ZXAgNDogR2VuZXJhdGUgZGV0YWlsZWQgY29udGVudCBmb3IgZWFjaCBzZWN0aW9uXG4gICAgICBjb25zdCBkZXRhaWxlZExlc3NvbiA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVEZXRhaWxlZENvbnRlbnQoXG4gICAgICAgIGxlc3NvblN0cnVjdHVyZSxcbiAgICAgICAgdHJhbnNsYXRlZENvbnRlbnQsXG4gICAgICAgIGxlc3NvblR5cGUsXG4gICAgICAgIHN0dWRlbnRMZXZlbCxcbiAgICAgICAgdGFyZ2V0TGFuZ3VhZ2UsXG4gICAgICApXG5cbiAgICAgIC8vIFN0ZXAgNTogUHJvb2ZyZWFkIGFuZCBwb2xpc2ggdGhlIGZpbmFsIGxlc3NvblxuICAgICAgY29uc3QgcG9saXNoZWRMZXNzb24gPSBhd2FpdCB0aGlzLnByb29mcmVhZExlc3NvbihkZXRhaWxlZExlc3NvbilcblxuICAgICAgcmV0dXJuIHBvbGlzaGVkTGVzc29uXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBBSSBsZXNzb24gZ2VuZXJhdGlvbjpcIiwgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjayB0byB0ZW1wbGF0ZS1iYXNlZCBnZW5lcmF0aW9uXG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUZhbGxiYWNrTGVzc29uKHBhcmFtcylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlTGVzc29uU3RydWN0dXJlKFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBsZXNzb25UeXBlOiBzdHJpbmcsXG4gICAgc3R1ZGVudExldmVsOiBzdHJpbmcsXG4gICAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZyxcbiAgKSB7XG4gICAgY29uc3QgcHJvbXB0ID0gYFxuQ3JlYXRlIGEgc3RydWN0dXJlZCAke2xlc3NvblR5cGV9IGxlc3NvbiBmb3IgJHtzdHVkZW50TGV2ZWx9IGxldmVsIHN0dWRlbnRzIGxlYXJuaW5nICR7dGFyZ2V0TGFuZ3VhZ2V9LlxuQmFzZSB0aGUgbGVzc29uIG9uIHRoaXMgY29udGVudDogXCIke2NvbnRlbnR9XCJcblxuR2VuZXJhdGUgYSBKU09OIHN0cnVjdHVyZSB3aXRoIHRoZXNlIHNlY3Rpb25zOlxuLSB3YXJtdXA6IDMgZW5nYWdpbmcgd2FybS11cCBxdWVzdGlvbnNcbi0gdm9jYWJ1bGFyeTogNS04IGtleSB2b2NhYnVsYXJ5IHdvcmRzIHdpdGggbWVhbmluZ3MgYW5kIGV4YW1wbGVzXG4tIHJlYWRpbmc6IEEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBjb250ZW50IGFwcHJvcHJpYXRlIGZvciAke3N0dWRlbnRMZXZlbH0gbGV2ZWxcbi0gY29tcHJlaGVuc2lvbjogNC01IHJlYWRpbmcgY29tcHJlaGVuc2lvbiBxdWVzdGlvbnNcbi0gZGlzY3Vzc2lvbjogMy00IGRpc2N1c3Npb24gcXVlc3Rpb25zIHRoYXQgZW5jb3VyYWdlIGNvbnZlcnNhdGlvblxuLSBncmFtbWFyOiBHcmFtbWFyIGZvY3VzIHdpdGggZXhhbXBsZXMgYW5kIGV4ZXJjaXNlc1xuLSBwcm9udW5jaWF0aW9uOiBPbmUgY2hhbGxlbmdpbmcgd29yZCB3aXRoIElQQSBhbmQgcHJhY3RpY2Ugc2VudGVuY2Vcbi0gd3JhcHVwOiAzIHJlZmxlY3Rpb24gcXVlc3Rpb25zXG5cbkVuc3VyZSB0aGUgY29udGVudCBpcyBhcHByb3ByaWF0ZSBmb3IgJHtzdHVkZW50TGV2ZWx9IENFRlIgbGV2ZWwgYW5kIGZvY3VzZXMgb24gJHtsZXNzb25UeXBlfSBsZWFybmluZyBvYmplY3RpdmVzLlxuUmV0dXJuIG9ubHkgdmFsaWQgSlNPTi5cbmBcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLnByb21wdChwcm9tcHQsIHtcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICBtYXhUb2tlbnM6IDIwMDAsXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZSlcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElmIEpTT04gcGFyc2luZyBmYWlscywgcmV0dXJuIGEgc3RydWN0dXJlZCBmYWxsYmFja1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU3RydWN0dXJlZEZhbGxiYWNrKGNvbnRlbnQsIGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlRGV0YWlsZWRDb250ZW50KFxuICAgIHN0cnVjdHVyZTogYW55LFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBsZXNzb25UeXBlOiBzdHJpbmcsXG4gICAgc3R1ZGVudExldmVsOiBzdHJpbmcsXG4gICAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZyxcbiAgKSB7XG4gICAgLy8gVXNlIFdyaXRlciBBUEkgdG8gZXhwYW5kIGVhY2ggc2VjdGlvbiB3aXRoIG1vcmUgZGV0YWlsZWQgY29udGVudFxuICAgIGNvbnN0IHNlY3Rpb25zID0geyAuLi5zdHJ1Y3R1cmUgfVxuXG4gICAgLy8gRW5oYW5jZSB2b2NhYnVsYXJ5IHNlY3Rpb25cbiAgICBpZiAoc2VjdGlvbnMudm9jYWJ1bGFyeSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy52b2NhYnVsYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZvY2FiID0gc2VjdGlvbnMudm9jYWJ1bGFyeVtpXVxuICAgICAgICBjb25zdCBlbmhhbmNlZEV4YW1wbGUgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkud3JpdGUoXG4gICAgICAgICAgYENyZWF0ZSBhIG5hdHVyYWwgZXhhbXBsZSBzZW50ZW5jZSB1c2luZyB0aGUgd29yZCBcIiR7dm9jYWIud29yZH1cIiBmb3IgJHtzdHVkZW50TGV2ZWx9IGxldmVsIHN0dWRlbnRzYCxcbiAgICAgICAgICB7IHRvbmU6IFwiY2FzdWFsXCIsIGxlbmd0aDogXCJzaG9ydFwiIH0sXG4gICAgICAgIClcbiAgICAgICAgc2VjdGlvbnMudm9jYWJ1bGFyeVtpXS5leGFtcGxlID0gZW5oYW5jZWRFeGFtcGxlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW5oYW5jZSBkaXNjdXNzaW9uIHF1ZXN0aW9uc1xuICAgIGlmIChzZWN0aW9ucy5kaXNjdXNzaW9uKSB7XG4gICAgICBjb25zdCBlbmhhbmNlZERpc2N1c3Npb24gPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkud3JpdGUoXG4gICAgICAgIGBFeHBhbmQgdGhlc2UgZGlzY3Vzc2lvbiBxdWVzdGlvbnMgZm9yICR7bGVzc29uVHlwZX0gbGVzc29uOiAke3NlY3Rpb25zLmRpc2N1c3Npb24uam9pbihcIiwgXCIpfS4gTWFrZSB0aGVtIG1vcmUgZW5nYWdpbmcgZm9yICR7c3R1ZGVudExldmVsfSBsZXZlbCBzdHVkZW50cy5gLFxuICAgICAgICB7IHRvbmU6IFwiY2FzdWFsXCIsIGxlbmd0aDogXCJtZWRpdW1cIiwgZm9ybWF0OiBcImJ1bGxldC1wb2ludHNcIiB9LFxuICAgICAgKVxuICAgICAgc2VjdGlvbnMuZGlzY3Vzc2lvbiA9IHRoaXMucGFyc2VMaXN0RnJvbVRleHQoZW5oYW5jZWREaXNjdXNzaW9uKVxuICAgIH1cblxuICAgIHJldHVybiBzZWN0aW9uc1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9vZnJlYWRMZXNzb24obGVzc29uOiBhbnkpIHtcbiAgICAvLyBQcm9vZnJlYWQga2V5IHRleHQgc2VjdGlvbnNcbiAgICBjb25zdCBzZWN0aW9uc1RvUHJvb2ZyZWFkID0gW1wicmVhZGluZ1wiLCBcImdyYW1tYXIuZXhhbXBsZXNcIiwgXCJwcm9udW5jaWF0aW9uLnByYWN0aWNlXCJdXG5cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb25QYXRoIG9mIHNlY3Rpb25zVG9Qcm9vZnJlYWQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXROZXN0ZWRWYWx1ZShsZXNzb24sIHNlY3Rpb25QYXRoKVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwcm9vZnJlYWQgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkucHJvb2ZyZWFkKHZhbHVlLCB7XG4gICAgICAgICAgY2hlY2tHcmFtbWFyOiB0cnVlLFxuICAgICAgICAgIGNoZWNrU3BlbGxpbmc6IHRydWUsXG4gICAgICAgICAgY2hlY2tTdHlsZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zZXROZXN0ZWRWYWx1ZShsZXNzb24sIHNlY3Rpb25QYXRoLCBwcm9vZnJlYWQuY29ycmVjdGVkX3RleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxlc3NvblxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUZhbGxiYWNrTGVzc29uKHBhcmFtczogTGVzc29uR2VuZXJhdGlvblBhcmFtcyk6IEdlbmVyYXRlZExlc3NvbiB7XG4gICAgLy8gVGVtcGxhdGUtYmFzZWQgZmFsbGJhY2sgd2hlbiBBSSBBUElzIGZhaWxcbiAgICBjb25zdCB7IHNvdXJjZVRleHQsIGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCwgdGFyZ2V0TGFuZ3VhZ2UgfSA9IHBhcmFtc1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxlc3NvblR5cGUsXG4gICAgICBzdHVkZW50TGV2ZWwsXG4gICAgICB0YXJnZXRMYW5ndWFnZSxcbiAgICAgIHNlY3Rpb25zOiB7XG4gICAgICAgIHdhcm11cDogdGhpcy5nZXRUZW1wbGF0ZVdhcm11cChsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgICB2b2NhYnVsYXJ5OiB0aGlzLmV4dHJhY3RWb2NhYnVsYXJ5KHNvdXJjZVRleHQsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIHJlYWRpbmc6IHRoaXMuc2ltcGxpZnlUZXh0KHNvdXJjZVRleHQsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGNvbXByZWhlbnNpb246IHRoaXMuZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGRpc2N1c3Npb246IHRoaXMuZ2V0VGVtcGxhdGVEaXNjdXNzaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGdyYW1tYXI6IHRoaXMuZ2V0VGVtcGxhdGVHcmFtbWFyKHN0dWRlbnRMZXZlbCksXG4gICAgICAgIHByb251bmNpYXRpb246IHRoaXMuZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uKHNvdXJjZVRleHQpLFxuICAgICAgICB3cmFwdXA6IHRoaXMuZ2V0VGVtcGxhdGVXcmFwdXAobGVzc29uVHlwZSksXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgZ2V0U3VtbWFyeUxlbmd0aChsZXZlbDogc3RyaW5nKTogXCJzaG9ydFwiIHwgXCJtZWRpdW1cIiB8IFwibG9uZ1wiIHtcbiAgICBjb25zdCBsZW5ndGhNYXAgPSB7XG4gICAgICBBMTogXCJzaG9ydFwiIGFzIGNvbnN0LFxuICAgICAgQTI6IFwic2hvcnRcIiBhcyBjb25zdCxcbiAgICAgIEIxOiBcIm1lZGl1bVwiIGFzIGNvbnN0LFxuICAgICAgQjI6IFwibWVkaXVtXCIgYXMgY29uc3QsXG4gICAgICBDMTogXCJsb25nXCIgYXMgY29uc3QsXG4gICAgfVxuICAgIHJldHVybiBsZW5ndGhNYXBbbGV2ZWxdIHx8IFwibWVkaXVtXCJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TGFuZ3VhZ2VDb2RlKGxhbmd1YWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxhbmd1YWdlTWFwID0ge1xuICAgICAgc3BhbmlzaDogXCJlc1wiLFxuICAgICAgZnJlbmNoOiBcImZyXCIsXG4gICAgICBnZXJtYW46IFwiZGVcIixcbiAgICAgIGl0YWxpYW46IFwiaXRcIixcbiAgICAgIHBvcnR1Z3Vlc2U6IFwicHRcIixcbiAgICAgIGphcGFuZXNlOiBcImphXCIsXG4gICAgICBrb3JlYW46IFwia29cIixcbiAgICAgIGNoaW5lc2U6IFwiemhcIixcbiAgICB9XG4gICAgcmV0dXJuIGxhbmd1YWdlTWFwW2xhbmd1YWdlXSB8fCBcImVuXCJcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VMaXN0RnJvbVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpKVxuICAgICAgLm1hcCgobGluZSkgPT4gbGluZS5yZXBsYWNlKC9eWy3igKIqXVxccyovLCBcIlwiKS50cmltKCkpXG4gICAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLmxlbmd0aCA+IDApXG4gICAgICAuc2xpY2UoMCwgNCkgLy8gTGltaXQgdG8gNCBpdGVtc1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gcGF0aC5zcGxpdChcIi5cIikucmVkdWNlKChjdXJyZW50LCBrZXkpID0+IGN1cnJlbnQ/LltrZXldLCBvYmopXG4gIH1cblxuICBwcml2YXRlIHNldE5lc3RlZFZhbHVlKG9iajogYW55LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi5cIilcbiAgICBjb25zdCBsYXN0S2V5ID0ga2V5cy5wb3AoKSFcbiAgICBjb25zdCB0YXJnZXQgPSBrZXlzLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50W2tleV0sIG9iailcbiAgICB0YXJnZXRbbGFzdEtleV0gPSB2YWx1ZVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTdHJ1Y3R1cmVkRmFsbGJhY2soY29udGVudDogc3RyaW5nLCBsZXNzb25UeXBlOiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdhcm11cDogdGhpcy5nZXRUZW1wbGF0ZVdhcm11cChsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgdm9jYWJ1bGFyeTogdGhpcy5leHRyYWN0Vm9jYWJ1bGFyeShjb250ZW50LCBzdHVkZW50TGV2ZWwpLFxuICAgICAgcmVhZGluZzogY29udGVudC5zdWJzdHJpbmcoMCwgNTAwKSxcbiAgICAgIGNvbXByZWhlbnNpb246IHRoaXMuZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICBkaXNjdXNzaW9uOiB0aGlzLmdldFRlbXBsYXRlRGlzY3Vzc2lvbihsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgZ3JhbW1hcjogdGhpcy5nZXRUZW1wbGF0ZUdyYW1tYXIoc3R1ZGVudExldmVsKSxcbiAgICAgIHByb251bmNpYXRpb246IHRoaXMuZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uKGNvbnRlbnQpLFxuICAgICAgd3JhcHVwOiB0aGlzLmdldFRlbXBsYXRlV3JhcHVwKGxlc3NvblR5cGUpLFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVXYXJtdXAobGVzc29uVHlwZTogc3RyaW5nLCBzdHVkZW50TGV2ZWw6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSB7XG4gICAgICBkaXNjdXNzaW9uOiBbXG4gICAgICAgIFwiV2hhdCBkbyB5b3UgYWxyZWFkeSBrbm93IGFib3V0IHRoaXMgdG9waWM/XCIsXG4gICAgICAgIFwiSGF2ZSB5b3UgaGFkIHNpbWlsYXIgZXhwZXJpZW5jZXM/XCIsXG4gICAgICAgIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBsZWFybiBtb3JlIGFib3V0P1wiLFxuICAgICAgXSxcbiAgICAgIGdyYW1tYXI6IFtcbiAgICAgICAgXCJXaGF0IGdyYW1tYXIgcGF0dGVybnMgZG8geW91IG5vdGljZT9cIixcbiAgICAgICAgXCJXaGljaCBzZW50ZW5jZXMgc2VlbSBtb3N0IGNvbXBsZXg/XCIsXG4gICAgICAgIFwiV2hhdCBncmFtbWFyIHJ1bGVzIGRvIHlvdSByZW1lbWJlcj9cIixcbiAgICAgIF0sXG4gICAgICB0cmF2ZWw6IFtcbiAgICAgICAgXCJXaGVyZSB3b3VsZCB5b3UgbGlrZSB0byB0cmF2ZWwgbmV4dD9cIixcbiAgICAgICAgXCJXaGF0IHRyYXZlbCBleHBlcmllbmNlcyBoYXZlIHlvdSBoYWQ/XCIsXG4gICAgICAgIFwiV2hhdCB0cmF2ZWwgdm9jYWJ1bGFyeSBkbyB5b3Uga25vdz9cIixcbiAgICAgIF0sXG4gICAgICBidXNpbmVzczogW1xuICAgICAgICBcIldoYXQgYnVzaW5lc3Mgc2l0dWF0aW9ucyBhcmUgeW91IGZhbWlsaWFyIHdpdGg/XCIsXG4gICAgICAgIFwiSG93IGRvIHlvdSBjb21tdW5pY2F0ZSBwcm9mZXNzaW9uYWxseT9cIixcbiAgICAgICAgXCJXaGF0IGJ1c2luZXNzIHRlcm1zIGFyZSBjaGFsbGVuZ2luZz9cIixcbiAgICAgIF0sXG4gICAgICBwcm9udW5jaWF0aW9uOiBbXG4gICAgICAgIFwiV2hpY2ggc291bmRzIGFyZSBkaWZmaWN1bHQgdG8gcHJvbm91bmNlP1wiLFxuICAgICAgICBcIkhvdyBkbyB5b3UgcHJhY3RpY2UgcHJvbnVuY2lhdGlvbj9cIixcbiAgICAgICAgXCJXaGF0IHByb251bmNpYXRpb24gZ29hbHMgZG8geW91IGhhdmU/XCIsXG4gICAgICBdLFxuICAgIH1cbiAgICByZXR1cm4gdGVtcGxhdGVzW2xlc3NvblR5cGVdIHx8IHRlbXBsYXRlcy5kaXNjdXNzaW9uXG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RWb2NhYnVsYXJ5KHRleHQ6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcpIHtcbiAgICAvLyBTaW1wbGUgdm9jYWJ1bGFyeSBleHRyYWN0aW9uIGJhc2VkIG9uIHdvcmQgZnJlcXVlbmN5IGFuZCBjb21wbGV4aXR5XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRvTG93ZXJDYXNlKCkubWF0Y2goL1xcYlthLXpdezQsfVxcYi9nKSB8fCBbXVxuICAgIGNvbnN0IHVuaXF1ZVdvcmRzID0gWy4uLm5ldyBTZXQod29yZHMpXVxuICAgIGNvbnN0IHNlbGVjdGVkV29yZHMgPSB1bmlxdWVXb3Jkcy5zbGljZSgwLCA2KVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkV29yZHMubWFwKCh3b3JkKSA9PiAoe1xuICAgICAgd29yZDogd29yZCxcbiAgICAgIG1lYW5pbmc6IGBEZWZpbml0aW9uIG9mICR7d29yZH1gLFxuICAgICAgZXhhbXBsZTogYEV4YW1wbGUgc2VudGVuY2Ugd2l0aCAke3dvcmR9LmAsXG4gICAgfSkpXG4gIH1cblxuICBwcml2YXRlIHNpbXBsaWZ5VGV4dCh0ZXh0OiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBCYXNpYyB0ZXh0IHNpbXBsaWZpY2F0aW9uIGJhc2VkIG9uIGxldmVsXG4gICAgY29uc3QgbWF4TGVuZ3RoID0ge1xuICAgICAgQTE6IDIwMCxcbiAgICAgIEEyOiAzMDAsXG4gICAgICBCMTogNDAwLFxuICAgICAgQjI6IDUwMCxcbiAgICAgIEMxOiA2MDAsXG4gICAgfVxuXG4gICAgY29uc3QgbGltaXQgPSBtYXhMZW5ndGhbc3R1ZGVudExldmVsXSB8fCA0MDBcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbGltaXQpICsgKHRleHQubGVuZ3RoID4gbGltaXQgPyBcIi4uLlwiIDogXCJcIilcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGU6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiV2hhdCBpcyB0aGUgbWFpbiBpZGVhIG9mIHRoaXMgdGV4dD9cIixcbiAgICAgIFwiV2hhdCBzdXBwb3J0aW5nIGRldGFpbHMgY2FuIHlvdSBpZGVudGlmeT9cIixcbiAgICAgIFwiSG93IGRvZXMgdGhpcyByZWxhdGUgdG8geW91ciBleHBlcmllbmNlP1wiLFxuICAgICAgXCJXaGF0IGNvbmNsdXNpb25zIGNhbiB5b3UgZHJhdz9cIixcbiAgICBdXG4gIH1cblxuICBwcml2YXRlIGdldFRlbXBsYXRlRGlzY3Vzc2lvbihsZXNzb25UeXBlOiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHtcbiAgICAgIGRpc2N1c3Npb246IFtcbiAgICAgICAgXCJXaGF0IGlzIHlvdXIgb3BpbmlvbiBvbiB0aGlzIHRvcGljP1wiLFxuICAgICAgICBcIkhvdyB3b3VsZCB5b3UgaGFuZGxlIHRoaXMgc2l0dWF0aW9uP1wiLFxuICAgICAgICBcIldoYXQgYWx0ZXJuYXRpdmUgYXBwcm9hY2hlcyBleGlzdD9cIixcbiAgICAgIF0sXG4gICAgICBidXNpbmVzczogW1xuICAgICAgICBcIkhvdyB3b3VsZCB5b3UgYXBwbHkgdGhpcyBwcm9mZXNzaW9uYWxseT9cIixcbiAgICAgICAgXCJXaGF0IGJ1c2luZXNzIGNoYWxsZW5nZXMgZG9lcyB0aGlzIGFkZHJlc3M/XCIsXG4gICAgICAgIFwiSG93IHdvdWxkIHlvdSBwcmVzZW50IHRoaXMgdG8gY29sbGVhZ3Vlcz9cIixcbiAgICAgIF0sXG4gICAgICB0cmF2ZWw6IFtcbiAgICAgICAgXCJIb3cgd291bGQgdGhpcyBoZWxwIHdoaWxlIHRyYXZlbGluZz9cIixcbiAgICAgICAgXCJXaGF0IHByZXBhcmF0aW9ucyB3b3VsZCB5b3UgbWFrZT9cIixcbiAgICAgICAgXCJIb3cgd291bGQgeW91IHNoYXJlIHRoaXMgZXhwZXJpZW5jZT9cIixcbiAgICAgIF0sXG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZXNbbGVzc29uVHlwZV0gfHwgdGVtcGxhdGVzLmRpc2N1c3Npb25cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVHcmFtbWFyKHN0dWRlbnRMZXZlbDogc3RyaW5nKSB7XG4gICAgY29uc3QgZ3JhbW1hckZvY2kgPSB7XG4gICAgICBBMTogXCJQcmVzZW50IFNpbXBsZSBUZW5zZVwiLFxuICAgICAgQTI6IFwiUGFzdCBTaW1wbGUgVGVuc2VcIixcbiAgICAgIEIxOiBcIlByZXNlbnQgUGVyZmVjdCBUZW5zZVwiLFxuICAgICAgQjI6IFwiQ29uZGl0aW9uYWwgU2VudGVuY2VzXCIsXG4gICAgICBDMTogXCJBZHZhbmNlZCBHcmFtbWFyIFN0cnVjdHVyZXNcIixcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXM6IGdyYW1tYXJGb2NpW3N0dWRlbnRMZXZlbF0gfHwgXCJQcmVzZW50IFBlcmZlY3QgVGVuc2VcIixcbiAgICAgIGV4YW1wbGVzOiBbXCJJIGhhdmUgbGVhcm5lZCBtYW55IG5ldyB0aGluZ3MuXCIsIFwiU2hlIGhhcyBpbXByb3ZlZCBoZXIgc2tpbGxzLlwiLCBcIldlIGhhdmUgZGlzY3Vzc2VkIHRoaXMgdG9waWMuXCJdLFxuICAgICAgZXhlcmNpc2U6IFtcbiAgICAgICAgXCJJIF9fX19fIChsZWFybikgYSBsb3QgdG9kYXkuXCIsXG4gICAgICAgIFwiVGhleSBfX19fXyAoY29tcGxldGUpIHRoZSBwcm9qZWN0LlwiLFxuICAgICAgICBcIlNoZSBfX19fXyAoaW1wcm92ZSkgc2lnbmlmaWNhbnRseS5cIixcbiAgICAgIF0sXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUZW1wbGF0ZVByb251bmNpYXRpb24odGV4dDogc3RyaW5nKSB7XG4gICAgLy8gRXh0cmFjdCBhIGNoYWxsZW5naW5nIHdvcmQgZnJvbSB0aGUgdGV4dFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW2Etel17Nix9XFxiL2dpKSB8fCBbXCJjb21tdW5pY2F0aW9uXCJdXG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gd29yZHNbMF0gfHwgXCJjb21tdW5pY2F0aW9uXCJcblxuICAgIHJldHVybiB7XG4gICAgICB3b3JkOiBzZWxlY3RlZFdvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgIGlwYTogXCIva8mZy4xtanXLkG7JqsuIa2XJqsqDyZluL1wiLFxuICAgICAgcHJhY3RpY2U6IGBQcmFjdGljZSBzYXlpbmc6IFwiJHtzZWxlY3RlZFdvcmR9XCIgaW4gYSBzZW50ZW5jZS5gLFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVXcmFwdXAobGVzc29uVHlwZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXG4gICAgICBcIldoYXQgbmV3IHZvY2FidWxhcnkgZGlkIHlvdSBsZWFybj9cIixcbiAgICAgIFwiV2hpY2ggY29uY2VwdHMgbmVlZCBtb3JlIHByYWN0aWNlP1wiLFxuICAgICAgXCJIb3cgd2lsbCB5b3UgdXNlIHRoaXMga25vd2xlZGdlP1wiLFxuICAgICAgXCJXaGF0IHF1ZXN0aW9ucyBkbyB5b3Ugc3RpbGwgaGF2ZT9cIixcbiAgICBdXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxlc3NvbkFJU2VydmVyR2VuZXJhdG9yID0gbmV3IExlc3NvbkFJU2VydmVyR2VuZXJhdG9yKClcbiJdLCJuYW1lcyI6WyJjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJMZXNzb25BSVNlcnZlckdlbmVyYXRvciIsImdldEdvb2dsZUFJIiwiZ29vZ2xlQUkiLCJnZW5lcmF0ZUxlc3NvbiIsInBhcmFtcyIsInNvdXJjZVRleHQiLCJsZXNzb25UeXBlIiwic3R1ZGVudExldmVsIiwidGFyZ2V0TGFuZ3VhZ2UiLCJzb3VyY2VVcmwiLCJzdW1tYXJ5Iiwic3VtbWFyaXplIiwidHlwZSIsImxlbmd0aCIsImdldFN1bW1hcnlMZW5ndGgiLCJmb3JtYXQiLCJ0cmFuc2xhdGVkQ29udGVudCIsInRyYW5zbGF0ZSIsImdldExhbmd1YWdlQ29kZSIsImxlc3NvblN0cnVjdHVyZSIsImdlbmVyYXRlTGVzc29uU3RydWN0dXJlIiwiZGV0YWlsZWRMZXNzb24iLCJnZW5lcmF0ZURldGFpbGVkQ29udGVudCIsInBvbGlzaGVkTGVzc29uIiwicHJvb2ZyZWFkTGVzc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2VuZXJhdGVGYWxsYmFja0xlc3NvbiIsImNvbnRlbnQiLCJwcm9tcHQiLCJyZXNwb25zZSIsInRlbXBlcmF0dXJlIiwibWF4VG9rZW5zIiwiSlNPTiIsInBhcnNlIiwiY3JlYXRlU3RydWN0dXJlZEZhbGxiYWNrIiwic3RydWN0dXJlIiwic2VjdGlvbnMiLCJ2b2NhYnVsYXJ5IiwiaSIsInZvY2FiIiwiZW5oYW5jZWRFeGFtcGxlIiwid3JpdGUiLCJ3b3JkIiwidG9uZSIsImV4YW1wbGUiLCJkaXNjdXNzaW9uIiwiZW5oYW5jZWREaXNjdXNzaW9uIiwiam9pbiIsInBhcnNlTGlzdEZyb21UZXh0IiwibGVzc29uIiwic2VjdGlvbnNUb1Byb29mcmVhZCIsInNlY3Rpb25QYXRoIiwidmFsdWUiLCJnZXROZXN0ZWRWYWx1ZSIsInByb29mcmVhZCIsImNoZWNrR3JhbW1hciIsImNoZWNrU3BlbGxpbmciLCJjaGVja1N0eWxlIiwic2V0TmVzdGVkVmFsdWUiLCJjb3JyZWN0ZWRfdGV4dCIsIndhcm11cCIsImdldFRlbXBsYXRlV2FybXVwIiwiZXh0cmFjdFZvY2FidWxhcnkiLCJyZWFkaW5nIiwic2ltcGxpZnlUZXh0IiwiY29tcHJlaGVuc2lvbiIsImdldFRlbXBsYXRlQ29tcHJlaGVuc2lvbiIsImdldFRlbXBsYXRlRGlzY3Vzc2lvbiIsImdyYW1tYXIiLCJnZXRUZW1wbGF0ZUdyYW1tYXIiLCJwcm9udW5jaWF0aW9uIiwiZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uIiwid3JhcHVwIiwiZ2V0VGVtcGxhdGVXcmFwdXAiLCJsZXZlbCIsImxlbmd0aE1hcCIsIkExIiwiQTIiLCJCMSIsIkIyIiwiQzEiLCJsYW5ndWFnZSIsImxhbmd1YWdlTWFwIiwic3BhbmlzaCIsImZyZW5jaCIsImdlcm1hbiIsIml0YWxpYW4iLCJwb3J0dWd1ZXNlIiwiamFwYW5lc2UiLCJrb3JlYW4iLCJjaGluZXNlIiwidGV4dCIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsInRyaW0iLCJtYXAiLCJyZXBsYWNlIiwic2xpY2UiLCJvYmoiLCJwYXRoIiwicmVkdWNlIiwiY3VycmVudCIsImtleSIsImtleXMiLCJsYXN0S2V5IiwicG9wIiwidGFyZ2V0Iiwic3Vic3RyaW5nIiwidGVtcGxhdGVzIiwidHJhdmVsIiwiYnVzaW5lc3MiLCJ3b3JkcyIsInRvTG93ZXJDYXNlIiwibWF0Y2giLCJ1bmlxdWVXb3JkcyIsIlNldCIsInNlbGVjdGVkV29yZHMiLCJtZWFuaW5nIiwibWF4TGVuZ3RoIiwibGltaXQiLCJncmFtbWFyRm9jaSIsImZvY3VzIiwiZXhhbXBsZXMiLCJleGVyY2lzZSIsInNlbGVjdGVkV29yZCIsImlwYSIsInByYWN0aWNlIiwibGVzc29uQUlTZXJ2ZXJHZW5lcmF0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/lesson-ai-generator-server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createServerSupabaseClient: () => (/* binding */ createServerSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst createServerSupabaseClient = ()=>{\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://jbkpnirowdvlwlgheqho.supabase.co\" || 0, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impia3BuaXJvd2R2bHdsZ2hlcWhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5MTQ3NTEsImV4cCI6MjA3NDQ5MDc1MX0.FZhruXKDzIkZLhla5oerfs7yzjvTsGLlKTUer34N6N0\" || 0, {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            set (name, value, options) {\n                cookieStore.set({\n                    name,\n                    value,\n                    ...options\n                });\n            },\n            remove (name, options) {\n                cookieStore.set({\n                    name,\n                    value: \"\",\n                    ...options\n                });\n            }\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNaO0FBRS9CLE1BQU1FLDZCQUE2QjtJQUN4QyxNQUFNQyxjQUFjRixxREFBT0E7SUFFM0IsT0FBT0QsaUVBQWtCQSxDQUN2QkksMENBQW9DLElBQUksR0FDeENBLGtOQUF5QyxJQUFJLEdBQzdDO1FBQ0FILFNBQVM7WUFDUE8sS0FBSUMsSUFBWTtnQkFDZCxPQUFPTixZQUFZSyxHQUFHLENBQUNDLE9BQU9DO1lBQ2hDO1lBQ0FDLEtBQUlGLElBQVksRUFBRUMsS0FBYSxFQUFFRSxPQUFZO2dCQUMzQ1QsWUFBWVEsR0FBRyxDQUFDO29CQUFFRjtvQkFBTUM7b0JBQU8sR0FBR0UsT0FBTztnQkFBQztZQUM1QztZQUNBQyxRQUFPSixJQUFZLEVBQUVHLE9BQVk7Z0JBQy9CVCxZQUFZUSxHQUFHLENBQUM7b0JBQUVGO29CQUFNQyxPQUFPO29CQUFJLEdBQUdFLE9BQU87Z0JBQUM7WUFDaEQ7UUFDRjtJQUNGO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzPzA5NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zc3JcIlxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxuXG5leHBvcnQgY29uc3QgY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQgPSAoKSA9PiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXG5cbiAgcmV0dXJuIGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nLCBcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAncGxhY2Vob2xkZXIta2V5JywgXG4gICAge1xuICAgIGNvb2tpZXM6IHtcbiAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldChuYW1lKT8udmFsdWVcbiAgICAgIH0sXG4gICAgICBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWUsIC4uLm9wdGlvbnMgfSlcbiAgICAgIH0sXG4gICAgICByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWU6IFwiXCIsIC4uLm9wdGlvbnMgfSlcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQiLCJjb29raWVTdG9yZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();