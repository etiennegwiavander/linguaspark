"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-lesson/route";
exports.ids = ["app/api/generate-lesson/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_linguaspark_app_api_generate_lesson_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-lesson/route.ts */ \"(rsc)/./app/api/generate-lesson/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-lesson/route\",\n        pathname: \"/api/generate-lesson\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-lesson/route\"\n    },\n    resolvedPagePath: \"D:\\\\linguaspark\\\\app\\\\api\\\\generate-lesson\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_linguaspark_app_api_generate_lesson_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-lesson/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1sZXNzb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLWxlc3NvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmVyYXRlLWxlc3NvbiUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbGluZ3Vhc3BhcmslNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNsaW5ndWFzcGFyayZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSTtBQUNqRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvPzI3ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRDpcXFxcbGluZ3Vhc3BhcmtcXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1sZXNzb25cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlLWxlc3NvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZ2VuZXJhdGUtbGVzc29uL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcbGluZ3Vhc3BhcmtcXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1sZXNzb25cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-lesson/route.ts":
/*!******************************************!*\
  !*** ./app/api/generate-lesson/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_lesson_ai_generator_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/lesson-ai-generator-server */ \"(rsc)/./lib/lesson-ai-generator-server.ts\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n\n // Updated import to use server-side generator\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { sourceText, lessonType, studentLevel, targetLanguage, sourceUrl, contentMetadata, structuredContent, wordCount, readingTime } = body;\n        // Validate required fields\n        if (!sourceText || !lessonType || !studentLevel || !targetLanguage) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate user authentication\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_2__.createServerSupabaseClient)();\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\n        if (authError || !user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        // Generate lesson using enhanced AI pipeline with contextual information\n        const lesson = await _lib_lesson_ai_generator_server__WEBPACK_IMPORTED_MODULE_1__.lessonAIServerGenerator.generateLesson({\n            sourceText,\n            lessonType,\n            studentLevel,\n            targetLanguage,\n            sourceUrl,\n            contentMetadata,\n            structuredContent,\n            wordCount,\n            readingTime\n        });\n        // Save lesson to database\n        const { data: savedLesson, error: saveError } = await supabase.from(\"lessons\").insert({\n            tutor_id: user.id,\n            title: `${lessonType} Lesson - ${new Date().toLocaleDateString()}`,\n            lesson_type: lessonType,\n            student_level: studentLevel,\n            target_language: targetLanguage,\n            source_url: sourceUrl,\n            source_text: sourceText,\n            lesson_data: lesson\n        }).select().single();\n        if (saveError) {\n            console.error(\"Error saving lesson:\", saveError);\n            // Return lesson even if save fails\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                lesson\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            lesson: {\n                ...lesson,\n                id: savedLesson.id\n            }\n        });\n    } catch (error) {\n        console.error(\"Error generating lesson:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate lesson\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dlbmVyYXRlLWxlc3Nvbi9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTREO0FBQ2MsQ0FBQyw4Q0FBOEM7QUFDdkQ7QUFFM0QsZUFBZUcsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQ0pDLFVBQVUsRUFDVkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsU0FBUyxFQUNUQyxlQUFlLEVBQ2ZDLGlCQUFpQixFQUNqQkMsU0FBUyxFQUNUQyxXQUFXLEVBQ1osR0FBR1Y7UUFFSiwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDRSxjQUFjLENBQUNDLGNBQWMsQ0FBQ0MsZ0JBQWdCLENBQUNDLGdCQUFnQjtZQUNsRSxPQUFPVixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFVSxPQUFPO1lBQTBCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMvRTtRQUVBLCtCQUErQjtRQUMvQixNQUFNQyxXQUFXaEIsZ0ZBQTBCQTtRQUMzQyxNQUFNLEVBQ0ppQixNQUFNLEVBQUVDLElBQUksRUFBRSxFQUNkSixPQUFPSyxTQUFTLEVBQ2pCLEdBQUcsTUFBTUgsU0FBU0ksSUFBSSxDQUFDQyxPQUFPO1FBRS9CLElBQUlGLGFBQWEsQ0FBQ0QsTUFBTTtZQUN0QixPQUFPcEIscURBQVlBLENBQUNNLElBQUksQ0FBQztnQkFBRVUsT0FBTztZQUEwQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDL0U7UUFFQSx5RUFBeUU7UUFDekUsTUFBTU8sU0FBUyxNQUFNdkIsb0ZBQXVCQSxDQUFDd0IsY0FBYyxDQUFDO1lBQzFEbEI7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNLEVBQUVJLE1BQU1PLFdBQVcsRUFBRVYsT0FBT1csU0FBUyxFQUFFLEdBQUcsTUFBTVQsU0FDbkRVLElBQUksQ0FBQyxXQUNMQyxNQUFNLENBQUM7WUFDTkMsVUFBVVYsS0FBS1csRUFBRTtZQUNqQkMsT0FBTyxDQUFDLEVBQUV4QixXQUFXLFVBQVUsRUFBRSxJQUFJeUIsT0FBT0Msa0JBQWtCLEdBQUcsQ0FBQztZQUNsRUMsYUFBYTNCO1lBQ2I0QixlQUFlM0I7WUFDZjRCLGlCQUFpQjNCO1lBQ2pCNEIsWUFBWTNCO1lBQ1o0QixhQUFhaEM7WUFDYmlDLGFBQWFoQjtRQUNmLEdBQ0NpQixNQUFNLEdBQ05DLE1BQU07UUFFVCxJQUFJZixXQUFXO1lBQ2JnQixRQUFRM0IsS0FBSyxDQUFDLHdCQUF3Qlc7WUFDdEMsbUNBQW1DO1lBQ25DLE9BQU8zQixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFa0I7WUFBTztRQUNwQztRQUVBLE9BQU94QixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQ3ZCa0IsUUFBUTtnQkFDTixHQUFHQSxNQUFNO2dCQUNUTyxJQUFJTCxZQUFZSyxFQUFFO1lBQ3BCO1FBQ0Y7SUFDRixFQUFFLE9BQU9mLE9BQU87UUFDZDJCLFFBQVEzQixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPaEIscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUFFVSxPQUFPO1FBQTRCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ2pGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vYXBwL2FwaS9nZW5lcmF0ZS1sZXNzb24vcm91dGUudHM/NWFiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHsgbGVzc29uQUlTZXJ2ZXJHZW5lcmF0b3IgfSBmcm9tIFwiQC9saWIvbGVzc29uLWFpLWdlbmVyYXRvci1zZXJ2ZXJcIiAvLyBVcGRhdGVkIGltcG9ydCB0byB1c2Ugc2VydmVyLXNpZGUgZ2VuZXJhdG9yXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZS1zZXJ2ZXJcIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGNvbnN0IHsgXG4gICAgICBzb3VyY2VUZXh0LCBcbiAgICAgIGxlc3NvblR5cGUsIFxuICAgICAgc3R1ZGVudExldmVsLCBcbiAgICAgIHRhcmdldExhbmd1YWdlLCBcbiAgICAgIHNvdXJjZVVybCxcbiAgICAgIGNvbnRlbnRNZXRhZGF0YSxcbiAgICAgIHN0cnVjdHVyZWRDb250ZW50LFxuICAgICAgd29yZENvdW50LFxuICAgICAgcmVhZGluZ1RpbWVcbiAgICB9ID0gYm9keVxuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFzb3VyY2VUZXh0IHx8ICFsZXNzb25UeXBlIHx8ICFzdHVkZW50TGV2ZWwgfHwgIXRhcmdldExhbmd1YWdlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkc1wiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB1c2VyIGF1dGhlbnRpY2F0aW9uXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCgpXG4gICAgY29uc3Qge1xuICAgICAgZGF0YTogeyB1c2VyIH0sXG4gICAgICBlcnJvcjogYXV0aEVycm9yLFxuICAgIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuXG4gICAgaWYgKGF1dGhFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgbGVzc29uIHVzaW5nIGVuaGFuY2VkIEFJIHBpcGVsaW5lIHdpdGggY29udGV4dHVhbCBpbmZvcm1hdGlvblxuICAgIGNvbnN0IGxlc3NvbiA9IGF3YWl0IGxlc3NvbkFJU2VydmVyR2VuZXJhdG9yLmdlbmVyYXRlTGVzc29uKHtcbiAgICAgIHNvdXJjZVRleHQsXG4gICAgICBsZXNzb25UeXBlLFxuICAgICAgc3R1ZGVudExldmVsLFxuICAgICAgdGFyZ2V0TGFuZ3VhZ2UsXG4gICAgICBzb3VyY2VVcmwsXG4gICAgICBjb250ZW50TWV0YWRhdGEsXG4gICAgICBzdHJ1Y3R1cmVkQ29udGVudCxcbiAgICAgIHdvcmRDb3VudCxcbiAgICAgIHJlYWRpbmdUaW1lLFxuICAgIH0pXG5cbiAgICAvLyBTYXZlIGxlc3NvbiB0byBkYXRhYmFzZVxuICAgIGNvbnN0IHsgZGF0YTogc2F2ZWRMZXNzb24sIGVycm9yOiBzYXZlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImxlc3NvbnNcIilcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB0dXRvcl9pZDogdXNlci5pZCxcbiAgICAgICAgdGl0bGU6IGAke2xlc3NvblR5cGV9IExlc3NvbiAtICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1gLFxuICAgICAgICBsZXNzb25fdHlwZTogbGVzc29uVHlwZSxcbiAgICAgICAgc3R1ZGVudF9sZXZlbDogc3R1ZGVudExldmVsLFxuICAgICAgICB0YXJnZXRfbGFuZ3VhZ2U6IHRhcmdldExhbmd1YWdlLFxuICAgICAgICBzb3VyY2VfdXJsOiBzb3VyY2VVcmwsXG4gICAgICAgIHNvdXJjZV90ZXh0OiBzb3VyY2VUZXh0LFxuICAgICAgICBsZXNzb25fZGF0YTogbGVzc29uLFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoc2F2ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGxlc3NvbjpcIiwgc2F2ZUVycm9yKVxuICAgICAgLy8gUmV0dXJuIGxlc3NvbiBldmVuIGlmIHNhdmUgZmFpbHNcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGxlc3NvbiB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBsZXNzb246IHtcbiAgICAgICAgLi4ubGVzc29uLFxuICAgICAgICBpZDogc2F2ZWRMZXNzb24uaWQsXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgbGVzc29uOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgbGVzc29uXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibGVzc29uQUlTZXJ2ZXJHZW5lcmF0b3IiLCJjcmVhdGVTZXJ2ZXJTdXBhYmFzZUNsaWVudCIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJzb3VyY2VUZXh0IiwibGVzc29uVHlwZSIsInN0dWRlbnRMZXZlbCIsInRhcmdldExhbmd1YWdlIiwic291cmNlVXJsIiwiY29udGVudE1ldGFkYXRhIiwic3RydWN0dXJlZENvbnRlbnQiLCJ3b3JkQ291bnQiLCJyZWFkaW5nVGltZSIsImVycm9yIiwic3RhdHVzIiwic3VwYWJhc2UiLCJkYXRhIiwidXNlciIsImF1dGhFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwibGVzc29uIiwiZ2VuZXJhdGVMZXNzb24iLCJzYXZlZExlc3NvbiIsInNhdmVFcnJvciIsImZyb20iLCJpbnNlcnQiLCJ0dXRvcl9pZCIsImlkIiwidGl0bGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibGVzc29uX3R5cGUiLCJzdHVkZW50X2xldmVsIiwidGFyZ2V0X2xhbmd1YWdlIiwic291cmNlX3VybCIsInNvdXJjZV90ZXh0IiwibGVzc29uX2RhdGEiLCJzZWxlY3QiLCJzaW5nbGUiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-lesson/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/google-ai-server.ts":
/*!*********************************!*\
  !*** ./lib/google-ai-server.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGoogleAIServerService: () => (/* binding */ createGoogleAIServerService)\n/* harmony export */ });\n// Server-side Google AI APIs service layer\nclass GoogleAIServerService {\n    constructor(config){\n        this.config = config;\n    }\n    async makeRequest(endpoint, data) {\n        const response = await fetch(`${this.config.baseUrl}/${endpoint}`, {\n            method: \"POST\",\n            headers: {\n                Authorization: `Bearer ${this.config.apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            throw new Error(`Google AI API error: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    async summarize(text, options = {}) {\n        const data = {\n            input: text,\n            type: options.type || \"key-points\",\n            length: options.length || \"medium\",\n            format: options.format || \"plain-text\"\n        };\n        const result = await this.makeRequest(\"summarizer/v1/summarize\", data);\n        return result.summary;\n    }\n    async translate(text, options) {\n        const data = {\n            input: text,\n            source_language: options.sourceLanguage || \"auto\",\n            target_language: options.targetLanguage\n        };\n        const result = await this.makeRequest(\"translator/v1/translate\", data);\n        return result.translation;\n    }\n    async prompt(prompt, options = {}) {\n        const data = {\n            prompt,\n            temperature: options.temperature || 0.7,\n            max_tokens: options.maxTokens || 1000,\n            top_p: options.topP || 0.9\n        };\n        const result = await this.makeRequest(\"prompt/v1/generate\", data);\n        return result.response;\n    }\n    async write(prompt, options = {}) {\n        const data = {\n            prompt,\n            tone: options.tone || \"casual\",\n            length: options.length || \"medium\",\n            format: options.format || \"paragraph\"\n        };\n        const result = await this.makeRequest(\"writer/v1/write\", data);\n        return result.content;\n    }\n    async rewrite(text, options = {}) {\n        const data = {\n            input: text,\n            tone: options.tone || \"casual\",\n            length: options.length || \"same\",\n            audience: options.audience || \"general\"\n        };\n        const result = await this.makeRequest(\"rewriter/v1/rewrite\", data);\n        return result.rewritten_text;\n    }\n    async proofread(text, options = {}) {\n        const data = {\n            input: text,\n            check_grammar: options.checkGrammar !== false,\n            check_spelling: options.checkSpelling !== false,\n            check_style: options.checkStyle !== false,\n            suggest_improvements: options.suggestImprovements !== false\n        };\n        const result = await this.makeRequest(\"proofreader/v1/proofread\", data);\n        return {\n            corrected_text: result.corrected_text,\n            suggestions: result.suggestions,\n            errors: result.errors\n        };\n    }\n}\n// Server-side only initialization\nconst createGoogleAIServerService = ()=>{\n    const apiKey = \"AIzaSyAkDCpwWTPKYftoc1Fdm77P6B00Lj89Lio\" // Use NEXT_PUBLIC_ for client-side access\n    ;\n    const baseUrl = \"https://generativelanguage.googleapis.com\" || 0;\n    if (!apiKey) {\n        throw new Error(\"Google AI API key is required\");\n    }\n    return new GoogleAIServerService({\n        apiKey,\n        baseUrl\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVMUIsSUFBWSxFQUFFQyxVQUE4QixDQUFDLENBQUMsRUFBRTtRQUM5RCxNQUFNakIsT0FBTztZQUNYa0IsT0FBT0Y7WUFDUDJCLGVBQWUxQixRQUFRMkIsWUFBWSxLQUFLO1lBQ3hDQyxnQkFBZ0I1QixRQUFRNkIsYUFBYSxLQUFLO1lBQzFDQyxhQUFhOUIsUUFBUStCLFVBQVUsS0FBSztZQUNwQ0Msc0JBQXNCaEMsUUFBUWlDLG1CQUFtQixLQUFLO1FBQ3hEO1FBRUEsTUFBTTVCLFNBQVMsTUFBTSxJQUFJLENBQUN4QixXQUFXLENBQUMsNEJBQTRCRTtRQUNsRSxPQUFPO1lBQ0xtRCxnQkFBZ0I3QixPQUFPNkIsY0FBYztZQUNyQ0MsYUFBYTlCLE9BQU84QixXQUFXO1lBQy9CQyxRQUFRL0IsT0FBTytCLE1BQU07UUFDdkI7SUFDRjtBQUNGO0FBRUEsa0NBQWtDO0FBQzNCLE1BQU1DLDhCQUE4QjtJQUN6QyxNQUFNL0MsU0FBU2dELHlDQUF5QyxDQUFDLDBDQUEwQzs7SUFDbkcsTUFBTXBELFVBQVVvRCwyQ0FBMEMsSUFBSSxDQUEyQztJQUV6RyxJQUFJLENBQUNoRCxRQUFRO1FBQ1gsTUFBTSxJQUFJSyxNQUFNO0lBQ2xCO0lBRUEsT0FBTyxJQUFJakIsc0JBQXNCO1FBQUVZO1FBQVFKO0lBQVE7QUFDckQsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvZ29vZ2xlLWFpLXNlcnZlci50cz81MmQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNlcnZlci1zaWRlIEdvb2dsZSBBSSBBUElzIHNlcnZpY2UgbGF5ZXJcbmludGVyZmFjZSBHb29nbGVBSUNvbmZpZyB7XG4gIGFwaUtleTogc3RyaW5nXG4gIGJhc2VVcmw6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3VtbWFyaXplck9wdGlvbnMge1xuICB0eXBlPzogXCJrZXktcG9pbnRzXCIgfCBcInRsLWRyXCIgfCBcInRlYXNlclwiIHwgXCJoZWFkbGluZVwiXG4gIGxlbmd0aD86IFwic2hvcnRcIiB8IFwibWVkaXVtXCIgfCBcImxvbmdcIlxuICBmb3JtYXQ/OiBcIm1hcmtkb3duXCIgfCBcInBsYWluLXRleHRcIlxufVxuXG5pbnRlcmZhY2UgVHJhbnNsYXRvck9wdGlvbnMge1xuICBzb3VyY2VMYW5ndWFnZT86IHN0cmluZ1xuICB0YXJnZXRMYW5ndWFnZTogc3RyaW5nXG59XG5cbmludGVyZmFjZSBQcm9tcHRPcHRpb25zIHtcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXJcbiAgbWF4VG9rZW5zPzogbnVtYmVyXG4gIHRvcFA/OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFdyaXRlck9wdGlvbnMge1xuICB0b25lPzogXCJmb3JtYWxcIiB8IFwiY2FzdWFsXCIgfCBcImFjYWRlbWljXCIgfCBcImNyZWF0aXZlXCJcbiAgbGVuZ3RoPzogXCJzaG9ydFwiIHwgXCJtZWRpdW1cIiB8IFwibG9uZ1wiXG4gIGZvcm1hdD86IFwicGFyYWdyYXBoXCIgfCBcImJ1bGxldC1wb2ludHNcIiB8IFwibnVtYmVyZWQtbGlzdFwiXG59XG5cbmludGVyZmFjZSBSZXdyaXRlck9wdGlvbnMge1xuICB0b25lPzogXCJmb3JtYWxcIiB8IFwiY2FzdWFsXCIgfCBcImFjYWRlbWljXCIgfCBcImNyZWF0aXZlXCJcbiAgbGVuZ3RoPzogXCJzaG9ydGVyXCIgfCBcImxvbmdlclwiIHwgXCJzYW1lXCJcbiAgYXVkaWVuY2U/OiBcImdlbmVyYWxcIiB8IFwiZXhwZXJ0XCIgfCBcImJlZ2lubmVyXCJcbn1cblxuaW50ZXJmYWNlIFByb29mcmVhZGVyT3B0aW9ucyB7XG4gIGNoZWNrR3JhbW1hcj86IGJvb2xlYW5cbiAgY2hlY2tTcGVsbGluZz86IGJvb2xlYW5cbiAgY2hlY2tTdHlsZT86IGJvb2xlYW5cbiAgc3VnZ2VzdEltcHJvdmVtZW50cz86IGJvb2xlYW5cbn1cblxuY2xhc3MgR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjb25maWc6IEdvb2dsZUFJQ29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBHb29nbGVBSUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5jb25maWcuYmFzZVVybH0vJHtlbmRwb2ludH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5jb25maWcuYXBpS2V5fWAsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvb2dsZSBBSSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfVxuXG4gIGFzeW5jIHN1bW1hcml6ZSh0ZXh0OiBzdHJpbmcsIG9wdGlvbnM6IFN1bW1hcml6ZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICB0eXBlOiBvcHRpb25zLnR5cGUgfHwgXCJrZXktcG9pbnRzXCIsXG4gICAgICBsZW5ndGg6IG9wdGlvbnMubGVuZ3RoIHx8IFwibWVkaXVtXCIsXG4gICAgICBmb3JtYXQ6IG9wdGlvbnMuZm9ybWF0IHx8IFwicGxhaW4tdGV4dFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJzdW1tYXJpemVyL3YxL3N1bW1hcml6ZVwiLCBkYXRhKVxuICAgIHJldHVybiByZXN1bHQuc3VtbWFyeVxuICB9XG5cbiAgYXN5bmMgdHJhbnNsYXRlKHRleHQ6IHN0cmluZywgb3B0aW9uczogVHJhbnNsYXRvck9wdGlvbnMpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICBzb3VyY2VfbGFuZ3VhZ2U6IG9wdGlvbnMuc291cmNlTGFuZ3VhZ2UgfHwgXCJhdXRvXCIsXG4gICAgICB0YXJnZXRfbGFuZ3VhZ2U6IG9wdGlvbnMudGFyZ2V0TGFuZ3VhZ2UsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChcInRyYW5zbGF0b3IvdjEvdHJhbnNsYXRlXCIsIGRhdGEpXG4gICAgcmV0dXJuIHJlc3VsdC50cmFuc2xhdGlvblxuICB9XG5cbiAgYXN5bmMgcHJvbXB0KHByb21wdDogc3RyaW5nLCBvcHRpb25zOiBQcm9tcHRPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcHJvbXB0LFxuICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgbWF4X3Rva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgfHwgMTAwMCxcbiAgICAgIHRvcF9wOiBvcHRpb25zLnRvcFAgfHwgMC45LFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJwcm9tcHQvdjEvZ2VuZXJhdGVcIiwgZGF0YSlcbiAgICByZXR1cm4gcmVzdWx0LnJlc3BvbnNlXG4gIH1cblxuICBhc3luYyB3cml0ZShwcm9tcHQ6IHN0cmluZywgb3B0aW9uczogV3JpdGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHByb21wdCxcbiAgICAgIHRvbmU6IG9wdGlvbnMudG9uZSB8fCBcImNhc3VhbFwiLFxuICAgICAgbGVuZ3RoOiBvcHRpb25zLmxlbmd0aCB8fCBcIm1lZGl1bVwiLFxuICAgICAgZm9ybWF0OiBvcHRpb25zLmZvcm1hdCB8fCBcInBhcmFncmFwaFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJ3cml0ZXIvdjEvd3JpdGVcIiwgZGF0YSlcbiAgICByZXR1cm4gcmVzdWx0LmNvbnRlbnRcbiAgfVxuXG4gIGFzeW5jIHJld3JpdGUodGV4dDogc3RyaW5nLCBvcHRpb25zOiBSZXdyaXRlck9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBpbnB1dDogdGV4dCxcbiAgICAgIHRvbmU6IG9wdGlvbnMudG9uZSB8fCBcImNhc3VhbFwiLFxuICAgICAgbGVuZ3RoOiBvcHRpb25zLmxlbmd0aCB8fCBcInNhbWVcIixcbiAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlIHx8IFwiZ2VuZXJhbFwiLFxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXCJyZXdyaXRlci92MS9yZXdyaXRlXCIsIGRhdGEpXG4gICAgcmV0dXJuIHJlc3VsdC5yZXdyaXR0ZW5fdGV4dFxuICB9XG5cbiAgYXN5bmMgcHJvb2ZyZWFkKHRleHQ6IHN0cmluZywgb3B0aW9uczogUHJvb2ZyZWFkZXJPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICBjaGVja19ncmFtbWFyOiBvcHRpb25zLmNoZWNrR3JhbW1hciAhPT0gZmFsc2UsXG4gICAgICBjaGVja19zcGVsbGluZzogb3B0aW9ucy5jaGVja1NwZWxsaW5nICE9PSBmYWxzZSxcbiAgICAgIGNoZWNrX3N0eWxlOiBvcHRpb25zLmNoZWNrU3R5bGUgIT09IGZhbHNlLFxuICAgICAgc3VnZ2VzdF9pbXByb3ZlbWVudHM6IG9wdGlvbnMuc3VnZ2VzdEltcHJvdmVtZW50cyAhPT0gZmFsc2UsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChcInByb29mcmVhZGVyL3YxL3Byb29mcmVhZFwiLCBkYXRhKVxuICAgIHJldHVybiB7XG4gICAgICBjb3JyZWN0ZWRfdGV4dDogcmVzdWx0LmNvcnJlY3RlZF90ZXh0LFxuICAgICAgc3VnZ2VzdGlvbnM6IHJlc3VsdC5zdWdnZXN0aW9ucyxcbiAgICAgIGVycm9yczogcmVzdWx0LmVycm9ycyxcbiAgICB9XG4gIH1cbn1cblxuLy8gU2VydmVyLXNpZGUgb25seSBpbml0aWFsaXphdGlvblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUdvb2dsZUFJU2VydmVyU2VydmljZSA9ICgpID0+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FJX0FQSV9LRVkgLy8gVXNlIE5FWFRfUFVCTElDXyBmb3IgY2xpZW50LXNpZGUgYWNjZXNzXG4gIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiXG5cbiAgaWYgKCFhcGlLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHb29nbGUgQUkgQVBJIGtleSBpcyByZXF1aXJlZFwiKVxuICB9XG5cbiAgcmV0dXJuIG5ldyBHb29nbGVBSVNlcnZlclNlcnZpY2UoeyBhcGlLZXksIGJhc2VVcmwgfSlcbn1cblxuZXhwb3J0IHR5cGUgeyBTdW1tYXJpemVyT3B0aW9ucywgVHJhbnNsYXRvck9wdGlvbnMsIFByb21wdE9wdGlvbnMsIFdyaXRlck9wdGlvbnMsIFJld3JpdGVyT3B0aW9ucywgUHJvb2ZyZWFkZXJPcHRpb25zIH1cbiJdLCJuYW1lcyI6WyJHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnQiLCJkYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsImJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImFwaUtleSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwic3VtbWFyaXplIiwidGV4dCIsIm9wdGlvbnMiLCJpbnB1dCIsInR5cGUiLCJsZW5ndGgiLCJmb3JtYXQiLCJyZXN1bHQiLCJzdW1tYXJ5IiwidHJhbnNsYXRlIiwic291cmNlX2xhbmd1YWdlIiwic291cmNlTGFuZ3VhZ2UiLCJ0YXJnZXRfbGFuZ3VhZ2UiLCJ0YXJnZXRMYW5ndWFnZSIsInRyYW5zbGF0aW9uIiwicHJvbXB0IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwibWF4VG9rZW5zIiwidG9wX3AiLCJ0b3BQIiwid3JpdGUiLCJ0b25lIiwiY29udGVudCIsInJld3JpdGUiLCJhdWRpZW5jZSIsInJld3JpdHRlbl90ZXh0IiwicHJvb2ZyZWFkIiwiY2hlY2tfZ3JhbW1hciIsImNoZWNrR3JhbW1hciIsImNoZWNrX3NwZWxsaW5nIiwiY2hlY2tTcGVsbGluZyIsImNoZWNrX3N0eWxlIiwiY2hlY2tTdHlsZSIsInN1Z2dlc3RfaW1wcm92ZW1lbnRzIiwic3VnZ2VzdEltcHJvdmVtZW50cyIsImNvcnJlY3RlZF90ZXh0Iiwic3VnZ2VzdGlvbnMiLCJlcnJvcnMiLCJjcmVhdGVHb29nbGVBSVNlcnZlclNlcnZpY2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0FJX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19HT09HTEVfQUlfQkFTRV9VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/google-ai-server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/lesson-ai-generator-server.ts":
/*!*******************************************!*\
  !*** ./lib/lesson-ai-generator-server.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LessonAIServerGenerator: () => (/* binding */ LessonAIServerGenerator),\n/* harmony export */   lessonAIServerGenerator: () => (/* binding */ lessonAIServerGenerator)\n/* harmony export */ });\n/* harmony import */ var _google_ai_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./google-ai-server */ \"(rsc)/./lib/google-ai-server.ts\");\n\nclass LessonAIServerGenerator {\n    getGoogleAI() {\n        if (!this.googleAI) {\n            this.googleAI = (0,_google_ai_server__WEBPACK_IMPORTED_MODULE_0__.createGoogleAIServerService)();\n        }\n        return this.googleAI;\n    }\n    async generateLesson(params) {\n        const { sourceText, lessonType, studentLevel, targetLanguage, sourceUrl, contentMetadata, structuredContent, wordCount, readingTime } = params;\n        try {\n            // Step 1: Analyze content context and complexity\n            const contentAnalysis = await this.analyzeContentContext(sourceText, contentMetadata, structuredContent, studentLevel);\n            // Step 2: Create contextual summary based on lesson type and content analysis\n            const contextualSummary = await this.createContextualSummary(sourceText, contentAnalysis, lessonType, studentLevel);\n            // Step 3: Translate if needed (for non-English target languages)\n            let translatedContent = contextualSummary;\n            if (targetLanguage !== \"english\") {\n                translatedContent = await this.getGoogleAI().translate(contextualSummary, {\n                    targetLanguage: this.getLanguageCode(targetLanguage)\n                });\n            }\n            // Step 4: Generate contextual lesson structure\n            const lessonStructure = await this.generateContextualLessonStructure(translatedContent, contentAnalysis, lessonType, studentLevel, targetLanguage, contentMetadata);\n            // Step 5: Generate detailed content for each section with context\n            const detailedLesson = await this.generateDetailedContextualContent(lessonStructure, translatedContent, contentAnalysis, lessonType, studentLevel, targetLanguage, structuredContent);\n            // Step 6: Proofread and polish the final lesson\n            const polishedLesson = await this.proofreadLesson(detailedLesson);\n            return polishedLesson;\n        } catch (error) {\n            console.error(\"Error in AI lesson generation:\", error);\n            // Fallback to enhanced template-based generation with context\n            return this.generateEnhancedFallbackLesson(params);\n        }\n    }\n    // New method: Analyze content context and complexity\n    async analyzeContentContext(sourceText, metadata, structuredContent, studentLevel) {\n        const analysis = {\n            contentType: metadata?.contentType || \"general\",\n            domain: metadata?.domain || \"\",\n            complexity: \"medium\",\n            topics: [],\n            keyVocabulary: [],\n            culturalContext: \"\",\n            learningObjectives: [],\n            difficulty: studentLevel || \"B1\"\n        };\n        // Analyze content complexity based on text characteristics\n        const sentences = sourceText.split(/[.!?]+/).filter((s)=>s.trim().length > 10);\n        const avgSentenceLength = sentences.reduce((sum, s)=>sum + s.split(\" \").length, 0) / sentences.length;\n        const complexWords = sourceText.match(/\\b\\w{8,}\\b/g)?.length || 0;\n        const totalWords = sourceText.split(/\\s+/).length;\n        if (avgSentenceLength > 20 || complexWords / totalWords > 0.15) {\n            analysis.complexity = \"high\";\n        } else if (avgSentenceLength < 12 && complexWords / totalWords < 0.08) {\n            analysis.complexity = \"low\";\n        }\n        // Extract key topics using AI\n        try {\n            const topicsPrompt = `Analyze this content and identify 3-5 main topics or themes. Content: \"${sourceText.substring(0, 1000)}\"`;\n            const topicsResponse = await this.getGoogleAI().prompt(topicsPrompt, {\n                temperature: 0.3,\n                maxTokens: 200\n            });\n            analysis.topics = this.parseListFromText(topicsResponse).slice(0, 5);\n        } catch (error) {\n            // Fallback topic extraction\n            analysis.topics = this.extractTopicsFromHeadings(structuredContent?.headings || []);\n        }\n        // Extract key vocabulary for the target level\n        try {\n            const vocabPrompt = `Extract 8-10 key vocabulary words from this content that would be appropriate for ${studentLevel} level language learners. Focus on useful, practical words. Content: \"${sourceText.substring(0, 800)}\"`;\n            const vocabResponse = await this.getGoogleAI().prompt(vocabPrompt, {\n                temperature: 0.2,\n                maxTokens: 300\n            });\n            analysis.keyVocabulary = this.parseListFromText(vocabResponse).slice(0, 10);\n        } catch (error) {\n            // Fallback vocabulary extraction\n            analysis.keyVocabulary = this.extractVocabularyFromText(sourceText, studentLevel);\n        }\n        // Determine cultural context\n        if (metadata?.domain) {\n            analysis.culturalContext = this.determineCulturalContext(metadata.domain, sourceText);\n        }\n        // Generate learning objectives based on content type and lesson type\n        analysis.learningObjectives = this.generateLearningObjectives(analysis.contentType, analysis.topics, studentLevel);\n        return analysis;\n    }\n    // Enhanced contextual summary creation\n    async createContextualSummary(sourceText, contentAnalysis, lessonType, studentLevel) {\n        const summaryPrompt = `\nCreate a focused summary of this content for a ${lessonType} lesson at ${studentLevel} level.\nContent type: ${contentAnalysis.contentType}\nMain topics: ${contentAnalysis.topics.join(\", \")}\nComplexity: ${contentAnalysis.complexity}\n\nFocus on aspects most relevant for ${lessonType} learning objectives.\nKeep the summary appropriate for ${studentLevel} CEFR level students.\n\nContent: \"${sourceText}\"\n\nSummary:\n`;\n        try {\n            return await this.getGoogleAI().prompt(summaryPrompt, {\n                temperature: 0.4,\n                maxTokens: 500\n            });\n        } catch (error) {\n            // Fallback to basic summarization\n            return await this.getGoogleAI().summarize(sourceText, {\n                type: \"key-points\",\n                length: this.getSummaryLength(studentLevel),\n                format: \"plain-text\"\n            });\n        }\n    }\n    // Enhanced contextual lesson structure generation\n    async generateContextualLessonStructure(content, contentAnalysis, lessonType, studentLevel, targetLanguage, metadata) {\n        const prompt = `\nCreate a highly contextual ${lessonType} lesson for ${studentLevel} level students learning ${targetLanguage}.\n\nCONTENT CONTEXT:\n- Content Type: ${contentAnalysis.contentType}\n- Source: ${metadata?.domain || \"web content\"}\n- Main Topics: ${contentAnalysis.topics.join(\", \")}\n- Complexity Level: ${contentAnalysis.complexity}\n- Key Vocabulary: ${contentAnalysis.keyVocabulary.slice(0, 5).join(\", \")}\n- Cultural Context: ${contentAnalysis.culturalContext}\n\nLESSON CONTENT: \"${content}\"\n\nCreate a JSON structure with these sections, making each section highly relevant to the source content:\n\n- warmup: 3 engaging warm-up questions that directly relate to the content topics and activate prior knowledge\n- vocabulary: 6-8 key vocabulary words from the actual content with contextual meanings and authentic examples\n- reading: A level-appropriate adaptation of the original content that maintains its essence and context\n- comprehension: 4-5 reading comprehension questions that test understanding of the specific content\n- discussion: 3-4 discussion questions that encourage conversation about the actual topics covered\n- grammar: Grammar focus derived from patterns in the source content, with examples from the text\n- pronunciation: One challenging word from the actual content with IPA and contextual practice\n- wrapup: 3 reflection questions that connect the lesson to real-world applications of the content\n\nIMPORTANT: \n- All content must be directly related to and derived from the source material\n- Vocabulary should come from the actual text, not generic word lists\n- Examples should reference the specific content, not generic scenarios\n- Questions should be about the actual topics discussed, not general themes\n- Maintain the cultural and contextual authenticity of the source\n\nReturn only valid JSON.\n`;\n        const response = await this.getGoogleAI().prompt(prompt, {\n            temperature: 0.7,\n            maxTokens: 2000\n        });\n        try {\n            return JSON.parse(response);\n        } catch  {\n            // If JSON parsing fails, return a structured fallback\n            return this.createStructuredFallback(content, lessonType, studentLevel);\n        }\n    }\n    // Enhanced detailed content generation with context\n    async generateDetailedContextualContent(structure, content, contentAnalysis, lessonType, studentLevel, targetLanguage, structuredContent) {\n        // Use Writer API to expand each section with contextual, detailed content\n        const sections = {\n            ...structure\n        };\n        // Enhance vocabulary section with contextual examples\n        if (sections.vocabulary) {\n            for(let i = 0; i < sections.vocabulary.length; i++){\n                const vocab = sections.vocabulary[i];\n                try {\n                    const contextualExamplePrompt = `\nCreate a natural example sentence using the word \"${vocab.word}\" that relates to this content context:\nTopics: ${contentAnalysis.topics.join(\", \")}\nContent type: ${contentAnalysis.contentType}\nLevel: ${studentLevel}\n\nMake the example relevant to the source material and appropriate for ${studentLevel} level students.\n`;\n                    const enhancedExample = await this.getGoogleAI().write(contextualExamplePrompt, {\n                        tone: \"casual\",\n                        length: \"short\"\n                    });\n                    sections.vocabulary[i].example = enhancedExample;\n                    // Add contextual meaning based on source content\n                    const contextualMeaningPrompt = `\nExplain the meaning of \"${vocab.word}\" in the context of: ${contentAnalysis.topics[0] || contentAnalysis.contentType}\nKeep it simple for ${studentLevel} level students.\n`;\n                    const contextualMeaning = await this.getGoogleAI().write(contextualMeaningPrompt, {\n                        tone: \"casual\",\n                        length: \"short\"\n                    });\n                    sections.vocabulary[i].contextualMeaning = contextualMeaning;\n                } catch (error) {\n                    // Keep original if enhancement fails\n                    console.warn(`Failed to enhance vocabulary for ${vocab.word}:`, error);\n                }\n            }\n        }\n        // Enhance discussion questions with specific content references\n        if (sections.discussion) {\n            try {\n                const enhancedDiscussionPrompt = `\nEnhance these discussion questions for a ${lessonType} lesson about ${contentAnalysis.topics.join(\" and \")}:\n${sections.discussion.join(\"\\n\")}\n\nMake them more specific to the content, engaging for ${studentLevel} level students, and encourage deeper thinking about:\n- ${contentAnalysis.topics.slice(0, 3).join(\"\\n- \")}\n\nReturn 3-4 enhanced questions that reference specific aspects of the content.\n`;\n                const enhancedDiscussion = await this.getGoogleAI().write(enhancedDiscussionPrompt, {\n                    tone: \"casual\",\n                    length: \"medium\",\n                    format: \"bullet-points\"\n                });\n                sections.discussion = this.parseListFromText(enhancedDiscussion).slice(0, 4);\n            } catch (error) {\n                console.warn(\"Failed to enhance discussion questions:\", error);\n            }\n        }\n        // Enhance reading section with better structure\n        if (sections.reading && structuredContent?.headings?.length > 0) {\n            try {\n                const structuredReadingPrompt = `\nImprove this reading text by organizing it with clear structure based on these headings from the original:\n${structuredContent.headings.slice(0, 3).map((h)=>`- ${h.text}`).join(\"\\n\")}\n\nOriginal text: \"${sections.reading}\"\n\nCreate a well-structured, ${studentLevel}-appropriate reading passage that maintains the key information but improves readability.\n`;\n                const enhancedReading = await this.getGoogleAI().rewrite(sections.reading, {\n                    tone: \"casual\",\n                    length: \"same\",\n                    audience: this.getAudienceLevel(studentLevel)\n                });\n                sections.reading = enhancedReading;\n            } catch (error) {\n                console.warn(\"Failed to enhance reading section:\", error);\n            }\n        }\n        // Enhance grammar section with content-specific examples\n        if (sections.grammar && sections.grammar.focus) {\n            try {\n                const grammarExamplesPrompt = `\nCreate 3 grammar examples for \"${sections.grammar.focus}\" using vocabulary and concepts from this content:\nTopics: ${contentAnalysis.topics.join(\", \")}\nKey vocabulary: ${contentAnalysis.keyVocabulary.slice(0, 5).join(\", \")}\n\nMake examples relevant to the content and appropriate for ${studentLevel} level.\n`;\n                const contextualGrammarExamples = await this.getGoogleAI().write(grammarExamplesPrompt, {\n                    tone: \"casual\",\n                    length: \"short\",\n                    format: \"bullet-points\"\n                });\n                sections.grammar.contextualExamples = this.parseListFromText(contextualGrammarExamples);\n            } catch (error) {\n                console.warn(\"Failed to enhance grammar examples:\", error);\n            }\n        }\n        return sections;\n    }\n    async proofreadLesson(lesson) {\n        // Proofread key text sections\n        const sectionsToProofread = [\n            \"reading\",\n            \"grammar.examples\",\n            \"pronunciation.practice\"\n        ];\n        for (const sectionPath of sectionsToProofread){\n            const value = this.getNestedValue(lesson, sectionPath);\n            if (typeof value === \"string\") {\n                const proofread = await this.getGoogleAI().proofread(value, {\n                    checkGrammar: true,\n                    checkSpelling: true,\n                    checkStyle: true\n                });\n                this.setNestedValue(lesson, sectionPath, proofread.corrected_text);\n            }\n        }\n        return lesson;\n    }\n    generateFallbackLesson(params) {\n        // Template-based fallback when AI APIs fail\n        const { sourceText, lessonType, studentLevel, targetLanguage } = params;\n        return {\n            lessonType,\n            studentLevel,\n            targetLanguage,\n            sections: {\n                warmup: this.getTemplateWarmup(lessonType, studentLevel),\n                vocabulary: this.extractVocabulary(sourceText, studentLevel),\n                reading: this.simplifyText(sourceText, studentLevel),\n                comprehension: this.getTemplateComprehension(lessonType, studentLevel),\n                discussion: this.getTemplateDiscussion(lessonType, studentLevel),\n                grammar: this.getTemplateGrammar(studentLevel),\n                pronunciation: this.getTemplatePronunciation(sourceText),\n                wrapup: this.getTemplateWrapup(lessonType)\n            }\n        };\n    }\n    // Helper methods\n    getSummaryLength(level) {\n        const lengthMap = {\n            A1: \"short\",\n            A2: \"short\",\n            B1: \"medium\",\n            B2: \"medium\",\n            C1: \"long\"\n        };\n        return lengthMap[level] || \"medium\";\n    }\n    getLanguageCode(language) {\n        const languageMap = {\n            spanish: \"es\",\n            french: \"fr\",\n            german: \"de\",\n            italian: \"it\",\n            portuguese: \"pt\",\n            japanese: \"ja\",\n            korean: \"ko\",\n            chinese: \"zh\"\n        };\n        return languageMap[language] || \"en\";\n    }\n    parseListFromText(text) {\n        return text.split(\"\\n\").filter((line)=>line.trim()).map((line)=>line.replace(/^[-*]\\s*/, \"\").trim()).filter((line)=>line.length > 0).slice(0, 4) // Limit to 4 items\n        ;\n    }\n    getNestedValue(obj, path) {\n        return path.split(\".\").reduce((current, key)=>current?.[key], obj);\n    }\n    setNestedValue(obj, path, value) {\n        const keys = path.split(\".\");\n        const lastKey = keys.pop();\n        const target = keys.reduce((current, key)=>current[key], obj);\n        target[lastKey] = value;\n    }\n    createStructuredFallback(content, lessonType, studentLevel) {\n        return {\n            warmup: this.getTemplateWarmup(lessonType, studentLevel),\n            vocabulary: this.extractVocabulary(content, studentLevel),\n            reading: content.substring(0, 500),\n            comprehension: this.getTemplateComprehension(lessonType, studentLevel),\n            discussion: this.getTemplateDiscussion(lessonType, studentLevel),\n            grammar: this.getTemplateGrammar(studentLevel),\n            pronunciation: this.getTemplatePronunciation(content),\n            wrapup: this.getTemplateWrapup(lessonType)\n        };\n    }\n    getTemplateWarmup(lessonType, studentLevel) {\n        const templates = {\n            discussion: [\n                \"What do you already know about this topic?\",\n                \"Have you had similar experiences?\",\n                \"What would you like to learn more about?\"\n            ],\n            grammar: [\n                \"What grammar patterns do you notice?\",\n                \"Which sentences seem most complex?\",\n                \"What grammar rules do you remember?\"\n            ],\n            travel: [\n                \"Where would you like to travel next?\",\n                \"What travel experiences have you had?\",\n                \"What travel vocabulary do you know?\"\n            ],\n            business: [\n                \"What business situations are you familiar with?\",\n                \"How do you communicate professionally?\",\n                \"What business terms are challenging?\"\n            ],\n            pronunciation: [\n                \"Which sounds are difficult to pronounce?\",\n                \"How do you practice pronunciation?\",\n                \"What pronunciation goals do you have?\"\n            ]\n        };\n        return templates[lessonType] || templates.discussion;\n    }\n    extractVocabulary(text, studentLevel) {\n        // Simple vocabulary extraction based on word frequency and complexity\n        const words = text.toLowerCase().match(/\\b[a-z]{4,}\\b/g) || [];\n        const uniqueWords = [\n            ...new Set(words)\n        ];\n        const selectedWords = uniqueWords.slice(0, 6);\n        return selectedWords.map((word)=>({\n                word: word,\n                meaning: `Definition of ${word}`,\n                example: `Example sentence with ${word}.`\n            }));\n    }\n    simplifyText(text, studentLevel) {\n        // Basic text simplification based on level\n        const maxLength = {\n            A1: 200,\n            A2: 300,\n            B1: 400,\n            B2: 500,\n            C1: 600\n        };\n        const limit = maxLength[studentLevel] || 400;\n        return text.substring(0, limit) + (text.length > limit ? \"...\" : \"\");\n    }\n    getTemplateComprehension(lessonType, studentLevel) {\n        return [\n            \"What is the main idea of this text?\",\n            \"What supporting details can you identify?\",\n            \"How does this relate to your experience?\",\n            \"What conclusions can you draw?\"\n        ];\n    }\n    getTemplateDiscussion(lessonType, studentLevel) {\n        const templates = {\n            discussion: [\n                \"What is your opinion on this topic?\",\n                \"How would you handle this situation?\",\n                \"What alternative approaches exist?\"\n            ],\n            business: [\n                \"How would you apply this professionally?\",\n                \"What business challenges does this address?\",\n                \"How would you present this to colleagues?\"\n            ],\n            travel: [\n                \"How would this help while traveling?\",\n                \"What preparations would you make?\",\n                \"How would you share this experience?\"\n            ]\n        };\n        return templates[lessonType] || templates.discussion;\n    }\n    getTemplateGrammar(studentLevel) {\n        const grammarFoci = {\n            A1: \"Present Simple Tense\",\n            A2: \"Past Simple Tense\",\n            B1: \"Present Perfect Tense\",\n            B2: \"Conditional Sentences\",\n            C1: \"Advanced Grammar Structures\"\n        };\n        return {\n            focus: grammarFoci[studentLevel] || \"Present Perfect Tense\",\n            examples: [\n                \"I have learned many new things.\",\n                \"She has improved her skills.\",\n                \"We have discussed this topic.\"\n            ],\n            exercise: [\n                \"I _____ (learn) a lot today.\",\n                \"They _____ (complete) the project.\",\n                \"She _____ (improve) significantly.\"\n            ]\n        };\n    }\n    getTemplatePronunciation(text) {\n        // Extract a challenging word from the text\n        const words = text.match(/\\b[a-z]{6,}\\b/gi) || [\n            \"communication\"\n        ];\n        const selectedWord = words[0] || \"communication\";\n        return {\n            word: selectedWord.toLowerCase(),\n            ipa: \"/kmjunken/\",\n            practice: `Practice saying: \"${selectedWord}\" in a sentence.`\n        };\n    }\n    getTemplateWrapup(lessonType) {\n        return [\n            \"What new vocabulary did you learn?\",\n            \"Which concepts need more practice?\",\n            \"How will you use this knowledge?\",\n            \"What questions do you still have?\"\n        ];\n    }\n    // New helper methods for enhanced contextual analysis\n    extractTopicsFromHeadings(headings) {\n        return headings.filter((h)=>h.level <= 3) // Focus on main headings\n        .map((h)=>h.text).slice(0, 5);\n    }\n    extractVocabularyFromText(text, level) {\n        // Extract words based on complexity appropriate for the level\n        const words = text.toLowerCase().match(/\\b[a-z]{4,}\\b/g) || [];\n        const uniqueWords = [\n            ...new Set(words)\n        ];\n        // Filter by complexity based on level\n        const complexityThreshold = {\n            \"A1\": 6,\n            \"A2\": 7,\n            \"B1\": 8,\n            \"B2\": 10,\n            \"C1\": 12\n        };\n        const maxLength = complexityThreshold[level] || 8;\n        return uniqueWords.filter((word)=>word.length <= maxLength && word.length >= 4).slice(0, 8);\n    }\n    determineCulturalContext(domain, text) {\n        // Determine cultural context based on domain and content\n        const culturalIndicators = {\n            \"bbc.com\": \"British English, UK culture\",\n            \"cnn.com\": \"American English, US culture\",\n            \"wikipedia.org\": \"International, encyclopedic\",\n            \"nytimes.com\": \"American English, US perspective\",\n            \"theguardian.com\": \"British English, UK perspective\"\n        };\n        if (culturalIndicators[domain]) {\n            return culturalIndicators[domain];\n        }\n        // Analyze text for cultural markers\n        const americanMarkers = [\n            \"dollar\",\n            \"president\",\n            \"congress\",\n            \"state\",\n            \"federal\"\n        ];\n        const britishMarkers = [\n            \"pound\",\n            \"minister\",\n            \"parliament\",\n            \"council\",\n            \"government\"\n        ];\n        const americanCount = americanMarkers.filter((marker)=>text.toLowerCase().includes(marker)).length;\n        const britishCount = britishMarkers.filter((marker)=>text.toLowerCase().includes(marker)).length;\n        if (americanCount > britishCount) {\n            return \"American English context\";\n        } else if (britishCount > americanCount) {\n            return \"British English context\";\n        }\n        return \"International context\";\n    }\n    generateLearningObjectives(contentType, topics, level) {\n        const objectives = [];\n        // Base objectives on content type\n        switch(contentType){\n            case \"news\":\n                objectives.push(\"Understand current events vocabulary\");\n                objectives.push(\"Practice reading news articles\");\n                break;\n            case \"blog\":\n                objectives.push(\"Learn informal writing style\");\n                objectives.push(\"Understand personal opinions and experiences\");\n                break;\n            case \"tutorial\":\n                objectives.push(\"Follow step-by-step instructions\");\n                objectives.push(\"Learn technical vocabulary\");\n                break;\n            case \"encyclopedia\":\n                objectives.push(\"Understand factual information\");\n                objectives.push(\"Learn academic vocabulary\");\n                break;\n            default:\n                objectives.push(\"Improve reading comprehension\");\n                objectives.push(\"Expand vocabulary knowledge\");\n        }\n        // Add topic-specific objectives\n        topics.slice(0, 2).forEach((topic)=>{\n            objectives.push(`Discuss topics related to ${topic.toLowerCase()}`);\n        });\n        return objectives.slice(0, 4);\n    }\n    getAudienceLevel(cefrLevel) {\n        const levelMap = {\n            \"A1\": \"beginner\",\n            \"A2\": \"beginner\",\n            \"B1\": \"general\",\n            \"B2\": \"general\",\n            \"C1\": \"expert\"\n        };\n        return levelMap[cefrLevel] || \"general\";\n    }\n    // Enhanced fallback lesson generation with context\n    generateEnhancedFallbackLesson(params) {\n        const { sourceText, lessonType, studentLevel, targetLanguage, contentMetadata, structuredContent } = params;\n        // Use available context even in fallback\n        const topics = structuredContent?.headings?.map((h)=>h.text).slice(0, 3) || [];\n        const contentType = contentMetadata?.contentType || \"general\";\n        return {\n            lessonType,\n            studentLevel,\n            targetLanguage,\n            sections: {\n                warmup: this.getContextualWarmup(lessonType, studentLevel, topics, contentType),\n                vocabulary: this.extractContextualVocabulary(sourceText, studentLevel, topics),\n                reading: this.simplifyText(sourceText, studentLevel),\n                comprehension: this.getContextualComprehension(lessonType, studentLevel, topics),\n                discussion: this.getContextualDiscussion(lessonType, studentLevel, topics),\n                grammar: this.getTemplateGrammar(studentLevel),\n                pronunciation: this.getTemplatePronunciation(sourceText),\n                wrapup: this.getContextualWrapup(lessonType, topics)\n            }\n        };\n    }\n    getContextualWarmup(lessonType, studentLevel, topics, contentType) {\n        const baseQuestions = this.getTemplateWarmup(lessonType, studentLevel);\n        if (topics.length > 0) {\n            return [\n                `What do you know about ${topics[0]?.toLowerCase()}?`,\n                `Have you experienced anything related to ${topics[1]?.toLowerCase() || topics[0]?.toLowerCase()}?`,\n                `What would you like to learn about this ${contentType} content?`\n            ];\n        }\n        return baseQuestions;\n    }\n    extractContextualVocabulary(text, studentLevel, topics) {\n        const vocabulary = this.extractVocabulary(text, studentLevel);\n        // Enhance with topic context if available\n        if (topics.length > 0) {\n            return vocabulary.map((vocab, index)=>({\n                    ...vocab,\n                    context: index < topics.length ? `Related to ${topics[index].toLowerCase()}` : vocab.meaning\n                }));\n        }\n        return vocabulary;\n    }\n    getContextualComprehension(lessonType, studentLevel, topics) {\n        const baseQuestions = this.getTemplateComprehension(lessonType, studentLevel);\n        if (topics.length > 0) {\n            return [\n                `What is the main point about ${topics[0]?.toLowerCase()}?`,\n                `How does the text explain ${topics[1]?.toLowerCase() || \"the topic\"}?`,\n                \"What supporting details can you identify?\",\n                \"What conclusions can you draw from this information?\"\n            ];\n        }\n        return baseQuestions;\n    }\n    getContextualDiscussion(lessonType, studentLevel, topics) {\n        const baseQuestions = this.getTemplateDiscussion(lessonType, studentLevel);\n        if (topics.length > 0) {\n            return [\n                `What is your opinion about ${topics[0]?.toLowerCase()}?`,\n                `How would you apply this information about ${topics[1]?.toLowerCase() || \"this topic\"}?`,\n                `What are the implications of what you learned about ${topics[0]?.toLowerCase()}?`\n            ];\n        }\n        return baseQuestions;\n    }\n    getContextualWrapup(lessonType, topics) {\n        if (topics.length > 0) {\n            return [\n                `What new vocabulary did you learn about ${topics[0]?.toLowerCase()}?`,\n                `Which concepts about ${topics[1]?.toLowerCase() || \"this topic\"} need more practice?`,\n                \"How will you use this knowledge in real situations?\",\n                \"What questions do you still have about this content?\"\n            ];\n        }\n        return this.getTemplateWrapup(lessonType);\n    }\n    constructor(){\n        this.googleAI = null;\n    }\n}\nconst lessonAIServerGenerator = new LessonAIServerGenerator();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDSDtRQUVBLE9BQU9nQztJQUNUO0lBRVFGLHdCQUF3QjVMLFVBQWtCLEVBQUVDLFlBQW9CLEVBQUU0QixNQUFnQixFQUFZO1FBQ3BHLE1BQU1pSyxnQkFBZ0IsSUFBSSxDQUFDckUscUJBQXFCLENBQUN6SCxZQUFZQztRQUU3RCxJQUFJNEIsT0FBT1UsTUFBTSxHQUFHLEdBQUc7WUFDckIsT0FBTztnQkFDTCxDQUFDLDJCQUEyQixFQUFFVixNQUFNLENBQUMsRUFBRSxFQUFFaUksY0FBYyxDQUFDLENBQUM7Z0JBQ3pELENBQUMsMkNBQTJDLEVBQUVqSSxNQUFNLENBQUMsRUFBRSxFQUFFaUksaUJBQWlCLGFBQWEsQ0FBQyxDQUFDO2dCQUN6RixDQUFDLG9EQUFvRCxFQUFFakksTUFBTSxDQUFDLEVBQUUsRUFBRWlJLGNBQWMsQ0FBQyxDQUFDO2FBQ25GO1FBQ0g7UUFFQSxPQUFPZ0M7SUFDVDtJQUVRRCxvQkFBb0I3TCxVQUFrQixFQUFFNkIsTUFBZ0IsRUFBWTtRQUMxRSxJQUFJQSxPQUFPVSxNQUFNLEdBQUcsR0FBRztZQUNyQixPQUFPO2dCQUNMLENBQUMsd0NBQXdDLEVBQUVWLE1BQU0sQ0FBQyxFQUFFLEVBQUVpSSxjQUFjLENBQUMsQ0FBQztnQkFDdEUsQ0FBQyxxQkFBcUIsRUFBRWpJLE1BQU0sQ0FBQyxFQUFFLEVBQUVpSSxpQkFBaUIsYUFBYSxvQkFBb0IsQ0FBQztnQkFDdEY7Z0JBQ0E7YUFDRDtRQUNIO1FBRUEsT0FBTyxJQUFJLENBQUNoQyxpQkFBaUIsQ0FBQzlIO0lBQ2hDOzthQTd4QlFKLFdBQWtFOztBQTh4QjVFO0FBRU8sTUFBTXFNLDBCQUEwQixJQUFJdk0sMEJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9sZXNzb24tYWktZ2VuZXJhdG9yLXNlcnZlci50cz8wYmIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUdvb2dsZUFJU2VydmVyU2VydmljZSB9IGZyb20gXCIuL2dvb2dsZS1haS1zZXJ2ZXJcIlxuXG5pbnRlcmZhY2UgTGVzc29uR2VuZXJhdGlvblBhcmFtcyB7XG4gIHNvdXJjZVRleHQ6IHN0cmluZ1xuICBsZXNzb25UeXBlOiBzdHJpbmdcbiAgc3R1ZGVudExldmVsOiBzdHJpbmdcbiAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZ1xuICBzb3VyY2VVcmw/OiBzdHJpbmdcbiAgY29udGVudE1ldGFkYXRhPzoge1xuICAgIHRpdGxlPzogc3RyaW5nXG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgICBhdXRob3I/OiBzdHJpbmdcbiAgICBwdWJsaXNoRGF0ZT86IHN0cmluZ1xuICAgIGNvbnRlbnRUeXBlPzogc3RyaW5nXG4gICAgZG9tYWluPzogc3RyaW5nXG4gICAgbGFuZ3VhZ2U/OiBzdHJpbmdcbiAgICBrZXl3b3Jkcz86IHN0cmluZ1tdXG4gIH1cbiAgc3RydWN0dXJlZENvbnRlbnQ/OiB7XG4gICAgaGVhZGluZ3M/OiBBcnJheTx7IGxldmVsOiBudW1iZXI7IHRleHQ6IHN0cmluZyB9PlxuICAgIHBhcmFncmFwaHM/OiBzdHJpbmdbXVxuICAgIGxpc3RzPzogQXJyYXk8eyB0eXBlOiBzdHJpbmc7IGl0ZW1zOiBzdHJpbmdbXSB9PlxuICAgIHF1b3Rlcz86IHN0cmluZ1tdXG4gICAgaW1hZ2VzPzogQXJyYXk8eyBhbHQ6IHN0cmluZzsgc3JjOiBzdHJpbmcgfT5cbiAgICBsaW5rcz86IEFycmF5PHsgdGV4dDogc3RyaW5nOyB1cmw6IHN0cmluZyB9PlxuICB9XG4gIHdvcmRDb3VudD86IG51bWJlclxuICByZWFkaW5nVGltZT86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgR2VuZXJhdGVkTGVzc29uIHtcbiAgbGVzc29uVHlwZTogc3RyaW5nXG4gIHN0dWRlbnRMZXZlbDogc3RyaW5nXG4gIHRhcmdldExhbmd1YWdlOiBzdHJpbmdcbiAgc2VjdGlvbnM6IHtcbiAgICB3YXJtdXA6IHN0cmluZ1tdXG4gICAgdm9jYWJ1bGFyeTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IG1lYW5pbmc6IHN0cmluZzsgZXhhbXBsZTogc3RyaW5nIH0+XG4gICAgcmVhZGluZzogc3RyaW5nXG4gICAgY29tcHJlaGVuc2lvbjogc3RyaW5nW11cbiAgICBkaXNjdXNzaW9uOiBzdHJpbmdbXVxuICAgIGdyYW1tYXI6IHtcbiAgICAgIGZvY3VzOiBzdHJpbmdcbiAgICAgIGV4YW1wbGVzOiBzdHJpbmdbXVxuICAgICAgZXhlcmNpc2U6IHN0cmluZ1tdXG4gICAgfVxuICAgIHByb251bmNpYXRpb246IHtcbiAgICAgIHdvcmQ6IHN0cmluZ1xuICAgICAgaXBhOiBzdHJpbmdcbiAgICAgIHByYWN0aWNlOiBzdHJpbmdcbiAgICB9XG4gICAgd3JhcHVwOiBzdHJpbmdbXVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMZXNzb25BSVNlcnZlckdlbmVyYXRvciB7XG4gIHByaXZhdGUgZ29vZ2xlQUk6IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUdvb2dsZUFJU2VydmVyU2VydmljZT4gfCBudWxsID0gbnVsbFxuXG4gIHByaXZhdGUgZ2V0R29vZ2xlQUkoKSB7XG4gICAgaWYgKCF0aGlzLmdvb2dsZUFJKSB7XG4gICAgICB0aGlzLmdvb2dsZUFJID0gY3JlYXRlR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ29vZ2xlQUlcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlTGVzc29uKHBhcmFtczogTGVzc29uR2VuZXJhdGlvblBhcmFtcyk6IFByb21pc2U8R2VuZXJhdGVkTGVzc29uPiB7XG4gICAgY29uc3QgeyBcbiAgICAgIHNvdXJjZVRleHQsIFxuICAgICAgbGVzc29uVHlwZSwgXG4gICAgICBzdHVkZW50TGV2ZWwsIFxuICAgICAgdGFyZ2V0TGFuZ3VhZ2UsIFxuICAgICAgc291cmNlVXJsLFxuICAgICAgY29udGVudE1ldGFkYXRhLFxuICAgICAgc3RydWN0dXJlZENvbnRlbnQsXG4gICAgICB3b3JkQ291bnQsXG4gICAgICByZWFkaW5nVGltZVxuICAgIH0gPSBwYXJhbXNcblxuICAgIHRyeSB7XG4gICAgICAvLyBTdGVwIDE6IEFuYWx5emUgY29udGVudCBjb250ZXh0IGFuZCBjb21wbGV4aXR5XG4gICAgICBjb25zdCBjb250ZW50QW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVDb250ZW50Q29udGV4dChcbiAgICAgICAgc291cmNlVGV4dCxcbiAgICAgICAgY29udGVudE1ldGFkYXRhLFxuICAgICAgICBzdHJ1Y3R1cmVkQ29udGVudCxcbiAgICAgICAgc3R1ZGVudExldmVsXG4gICAgICApXG5cbiAgICAgIC8vIFN0ZXAgMjogQ3JlYXRlIGNvbnRleHR1YWwgc3VtbWFyeSBiYXNlZCBvbiBsZXNzb24gdHlwZSBhbmQgY29udGVudCBhbmFseXNpc1xuICAgICAgY29uc3QgY29udGV4dHVhbFN1bW1hcnkgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvbnRleHR1YWxTdW1tYXJ5KFxuICAgICAgICBzb3VyY2VUZXh0LFxuICAgICAgICBjb250ZW50QW5hbHlzaXMsXG4gICAgICAgIGxlc3NvblR5cGUsXG4gICAgICAgIHN0dWRlbnRMZXZlbFxuICAgICAgKVxuXG4gICAgICAvLyBTdGVwIDM6IFRyYW5zbGF0ZSBpZiBuZWVkZWQgKGZvciBub24tRW5nbGlzaCB0YXJnZXQgbGFuZ3VhZ2VzKVxuICAgICAgbGV0IHRyYW5zbGF0ZWRDb250ZW50ID0gY29udGV4dHVhbFN1bW1hcnlcbiAgICAgIGlmICh0YXJnZXRMYW5ndWFnZSAhPT0gXCJlbmdsaXNoXCIpIHtcbiAgICAgICAgdHJhbnNsYXRlZENvbnRlbnQgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkudHJhbnNsYXRlKGNvbnRleHR1YWxTdW1tYXJ5LCB7XG4gICAgICAgICAgdGFyZ2V0TGFuZ3VhZ2U6IHRoaXMuZ2V0TGFuZ3VhZ2VDb2RlKHRhcmdldExhbmd1YWdlKSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gU3RlcCA0OiBHZW5lcmF0ZSBjb250ZXh0dWFsIGxlc3NvbiBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IGxlc3NvblN0cnVjdHVyZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDb250ZXh0dWFsTGVzc29uU3RydWN0dXJlKFxuICAgICAgICB0cmFuc2xhdGVkQ29udGVudCxcbiAgICAgICAgY29udGVudEFuYWx5c2lzLFxuICAgICAgICBsZXNzb25UeXBlLFxuICAgICAgICBzdHVkZW50TGV2ZWwsXG4gICAgICAgIHRhcmdldExhbmd1YWdlLFxuICAgICAgICBjb250ZW50TWV0YWRhdGFcbiAgICAgIClcblxuICAgICAgLy8gU3RlcCA1OiBHZW5lcmF0ZSBkZXRhaWxlZCBjb250ZW50IGZvciBlYWNoIHNlY3Rpb24gd2l0aCBjb250ZXh0XG4gICAgICBjb25zdCBkZXRhaWxlZExlc3NvbiA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVEZXRhaWxlZENvbnRleHR1YWxDb250ZW50KFxuICAgICAgICBsZXNzb25TdHJ1Y3R1cmUsXG4gICAgICAgIHRyYW5zbGF0ZWRDb250ZW50LFxuICAgICAgICBjb250ZW50QW5hbHlzaXMsXG4gICAgICAgIGxlc3NvblR5cGUsXG4gICAgICAgIHN0dWRlbnRMZXZlbCxcbiAgICAgICAgdGFyZ2V0TGFuZ3VhZ2UsXG4gICAgICAgIHN0cnVjdHVyZWRDb250ZW50XG4gICAgICApXG5cbiAgICAgIC8vIFN0ZXAgNjogUHJvb2ZyZWFkIGFuZCBwb2xpc2ggdGhlIGZpbmFsIGxlc3NvblxuICAgICAgY29uc3QgcG9saXNoZWRMZXNzb24gPSBhd2FpdCB0aGlzLnByb29mcmVhZExlc3NvbihkZXRhaWxlZExlc3NvbilcblxuICAgICAgcmV0dXJuIHBvbGlzaGVkTGVzc29uXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBBSSBsZXNzb24gZ2VuZXJhdGlvbjpcIiwgZXJyb3IpXG4gICAgICAvLyBGYWxsYmFjayB0byBlbmhhbmNlZCB0ZW1wbGF0ZS1iYXNlZCBnZW5lcmF0aW9uIHdpdGggY29udGV4dFxuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVFbmhhbmNlZEZhbGxiYWNrTGVzc29uKHBhcmFtcylcbiAgICB9XG4gIH1cblxuICAvLyBOZXcgbWV0aG9kOiBBbmFseXplIGNvbnRlbnQgY29udGV4dCBhbmQgY29tcGxleGl0eVxuICBwcml2YXRlIGFzeW5jIGFuYWx5emVDb250ZW50Q29udGV4dChcbiAgICBzb3VyY2VUZXh0OiBzdHJpbmcsXG4gICAgbWV0YWRhdGE/OiBhbnksXG4gICAgc3RydWN0dXJlZENvbnRlbnQ/OiBhbnksXG4gICAgc3R1ZGVudExldmVsPzogc3RyaW5nXG4gICkge1xuICAgIGNvbnN0IGFuYWx5c2lzID0ge1xuICAgICAgY29udGVudFR5cGU6IG1ldGFkYXRhPy5jb250ZW50VHlwZSB8fCAnZ2VuZXJhbCcsXG4gICAgICBkb21haW46IG1ldGFkYXRhPy5kb21haW4gfHwgJycsXG4gICAgICBjb21wbGV4aXR5OiAnbWVkaXVtJyxcbiAgICAgIHRvcGljczogW10sXG4gICAgICBrZXlWb2NhYnVsYXJ5OiBbXSxcbiAgICAgIGN1bHR1cmFsQ29udGV4dDogJycsXG4gICAgICBsZWFybmluZ09iamVjdGl2ZXM6IFtdLFxuICAgICAgZGlmZmljdWx0eTogc3R1ZGVudExldmVsIHx8ICdCMScsXG4gICAgfVxuXG4gICAgLy8gQW5hbHl6ZSBjb250ZW50IGNvbXBsZXhpdHkgYmFzZWQgb24gdGV4dCBjaGFyYWN0ZXJpc3RpY3NcbiAgICBjb25zdCBzZW50ZW5jZXMgPSBzb3VyY2VUZXh0LnNwbGl0KC9bLiE/XSsvKS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAxMClcbiAgICBjb25zdCBhdmdTZW50ZW5jZUxlbmd0aCA9IHNlbnRlbmNlcy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5zcGxpdCgnICcpLmxlbmd0aCwgMCkgLyBzZW50ZW5jZXMubGVuZ3RoXG4gICAgY29uc3QgY29tcGxleFdvcmRzID0gc291cmNlVGV4dC5tYXRjaCgvXFxiXFx3ezgsfVxcYi9nKT8ubGVuZ3RoIHx8IDBcbiAgICBjb25zdCB0b3RhbFdvcmRzID0gc291cmNlVGV4dC5zcGxpdCgvXFxzKy8pLmxlbmd0aFxuXG4gICAgaWYgKGF2Z1NlbnRlbmNlTGVuZ3RoID4gMjAgfHwgY29tcGxleFdvcmRzIC8gdG90YWxXb3JkcyA+IDAuMTUpIHtcbiAgICAgIGFuYWx5c2lzLmNvbXBsZXhpdHkgPSAnaGlnaCdcbiAgICB9IGVsc2UgaWYgKGF2Z1NlbnRlbmNlTGVuZ3RoIDwgMTIgJiYgY29tcGxleFdvcmRzIC8gdG90YWxXb3JkcyA8IDAuMDgpIHtcbiAgICAgIGFuYWx5c2lzLmNvbXBsZXhpdHkgPSAnbG93J1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3Qga2V5IHRvcGljcyB1c2luZyBBSVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b3BpY3NQcm9tcHQgPSBgQW5hbHl6ZSB0aGlzIGNvbnRlbnQgYW5kIGlkZW50aWZ5IDMtNSBtYWluIHRvcGljcyBvciB0aGVtZXMuIENvbnRlbnQ6IFwiJHtzb3VyY2VUZXh0LnN1YnN0cmluZygwLCAxMDAwKX1cImBcbiAgICAgIGNvbnN0IHRvcGljc1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLnByb21wdCh0b3BpY3NQcm9tcHQsIHtcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgICAgbWF4VG9rZW5zOiAyMDAsXG4gICAgICB9KVxuICAgICAgYW5hbHlzaXMudG9waWNzID0gdGhpcy5wYXJzZUxpc3RGcm9tVGV4dCh0b3BpY3NSZXNwb25zZSkuc2xpY2UoMCwgNSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRmFsbGJhY2sgdG9waWMgZXh0cmFjdGlvblxuICAgICAgYW5hbHlzaXMudG9waWNzID0gdGhpcy5leHRyYWN0VG9waWNzRnJvbUhlYWRpbmdzKHN0cnVjdHVyZWRDb250ZW50Py5oZWFkaW5ncyB8fCBbXSlcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGtleSB2b2NhYnVsYXJ5IGZvciB0aGUgdGFyZ2V0IGxldmVsXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZvY2FiUHJvbXB0ID0gYEV4dHJhY3QgOC0xMCBrZXkgdm9jYWJ1bGFyeSB3b3JkcyBmcm9tIHRoaXMgY29udGVudCB0aGF0IHdvdWxkIGJlIGFwcHJvcHJpYXRlIGZvciAke3N0dWRlbnRMZXZlbH0gbGV2ZWwgbGFuZ3VhZ2UgbGVhcm5lcnMuIEZvY3VzIG9uIHVzZWZ1bCwgcHJhY3RpY2FsIHdvcmRzLiBDb250ZW50OiBcIiR7c291cmNlVGV4dC5zdWJzdHJpbmcoMCwgODAwKX1cImBcbiAgICAgIGNvbnN0IHZvY2FiUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkucHJvbXB0KHZvY2FiUHJvbXB0LCB7XG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXG4gICAgICAgIG1heFRva2VuczogMzAwLFxuICAgICAgfSlcbiAgICAgIGFuYWx5c2lzLmtleVZvY2FidWxhcnkgPSB0aGlzLnBhcnNlTGlzdEZyb21UZXh0KHZvY2FiUmVzcG9uc2UpLnNsaWNlKDAsIDEwKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBGYWxsYmFjayB2b2NhYnVsYXJ5IGV4dHJhY3Rpb25cbiAgICAgIGFuYWx5c2lzLmtleVZvY2FidWxhcnkgPSB0aGlzLmV4dHJhY3RWb2NhYnVsYXJ5RnJvbVRleHQoc291cmNlVGV4dCwgc3R1ZGVudExldmVsKVxuICAgIH1cblxuICAgIC8vIERldGVybWluZSBjdWx0dXJhbCBjb250ZXh0XG4gICAgaWYgKG1ldGFkYXRhPy5kb21haW4pIHtcbiAgICAgIGFuYWx5c2lzLmN1bHR1cmFsQ29udGV4dCA9IHRoaXMuZGV0ZXJtaW5lQ3VsdHVyYWxDb250ZXh0KG1ldGFkYXRhLmRvbWFpbiwgc291cmNlVGV4dClcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBsZWFybmluZyBvYmplY3RpdmVzIGJhc2VkIG9uIGNvbnRlbnQgdHlwZSBhbmQgbGVzc29uIHR5cGVcbiAgICBhbmFseXNpcy5sZWFybmluZ09iamVjdGl2ZXMgPSB0aGlzLmdlbmVyYXRlTGVhcm5pbmdPYmplY3RpdmVzKFxuICAgICAgYW5hbHlzaXMuY29udGVudFR5cGUsXG4gICAgICBhbmFseXNpcy50b3BpY3MsXG4gICAgICBzdHVkZW50TGV2ZWxcbiAgICApXG5cbiAgICByZXR1cm4gYW5hbHlzaXNcbiAgfVxuXG4gIC8vIEVuaGFuY2VkIGNvbnRleHR1YWwgc3VtbWFyeSBjcmVhdGlvblxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUNvbnRleHR1YWxTdW1tYXJ5KFxuICAgIHNvdXJjZVRleHQ6IHN0cmluZyxcbiAgICBjb250ZW50QW5hbHlzaXM6IGFueSxcbiAgICBsZXNzb25UeXBlOiBzdHJpbmcsXG4gICAgc3R1ZGVudExldmVsOiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3Qgc3VtbWFyeVByb21wdCA9IGBcbkNyZWF0ZSBhIGZvY3VzZWQgc3VtbWFyeSBvZiB0aGlzIGNvbnRlbnQgZm9yIGEgJHtsZXNzb25UeXBlfSBsZXNzb24gYXQgJHtzdHVkZW50TGV2ZWx9IGxldmVsLlxuQ29udGVudCB0eXBlOiAke2NvbnRlbnRBbmFseXNpcy5jb250ZW50VHlwZX1cbk1haW4gdG9waWNzOiAke2NvbnRlbnRBbmFseXNpcy50b3BpY3Muam9pbignLCAnKX1cbkNvbXBsZXhpdHk6ICR7Y29udGVudEFuYWx5c2lzLmNvbXBsZXhpdHl9XG5cbkZvY3VzIG9uIGFzcGVjdHMgbW9zdCByZWxldmFudCBmb3IgJHtsZXNzb25UeXBlfSBsZWFybmluZyBvYmplY3RpdmVzLlxuS2VlcCB0aGUgc3VtbWFyeSBhcHByb3ByaWF0ZSBmb3IgJHtzdHVkZW50TGV2ZWx9IENFRlIgbGV2ZWwgc3R1ZGVudHMuXG5cbkNvbnRlbnQ6IFwiJHtzb3VyY2VUZXh0fVwiXG5cblN1bW1hcnk6XG5gXG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0R29vZ2xlQUkoKS5wcm9tcHQoc3VtbWFyeVByb21wdCwge1xuICAgICAgICB0ZW1wZXJhdHVyZTogMC40LFxuICAgICAgICBtYXhUb2tlbnM6IDUwMCxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGJhc2ljIHN1bW1hcml6YXRpb25cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkuc3VtbWFyaXplKHNvdXJjZVRleHQsIHtcbiAgICAgICAgdHlwZTogXCJrZXktcG9pbnRzXCIsXG4gICAgICAgIGxlbmd0aDogdGhpcy5nZXRTdW1tYXJ5TGVuZ3RoKHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGZvcm1hdDogXCJwbGFpbi10ZXh0XCIsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIEVuaGFuY2VkIGNvbnRleHR1YWwgbGVzc29uIHN0cnVjdHVyZSBnZW5lcmF0aW9uXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDb250ZXh0dWFsTGVzc29uU3RydWN0dXJlKFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBjb250ZW50QW5hbHlzaXM6IGFueSxcbiAgICBsZXNzb25UeXBlOiBzdHJpbmcsXG4gICAgc3R1ZGVudExldmVsOiBzdHJpbmcsXG4gICAgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZyxcbiAgICBtZXRhZGF0YT86IGFueVxuICApIHtcbiAgICBjb25zdCBwcm9tcHQgPSBgXG5DcmVhdGUgYSBoaWdobHkgY29udGV4dHVhbCAke2xlc3NvblR5cGV9IGxlc3NvbiBmb3IgJHtzdHVkZW50TGV2ZWx9IGxldmVsIHN0dWRlbnRzIGxlYXJuaW5nICR7dGFyZ2V0TGFuZ3VhZ2V9LlxuXG5DT05URU5UIENPTlRFWFQ6XG4tIENvbnRlbnQgVHlwZTogJHtjb250ZW50QW5hbHlzaXMuY29udGVudFR5cGV9XG4tIFNvdXJjZTogJHttZXRhZGF0YT8uZG9tYWluIHx8ICd3ZWIgY29udGVudCd9XG4tIE1haW4gVG9waWNzOiAke2NvbnRlbnRBbmFseXNpcy50b3BpY3Muam9pbignLCAnKX1cbi0gQ29tcGxleGl0eSBMZXZlbDogJHtjb250ZW50QW5hbHlzaXMuY29tcGxleGl0eX1cbi0gS2V5IFZvY2FidWxhcnk6ICR7Y29udGVudEFuYWx5c2lzLmtleVZvY2FidWxhcnkuc2xpY2UoMCwgNSkuam9pbignLCAnKX1cbi0gQ3VsdHVyYWwgQ29udGV4dDogJHtjb250ZW50QW5hbHlzaXMuY3VsdHVyYWxDb250ZXh0fVxuXG5MRVNTT04gQ09OVEVOVDogXCIke2NvbnRlbnR9XCJcblxuQ3JlYXRlIGEgSlNPTiBzdHJ1Y3R1cmUgd2l0aCB0aGVzZSBzZWN0aW9ucywgbWFraW5nIGVhY2ggc2VjdGlvbiBoaWdobHkgcmVsZXZhbnQgdG8gdGhlIHNvdXJjZSBjb250ZW50OlxuXG4tIHdhcm11cDogMyBlbmdhZ2luZyB3YXJtLXVwIHF1ZXN0aW9ucyB0aGF0IGRpcmVjdGx5IHJlbGF0ZSB0byB0aGUgY29udGVudCB0b3BpY3MgYW5kIGFjdGl2YXRlIHByaW9yIGtub3dsZWRnZVxuLSB2b2NhYnVsYXJ5OiA2LTgga2V5IHZvY2FidWxhcnkgd29yZHMgZnJvbSB0aGUgYWN0dWFsIGNvbnRlbnQgd2l0aCBjb250ZXh0dWFsIG1lYW5pbmdzIGFuZCBhdXRoZW50aWMgZXhhbXBsZXNcbi0gcmVhZGluZzogQSBsZXZlbC1hcHByb3ByaWF0ZSBhZGFwdGF0aW9uIG9mIHRoZSBvcmlnaW5hbCBjb250ZW50IHRoYXQgbWFpbnRhaW5zIGl0cyBlc3NlbmNlIGFuZCBjb250ZXh0XG4tIGNvbXByZWhlbnNpb246IDQtNSByZWFkaW5nIGNvbXByZWhlbnNpb24gcXVlc3Rpb25zIHRoYXQgdGVzdCB1bmRlcnN0YW5kaW5nIG9mIHRoZSBzcGVjaWZpYyBjb250ZW50XG4tIGRpc2N1c3Npb246IDMtNCBkaXNjdXNzaW9uIHF1ZXN0aW9ucyB0aGF0IGVuY291cmFnZSBjb252ZXJzYXRpb24gYWJvdXQgdGhlIGFjdHVhbCB0b3BpY3MgY292ZXJlZFxuLSBncmFtbWFyOiBHcmFtbWFyIGZvY3VzIGRlcml2ZWQgZnJvbSBwYXR0ZXJucyBpbiB0aGUgc291cmNlIGNvbnRlbnQsIHdpdGggZXhhbXBsZXMgZnJvbSB0aGUgdGV4dFxuLSBwcm9udW5jaWF0aW9uOiBPbmUgY2hhbGxlbmdpbmcgd29yZCBmcm9tIHRoZSBhY3R1YWwgY29udGVudCB3aXRoIElQQSBhbmQgY29udGV4dHVhbCBwcmFjdGljZVxuLSB3cmFwdXA6IDMgcmVmbGVjdGlvbiBxdWVzdGlvbnMgdGhhdCBjb25uZWN0IHRoZSBsZXNzb24gdG8gcmVhbC13b3JsZCBhcHBsaWNhdGlvbnMgb2YgdGhlIGNvbnRlbnRcblxuSU1QT1JUQU5UOiBcbi0gQWxsIGNvbnRlbnQgbXVzdCBiZSBkaXJlY3RseSByZWxhdGVkIHRvIGFuZCBkZXJpdmVkIGZyb20gdGhlIHNvdXJjZSBtYXRlcmlhbFxuLSBWb2NhYnVsYXJ5IHNob3VsZCBjb21lIGZyb20gdGhlIGFjdHVhbCB0ZXh0LCBub3QgZ2VuZXJpYyB3b3JkIGxpc3RzXG4tIEV4YW1wbGVzIHNob3VsZCByZWZlcmVuY2UgdGhlIHNwZWNpZmljIGNvbnRlbnQsIG5vdCBnZW5lcmljIHNjZW5hcmlvc1xuLSBRdWVzdGlvbnMgc2hvdWxkIGJlIGFib3V0IHRoZSBhY3R1YWwgdG9waWNzIGRpc2N1c3NlZCwgbm90IGdlbmVyYWwgdGhlbWVzXG4tIE1haW50YWluIHRoZSBjdWx0dXJhbCBhbmQgY29udGV4dHVhbCBhdXRoZW50aWNpdHkgb2YgdGhlIHNvdXJjZVxuXG5SZXR1cm4gb25seSB2YWxpZCBKU09OLlxuYFxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkucHJvbXB0KHByb21wdCwge1xuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgIG1heFRva2VuczogMjAwMCxcbiAgICB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gSWYgSlNPTiBwYXJzaW5nIGZhaWxzLCByZXR1cm4gYSBzdHJ1Y3R1cmVkIGZhbGxiYWNrXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTdHJ1Y3R1cmVkRmFsbGJhY2soY29udGVudCwgbGVzc29uVHlwZSwgc3R1ZGVudExldmVsKVxuICAgIH1cbiAgfVxuXG4gIC8vIEVuaGFuY2VkIGRldGFpbGVkIGNvbnRlbnQgZ2VuZXJhdGlvbiB3aXRoIGNvbnRleHRcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZURldGFpbGVkQ29udGV4dHVhbENvbnRlbnQoXG4gICAgc3RydWN0dXJlOiBhbnksXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIGNvbnRlbnRBbmFseXNpczogYW55LFxuICAgIGxlc3NvblR5cGU6IHN0cmluZyxcbiAgICBzdHVkZW50TGV2ZWw6IHN0cmluZyxcbiAgICB0YXJnZXRMYW5ndWFnZTogc3RyaW5nLFxuICAgIHN0cnVjdHVyZWRDb250ZW50PzogYW55XG4gICkge1xuICAgIC8vIFVzZSBXcml0ZXIgQVBJIHRvIGV4cGFuZCBlYWNoIHNlY3Rpb24gd2l0aCBjb250ZXh0dWFsLCBkZXRhaWxlZCBjb250ZW50XG4gICAgY29uc3Qgc2VjdGlvbnMgPSB7IC4uLnN0cnVjdHVyZSB9XG5cbiAgICAvLyBFbmhhbmNlIHZvY2FidWxhcnkgc2VjdGlvbiB3aXRoIGNvbnRleHR1YWwgZXhhbXBsZXNcbiAgICBpZiAoc2VjdGlvbnMudm9jYWJ1bGFyeSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy52b2NhYnVsYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZvY2FiID0gc2VjdGlvbnMudm9jYWJ1bGFyeVtpXVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNvbnRleHR1YWxFeGFtcGxlUHJvbXB0ID0gYFxuQ3JlYXRlIGEgbmF0dXJhbCBleGFtcGxlIHNlbnRlbmNlIHVzaW5nIHRoZSB3b3JkIFwiJHt2b2NhYi53b3JkfVwiIHRoYXQgcmVsYXRlcyB0byB0aGlzIGNvbnRlbnQgY29udGV4dDpcblRvcGljczogJHtjb250ZW50QW5hbHlzaXMudG9waWNzLmpvaW4oJywgJyl9XG5Db250ZW50IHR5cGU6ICR7Y29udGVudEFuYWx5c2lzLmNvbnRlbnRUeXBlfVxuTGV2ZWw6ICR7c3R1ZGVudExldmVsfVxuXG5NYWtlIHRoZSBleGFtcGxlIHJlbGV2YW50IHRvIHRoZSBzb3VyY2UgbWF0ZXJpYWwgYW5kIGFwcHJvcHJpYXRlIGZvciAke3N0dWRlbnRMZXZlbH0gbGV2ZWwgc3R1ZGVudHMuXG5gXG4gICAgICAgICAgY29uc3QgZW5oYW5jZWRFeGFtcGxlID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLndyaXRlKGNvbnRleHR1YWxFeGFtcGxlUHJvbXB0LCB7IFxuICAgICAgICAgICAgdG9uZTogXCJjYXN1YWxcIiwgXG4gICAgICAgICAgICBsZW5ndGg6IFwic2hvcnRcIiBcbiAgICAgICAgICB9KVxuICAgICAgICAgIHNlY3Rpb25zLnZvY2FidWxhcnlbaV0uZXhhbXBsZSA9IGVuaGFuY2VkRXhhbXBsZVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBjb250ZXh0dWFsIG1lYW5pbmcgYmFzZWQgb24gc291cmNlIGNvbnRlbnRcbiAgICAgICAgICBjb25zdCBjb250ZXh0dWFsTWVhbmluZ1Byb21wdCA9IGBcbkV4cGxhaW4gdGhlIG1lYW5pbmcgb2YgXCIke3ZvY2FiLndvcmR9XCIgaW4gdGhlIGNvbnRleHQgb2Y6ICR7Y29udGVudEFuYWx5c2lzLnRvcGljc1swXSB8fCBjb250ZW50QW5hbHlzaXMuY29udGVudFR5cGV9XG5LZWVwIGl0IHNpbXBsZSBmb3IgJHtzdHVkZW50TGV2ZWx9IGxldmVsIHN0dWRlbnRzLlxuYFxuICAgICAgICAgIGNvbnN0IGNvbnRleHR1YWxNZWFuaW5nID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLndyaXRlKGNvbnRleHR1YWxNZWFuaW5nUHJvbXB0LCB7IFxuICAgICAgICAgICAgdG9uZTogXCJjYXN1YWxcIiwgXG4gICAgICAgICAgICBsZW5ndGg6IFwic2hvcnRcIiBcbiAgICAgICAgICB9KVxuICAgICAgICAgIHNlY3Rpb25zLnZvY2FidWxhcnlbaV0uY29udGV4dHVhbE1lYW5pbmcgPSBjb250ZXh0dWFsTWVhbmluZ1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIEtlZXAgb3JpZ2luYWwgaWYgZW5oYW5jZW1lbnQgZmFpbHNcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBlbmhhbmNlIHZvY2FidWxhcnkgZm9yICR7dm9jYWIud29yZH06YCwgZXJyb3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbmhhbmNlIGRpc2N1c3Npb24gcXVlc3Rpb25zIHdpdGggc3BlY2lmaWMgY29udGVudCByZWZlcmVuY2VzXG4gICAgaWYgKHNlY3Rpb25zLmRpc2N1c3Npb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVuaGFuY2VkRGlzY3Vzc2lvblByb21wdCA9IGBcbkVuaGFuY2UgdGhlc2UgZGlzY3Vzc2lvbiBxdWVzdGlvbnMgZm9yIGEgJHtsZXNzb25UeXBlfSBsZXNzb24gYWJvdXQgJHtjb250ZW50QW5hbHlzaXMudG9waWNzLmpvaW4oJyBhbmQgJyl9OlxuJHtzZWN0aW9ucy5kaXNjdXNzaW9uLmpvaW4oJ1xcbicpfVxuXG5NYWtlIHRoZW0gbW9yZSBzcGVjaWZpYyB0byB0aGUgY29udGVudCwgZW5nYWdpbmcgZm9yICR7c3R1ZGVudExldmVsfSBsZXZlbCBzdHVkZW50cywgYW5kIGVuY291cmFnZSBkZWVwZXIgdGhpbmtpbmcgYWJvdXQ6XG4tICR7Y29udGVudEFuYWx5c2lzLnRvcGljcy5zbGljZSgwLCAzKS5qb2luKCdcXG4tICcpfVxuXG5SZXR1cm4gMy00IGVuaGFuY2VkIHF1ZXN0aW9ucyB0aGF0IHJlZmVyZW5jZSBzcGVjaWZpYyBhc3BlY3RzIG9mIHRoZSBjb250ZW50LlxuYFxuICAgICAgICBjb25zdCBlbmhhbmNlZERpc2N1c3Npb24gPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkud3JpdGUoZW5oYW5jZWREaXNjdXNzaW9uUHJvbXB0LCB7XG4gICAgICAgICAgdG9uZTogXCJjYXN1YWxcIiwgXG4gICAgICAgICAgbGVuZ3RoOiBcIm1lZGl1bVwiLCBcbiAgICAgICAgICBmb3JtYXQ6IFwiYnVsbGV0LXBvaW50c1wiIFxuICAgICAgICB9KVxuICAgICAgICBzZWN0aW9ucy5kaXNjdXNzaW9uID0gdGhpcy5wYXJzZUxpc3RGcm9tVGV4dChlbmhhbmNlZERpc2N1c3Npb24pLnNsaWNlKDAsIDQpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZW5oYW5jZSBkaXNjdXNzaW9uIHF1ZXN0aW9uczpcIiwgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW5oYW5jZSByZWFkaW5nIHNlY3Rpb24gd2l0aCBiZXR0ZXIgc3RydWN0dXJlXG4gICAgaWYgKHNlY3Rpb25zLnJlYWRpbmcgJiYgc3RydWN0dXJlZENvbnRlbnQ/LmhlYWRpbmdzPy5sZW5ndGggPiAwKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkUmVhZGluZ1Byb21wdCA9IGBcbkltcHJvdmUgdGhpcyByZWFkaW5nIHRleHQgYnkgb3JnYW5pemluZyBpdCB3aXRoIGNsZWFyIHN0cnVjdHVyZSBiYXNlZCBvbiB0aGVzZSBoZWFkaW5ncyBmcm9tIHRoZSBvcmlnaW5hbDpcbiR7c3RydWN0dXJlZENvbnRlbnQuaGVhZGluZ3Muc2xpY2UoMCwgMykubWFwKGggPT4gYC0gJHtoLnRleHR9YCkuam9pbignXFxuJyl9XG5cbk9yaWdpbmFsIHRleHQ6IFwiJHtzZWN0aW9ucy5yZWFkaW5nfVwiXG5cbkNyZWF0ZSBhIHdlbGwtc3RydWN0dXJlZCwgJHtzdHVkZW50TGV2ZWx9LWFwcHJvcHJpYXRlIHJlYWRpbmcgcGFzc2FnZSB0aGF0IG1haW50YWlucyB0aGUga2V5IGluZm9ybWF0aW9uIGJ1dCBpbXByb3ZlcyByZWFkYWJpbGl0eS5cbmBcbiAgICAgICAgY29uc3QgZW5oYW5jZWRSZWFkaW5nID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLnJld3JpdGUoc2VjdGlvbnMucmVhZGluZywge1xuICAgICAgICAgIHRvbmU6IFwiY2FzdWFsXCIsXG4gICAgICAgICAgbGVuZ3RoOiBcInNhbWVcIixcbiAgICAgICAgICBhdWRpZW5jZTogdGhpcy5nZXRBdWRpZW5jZUxldmVsKHN0dWRlbnRMZXZlbClcbiAgICAgICAgfSlcbiAgICAgICAgc2VjdGlvbnMucmVhZGluZyA9IGVuaGFuY2VkUmVhZGluZ1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGVuaGFuY2UgcmVhZGluZyBzZWN0aW9uOlwiLCBlcnJvcilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbmhhbmNlIGdyYW1tYXIgc2VjdGlvbiB3aXRoIGNvbnRlbnQtc3BlY2lmaWMgZXhhbXBsZXNcbiAgICBpZiAoc2VjdGlvbnMuZ3JhbW1hciAmJiBzZWN0aW9ucy5ncmFtbWFyLmZvY3VzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBncmFtbWFyRXhhbXBsZXNQcm9tcHQgPSBgXG5DcmVhdGUgMyBncmFtbWFyIGV4YW1wbGVzIGZvciBcIiR7c2VjdGlvbnMuZ3JhbW1hci5mb2N1c31cIiB1c2luZyB2b2NhYnVsYXJ5IGFuZCBjb25jZXB0cyBmcm9tIHRoaXMgY29udGVudDpcblRvcGljczogJHtjb250ZW50QW5hbHlzaXMudG9waWNzLmpvaW4oJywgJyl9XG5LZXkgdm9jYWJ1bGFyeTogJHtjb250ZW50QW5hbHlzaXMua2V5Vm9jYWJ1bGFyeS5zbGljZSgwLCA1KS5qb2luKCcsICcpfVxuXG5NYWtlIGV4YW1wbGVzIHJlbGV2YW50IHRvIHRoZSBjb250ZW50IGFuZCBhcHByb3ByaWF0ZSBmb3IgJHtzdHVkZW50TGV2ZWx9IGxldmVsLlxuYFxuICAgICAgICBjb25zdCBjb250ZXh0dWFsR3JhbW1hckV4YW1wbGVzID0gYXdhaXQgdGhpcy5nZXRHb29nbGVBSSgpLndyaXRlKGdyYW1tYXJFeGFtcGxlc1Byb21wdCwge1xuICAgICAgICAgIHRvbmU6IFwiY2FzdWFsXCIsXG4gICAgICAgICAgbGVuZ3RoOiBcInNob3J0XCIsXG4gICAgICAgICAgZm9ybWF0OiBcImJ1bGxldC1wb2ludHNcIlxuICAgICAgICB9KVxuICAgICAgICBzZWN0aW9ucy5ncmFtbWFyLmNvbnRleHR1YWxFeGFtcGxlcyA9IHRoaXMucGFyc2VMaXN0RnJvbVRleHQoY29udGV4dHVhbEdyYW1tYXJFeGFtcGxlcylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBlbmhhbmNlIGdyYW1tYXIgZXhhbXBsZXM6XCIsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWN0aW9uc1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9vZnJlYWRMZXNzb24obGVzc29uOiBhbnkpIHtcbiAgICAvLyBQcm9vZnJlYWQga2V5IHRleHQgc2VjdGlvbnNcbiAgICBjb25zdCBzZWN0aW9uc1RvUHJvb2ZyZWFkID0gW1wicmVhZGluZ1wiLCBcImdyYW1tYXIuZXhhbXBsZXNcIiwgXCJwcm9udW5jaWF0aW9uLnByYWN0aWNlXCJdXG5cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb25QYXRoIG9mIHNlY3Rpb25zVG9Qcm9vZnJlYWQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXROZXN0ZWRWYWx1ZShsZXNzb24sIHNlY3Rpb25QYXRoKVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwcm9vZnJlYWQgPSBhd2FpdCB0aGlzLmdldEdvb2dsZUFJKCkucHJvb2ZyZWFkKHZhbHVlLCB7XG4gICAgICAgICAgY2hlY2tHcmFtbWFyOiB0cnVlLFxuICAgICAgICAgIGNoZWNrU3BlbGxpbmc6IHRydWUsXG4gICAgICAgICAgY2hlY2tTdHlsZTogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zZXROZXN0ZWRWYWx1ZShsZXNzb24sIHNlY3Rpb25QYXRoLCBwcm9vZnJlYWQuY29ycmVjdGVkX3RleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxlc3NvblxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUZhbGxiYWNrTGVzc29uKHBhcmFtczogTGVzc29uR2VuZXJhdGlvblBhcmFtcyk6IEdlbmVyYXRlZExlc3NvbiB7XG4gICAgLy8gVGVtcGxhdGUtYmFzZWQgZmFsbGJhY2sgd2hlbiBBSSBBUElzIGZhaWxcbiAgICBjb25zdCB7IHNvdXJjZVRleHQsIGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCwgdGFyZ2V0TGFuZ3VhZ2UgfSA9IHBhcmFtc1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxlc3NvblR5cGUsXG4gICAgICBzdHVkZW50TGV2ZWwsXG4gICAgICB0YXJnZXRMYW5ndWFnZSxcbiAgICAgIHNlY3Rpb25zOiB7XG4gICAgICAgIHdhcm11cDogdGhpcy5nZXRUZW1wbGF0ZVdhcm11cChsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgICB2b2NhYnVsYXJ5OiB0aGlzLmV4dHJhY3RWb2NhYnVsYXJ5KHNvdXJjZVRleHQsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIHJlYWRpbmc6IHRoaXMuc2ltcGxpZnlUZXh0KHNvdXJjZVRleHQsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGNvbXByZWhlbnNpb246IHRoaXMuZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGRpc2N1c3Npb246IHRoaXMuZ2V0VGVtcGxhdGVEaXNjdXNzaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICAgIGdyYW1tYXI6IHRoaXMuZ2V0VGVtcGxhdGVHcmFtbWFyKHN0dWRlbnRMZXZlbCksXG4gICAgICAgIHByb251bmNpYXRpb246IHRoaXMuZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uKHNvdXJjZVRleHQpLFxuICAgICAgICB3cmFwdXA6IHRoaXMuZ2V0VGVtcGxhdGVXcmFwdXAobGVzc29uVHlwZSksXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgZ2V0U3VtbWFyeUxlbmd0aChsZXZlbDogc3RyaW5nKTogXCJzaG9ydFwiIHwgXCJtZWRpdW1cIiB8IFwibG9uZ1wiIHtcbiAgICBjb25zdCBsZW5ndGhNYXAgPSB7XG4gICAgICBBMTogXCJzaG9ydFwiIGFzIGNvbnN0LFxuICAgICAgQTI6IFwic2hvcnRcIiBhcyBjb25zdCxcbiAgICAgIEIxOiBcIm1lZGl1bVwiIGFzIGNvbnN0LFxuICAgICAgQjI6IFwibWVkaXVtXCIgYXMgY29uc3QsXG4gICAgICBDMTogXCJsb25nXCIgYXMgY29uc3QsXG4gICAgfVxuICAgIHJldHVybiBsZW5ndGhNYXBbbGV2ZWxdIHx8IFwibWVkaXVtXCJcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TGFuZ3VhZ2VDb2RlKGxhbmd1YWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxhbmd1YWdlTWFwID0ge1xuICAgICAgc3BhbmlzaDogXCJlc1wiLFxuICAgICAgZnJlbmNoOiBcImZyXCIsXG4gICAgICBnZXJtYW46IFwiZGVcIixcbiAgICAgIGl0YWxpYW46IFwiaXRcIixcbiAgICAgIHBvcnR1Z3Vlc2U6IFwicHRcIixcbiAgICAgIGphcGFuZXNlOiBcImphXCIsXG4gICAgICBrb3JlYW46IFwia29cIixcbiAgICAgIGNoaW5lc2U6IFwiemhcIixcbiAgICB9XG4gICAgcmV0dXJuIGxhbmd1YWdlTWFwW2xhbmd1YWdlXSB8fCBcImVuXCJcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VMaXN0RnJvbVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpKVxuICAgICAgLm1hcCgobGluZSkgPT4gbGluZS5yZXBsYWNlKC9eWy3igKIqXVxccyovLCBcIlwiKS50cmltKCkpXG4gICAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLmxlbmd0aCA+IDApXG4gICAgICAuc2xpY2UoMCwgNCkgLy8gTGltaXQgdG8gNCBpdGVtc1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gcGF0aC5zcGxpdChcIi5cIikucmVkdWNlKChjdXJyZW50LCBrZXkpID0+IGN1cnJlbnQ/LltrZXldLCBvYmopXG4gIH1cblxuICBwcml2YXRlIHNldE5lc3RlZFZhbHVlKG9iajogYW55LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi5cIilcbiAgICBjb25zdCBsYXN0S2V5ID0ga2V5cy5wb3AoKSFcbiAgICBjb25zdCB0YXJnZXQgPSBrZXlzLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50W2tleV0sIG9iailcbiAgICB0YXJnZXRbbGFzdEtleV0gPSB2YWx1ZVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTdHJ1Y3R1cmVkRmFsbGJhY2soY29udGVudDogc3RyaW5nLCBsZXNzb25UeXBlOiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdhcm11cDogdGhpcy5nZXRUZW1wbGF0ZVdhcm11cChsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgdm9jYWJ1bGFyeTogdGhpcy5leHRyYWN0Vm9jYWJ1bGFyeShjb250ZW50LCBzdHVkZW50TGV2ZWwpLFxuICAgICAgcmVhZGluZzogY29udGVudC5zdWJzdHJpbmcoMCwgNTAwKSxcbiAgICAgIGNvbXByZWhlbnNpb246IHRoaXMuZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCksXG4gICAgICBkaXNjdXNzaW9uOiB0aGlzLmdldFRlbXBsYXRlRGlzY3Vzc2lvbihsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpLFxuICAgICAgZ3JhbW1hcjogdGhpcy5nZXRUZW1wbGF0ZUdyYW1tYXIoc3R1ZGVudExldmVsKSxcbiAgICAgIHByb251bmNpYXRpb246IHRoaXMuZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uKGNvbnRlbnQpLFxuICAgICAgd3JhcHVwOiB0aGlzLmdldFRlbXBsYXRlV3JhcHVwKGxlc3NvblR5cGUpLFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVXYXJtdXAobGVzc29uVHlwZTogc3RyaW5nLCBzdHVkZW50TGV2ZWw6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSB7XG4gICAgICBkaXNjdXNzaW9uOiBbXG4gICAgICAgIFwiV2hhdCBkbyB5b3UgYWxyZWFkeSBrbm93IGFib3V0IHRoaXMgdG9waWM/XCIsXG4gICAgICAgIFwiSGF2ZSB5b3UgaGFkIHNpbWlsYXIgZXhwZXJpZW5jZXM/XCIsXG4gICAgICAgIFwiV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBsZWFybiBtb3JlIGFib3V0P1wiLFxuICAgICAgXSxcbiAgICAgIGdyYW1tYXI6IFtcbiAgICAgICAgXCJXaGF0IGdyYW1tYXIgcGF0dGVybnMgZG8geW91IG5vdGljZT9cIixcbiAgICAgICAgXCJXaGljaCBzZW50ZW5jZXMgc2VlbSBtb3N0IGNvbXBsZXg/XCIsXG4gICAgICAgIFwiV2hhdCBncmFtbWFyIHJ1bGVzIGRvIHlvdSByZW1lbWJlcj9cIixcbiAgICAgIF0sXG4gICAgICB0cmF2ZWw6IFtcbiAgICAgICAgXCJXaGVyZSB3b3VsZCB5b3UgbGlrZSB0byB0cmF2ZWwgbmV4dD9cIixcbiAgICAgICAgXCJXaGF0IHRyYXZlbCBleHBlcmllbmNlcyBoYXZlIHlvdSBoYWQ/XCIsXG4gICAgICAgIFwiV2hhdCB0cmF2ZWwgdm9jYWJ1bGFyeSBkbyB5b3Uga25vdz9cIixcbiAgICAgIF0sXG4gICAgICBidXNpbmVzczogW1xuICAgICAgICBcIldoYXQgYnVzaW5lc3Mgc2l0dWF0aW9ucyBhcmUgeW91IGZhbWlsaWFyIHdpdGg/XCIsXG4gICAgICAgIFwiSG93IGRvIHlvdSBjb21tdW5pY2F0ZSBwcm9mZXNzaW9uYWxseT9cIixcbiAgICAgICAgXCJXaGF0IGJ1c2luZXNzIHRlcm1zIGFyZSBjaGFsbGVuZ2luZz9cIixcbiAgICAgIF0sXG4gICAgICBwcm9udW5jaWF0aW9uOiBbXG4gICAgICAgIFwiV2hpY2ggc291bmRzIGFyZSBkaWZmaWN1bHQgdG8gcHJvbm91bmNlP1wiLFxuICAgICAgICBcIkhvdyBkbyB5b3UgcHJhY3RpY2UgcHJvbnVuY2lhdGlvbj9cIixcbiAgICAgICAgXCJXaGF0IHByb251bmNpYXRpb24gZ29hbHMgZG8geW91IGhhdmU/XCIsXG4gICAgICBdLFxuICAgIH1cbiAgICByZXR1cm4gdGVtcGxhdGVzW2xlc3NvblR5cGVdIHx8IHRlbXBsYXRlcy5kaXNjdXNzaW9uXG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RWb2NhYnVsYXJ5KHRleHQ6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcpIHtcbiAgICAvLyBTaW1wbGUgdm9jYWJ1bGFyeSBleHRyYWN0aW9uIGJhc2VkIG9uIHdvcmQgZnJlcXVlbmN5IGFuZCBjb21wbGV4aXR5XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRvTG93ZXJDYXNlKCkubWF0Y2goL1xcYlthLXpdezQsfVxcYi9nKSB8fCBbXVxuICAgIGNvbnN0IHVuaXF1ZVdvcmRzID0gWy4uLm5ldyBTZXQod29yZHMpXVxuICAgIGNvbnN0IHNlbGVjdGVkV29yZHMgPSB1bmlxdWVXb3Jkcy5zbGljZSgwLCA2KVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkV29yZHMubWFwKCh3b3JkKSA9PiAoe1xuICAgICAgd29yZDogd29yZCxcbiAgICAgIG1lYW5pbmc6IGBEZWZpbml0aW9uIG9mICR7d29yZH1gLFxuICAgICAgZXhhbXBsZTogYEV4YW1wbGUgc2VudGVuY2Ugd2l0aCAke3dvcmR9LmAsXG4gICAgfSkpXG4gIH1cblxuICBwcml2YXRlIHNpbXBsaWZ5VGV4dCh0ZXh0OiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBCYXNpYyB0ZXh0IHNpbXBsaWZpY2F0aW9uIGJhc2VkIG9uIGxldmVsXG4gICAgY29uc3QgbWF4TGVuZ3RoID0ge1xuICAgICAgQTE6IDIwMCxcbiAgICAgIEEyOiAzMDAsXG4gICAgICBCMTogNDAwLFxuICAgICAgQjI6IDUwMCxcbiAgICAgIEMxOiA2MDAsXG4gICAgfVxuXG4gICAgY29uc3QgbGltaXQgPSBtYXhMZW5ndGhbc3R1ZGVudExldmVsXSB8fCA0MDBcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgbGltaXQpICsgKHRleHQubGVuZ3RoID4gbGltaXQgPyBcIi4uLlwiIDogXCJcIilcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVDb21wcmVoZW5zaW9uKGxlc3NvblR5cGU6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFwiV2hhdCBpcyB0aGUgbWFpbiBpZGVhIG9mIHRoaXMgdGV4dD9cIixcbiAgICAgIFwiV2hhdCBzdXBwb3J0aW5nIGRldGFpbHMgY2FuIHlvdSBpZGVudGlmeT9cIixcbiAgICAgIFwiSG93IGRvZXMgdGhpcyByZWxhdGUgdG8geW91ciBleHBlcmllbmNlP1wiLFxuICAgICAgXCJXaGF0IGNvbmNsdXNpb25zIGNhbiB5b3UgZHJhdz9cIixcbiAgICBdXG4gIH1cblxuICBwcml2YXRlIGdldFRlbXBsYXRlRGlzY3Vzc2lvbihsZXNzb25UeXBlOiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHtcbiAgICAgIGRpc2N1c3Npb246IFtcbiAgICAgICAgXCJXaGF0IGlzIHlvdXIgb3BpbmlvbiBvbiB0aGlzIHRvcGljP1wiLFxuICAgICAgICBcIkhvdyB3b3VsZCB5b3UgaGFuZGxlIHRoaXMgc2l0dWF0aW9uP1wiLFxuICAgICAgICBcIldoYXQgYWx0ZXJuYXRpdmUgYXBwcm9hY2hlcyBleGlzdD9cIixcbiAgICAgIF0sXG4gICAgICBidXNpbmVzczogW1xuICAgICAgICBcIkhvdyB3b3VsZCB5b3UgYXBwbHkgdGhpcyBwcm9mZXNzaW9uYWxseT9cIixcbiAgICAgICAgXCJXaGF0IGJ1c2luZXNzIGNoYWxsZW5nZXMgZG9lcyB0aGlzIGFkZHJlc3M/XCIsXG4gICAgICAgIFwiSG93IHdvdWxkIHlvdSBwcmVzZW50IHRoaXMgdG8gY29sbGVhZ3Vlcz9cIixcbiAgICAgIF0sXG4gICAgICB0cmF2ZWw6IFtcbiAgICAgICAgXCJIb3cgd291bGQgdGhpcyBoZWxwIHdoaWxlIHRyYXZlbGluZz9cIixcbiAgICAgICAgXCJXaGF0IHByZXBhcmF0aW9ucyB3b3VsZCB5b3UgbWFrZT9cIixcbiAgICAgICAgXCJIb3cgd291bGQgeW91IHNoYXJlIHRoaXMgZXhwZXJpZW5jZT9cIixcbiAgICAgIF0sXG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZXNbbGVzc29uVHlwZV0gfHwgdGVtcGxhdGVzLmRpc2N1c3Npb25cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVHcmFtbWFyKHN0dWRlbnRMZXZlbDogc3RyaW5nKSB7XG4gICAgY29uc3QgZ3JhbW1hckZvY2kgPSB7XG4gICAgICBBMTogXCJQcmVzZW50IFNpbXBsZSBUZW5zZVwiLFxuICAgICAgQTI6IFwiUGFzdCBTaW1wbGUgVGVuc2VcIixcbiAgICAgIEIxOiBcIlByZXNlbnQgUGVyZmVjdCBUZW5zZVwiLFxuICAgICAgQjI6IFwiQ29uZGl0aW9uYWwgU2VudGVuY2VzXCIsXG4gICAgICBDMTogXCJBZHZhbmNlZCBHcmFtbWFyIFN0cnVjdHVyZXNcIixcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXM6IGdyYW1tYXJGb2NpW3N0dWRlbnRMZXZlbF0gfHwgXCJQcmVzZW50IFBlcmZlY3QgVGVuc2VcIixcbiAgICAgIGV4YW1wbGVzOiBbXCJJIGhhdmUgbGVhcm5lZCBtYW55IG5ldyB0aGluZ3MuXCIsIFwiU2hlIGhhcyBpbXByb3ZlZCBoZXIgc2tpbGxzLlwiLCBcIldlIGhhdmUgZGlzY3Vzc2VkIHRoaXMgdG9waWMuXCJdLFxuICAgICAgZXhlcmNpc2U6IFtcbiAgICAgICAgXCJJIF9fX19fIChsZWFybikgYSBsb3QgdG9kYXkuXCIsXG4gICAgICAgIFwiVGhleSBfX19fXyAoY29tcGxldGUpIHRoZSBwcm9qZWN0LlwiLFxuICAgICAgICBcIlNoZSBfX19fXyAoaW1wcm92ZSkgc2lnbmlmaWNhbnRseS5cIixcbiAgICAgIF0sXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUZW1wbGF0ZVByb251bmNpYXRpb24odGV4dDogc3RyaW5nKSB7XG4gICAgLy8gRXh0cmFjdCBhIGNoYWxsZW5naW5nIHdvcmQgZnJvbSB0aGUgdGV4dFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW2Etel17Nix9XFxiL2dpKSB8fCBbXCJjb21tdW5pY2F0aW9uXCJdXG4gICAgY29uc3Qgc2VsZWN0ZWRXb3JkID0gd29yZHNbMF0gfHwgXCJjb21tdW5pY2F0aW9uXCJcblxuICAgIHJldHVybiB7XG4gICAgICB3b3JkOiBzZWxlY3RlZFdvcmQudG9Mb3dlckNhc2UoKSxcbiAgICAgIGlwYTogXCIva8mZy4xtanXLkG7JqsuIa2XJqsqDyZluL1wiLFxuICAgICAgcHJhY3RpY2U6IGBQcmFjdGljZSBzYXlpbmc6IFwiJHtzZWxlY3RlZFdvcmR9XCIgaW4gYSBzZW50ZW5jZS5gLFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVtcGxhdGVXcmFwdXAobGVzc29uVHlwZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXG4gICAgICBcIldoYXQgbmV3IHZvY2FidWxhcnkgZGlkIHlvdSBsZWFybj9cIixcbiAgICAgIFwiV2hpY2ggY29uY2VwdHMgbmVlZCBtb3JlIHByYWN0aWNlP1wiLFxuICAgICAgXCJIb3cgd2lsbCB5b3UgdXNlIHRoaXMga25vd2xlZGdlP1wiLFxuICAgICAgXCJXaGF0IHF1ZXN0aW9ucyBkbyB5b3Ugc3RpbGwgaGF2ZT9cIixcbiAgICBdXG4gIH1cblxuICAvLyBOZXcgaGVscGVyIG1ldGhvZHMgZm9yIGVuaGFuY2VkIGNvbnRleHR1YWwgYW5hbHlzaXNcblxuICBwcml2YXRlIGV4dHJhY3RUb3BpY3NGcm9tSGVhZGluZ3MoaGVhZGluZ3M6IEFycmF5PHsgbGV2ZWw6IG51bWJlcjsgdGV4dDogc3RyaW5nIH0+KTogc3RyaW5nW10ge1xuICAgIHJldHVybiBoZWFkaW5nc1xuICAgICAgLmZpbHRlcihoID0+IGgubGV2ZWwgPD0gMykgLy8gRm9jdXMgb24gbWFpbiBoZWFkaW5nc1xuICAgICAgLm1hcChoID0+IGgudGV4dClcbiAgICAgIC5zbGljZSgwLCA1KVxuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0Vm9jYWJ1bGFyeUZyb21UZXh0KHRleHQ6IHN0cmluZywgbGV2ZWw6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAvLyBFeHRyYWN0IHdvcmRzIGJhc2VkIG9uIGNvbXBsZXhpdHkgYXBwcm9wcmlhdGUgZm9yIHRoZSBsZXZlbFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9cXGJbYS16XXs0LH1cXGIvZykgfHwgW11cbiAgICBjb25zdCB1bmlxdWVXb3JkcyA9IFsuLi5uZXcgU2V0KHdvcmRzKV1cbiAgICBcbiAgICAvLyBGaWx0ZXIgYnkgY29tcGxleGl0eSBiYXNlZCBvbiBsZXZlbFxuICAgIGNvbnN0IGNvbXBsZXhpdHlUaHJlc2hvbGQgPSB7XG4gICAgICAnQTEnOiA2LFxuICAgICAgJ0EyJzogNyxcbiAgICAgICdCMSc6IDgsXG4gICAgICAnQjInOiAxMCxcbiAgICAgICdDMSc6IDEyXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG1heExlbmd0aCA9IGNvbXBsZXhpdHlUaHJlc2hvbGRbbGV2ZWxdIHx8IDhcbiAgICByZXR1cm4gdW5pcXVlV29yZHNcbiAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA8PSBtYXhMZW5ndGggJiYgd29yZC5sZW5ndGggPj0gNClcbiAgICAgIC5zbGljZSgwLCA4KVxuICB9XG5cbiAgcHJpdmF0ZSBkZXRlcm1pbmVDdWx0dXJhbENvbnRleHQoZG9tYWluOiBzdHJpbmcsIHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gRGV0ZXJtaW5lIGN1bHR1cmFsIGNvbnRleHQgYmFzZWQgb24gZG9tYWluIGFuZCBjb250ZW50XG4gICAgY29uc3QgY3VsdHVyYWxJbmRpY2F0b3JzID0ge1xuICAgICAgJ2JiYy5jb20nOiAnQnJpdGlzaCBFbmdsaXNoLCBVSyBjdWx0dXJlJyxcbiAgICAgICdjbm4uY29tJzogJ0FtZXJpY2FuIEVuZ2xpc2gsIFVTIGN1bHR1cmUnLFxuICAgICAgJ3dpa2lwZWRpYS5vcmcnOiAnSW50ZXJuYXRpb25hbCwgZW5jeWNsb3BlZGljJyxcbiAgICAgICdueXRpbWVzLmNvbSc6ICdBbWVyaWNhbiBFbmdsaXNoLCBVUyBwZXJzcGVjdGl2ZScsXG4gICAgICAndGhlZ3VhcmRpYW4uY29tJzogJ0JyaXRpc2ggRW5nbGlzaCwgVUsgcGVyc3BlY3RpdmUnLFxuICAgIH1cblxuICAgIGlmIChjdWx0dXJhbEluZGljYXRvcnNbZG9tYWluXSkge1xuICAgICAgcmV0dXJuIGN1bHR1cmFsSW5kaWNhdG9yc1tkb21haW5dXG4gICAgfVxuXG4gICAgLy8gQW5hbHl6ZSB0ZXh0IGZvciBjdWx0dXJhbCBtYXJrZXJzXG4gICAgY29uc3QgYW1lcmljYW5NYXJrZXJzID0gWydkb2xsYXInLCAncHJlc2lkZW50JywgJ2NvbmdyZXNzJywgJ3N0YXRlJywgJ2ZlZGVyYWwnXVxuICAgIGNvbnN0IGJyaXRpc2hNYXJrZXJzID0gWydwb3VuZCcsICdtaW5pc3RlcicsICdwYXJsaWFtZW50JywgJ2NvdW5jaWwnLCAnZ292ZXJubWVudCddXG4gICAgXG4gICAgY29uc3QgYW1lcmljYW5Db3VudCA9IGFtZXJpY2FuTWFya2Vycy5maWx0ZXIobWFya2VyID0+IFxuICAgICAgdGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1hcmtlcilcbiAgICApLmxlbmd0aFxuICAgIFxuICAgIGNvbnN0IGJyaXRpc2hDb3VudCA9IGJyaXRpc2hNYXJrZXJzLmZpbHRlcihtYXJrZXIgPT4gXG4gICAgICB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobWFya2VyKVxuICAgICkubGVuZ3RoXG5cbiAgICBpZiAoYW1lcmljYW5Db3VudCA+IGJyaXRpc2hDb3VudCkge1xuICAgICAgcmV0dXJuICdBbWVyaWNhbiBFbmdsaXNoIGNvbnRleHQnXG4gICAgfSBlbHNlIGlmIChicml0aXNoQ291bnQgPiBhbWVyaWNhbkNvdW50KSB7XG4gICAgICByZXR1cm4gJ0JyaXRpc2ggRW5nbGlzaCBjb250ZXh0J1xuICAgIH1cblxuICAgIHJldHVybiAnSW50ZXJuYXRpb25hbCBjb250ZXh0J1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUxlYXJuaW5nT2JqZWN0aXZlcyhjb250ZW50VHlwZTogc3RyaW5nLCB0b3BpY3M6IHN0cmluZ1tdLCBsZXZlbDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9iamVjdGl2ZXMgPSBbXVxuICAgIFxuICAgIC8vIEJhc2Ugb2JqZWN0aXZlcyBvbiBjb250ZW50IHR5cGVcbiAgICBzd2l0Y2ggKGNvbnRlbnRUeXBlKSB7XG4gICAgICBjYXNlICduZXdzJzpcbiAgICAgICAgb2JqZWN0aXZlcy5wdXNoKCdVbmRlcnN0YW5kIGN1cnJlbnQgZXZlbnRzIHZvY2FidWxhcnknKVxuICAgICAgICBvYmplY3RpdmVzLnB1c2goJ1ByYWN0aWNlIHJlYWRpbmcgbmV3cyBhcnRpY2xlcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdibG9nJzpcbiAgICAgICAgb2JqZWN0aXZlcy5wdXNoKCdMZWFybiBpbmZvcm1hbCB3cml0aW5nIHN0eWxlJylcbiAgICAgICAgb2JqZWN0aXZlcy5wdXNoKCdVbmRlcnN0YW5kIHBlcnNvbmFsIG9waW5pb25zIGFuZCBleHBlcmllbmNlcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd0dXRvcmlhbCc6XG4gICAgICAgIG9iamVjdGl2ZXMucHVzaCgnRm9sbG93IHN0ZXAtYnktc3RlcCBpbnN0cnVjdGlvbnMnKVxuICAgICAgICBvYmplY3RpdmVzLnB1c2goJ0xlYXJuIHRlY2huaWNhbCB2b2NhYnVsYXJ5JylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2VuY3ljbG9wZWRpYSc6XG4gICAgICAgIG9iamVjdGl2ZXMucHVzaCgnVW5kZXJzdGFuZCBmYWN0dWFsIGluZm9ybWF0aW9uJylcbiAgICAgICAgb2JqZWN0aXZlcy5wdXNoKCdMZWFybiBhY2FkZW1pYyB2b2NhYnVsYXJ5JylcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIG9iamVjdGl2ZXMucHVzaCgnSW1wcm92ZSByZWFkaW5nIGNvbXByZWhlbnNpb24nKVxuICAgICAgICBvYmplY3RpdmVzLnB1c2goJ0V4cGFuZCB2b2NhYnVsYXJ5IGtub3dsZWRnZScpXG4gICAgfVxuXG4gICAgLy8gQWRkIHRvcGljLXNwZWNpZmljIG9iamVjdGl2ZXNcbiAgICB0b3BpY3Muc2xpY2UoMCwgMikuZm9yRWFjaCh0b3BpYyA9PiB7XG4gICAgICBvYmplY3RpdmVzLnB1c2goYERpc2N1c3MgdG9waWNzIHJlbGF0ZWQgdG8gJHt0b3BpYy50b0xvd2VyQ2FzZSgpfWApXG4gICAgfSlcblxuICAgIHJldHVybiBvYmplY3RpdmVzLnNsaWNlKDAsIDQpXG4gIH1cblxuICBwcml2YXRlIGdldEF1ZGllbmNlTGV2ZWwoY2VmckxldmVsOiBzdHJpbmcpOiBcImdlbmVyYWxcIiB8IFwiZXhwZXJ0XCIgfCBcImJlZ2lubmVyXCIge1xuICAgIGNvbnN0IGxldmVsTWFwID0ge1xuICAgICAgJ0ExJzogJ2JlZ2lubmVyJyBhcyBjb25zdCxcbiAgICAgICdBMic6ICdiZWdpbm5lcicgYXMgY29uc3QsXG4gICAgICAnQjEnOiAnZ2VuZXJhbCcgYXMgY29uc3QsXG4gICAgICAnQjInOiAnZ2VuZXJhbCcgYXMgY29uc3QsXG4gICAgICAnQzEnOiAnZXhwZXJ0JyBhcyBjb25zdCxcbiAgICB9XG4gICAgcmV0dXJuIGxldmVsTWFwW2NlZnJMZXZlbF0gfHwgJ2dlbmVyYWwnXG4gIH1cblxuICAvLyBFbmhhbmNlZCBmYWxsYmFjayBsZXNzb24gZ2VuZXJhdGlvbiB3aXRoIGNvbnRleHRcbiAgcHJpdmF0ZSBnZW5lcmF0ZUVuaGFuY2VkRmFsbGJhY2tMZXNzb24ocGFyYW1zOiBMZXNzb25HZW5lcmF0aW9uUGFyYW1zKTogR2VuZXJhdGVkTGVzc29uIHtcbiAgICBjb25zdCB7IFxuICAgICAgc291cmNlVGV4dCwgXG4gICAgICBsZXNzb25UeXBlLCBcbiAgICAgIHN0dWRlbnRMZXZlbCwgXG4gICAgICB0YXJnZXRMYW5ndWFnZSxcbiAgICAgIGNvbnRlbnRNZXRhZGF0YSxcbiAgICAgIHN0cnVjdHVyZWRDb250ZW50IFxuICAgIH0gPSBwYXJhbXNcblxuICAgIC8vIFVzZSBhdmFpbGFibGUgY29udGV4dCBldmVuIGluIGZhbGxiYWNrXG4gICAgY29uc3QgdG9waWNzID0gc3RydWN0dXJlZENvbnRlbnQ/LmhlYWRpbmdzPy5tYXAoaCA9PiBoLnRleHQpLnNsaWNlKDAsIDMpIHx8IFtdXG4gICAgY29uc3QgY29udGVudFR5cGUgPSBjb250ZW50TWV0YWRhdGE/LmNvbnRlbnRUeXBlIHx8ICdnZW5lcmFsJ1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxlc3NvblR5cGUsXG4gICAgICBzdHVkZW50TGV2ZWwsXG4gICAgICB0YXJnZXRMYW5ndWFnZSxcbiAgICAgIHNlY3Rpb25zOiB7XG4gICAgICAgIHdhcm11cDogdGhpcy5nZXRDb250ZXh0dWFsV2FybXVwKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbCwgdG9waWNzLCBjb250ZW50VHlwZSksXG4gICAgICAgIHZvY2FidWxhcnk6IHRoaXMuZXh0cmFjdENvbnRleHR1YWxWb2NhYnVsYXJ5KHNvdXJjZVRleHQsIHN0dWRlbnRMZXZlbCwgdG9waWNzKSxcbiAgICAgICAgcmVhZGluZzogdGhpcy5zaW1wbGlmeVRleHQoc291cmNlVGV4dCwgc3R1ZGVudExldmVsKSxcbiAgICAgICAgY29tcHJlaGVuc2lvbjogdGhpcy5nZXRDb250ZXh0dWFsQ29tcHJlaGVuc2lvbihsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwsIHRvcGljcyksXG4gICAgICAgIGRpc2N1c3Npb246IHRoaXMuZ2V0Q29udGV4dHVhbERpc2N1c3Npb24obGVzc29uVHlwZSwgc3R1ZGVudExldmVsLCB0b3BpY3MpLFxuICAgICAgICBncmFtbWFyOiB0aGlzLmdldFRlbXBsYXRlR3JhbW1hcihzdHVkZW50TGV2ZWwpLFxuICAgICAgICBwcm9udW5jaWF0aW9uOiB0aGlzLmdldFRlbXBsYXRlUHJvbnVuY2lhdGlvbihzb3VyY2VUZXh0KSxcbiAgICAgICAgd3JhcHVwOiB0aGlzLmdldENvbnRleHR1YWxXcmFwdXAobGVzc29uVHlwZSwgdG9waWNzKSxcbiAgICAgIH0sXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb250ZXh0dWFsV2FybXVwKGxlc3NvblR5cGU6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcsIHRvcGljczogc3RyaW5nW10sIGNvbnRlbnRUeXBlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYmFzZVF1ZXN0aW9ucyA9IHRoaXMuZ2V0VGVtcGxhdGVXYXJtdXAobGVzc29uVHlwZSwgc3R1ZGVudExldmVsKVxuICAgIFxuICAgIGlmICh0b3BpY3MubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgYFdoYXQgZG8geW91IGtub3cgYWJvdXQgJHt0b3BpY3NbMF0/LnRvTG93ZXJDYXNlKCl9P2AsXG4gICAgICAgIGBIYXZlIHlvdSBleHBlcmllbmNlZCBhbnl0aGluZyByZWxhdGVkIHRvICR7dG9waWNzWzFdPy50b0xvd2VyQ2FzZSgpIHx8IHRvcGljc1swXT8udG9Mb3dlckNhc2UoKX0/YCxcbiAgICAgICAgYFdoYXQgd291bGQgeW91IGxpa2UgdG8gbGVhcm4gYWJvdXQgdGhpcyAke2NvbnRlbnRUeXBlfSBjb250ZW50P2AsXG4gICAgICBdXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBiYXNlUXVlc3Rpb25zXG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RDb250ZXh0dWFsVm9jYWJ1bGFyeSh0ZXh0OiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nLCB0b3BpY3M6IHN0cmluZ1tdKSB7XG4gICAgY29uc3Qgdm9jYWJ1bGFyeSA9IHRoaXMuZXh0cmFjdFZvY2FidWxhcnkodGV4dCwgc3R1ZGVudExldmVsKVxuICAgIFxuICAgIC8vIEVuaGFuY2Ugd2l0aCB0b3BpYyBjb250ZXh0IGlmIGF2YWlsYWJsZVxuICAgIGlmICh0b3BpY3MubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHZvY2FidWxhcnkubWFwKCh2b2NhYiwgaW5kZXgpID0+ICh7XG4gICAgICAgIC4uLnZvY2FiLFxuICAgICAgICBjb250ZXh0OiBpbmRleCA8IHRvcGljcy5sZW5ndGggPyBgUmVsYXRlZCB0byAke3RvcGljc1tpbmRleF0udG9Mb3dlckNhc2UoKX1gIDogdm9jYWIubWVhbmluZyxcbiAgICAgIH0pKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdm9jYWJ1bGFyeVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb250ZXh0dWFsQ29tcHJlaGVuc2lvbihsZXNzb25UeXBlOiBzdHJpbmcsIHN0dWRlbnRMZXZlbDogc3RyaW5nLCB0b3BpY3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJhc2VRdWVzdGlvbnMgPSB0aGlzLmdldFRlbXBsYXRlQ29tcHJlaGVuc2lvbihsZXNzb25UeXBlLCBzdHVkZW50TGV2ZWwpXG4gICAgXG4gICAgaWYgKHRvcGljcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBgV2hhdCBpcyB0aGUgbWFpbiBwb2ludCBhYm91dCAke3RvcGljc1swXT8udG9Mb3dlckNhc2UoKX0/YCxcbiAgICAgICAgYEhvdyBkb2VzIHRoZSB0ZXh0IGV4cGxhaW4gJHt0b3BpY3NbMV0/LnRvTG93ZXJDYXNlKCkgfHwgJ3RoZSB0b3BpYyd9P2AsXG4gICAgICAgIFwiV2hhdCBzdXBwb3J0aW5nIGRldGFpbHMgY2FuIHlvdSBpZGVudGlmeT9cIixcbiAgICAgICAgXCJXaGF0IGNvbmNsdXNpb25zIGNhbiB5b3UgZHJhdyBmcm9tIHRoaXMgaW5mb3JtYXRpb24/XCIsXG4gICAgICBdXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBiYXNlUXVlc3Rpb25zXG4gIH1cblxuICBwcml2YXRlIGdldENvbnRleHR1YWxEaXNjdXNzaW9uKGxlc3NvblR5cGU6IHN0cmluZywgc3R1ZGVudExldmVsOiBzdHJpbmcsIHRvcGljczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYmFzZVF1ZXN0aW9ucyA9IHRoaXMuZ2V0VGVtcGxhdGVEaXNjdXNzaW9uKGxlc3NvblR5cGUsIHN0dWRlbnRMZXZlbClcbiAgICBcbiAgICBpZiAodG9waWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGBXaGF0IGlzIHlvdXIgb3BpbmlvbiBhYm91dCAke3RvcGljc1swXT8udG9Mb3dlckNhc2UoKX0/YCxcbiAgICAgICAgYEhvdyB3b3VsZCB5b3UgYXBwbHkgdGhpcyBpbmZvcm1hdGlvbiBhYm91dCAke3RvcGljc1sxXT8udG9Mb3dlckNhc2UoKSB8fCAndGhpcyB0b3BpYyd9P2AsXG4gICAgICAgIGBXaGF0IGFyZSB0aGUgaW1wbGljYXRpb25zIG9mIHdoYXQgeW91IGxlYXJuZWQgYWJvdXQgJHt0b3BpY3NbMF0/LnRvTG93ZXJDYXNlKCl9P2AsXG4gICAgICBdXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBiYXNlUXVlc3Rpb25zXG4gIH1cblxuICBwcml2YXRlIGdldENvbnRleHR1YWxXcmFwdXAobGVzc29uVHlwZTogc3RyaW5nLCB0b3BpY3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGlmICh0b3BpY3MubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgYFdoYXQgbmV3IHZvY2FidWxhcnkgZGlkIHlvdSBsZWFybiBhYm91dCAke3RvcGljc1swXT8udG9Mb3dlckNhc2UoKX0/YCxcbiAgICAgICAgYFdoaWNoIGNvbmNlcHRzIGFib3V0ICR7dG9waWNzWzFdPy50b0xvd2VyQ2FzZSgpIHx8ICd0aGlzIHRvcGljJ30gbmVlZCBtb3JlIHByYWN0aWNlP2AsXG4gICAgICAgIFwiSG93IHdpbGwgeW91IHVzZSB0aGlzIGtub3dsZWRnZSBpbiByZWFsIHNpdHVhdGlvbnM/XCIsXG4gICAgICAgIFwiV2hhdCBxdWVzdGlvbnMgZG8geW91IHN0aWxsIGhhdmUgYWJvdXQgdGhpcyBjb250ZW50P1wiLFxuICAgICAgXVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5nZXRUZW1wbGF0ZVdyYXB1cChsZXNzb25UeXBlKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsZXNzb25BSVNlcnZlckdlbmVyYXRvciA9IG5ldyBMZXNzb25BSVNlcnZlckdlbmVyYXRvcigpXG4iXSwibmFtZXMiOlsiY3JlYXRlR29vZ2xlQUlTZXJ2ZXJTZXJ2aWNlIiwiTGVzc29uQUlTZXJ2ZXJHZW5lcmF0b3IiLCJnZXRHb29nbGVBSSIsImdvb2dsZUFJIiwiZ2VuZXJhdGVMZXNzb24iLCJwYXJhbXMiLCJzb3VyY2VUZXh0IiwibGVzc29uVHlwZSIsInN0dWRlbnRMZXZlbCIsInRhcmdldExhbmd1YWdlIiwic291cmNlVXJsIiwiY29udGVudE1ldGFkYXRhIiwic3RydWN0dXJlZENvbnRlbnQiLCJ3b3JkQ291bnQiLCJyZWFkaW5nVGltZSIsImNvbnRlbnRBbmFseXNpcyIsImFuYWx5emVDb250ZW50Q29udGV4dCIsImNvbnRleHR1YWxTdW1tYXJ5IiwiY3JlYXRlQ29udGV4dHVhbFN1bW1hcnkiLCJ0cmFuc2xhdGVkQ29udGVudCIsInRyYW5zbGF0ZSIsImdldExhbmd1YWdlQ29kZSIsImxlc3NvblN0cnVjdHVyZSIsImdlbmVyYXRlQ29udGV4dHVhbExlc3NvblN0cnVjdHVyZSIsImRldGFpbGVkTGVzc29uIiwiZ2VuZXJhdGVEZXRhaWxlZENvbnRleHR1YWxDb250ZW50IiwicG9saXNoZWRMZXNzb24iLCJwcm9vZnJlYWRMZXNzb24iLCJlcnJvciIsImNvbnNvbGUiLCJnZW5lcmF0ZUVuaGFuY2VkRmFsbGJhY2tMZXNzb24iLCJtZXRhZGF0YSIsImFuYWx5c2lzIiwiY29udGVudFR5cGUiLCJkb21haW4iLCJjb21wbGV4aXR5IiwidG9waWNzIiwia2V5Vm9jYWJ1bGFyeSIsImN1bHR1cmFsQ29udGV4dCIsImxlYXJuaW5nT2JqZWN0aXZlcyIsImRpZmZpY3VsdHkiLCJzZW50ZW5jZXMiLCJzcGxpdCIsImZpbHRlciIsInMiLCJ0cmltIiwibGVuZ3RoIiwiYXZnU2VudGVuY2VMZW5ndGgiLCJyZWR1Y2UiLCJzdW0iLCJjb21wbGV4V29yZHMiLCJtYXRjaCIsInRvdGFsV29yZHMiLCJ0b3BpY3NQcm9tcHQiLCJzdWJzdHJpbmciLCJ0b3BpY3NSZXNwb25zZSIsInByb21wdCIsInRlbXBlcmF0dXJlIiwibWF4VG9rZW5zIiwicGFyc2VMaXN0RnJvbVRleHQiLCJzbGljZSIsImV4dHJhY3RUb3BpY3NGcm9tSGVhZGluZ3MiLCJoZWFkaW5ncyIsInZvY2FiUHJvbXB0Iiwidm9jYWJSZXNwb25zZSIsImV4dHJhY3RWb2NhYnVsYXJ5RnJvbVRleHQiLCJkZXRlcm1pbmVDdWx0dXJhbENvbnRleHQiLCJnZW5lcmF0ZUxlYXJuaW5nT2JqZWN0aXZlcyIsInN1bW1hcnlQcm9tcHQiLCJqb2luIiwic3VtbWFyaXplIiwidHlwZSIsImdldFN1bW1hcnlMZW5ndGgiLCJmb3JtYXQiLCJjb250ZW50IiwicmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJjcmVhdGVTdHJ1Y3R1cmVkRmFsbGJhY2siLCJzdHJ1Y3R1cmUiLCJzZWN0aW9ucyIsInZvY2FidWxhcnkiLCJpIiwidm9jYWIiLCJjb250ZXh0dWFsRXhhbXBsZVByb21wdCIsIndvcmQiLCJlbmhhbmNlZEV4YW1wbGUiLCJ3cml0ZSIsInRvbmUiLCJleGFtcGxlIiwiY29udGV4dHVhbE1lYW5pbmdQcm9tcHQiLCJjb250ZXh0dWFsTWVhbmluZyIsIndhcm4iLCJkaXNjdXNzaW9uIiwiZW5oYW5jZWREaXNjdXNzaW9uUHJvbXB0IiwiZW5oYW5jZWREaXNjdXNzaW9uIiwicmVhZGluZyIsInN0cnVjdHVyZWRSZWFkaW5nUHJvbXB0IiwibWFwIiwiaCIsInRleHQiLCJlbmhhbmNlZFJlYWRpbmciLCJyZXdyaXRlIiwiYXVkaWVuY2UiLCJnZXRBdWRpZW5jZUxldmVsIiwiZ3JhbW1hciIsImZvY3VzIiwiZ3JhbW1hckV4YW1wbGVzUHJvbXB0IiwiY29udGV4dHVhbEdyYW1tYXJFeGFtcGxlcyIsImNvbnRleHR1YWxFeGFtcGxlcyIsImxlc3NvbiIsInNlY3Rpb25zVG9Qcm9vZnJlYWQiLCJzZWN0aW9uUGF0aCIsInZhbHVlIiwiZ2V0TmVzdGVkVmFsdWUiLCJwcm9vZnJlYWQiLCJjaGVja0dyYW1tYXIiLCJjaGVja1NwZWxsaW5nIiwiY2hlY2tTdHlsZSIsInNldE5lc3RlZFZhbHVlIiwiY29ycmVjdGVkX3RleHQiLCJnZW5lcmF0ZUZhbGxiYWNrTGVzc29uIiwid2FybXVwIiwiZ2V0VGVtcGxhdGVXYXJtdXAiLCJleHRyYWN0Vm9jYWJ1bGFyeSIsInNpbXBsaWZ5VGV4dCIsImNvbXByZWhlbnNpb24iLCJnZXRUZW1wbGF0ZUNvbXByZWhlbnNpb24iLCJnZXRUZW1wbGF0ZURpc2N1c3Npb24iLCJnZXRUZW1wbGF0ZUdyYW1tYXIiLCJwcm9udW5jaWF0aW9uIiwiZ2V0VGVtcGxhdGVQcm9udW5jaWF0aW9uIiwid3JhcHVwIiwiZ2V0VGVtcGxhdGVXcmFwdXAiLCJsZXZlbCIsImxlbmd0aE1hcCIsIkExIiwiQTIiLCJCMSIsIkIyIiwiQzEiLCJsYW5ndWFnZSIsImxhbmd1YWdlTWFwIiwic3BhbmlzaCIsImZyZW5jaCIsImdlcm1hbiIsIml0YWxpYW4iLCJwb3J0dWd1ZXNlIiwiamFwYW5lc2UiLCJrb3JlYW4iLCJjaGluZXNlIiwibGluZSIsInJlcGxhY2UiLCJvYmoiLCJwYXRoIiwiY3VycmVudCIsImtleSIsImtleXMiLCJsYXN0S2V5IiwicG9wIiwidGFyZ2V0IiwidGVtcGxhdGVzIiwidHJhdmVsIiwiYnVzaW5lc3MiLCJ3b3JkcyIsInRvTG93ZXJDYXNlIiwidW5pcXVlV29yZHMiLCJTZXQiLCJzZWxlY3RlZFdvcmRzIiwibWVhbmluZyIsIm1heExlbmd0aCIsImxpbWl0IiwiZ3JhbW1hckZvY2kiLCJleGFtcGxlcyIsImV4ZXJjaXNlIiwic2VsZWN0ZWRXb3JkIiwiaXBhIiwicHJhY3RpY2UiLCJjb21wbGV4aXR5VGhyZXNob2xkIiwiY3VsdHVyYWxJbmRpY2F0b3JzIiwiYW1lcmljYW5NYXJrZXJzIiwiYnJpdGlzaE1hcmtlcnMiLCJhbWVyaWNhbkNvdW50IiwibWFya2VyIiwiaW5jbHVkZXMiLCJicml0aXNoQ291bnQiLCJvYmplY3RpdmVzIiwicHVzaCIsImZvckVhY2giLCJ0b3BpYyIsImNlZnJMZXZlbCIsImxldmVsTWFwIiwiZ2V0Q29udGV4dHVhbFdhcm11cCIsImV4dHJhY3RDb250ZXh0dWFsVm9jYWJ1bGFyeSIsImdldENvbnRleHR1YWxDb21wcmVoZW5zaW9uIiwiZ2V0Q29udGV4dHVhbERpc2N1c3Npb24iLCJnZXRDb250ZXh0dWFsV3JhcHVwIiwiYmFzZVF1ZXN0aW9ucyIsImluZGV4IiwiY29udGV4dCIsImxlc3NvbkFJU2VydmVyR2VuZXJhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/lesson-ai-generator-server.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createServerSupabaseClient: () => (/* binding */ createServerSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst createServerSupabaseClient = ()=>{\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://jbkpnirowdvlwlgheqho.supabase.co\" || 0, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impia3BuaXJvd2R2bHdsZ2hlcWhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5MTQ3NTEsImV4cCI6MjA3NDQ5MDc1MX0.FZhruXKDzIkZLhla5oerfs7yzjvTsGLlKTUer34N6N0\" || 0, {\n        cookies: {\n            get (name) {\n                return cookieStore.get(name)?.value;\n            },\n            set (name, value, options) {\n                cookieStore.set({\n                    name,\n                    value,\n                    ...options\n                });\n            },\n            remove (name, options) {\n                cookieStore.set({\n                    name,\n                    value: \"\",\n                    ...options\n                });\n            }\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNaO0FBRS9CLE1BQU1FLDZCQUE2QjtJQUN4QyxNQUFNQyxjQUFjRixxREFBT0E7SUFFM0IsT0FBT0QsaUVBQWtCQSxDQUN2QkksMENBQW9DLElBQUksR0FDeENBLGtOQUF5QyxJQUFJLEdBQzdDO1FBQ0FILFNBQVM7WUFDUE8sS0FBSUMsSUFBWTtnQkFDZCxPQUFPTixZQUFZSyxHQUFHLENBQUNDLE9BQU9DO1lBQ2hDO1lBQ0FDLEtBQUlGLElBQVksRUFBRUMsS0FBYSxFQUFFRSxPQUFZO2dCQUMzQ1QsWUFBWVEsR0FBRyxDQUFDO29CQUFFRjtvQkFBTUM7b0JBQU8sR0FBR0UsT0FBTztnQkFBQztZQUM1QztZQUNBQyxRQUFPSixJQUFZLEVBQUVHLE9BQVk7Z0JBQy9CVCxZQUFZUSxHQUFHLENBQUM7b0JBQUVGO29CQUFNQyxPQUFPO29CQUFJLEdBQUdFLE9BQU87Z0JBQUM7WUFDaEQ7UUFDRjtJQUNGO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzPzA5NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSBcIkBzdXBhYmFzZS9zc3JcIlxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxuXG5leHBvcnQgY29uc3QgY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQgPSAoKSA9PiB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXG5cbiAgcmV0dXJuIGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nLCBcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAncGxhY2Vob2xkZXIta2V5JywgXG4gICAge1xuICAgIGNvb2tpZXM6IHtcbiAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldChuYW1lKT8udmFsdWVcbiAgICAgIH0sXG4gICAgICBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWUsIC4uLm9wdGlvbnMgfSlcbiAgICAgIH0sXG4gICAgICByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zOiBhbnkpIHtcbiAgICAgICAgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWU6IFwiXCIsIC4uLm9wdGlvbnMgfSlcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQiLCJjb29raWVTdG9yZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-lesson%2Froute&page=%2Fapi%2Fgenerate-lesson%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-lesson%2Froute.ts&appDir=D%3A%5Clinguaspark%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Clinguaspark&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();